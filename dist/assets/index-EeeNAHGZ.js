function XS(i,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in i)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function bE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var um={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function WS(){if(D_)return Pl;D_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:l}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var k_;function ZS(){return k_||(k_=1,um.exports=WS()),um.exports}var v=ZS(),hm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function JS(){if(O_)return Ne;O_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,F={};function N(j,ie,he){this.props=j,this.context=ie,this.refs=F,this.updater=he||R}N.prototype.isReactComponent={},N.prototype.setState=function(j,ie){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ie,"setState")},N.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=N.prototype;function P(j,ie,he){this.props=j,this.context=ie,this.refs=F,this.updater=he||R}var z=P.prototype=new U;z.constructor=P,I(z,N.prototype),z.isPureReactComponent=!0;var G=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function C(j,ie,he,ee,fe,Ie){return he=Ie.ref,{$$typeof:i,type:j,key:ie,ref:he!==void 0?he:null,props:Ie}}function x(j,ie){return C(j.type,ie,void 0,void 0,void 0,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function k(j){var ie={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(he){return ie[he]})}var B=/\/+/g;function q(j,ie){return typeof j=="object"&&j!==null&&j.key!=null?k(""+j.key):ie.toString(36)}function V(){}function mt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(V,V):(j.status="pending",j.then(function(ie){j.status==="pending"&&(j.status="fulfilled",j.value=ie)},function(ie){j.status==="pending"&&(j.status="rejected",j.reason=ie)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Ge(j,ie,he,ee,fe){var Ie=typeof j;(Ie==="undefined"||Ie==="boolean")&&(j=null);var we=!1;if(j===null)we=!0;else switch(Ie){case"bigint":case"string":case"number":we=!0;break;case"object":switch(j.$$typeof){case i:case e:we=!0;break;case _:return we=j._init,Ge(we(j._payload),ie,he,ee,fe)}}if(we)return fe=fe(j),we=ee===""?"."+q(j,0):ee,G(fe)?(he="",we!=null&&(he=we.replace(B,"$&/")+"/"),Ge(fe,ie,he,"",function(Xt){return Xt})):fe!=null&&(D(fe)&&(fe=x(fe,he+(fe.key==null||j&&j.key===fe.key?"":(""+fe.key).replace(B,"$&/")+"/")+we)),ie.push(fe)),1;we=0;var ut=ee===""?".":ee+":";if(G(j))for(var ye=0;ye<j.length;ye++)ee=j[ye],Ie=ut+q(ee,ye),we+=Ge(ee,ie,he,Ie,fe);else if(ye=S(j),typeof ye=="function")for(j=ye.call(j),ye=0;!(ee=j.next()).done;)ee=ee.value,Ie=ut+q(ee,ye++),we+=Ge(ee,ie,he,Ie,fe);else if(Ie==="object"){if(typeof j.then=="function")return Ge(mt(j),ie,he,ee,fe);throw ie=String(j),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function te(j,ie,he){if(j==null)return j;var ee=[],fe=0;return Ge(j,ee,"","",function(Ie){return ie.call(he,Ie,fe++)}),ee}function Q(j){if(j._status===-1){var ie=j._result;ie=ie(),ie.then(function(he){(j._status===0||j._status===-1)&&(j._status=1,j._result=he)},function(he){(j._status===0||j._status===-1)&&(j._status=2,j._result=he)}),j._status===-1&&(j._status=0,j._result=ie)}if(j._status===1)return j._result.default;throw j._result}var ce=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function pe(){}return Ne.Children={map:te,forEach:function(j,ie,he){te(j,function(){ie.apply(this,arguments)},he)},count:function(j){var ie=0;return te(j,function(){ie++}),ie},toArray:function(j){return te(j,function(ie){return ie})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ne.Component=N,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=P,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(j){return K.H.useMemoCache(j)}},Ne.cache=function(j){return function(){return j.apply(null,arguments)}},Ne.cloneElement=function(j,ie,he){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=I({},j.props),fe=j.key,Ie=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(Ie=void 0),ie.key!==void 0&&(fe=""+ie.key),ie)!oe.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(ee[we]=ie[we]);var we=arguments.length-2;if(we===1)ee.children=he;else if(1<we){for(var ut=Array(we),ye=0;ye<we;ye++)ut[ye]=arguments[ye+2];ee.children=ut}return C(j.type,fe,void 0,void 0,Ie,ee)},Ne.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Ne.createElement=function(j,ie,he){var ee,fe={},Ie=null;if(ie!=null)for(ee in ie.key!==void 0&&(Ie=""+ie.key),ie)oe.call(ie,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=ie[ee]);var we=arguments.length-2;if(we===1)fe.children=he;else if(1<we){for(var ut=Array(we),ye=0;ye<we;ye++)ut[ye]=arguments[ye+2];fe.children=ut}if(j&&j.defaultProps)for(ee in we=j.defaultProps,we)fe[ee]===void 0&&(fe[ee]=we[ee]);return C(j,Ie,void 0,void 0,null,fe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(j){return{$$typeof:f,render:j}},Ne.isValidElement=D,Ne.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Q}},Ne.memo=function(j,ie){return{$$typeof:g,type:j,compare:ie===void 0?null:ie}},Ne.startTransition=function(j){var ie=K.T,he={};K.T=he;try{var ee=j(),fe=K.S;fe!==null&&fe(he,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(pe,ce)}catch(Ie){ce(Ie)}finally{K.T=ie}},Ne.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ne.use=function(j){return K.H.use(j)},Ne.useActionState=function(j,ie,he){return K.H.useActionState(j,ie,he)},Ne.useCallback=function(j,ie){return K.H.useCallback(j,ie)},Ne.useContext=function(j){return K.H.useContext(j)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(j,ie){return K.H.useDeferredValue(j,ie)},Ne.useEffect=function(j,ie,he){var ee=K.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(j,ie)},Ne.useId=function(){return K.H.useId()},Ne.useImperativeHandle=function(j,ie,he){return K.H.useImperativeHandle(j,ie,he)},Ne.useInsertionEffect=function(j,ie){return K.H.useInsertionEffect(j,ie)},Ne.useLayoutEffect=function(j,ie){return K.H.useLayoutEffect(j,ie)},Ne.useMemo=function(j,ie){return K.H.useMemo(j,ie)},Ne.useOptimistic=function(j,ie){return K.H.useOptimistic(j,ie)},Ne.useReducer=function(j,ie,he){return K.H.useReducer(j,ie,he)},Ne.useRef=function(j){return K.H.useRef(j)},Ne.useState=function(j){return K.H.useState(j)},Ne.useSyncExternalStore=function(j,ie,he){return K.H.useSyncExternalStore(j,ie,he)},Ne.useTransition=function(){return K.H.useTransition()},Ne.version="19.1.1",Ne}var M_;function lp(){return M_||(M_=1,hm.exports=JS()),hm.exports}var O=lp();const SE=bE(O),eA=XS({__proto__:null,default:SE},[O]);var dm={exports:{}},Ll={},fm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function tA(){return V_||(V_=1,(function(i){function e(te,Q){var ce=te.length;te.push(Q);e:for(;0<ce;){var pe=ce-1>>>1,j=te[pe];if(0<o(j,Q))te[pe]=Q,te[ce]=j,ce=pe;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var Q=te[0],ce=te.pop();if(ce!==Q){te[0]=ce;e:for(var pe=0,j=te.length,ie=j>>>1;pe<ie;){var he=2*(pe+1)-1,ee=te[he],fe=he+1,Ie=te[fe];if(0>o(ee,ce))fe<j&&0>o(Ie,ee)?(te[pe]=Ie,te[fe]=ce,pe=fe):(te[pe]=ee,te[he]=ce,pe=he);else if(fe<j&&0>o(Ie,ce))te[pe]=Ie,te[fe]=ce,pe=fe;else break e}}return Q}function o(te,Q){var ce=te.sortIndex-Q.sortIndex;return ce!==0?ce:te.id-Q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();i.unstable_now=function(){return h.now()-f}}var p=[],g=[],_=1,w=null,S=3,R=!1,I=!1,F=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function G(te){for(var Q=n(g);Q!==null;){if(Q.callback===null)s(g);else if(Q.startTime<=te)s(g),Q.sortIndex=Q.expirationTime,e(p,Q);else break;Q=n(g)}}function K(te){if(F=!1,G(te),!I)if(n(p)!==null)I=!0,oe||(oe=!0,q());else{var Q=n(g);Q!==null&&Ge(K,Q.startTime-te)}}var oe=!1,C=-1,x=5,D=-1;function k(){return N?!0:!(i.unstable_now()-D<x)}function B(){if(N=!1,oe){var te=i.unstable_now();D=te;var Q=!0;try{e:{I=!1,F&&(F=!1,P(C),C=-1),R=!0;var ce=S;try{t:{for(G(te),w=n(p);w!==null&&!(w.expirationTime>te&&k());){var pe=w.callback;if(typeof pe=="function"){w.callback=null,S=w.priorityLevel;var j=pe(w.expirationTime<=te);if(te=i.unstable_now(),typeof j=="function"){w.callback=j,G(te),Q=!0;break t}w===n(p)&&s(p),G(te)}else s(p);w=n(p)}if(w!==null)Q=!0;else{var ie=n(g);ie!==null&&Ge(K,ie.startTime-te),Q=!1}}break e}finally{w=null,S=ce,R=!1}Q=void 0}}finally{Q?q():oe=!1}}}var q;if(typeof z=="function")q=function(){z(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,mt=V.port2;V.port1.onmessage=B,q=function(){mt.postMessage(null)}}else q=function(){U(B,0)};function Ge(te,Q){C=U(function(){te(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(te){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ce=S;S=Q;try{return te()}finally{S=ce}},i.unstable_requestPaint=function(){N=!0},i.unstable_runWithPriority=function(te,Q){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ce=S;S=te;try{return Q()}finally{S=ce}},i.unstable_scheduleCallback=function(te,Q,ce){var pe=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?pe+ce:pe):ce=pe,te){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ce+j,te={id:_++,callback:Q,priorityLevel:te,startTime:ce,expirationTime:j,sortIndex:-1},ce>pe?(te.sortIndex=ce,e(g,te),n(p)===null&&te===n(g)&&(F?(P(C),C=-1):F=!0,Ge(K,ce-pe))):(te.sortIndex=j,e(p,te),I||R||(I=!0,oe||(oe=!0,q()))),te},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(te){var Q=S;return function(){var ce=S;S=Q;try{return te.apply(this,arguments)}finally{S=ce}}}})(mm)),mm}var j_;function nA(){return j_||(j_=1,fm.exports=tA()),fm.exports}var pm={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function iA(){if(P_)return Jt;P_=1;var i=lp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:_}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Jt.flushSync=function(p){var g=h.T,_=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=_,s.d.f()}},Jt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Jt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,w=f(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:R}):_==="script"&&s.d.X(p,{crossOrigin:w,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Jt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=f(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=f(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Jt.requestFormReset=function(p){s.d.r(p)},Jt.unstable_batchedUpdates=function(p,g){return p(g)},Jt.useFormState=function(p,g,_){return h.H.useFormState(p,g,_)},Jt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jt.version="19.1.1",Jt}var L_;function AE(){if(L_)return pm.exports;L_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),pm.exports=iA(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function rA(){if(U_)return Ll;U_=1;var i=nA(),e=lp(),n=AE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function f(t){if(l(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=l(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,c=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return f(d),t;if(m===c)return f(d),r;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=d,c=m;else{for(var T=!1,b=d.child;b;){if(b===a){T=!0,a=d,c=m;break}if(b===c){T=!0,c=d,a=m;break}b=b.sibling}if(!T){for(b=m.child;b;){if(b===a){T=!0,a=m,c=d;break}if(b===c){T=!0,c=m,a=d;break}b=b.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=B&&t[B]||t["@@iterator"],typeof t=="function"?t:null)}var V=Symbol.for("react.client.reference");function mt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case N:return"Profiler";case F:return"StrictMode";case K:return"Suspense";case oe:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case R:return"Portal";case z:return(t.displayName||"Context")+".Provider";case P:return(t._context.displayName||"Context")+".Consumer";case G:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:mt(t.type)||"Memo";case x:r=t._payload,t=t._init;try{return mt(t(r))}catch{}}return null}var Ge=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},pe=[],j=-1;function ie(t){return{current:t}}function he(t){0>j||(t.current=pe[j],pe[j]=null,j--)}function ee(t,r){j++,pe[j]=t.current,t.current=r}var fe=ie(null),Ie=ie(null),we=ie(null),ut=ie(null);function ye(t,r){switch(ee(we,r),ee(Ie,t),ee(fe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?s_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=s_(r),t=a_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}he(fe),ee(fe,t)}function Xt(){he(fe),he(Ie),he(we)}function ei(t){t.memoizedState!==null&&ee(ut,t);var r=fe.current,a=a_(r,t.type);r!==a&&(ee(Ie,t),ee(fe,a))}function Fn(t){Ie.current===t&&(he(fe),he(Ie)),ut.current===t&&(he(ut),kl._currentValue=ce)}var Oi=Object.prototype.hasOwnProperty,ti=i.unstable_scheduleCallback,ni=i.unstable_cancelCallback,Er=i.unstable_shouldYield,ii=i.unstable_requestPaint,dn=i.unstable_now,Io=i.unstable_getCurrentPriorityLevel,No=i.unstable_ImmediatePriority,ua=i.unstable_UserBlockingPriority,fs=i.unstable_NormalPriority,ud=i.unstable_LowPriority,ha=i.unstable_IdlePriority,Do=i.log,Dc=i.unstable_setDisableYieldValue,ht=null,Ke=null;function _n(t){if(typeof Do=="function"&&Dc(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ht,t)}catch{}}var Wt=Math.clz32?Math.clz32:ms,kc=Math.log,hd=Math.LN2;function ms(t){return t>>>=0,t===0?32:31-(kc(t)/hd|0)|0}var ps=256,gs=4194304;function Hn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function da(t,r,a){var c=t.pendingLanes;if(c===0)return 0;var d=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var b=c&134217727;return b!==0?(c=b&~m,c!==0?d=Hn(c):(T&=b,T!==0?d=Hn(T):a||(a=b&~t,a!==0&&(d=Hn(a))))):(b=c&~m,b!==0?d=Hn(b):T!==0?d=Hn(T):a||(a=c&~t,a!==0&&(d=Hn(a)))),d===0?0:r!==0&&r!==d&&(r&m)===0&&(m=d&-d,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:d}function ys(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ko(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var t=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),t}function Mo(){var t=gs;return gs<<=1,(gs&62914560)===0&&(gs=4194304),t}function Mi(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Vi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vo(t,r,a,c,d,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,M=t.expirationTimes,X=t.hiddenUpdates;for(a=T&~a;0<a;){var ne=31-Wt(a),ae=1<<ne;b[ne]=0,M[ne]=-1;var W=X[ne];if(W!==null)for(X[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}a&=~ae}c!==0&&ri(t,c,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~r))}function ri(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Wt(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|a&4194090}function jo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var c=31-Wt(a),d=1<<c;d&r|t[c]&r&&(t[c]|=r),a&=~d}}function Tr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wr(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:A_(t.type))}function Oc(t,r){var a=Q.p;try{return Q.p=t,r()}finally{Q.p=a}}var st=Math.random().toString(36).slice(2),It="__reactFiber$"+st,bt="__reactProps$"+st,Nn="__reactContainer$"+st,Po="__reactEvents$"+st,dd="__reactListeners$"+st,br="__reactHandles$"+st,Mc="__reactResources$"+st,vs="__reactMarker$"+st;function Sr(t){delete t[It],delete t[bt],delete t[Po],delete t[dd],delete t[br]}function ji(t){var r=t[It];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Nn]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=u_(t);t!==null;){if(a=t[It])return a;t=u_(t)}return r}t=a,a=t.parentNode}return null}function si(t){if(t=t[It]||t[Nn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ai(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function on(t){var r=t[Mc];return r||(r=t[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pt(t){t[vs]=!0}var Lo=new Set,ma={};function Gn(t,r){Pi(t,r),Pi(t+"Capture",r)}function Pi(t,r){for(ma[t]=r,t=0;t<r.length;t++)Lo.add(r[t])}var Vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},_s={};function Pc(t){return Oi.call(_s,t)?!0:Oi.call(jc,t)?!1:Vc.test(t)?_s[t]=!0:(jc[t]=!0,!1)}function Ar(t,r,a){if(Pc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function oi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function qt(t,r,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+c)}}var Es,Lc;function Li(t){if(Es===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Es=r&&r[1]||"",Lc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+t+Lc}var pa=!1;function ga(t,r){if(!t||pa)return"";pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var W=Z}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Z){W=Z}t.call(ae.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),T=m[0],b=m[1];if(T&&b){var M=T.split(`
`),X=b.split(`
`);for(d=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;if(c===M.length||d===X.length)for(c=M.length-1,d=X.length-1;1<=c&&0<=d&&M[c]!==X[d];)d--;for(;1<=c&&0<=d;c--,d--)if(M[c]!==X[d]){if(c!==1||d!==1)do if(c--,d--,0>d||M[c]!==X[d]){var ne=`
`+M[c].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=c&&0<=d);break}}}finally{pa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Li(a):""}function Uo(t){switch(t.tag){case 26:case 27:case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return ga(t.type,!1);case 11:return ga(t.type.render,!1);case 1:return ga(t.type,!0);case 31:return Li("Activity");default:return""}}function ya(t){try{var r="";do r+=Uo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function fd(t){var r=Bo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(T){c=""+T,m.call(this,T)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function va(t){t._valueTracker||(t._valueTracker=fd(t))}function zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return t&&(c=Bo(t)?t.checked?"true":"false":t.value),t=c,t!==a?(r.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var md=/[\n"\\]/g;function St(t){return t.replace(md,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function En(t,r,a,c,d,m,T,b){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),r!=null?T==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ln(r)):t.value!==""+ln(r)&&(t.value=""+ln(r)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),r!=null?Rr(t,T,ln(r)):a!=null?Rr(t,T,ln(a)):c!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+ln(b):t.removeAttribute("name")}function ws(t,r,a,c,d,m,T,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=b?t.checked:!!c,t.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function Rr(t,r,a){r==="number"&&Ts(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ui(t,r,a,c){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&c&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function We(t,r,a){if(r!=null&&(r=""+ln(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+ln(a):""}function bs(t,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ge(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=ln(r),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c)}function Dn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uc(t,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,a):typeof a!="number"||a===0||Ss.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function qo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var d in r)c=r[d],r.hasOwnProperty(d)&&a[d]!==c&&Uc(t,d,c)}else for(var m in r)r.hasOwnProperty(m)&&Uc(t,m,r[m])}function Fo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(t){return gd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Bi=null;function kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zi=null,qi=null;function Ho(t){var r=si(t);if(r&&(t=r.stateNode)){var a=t[bt]||null;e:switch(t=r.stateNode,r.type){case"input":if(En(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+St(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==t&&c.form===t.form){var d=c[bt]||null;if(!d)throw Error(s(90));En(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===t.form&&zo(c)}break e;case"textarea":We(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ui(t,!!a.multiple,r,!1)}}}var li=!1;function Bc(t,r,a){if(li)return t(r,a);li=!0;try{var c=t(r);return c}finally{if(li=!1,(zi!==null||qi!==null)&&(Ou(),zi&&(r=zi,t=qi,qi=zi=null,Ho(r),t)))for(r=0;r<t.length;r++)Ho(t[r])}}function As(t,r){var a=t.stateNode;if(a===null)return null;var c=a[bt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if($n)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){On=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{On=!1}var ci=null,xr=null,Fi=null;function Go(){if(Fi)return Fi;var t,r=xr,a=r.length,c,d="value"in ci?ci.value:ci.textContent,m=d.length;for(t=0;t<a&&r[t]===d[t];t++);var T=a-t;for(c=1;c<=T&&r[a-c]===d[m-c];c++);return Fi=d.slice(t,1<c?1-c:void 0)}function ui(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function hi(){return!0}function $o(){return!1}function Mt(t){function r(a,c,d,m,T){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?hi:$o,this.isPropagationStopped=$o,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),r}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=Mt($e),xs=_({},$e,{view:0,detail:0}),zc=Mt(xs),Ta,wa,di,Cs=_({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==di&&(di&&t.type==="mousemove"?(Ta=t.screenX-di.screenX,wa=t.screenY-di.screenY):wa=Ta=0,di=t),Ta)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Mn=Mt(Cs),qc=_({},Cs,{dataTransfer:0}),yd=Mt(qc),Is=_({},xs,{relatedTarget:0}),ba=Mt(Is),Ko=_({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=Mt(Ko),Fc=_({},$e,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aa=Mt(Fc),vd=_({},$e,{data:0}),Yo=Mt(vd),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Gc[t])?!!r[t]:!1}function Ds(){return Qo}var $c=_({},xs,{key:function(t){if(t.key){var r=Ns[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(t){return t.type==="keypress"?ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ra=Mt($c),Kc=_({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xo=Mt(Kc),Hi=_({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),Yc=Mt(Hi),Qc=_({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xc=Mt(Qc),Wc=_({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xa=Mt(Wc),cn=_({},$e,{newState:0,oldState:0}),Zc=Mt(cn),Jc=[9,13,27,32],fi=$n&&"CompositionEvent"in window,u=null;$n&&"documentMode"in document&&(u=document.documentMode);var y=$n&&"TextEvent"in window&&!u,E=$n&&(!fi||u&&8<u&&11>=u),A=" ",$=!1;function J(t,r){switch(t){case"keyup":return Jc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pe=!1;function Nt(t,r){switch(t){case"compositionend":return ue(r);case"keypress":return r.which!==32?null:($=!0,A);case"textInput":return t=r.data,t===A&&$?null:t;default:return null}}function Le(t,r){if(Pe)return t==="compositionend"||!fi&&J(t,r)?(t=Go(),Fi=xr=ci=null,Pe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Vt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Vt[t.type]:r==="textarea"}function Gi(t,r,a,c){zi?qi?qi.push(c):qi=[c]:zi=c,r=Uu(r,"onChange"),0<r.length&&(a=new Ea("onChange","change",null,a,c),t.push({event:a,listeners:r}))}var Ft=null,mi=null;function Wo(t){e_(t,0)}function eu(t){var r=ai(t);if(zo(r))return t}function Tg(t,r){if(t==="change")return r}var wg=!1;if($n){var _d;if($n){var Ed="oninput"in document;if(!Ed){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Ed=typeof bg.oninput=="function"}_d=Ed}else _d=!1;wg=_d&&(!document.documentMode||9<document.documentMode)}function Sg(){Ft&&(Ft.detachEvent("onpropertychange",Ag),mi=Ft=null)}function Ag(t){if(t.propertyName==="value"&&eu(mi)){var r=[];Gi(r,mi,t,kn(t)),Bc(Wo,r)}}function Rb(t,r,a){t==="focusin"?(Sg(),Ft=r,mi=a,Ft.attachEvent("onpropertychange",Ag)):t==="focusout"&&Sg()}function xb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(mi)}function Cb(t,r){if(t==="click")return eu(r)}function Ib(t,r){if(t==="input"||t==="change")return eu(r)}function Nb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Tn=typeof Object.is=="function"?Object.is:Nb;function Zo(t,r){if(Tn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!Oi.call(r,d)||!Tn(t[d],r[d]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xg(t,r){var a=Rg(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=r&&c>=r)return{node:a,offset:r-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rg(a)}}function Cg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Cg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ig(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ts(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ts(t.document)}return r}function Td(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Db=$n&&"documentMode"in document&&11>=document.documentMode,Ca=null,wd=null,Jo=null,bd=!1;function Ng(t,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bd||Ca==null||Ca!==Ts(c)||(c=Ca,"selectionStart"in c&&Td(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Jo&&Zo(Jo,c)||(Jo=c,c=Uu(wd,"onSelect"),0<c.length&&(r=new Ea("onSelect","select",null,r,a),t.push({event:r,listeners:c}),r.target=Ca)))}function ks(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ia={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Sd={},Dg={};$n&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Os(t){if(Sd[t])return Sd[t];if(!Ia[t])return t;var r=Ia[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Sd[t]=r[a];return t}var kg=Os("animationend"),Og=Os("animationiteration"),Mg=Os("animationstart"),kb=Os("transitionrun"),Ob=Os("transitionstart"),Mb=Os("transitioncancel"),Vg=Os("transitionend"),jg=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Kn(t,r){jg.set(t,r),Gn(r,[t])}var Pg=new WeakMap;function Vn(t,r){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ya(r)},Pg.set(t,r),r)}return{value:t,source:r,stack:ya(r)}}var jn=[],Na=0,Rd=0;function tu(){for(var t=Na,r=Rd=Na=0;r<t;){var a=jn[r];jn[r++]=null;var c=jn[r];jn[r++]=null;var d=jn[r];jn[r++]=null;var m=jn[r];if(jn[r++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}m!==0&&Lg(a,d,m)}}function nu(t,r,a,c){jn[Na++]=t,jn[Na++]=r,jn[Na++]=a,jn[Na++]=c,Rd|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function xd(t,r,a,c){return nu(t,r,a,c),iu(t)}function Da(t,r){return nu(t,null,null,r),iu(t)}function Lg(t,r,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&r!==null&&(d=31-Wt(a),t=m.hiddenUpdates,c=t[d],c===null?t[d]=[r]:c.push(r),r.lane=a|536870912),m):null}function iu(t){if(50<Sl)throw Sl=0,Mf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ka={};function Vb(t,r,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,r,a,c){return new Vb(t,r,a,c)}function Cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,r){var a=t.alternate;return a===null?(a=wn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ru(t,r,a,c,d,m){var T=0;if(c=t,typeof t=="function")Cd(t)&&(T=1);else if(typeof t=="string")T=PS(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=wn(31,a,r,d),t.elementType=D,t.lanes=m,t;case I:return Ms(a.children,d,m,r);case F:T=8,d|=24;break;case N:return t=wn(12,a,r,d|2),t.elementType=N,t.lanes=m,t;case K:return t=wn(13,a,r,d),t.elementType=K,t.lanes=m,t;case oe:return t=wn(19,a,r,d),t.elementType=oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:case z:T=10;break e;case P:T=9;break e;case G:T=11;break e;case C:T=14;break e;case x:T=16,c=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),c=null}return r=wn(T,a,r,d),r.elementType=t,r.type=c,r.lanes=m,r}function Ms(t,r,a,c){return t=wn(7,t,c,r),t.lanes=a,t}function Id(t,r,a){return t=wn(6,t,null,r),t.lanes=a,t}function Nd(t,r,a){return r=wn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Oa=[],Ma=0,su=null,au=0,Pn=[],Ln=0,Vs=null,Ki=1,Yi="";function js(t,r){Oa[Ma++]=au,Oa[Ma++]=su,su=t,au=r}function Bg(t,r,a){Pn[Ln++]=Ki,Pn[Ln++]=Yi,Pn[Ln++]=Vs,Vs=t;var c=Ki;t=Yi;var d=32-Wt(c)-1;c&=~(1<<d),a+=1;var m=32-Wt(r)+d;if(30<m){var T=d-d%5;m=(c&(1<<T)-1).toString(32),c>>=T,d-=T,Ki=1<<32-Wt(r)+d|a<<d|c,Yi=m+t}else Ki=1<<m|a<<d|c,Yi=t}function Dd(t){t.return!==null&&(js(t,1),Bg(t,1,0))}function kd(t){for(;t===su;)su=Oa[--Ma],Oa[Ma]=null,au=Oa[--Ma],Oa[Ma]=null;for(;t===Vs;)Vs=Pn[--Ln],Pn[Ln]=null,Yi=Pn[--Ln],Pn[Ln]=null,Ki=Pn[--Ln],Pn[Ln]=null}var un=null,dt=null,Fe=!1,Ps=null,pi=!1,Od=Error(s(519));function Ls(t){var r=Error(s(418,""));throw nl(Vn(r,t)),Od}function zg(t){var r=t.stateNode,a=t.type,c=t.memoizedProps;switch(r[It]=t,r[bt]=c,a){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(a=0;a<Rl.length;a++)Me(Rl[a],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),ws(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),va(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),bs(r,c.value,c.defaultValue,c.children),va(r)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||r_(r.textContent,a)?(c.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),c.onScroll!=null&&Me("scroll",r),c.onScrollEnd!=null&&Me("scrollend",r),c.onClick!=null&&(r.onclick=Bu),r=!0):r=!1,r||Ls(t)}function qg(t){for(un=t.return;un;)switch(un.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:un=un.return}}function el(t){if(t!==un)return!1;if(!Fe)return qg(t),Fe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xf(t.type,t.memoizedProps)),a=!a),a&&dt&&Ls(t),qg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){dt=Qn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}dt=null}}else r===27?(r=dt,Fr(t.type)?(t=em,em=null,dt=t):dt=r):dt=un?Qn(t.stateNode.nextSibling):null;return!0}function tl(){dt=un=null,Fe=!1}function Fg(){var t=Ps;return t!==null&&(pn===null?pn=t:pn.push.apply(pn,t),Ps=null),t}function nl(t){Ps===null?Ps=[t]:Ps.push(t)}var Md=ie(null),Us=null,Qi=null;function Cr(t,r,a){ee(Md,r._currentValue),r._currentValue=a}function Xi(t){t._currentValue=Md.current,he(Md)}function Vd(t,r,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===a)break;t=t.return}}function jd(t,r,a,c){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var T=d.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=d;for(var M=0;M<r.length;M++)if(b.context===r[M]){m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),Vd(m.return,a,t),c||(T=null);break e}m=b.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(s(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),Vd(T,a,t),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===t){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function il(t,r,a,c){t=null;for(var d=r,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var b=d.type;Tn(d.pendingProps.value,T.value)||(t!==null?t.push(b):t=[b])}}else if(d===ut.current){if(T=d.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(kl):t=[kl])}d=d.return}t!==null&&jd(r,t,a,c),r.flags|=262144}function ou(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bs(t){Us=t,Qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Hg(Us,t)}function lu(t,r){return Us===null&&Bs(t),Hg(t,r)}function Hg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Qi===null){if(t===null)throw Error(s(308));Qi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Qi=Qi.next=r;return a}var jb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Pb=i.unstable_scheduleCallback,Lb=i.unstable_NormalPriority,kt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new jb,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&Pb(Lb,function(){t.controller.abort()})}var sl=null,Ld=0,Va=0,ja=null;function Ub(t,r){if(sl===null){var a=sl=[];Ld=0,Va=zf(),ja={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ld++,r.then(Gg,Gg),r}function Gg(){if(--Ld===0&&sl!==null){ja!==null&&(ja.status="fulfilled");var t=sl;sl=null,Va=0,ja=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Bb(t,r){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var $g=te.S;te.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ub(t,r),$g!==null&&$g(t,r)};var zs=ie(null);function Ud(){var t=zs.current;return t!==null?t:nt.pooledCache}function cu(t,r){r===null?ee(zs,zs.current):ee(zs,r.pool)}function Kg(){var t=Ud();return t===null?null:{parent:kt._currentValue,pool:t}}var al=Error(s(460)),Yg=Error(s(474)),uu=Error(s(542)),Bd={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hu(){}function Xg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(hu,hu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t;default:if(typeof r.status=="string")r.then(hu,hu);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=c}},function(c){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zg(t),t}throw ol=r,al}}var ol=null;function Wg(){if(ol===null)throw Error(s(459));var t=ol;return ol=null,t}function Zg(t){if(t===al||t===uu)throw Error(s(483))}var Ir=!1;function zd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(t,r,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,r=iu(t),Lg(t,null,a),r}return nu(t,c,r,a),iu(t)}function ll(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,a|=c,r.lanes=a,jo(t,a)}}function Fd(t,r){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Hd=!1;function cl(){if(Hd){var t=ja;if(t!==null)throw t}}function ul(t,r,a,c){Hd=!1;var d=t.updateQueue;Ir=!1;var m=d.firstBaseUpdate,T=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var M=b,X=M.next;M.next=null,T===null?m=X:T.next=X,T=M;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==T&&(b===null?ne.firstBaseUpdate=X:b.next=X,ne.lastBaseUpdate=M))}if(m!==null){var ae=d.baseState;T=0,ne=X=M=null,b=m;do{var W=b.lane&-536870913,Z=W!==b.lane;if(Z?(Ue&W)===W:(c&W)===W){W!==0&&W===Va&&(Hd=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Se=t,Te=b;W=r;var et=a;switch(Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){ae=Se.call(et,ae,W);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,W=typeof Se=="function"?Se.call(et,ae,W):Se,W==null)break e;ae=_({},ae,W);break e;case 2:Ir=!0}}W=b.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(X=ne=Z,M=ae):ne=ne.next=Z,T|=W;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);ne===null&&(M=ae),d.baseState=M,d.firstBaseUpdate=X,d.lastBaseUpdate=ne,m===null&&(d.shared.lanes=0),Ur|=T,t.lanes=T,t.memoizedState=ae}}function Jg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ey(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jg(a[t],r)}var Pa=ie(null),du=ie(0);function ty(t,r){t=ir,ee(du,t),ee(Pa,r),ir=t|r.baseLanes}function Gd(){ee(du,ir),ee(Pa,Pa.current)}function $d(){ir=du.current,he(Pa),he(du)}var kr=0,De=null,Ze=null,At=null,fu=!1,La=!1,qs=!1,mu=0,hl=0,Ua=null,zb=0;function gt(){throw Error(s(321))}function Kd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Tn(t[a],r[a]))return!1;return!0}function Yd(t,r,a,c,d,m){return kr=m,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=t===null||t.memoizedState===null?Ly:Uy,qs=!1,m=a(c,d),qs=!1,La&&(m=iy(r,a,c,d)),ny(t),m}function ny(t){te.H=Eu;var r=Ze!==null&&Ze.next!==null;if(kr=0,At=Ze=De=null,fu=!1,hl=0,Ua=null,r)throw Error(s(300));t===null||jt||(t=t.dependencies,t!==null&&ou(t)&&(jt=!0))}function iy(t,r,a,c){De=t;var d=0;do{if(La&&(Ua=null),hl=0,La=!1,25<=d)throw Error(s(301));if(d+=1,At=Ze=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=Yb,m=r(a,c)}while(La);return m}function qb(){var t=te.H,r=t.useState()[0];return r=typeof r.then=="function"?dl(r):r,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(De.flags|=1024),r}function Qd(){var t=mu!==0;return mu=0,t}function Xd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Wd(t){if(fu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}fu=!1}kr=0,At=Ze=De=null,La=!1,hl=mu=0,Ua=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?De.memoizedState=At=t:At=At.next=t,At}function Rt(){if(Ze===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var r=At===null?De.memoizedState:At.next;if(r!==null)At=r,Ze=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},At===null?De.memoizedState=At=t:At=At.next=t}return At}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(t){var r=hl;return hl+=1,Ua===null&&(Ua=[]),t=Xg(Ua,t,r),r=De,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Ly:Uy),t}function pu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dl(t);if(t.$$typeof===z)return Zt(t)}throw Error(s(438,String(t)))}function Jd(t){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zd(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),c=0;c<t;c++)a[c]=k;return r.index++,a}function Wi(t,r){return typeof r=="function"?r(t):r}function gu(t){var r=Rt();return ef(r,Ze,t)}function ef(t,r,a){var c=t.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var d=t.baseQueue,m=c.pending;if(m!==null){if(d!==null){var T=d.next;d.next=m.next,m.next=T}r.baseQueue=d=m,c.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{r=d.next;var b=T=null,M=null,X=r,ne=!1;do{var ae=X.lane&-536870913;if(ae!==X.lane?(Ue&ae)===ae:(kr&ae)===ae){var W=X.revertLane;if(W===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ae===Va&&(ne=!0);else if((kr&W)===W){X=X.next,W===Va&&(ne=!0);continue}else ae={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(b=M=ae,T=m):M=M.next=ae,De.lanes|=W,Ur|=W;ae=X.action,qs&&a(m,ae),m=X.hasEagerState?X.eagerState:a(m,ae)}else W={lane:ae,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(b=M=W,T=m):M=M.next=W,De.lanes|=ae,Ur|=ae;X=X.next}while(X!==null&&X!==r);if(M===null?T=m:M.next=b,!Tn(m,t.memoizedState)&&(jt=!0,ne&&(a=ja,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=M,c.lastRenderedState=m}return d===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function tf(t){var r=Rt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var c=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var T=d=d.next;do m=t(m,T.action),T=T.next;while(T!==d);Tn(m,r.memoizedState)||(jt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function ry(t,r,a){var c=De,d=Rt(),m=Fe;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!Tn((Ze||d).memoizedState,a);T&&(d.memoizedState=a,jt=!0),d=d.queue;var b=oy.bind(null,c,d,t);if(fl(2048,8,b,[t]),d.getSnapshot!==r||T||At!==null&&At.memoizedState.tag&1){if(c.flags|=2048,Ba(9,yu(),ay.bind(null,c,d,a,r),null),nt===null)throw Error(s(349));m||(kr&124)!==0||sy(c,r,a)}return a}function sy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=Zd(),De.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ay(t,r,a,c){r.value=a,r.getSnapshot=c,ly(r)&&cy(t)}function oy(t,r,a){return a(function(){ly(r)&&cy(t)})}function ly(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Tn(t,a)}catch{return!0}}function cy(t){var r=Da(t,2);r!==null&&xn(r,t,2)}function nf(t){var r=fn();if(typeof t=="function"){var a=t;if(t=a(),qs){_n(!0);try{a()}finally{_n(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},r}function uy(t,r,a,c){return t.baseState=a,ef(t,Ze,typeof c=="function"?c:Wi)}function Fb(t,r,a,c,d){if(_u(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};te.T!==null?a(!0):m.isTransition=!1,c(m),a=r.pending,a===null?(m.next=r.pending=m,hy(r,m)):(m.next=a.next,r.pending=a.next=m)}}function hy(t,r){var a=r.action,c=r.payload,d=t.state;if(r.isTransition){var m=te.T,T={};te.T=T;try{var b=a(d,c),M=te.S;M!==null&&M(T,b),dy(t,r,b)}catch(X){rf(t,r,X)}finally{te.T=m}}else try{m=a(d,c),dy(t,r,m)}catch(X){rf(t,r,X)}}function dy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){fy(t,r,c)},function(c){return rf(t,r,c)}):fy(t,r,a)}function fy(t,r,a){r.status="fulfilled",r.value=a,my(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,hy(t,a)))}function rf(t,r,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,my(r),r=r.next;while(r!==c)}t.action=null}function my(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function py(t,r){return r}function gy(t,r){if(Fe){var a=nt.formState;if(a!==null){e:{var c=De;if(Fe){if(dt){t:{for(var d=dt,m=pi;d.nodeType!==8;){if(!m){d=null;break t}if(d=Qn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){dt=Qn(d.nextSibling),c=d.data==="F!";break e}}Ls(c)}c=!1}c&&(r=a[0])}}return a=fn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:r},a.queue=c,a=Vy.bind(null,De,c),c.dispatch=a,c=nf(!1),m=cf.bind(null,De,!1,c.queue),c=fn(),d={state:r,dispatch:null,action:t,pending:null},c.queue=d,a=Fb.bind(null,De,d,m,a),d.dispatch=a,c.memoizedState=t,[r,a,!1]}function yy(t){var r=Rt();return vy(r,Ze,t)}function vy(t,r,a){if(r=ef(t,r,py)[0],t=gu(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=dl(r)}catch(T){throw T===al?uu:T}else c=r;r=Rt();var d=r.queue,m=d.dispatch;return a!==r.memoizedState&&(De.flags|=2048,Ba(9,yu(),Hb.bind(null,d,a),null)),[c,m,t]}function Hb(t,r){t.action=r}function _y(t){var r=Rt(),a=Ze;if(a!==null)return vy(r,a,t);Rt(),r=r.memoizedState,a=Rt();var c=a.queue.dispatch;return a.memoizedState=t,[r,c,!1]}function Ba(t,r,a,c){return t={tag:t,create:a,deps:c,inst:r,next:null},r=De.updateQueue,r===null&&(r=Zd(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,r.lastEffect=t),t}function yu(){return{destroy:void 0,resource:void 0}}function Ey(){return Rt().memoizedState}function vu(t,r,a,c){var d=fn();c=c===void 0?null:c,De.flags|=t,d.memoizedState=Ba(1|r,yu(),a,c)}function fl(t,r,a,c){var d=Rt();c=c===void 0?null:c;var m=d.memoizedState.inst;Ze!==null&&c!==null&&Kd(c,Ze.memoizedState.deps)?d.memoizedState=Ba(r,m,a,c):(De.flags|=t,d.memoizedState=Ba(1|r,m,a,c))}function Ty(t,r){vu(8390656,8,t,r)}function wy(t,r){fl(2048,8,t,r)}function by(t,r){return fl(4,2,t,r)}function Sy(t,r){return fl(4,4,t,r)}function Ay(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ry(t,r,a){a=a!=null?a.concat([t]):null,fl(4,4,Ay.bind(null,r,t),a)}function sf(){}function xy(t,r){var a=Rt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Kd(r,c[1])?c[0]:(a.memoizedState=[t,r],t)}function Cy(t,r){var a=Rt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Kd(r,c[1]))return c[0];if(c=t(),qs){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[c,r],c}function af(t,r,a){return a===void 0||(kr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Dv(),De.lanes|=t,Ur|=t,a)}function Iy(t,r,a,c){return Tn(a,r)?a:Pa.current!==null?(t=af(t,a,c),Tn(t,r)||(jt=!0),t):(kr&42)===0?(jt=!0,t.memoizedState=a):(t=Dv(),De.lanes|=t,Ur|=t,r)}function Ny(t,r,a,c,d){var m=Q.p;Q.p=m!==0&&8>m?m:8;var T=te.T,b={};te.T=b,cf(t,!1,r,a);try{var M=d(),X=te.S;if(X!==null&&X(b,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=Bb(M,c);ml(t,r,ne,Rn(t))}else ml(t,r,c,Rn(t))}catch(ae){ml(t,r,{then:function(){},status:"rejected",reason:ae},Rn())}finally{Q.p=m,te.T=T}}function Gb(){}function of(t,r,a,c){if(t.tag!==5)throw Error(s(476));var d=Dy(t).queue;Ny(t,d,r,ce,a===null?Gb:function(){return ky(t),a(c)})}function Dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ky(t){var r=Dy(t).next.queue;ml(t,r,{},Rn())}function lf(){return Zt(kl)}function Oy(){return Rt().memoizedState}function My(){return Rt().memoizedState}function $b(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Rn();t=Nr(a);var c=Dr(r,t,a);c!==null&&(xn(c,r,a),ll(c,r,a)),r={cache:Pd()},t.payload=r;return}r=r.return}}function Kb(t,r,a){var c=Rn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},_u(t)?jy(r,a):(a=xd(t,r,a,c),a!==null&&(xn(a,t,c),Py(a,r,c)))}function Vy(t,r,a){var c=Rn();ml(t,r,a,c)}function ml(t,r,a,c){var d={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(_u(t))jy(r,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,b=m(T,a);if(d.hasEagerState=!0,d.eagerState=b,Tn(b,T))return nu(t,r,d,0),nt===null&&tu(),!1}catch{}finally{}if(a=xd(t,r,d,c),a!==null)return xn(a,t,c),Py(a,r,c),!0}return!1}function cf(t,r,a,c){if(c={lane:2,revertLane:zf(),action:c,hasEagerState:!1,eagerState:null,next:null},_u(t)){if(r)throw Error(s(479))}else r=xd(t,a,c,2),r!==null&&xn(r,t,2)}function _u(t){var r=t.alternate;return t===De||r!==null&&r===De}function jy(t,r){La=fu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Py(t,r,a){if((a&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,a|=c,r.lanes=a,jo(t,a)}}var Eu={readContext:Zt,use:pu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},Ly={readContext:Zt,use:pu,useCallback:function(t,r){return fn().memoizedState=[t,r===void 0?null:r],t},useContext:Zt,useEffect:Ty,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,vu(4194308,4,Ay.bind(null,r,t),a)},useLayoutEffect:function(t,r){return vu(4194308,4,t,r)},useInsertionEffect:function(t,r){vu(4,2,t,r)},useMemo:function(t,r){var a=fn();r=r===void 0?null:r;var c=t();if(qs){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[c,r],c},useReducer:function(t,r,a){var c=fn();if(a!==void 0){var d=a(r);if(qs){_n(!0);try{a(r)}finally{_n(!1)}}}else d=r;return c.memoizedState=c.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},c.queue=t,t=t.dispatch=Kb.bind(null,De,t),[c.memoizedState,t]},useRef:function(t){var r=fn();return t={current:t},r.memoizedState=t},useState:function(t){t=nf(t);var r=t.queue,a=Vy.bind(null,De,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:sf,useDeferredValue:function(t,r){var a=fn();return af(a,t,r)},useTransition:function(){var t=nf(!1);return t=Ny.bind(null,De,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var c=De,d=fn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(Ue&124)!==0||sy(c,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,Ty(oy.bind(null,c,m,t),[t]),c.flags|=2048,Ba(9,yu(),ay.bind(null,c,m,a,r),null),a},useId:function(){var t=fn(),r=nt.identifierPrefix;if(Fe){var a=Yi,c=Ki;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,r="«"+r+"R"+a,a=mu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=zb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:lf,useFormState:gy,useActionState:gy,useOptimistic:function(t){var r=fn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=cf.bind(null,De,!0,a),a.dispatch=r,[t,r]},useMemoCache:Jd,useCacheRefresh:function(){return fn().memoizedState=$b.bind(null,De)}},Uy={readContext:Zt,use:pu,useCallback:xy,useContext:Zt,useEffect:wy,useImperativeHandle:Ry,useInsertionEffect:by,useLayoutEffect:Sy,useMemo:Cy,useReducer:gu,useRef:Ey,useState:function(){return gu(Wi)},useDebugValue:sf,useDeferredValue:function(t,r){var a=Rt();return Iy(a,Ze.memoizedState,t,r)},useTransition:function(){var t=gu(Wi)[0],r=Rt().memoizedState;return[typeof t=="boolean"?t:dl(t),r]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:lf,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=Rt();return uy(a,Ze,t,r)},useMemoCache:Jd,useCacheRefresh:My},Yb={readContext:Zt,use:pu,useCallback:xy,useContext:Zt,useEffect:wy,useImperativeHandle:Ry,useInsertionEffect:by,useLayoutEffect:Sy,useMemo:Cy,useReducer:tf,useRef:Ey,useState:function(){return tf(Wi)},useDebugValue:sf,useDeferredValue:function(t,r){var a=Rt();return Ze===null?af(a,t,r):Iy(a,Ze.memoizedState,t,r)},useTransition:function(){var t=tf(Wi)[0],r=Rt().memoizedState;return[typeof t=="boolean"?t:dl(t),r]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:lf,useFormState:_y,useActionState:_y,useOptimistic:function(t,r){var a=Rt();return Ze!==null?uy(a,Ze,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:My},za=null,pl=0;function Tu(t){var r=pl;return pl+=1,za===null&&(za=[]),Xg(za,t,r)}function gl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function wu(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function By(t){var r=t._init;return r(t._payload)}function zy(t){function r(H,L){if(t){var Y=H.deletions;Y===null?(H.deletions=[L],H.flags|=16):Y.push(L)}}function a(H,L){if(!t)return null;for(;L!==null;)r(H,L),L=L.sibling;return null}function c(H){for(var L=new Map;H!==null;)H.key!==null?L.set(H.key,H):L.set(H.index,H),H=H.sibling;return L}function d(H,L){return H=$i(H,L),H.index=0,H.sibling=null,H}function m(H,L,Y){return H.index=Y,t?(Y=H.alternate,Y!==null?(Y=Y.index,Y<L?(H.flags|=67108866,L):Y):(H.flags|=67108866,L)):(H.flags|=1048576,L)}function T(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function b(H,L,Y,re){return L===null||L.tag!==6?(L=Id(Y,H.mode,re),L.return=H,L):(L=d(L,Y),L.return=H,L)}function M(H,L,Y,re){var me=Y.type;return me===I?ne(H,L,Y.props.children,re,Y.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===x&&By(me)===L.type)?(L=d(L,Y.props),gl(L,Y),L.return=H,L):(L=ru(Y.type,Y.key,Y.props,null,H.mode,re),gl(L,Y),L.return=H,L)}function X(H,L,Y,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==Y.containerInfo||L.stateNode.implementation!==Y.implementation?(L=Nd(Y,H.mode,re),L.return=H,L):(L=d(L,Y.children||[]),L.return=H,L)}function ne(H,L,Y,re,me){return L===null||L.tag!==7?(L=Ms(Y,H.mode,re,me),L.return=H,L):(L=d(L,Y),L.return=H,L)}function ae(H,L,Y){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Id(""+L,H.mode,Y),L.return=H,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return Y=ru(L.type,L.key,L.props,null,H.mode,Y),gl(Y,L),Y.return=H,Y;case R:return L=Nd(L,H.mode,Y),L.return=H,L;case x:var re=L._init;return L=re(L._payload),ae(H,L,Y)}if(Ge(L)||q(L))return L=Ms(L,H.mode,Y,null),L.return=H,L;if(typeof L.then=="function")return ae(H,Tu(L),Y);if(L.$$typeof===z)return ae(H,lu(H,L),Y);wu(H,L)}return null}function W(H,L,Y,re){var me=L!==null?L.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return me!==null?null:b(H,L,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===me?M(H,L,Y,re):null;case R:return Y.key===me?X(H,L,Y,re):null;case x:return me=Y._init,Y=me(Y._payload),W(H,L,Y,re)}if(Ge(Y)||q(Y))return me!==null?null:ne(H,L,Y,re,null);if(typeof Y.then=="function")return W(H,L,Tu(Y),re);if(Y.$$typeof===z)return W(H,L,lu(H,Y),re);wu(H,Y)}return null}function Z(H,L,Y,re,me){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(Y)||null,b(L,H,""+re,me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return H=H.get(re.key===null?Y:re.key)||null,M(L,H,re,me);case R:return H=H.get(re.key===null?Y:re.key)||null,X(L,H,re,me);case x:var ke=re._init;return re=ke(re._payload),Z(H,L,Y,re,me)}if(Ge(re)||q(re))return H=H.get(Y)||null,ne(L,H,re,me,null);if(typeof re.then=="function")return Z(H,L,Y,Tu(re),me);if(re.$$typeof===z)return Z(H,L,Y,lu(L,re),me);wu(L,re)}return null}function Se(H,L,Y,re){for(var me=null,ke=null,ve=L,be=L=0,Lt=null;ve!==null&&be<Y.length;be++){ve.index>be?(Lt=ve,ve=null):Lt=ve.sibling;var ze=W(H,ve,Y[be],re);if(ze===null){ve===null&&(ve=Lt);break}t&&ve&&ze.alternate===null&&r(H,ve),L=m(ze,L,be),ke===null?me=ze:ke.sibling=ze,ke=ze,ve=Lt}if(be===Y.length)return a(H,ve),Fe&&js(H,be),me;if(ve===null){for(;be<Y.length;be++)ve=ae(H,Y[be],re),ve!==null&&(L=m(ve,L,be),ke===null?me=ve:ke.sibling=ve,ke=ve);return Fe&&js(H,be),me}for(ve=c(ve);be<Y.length;be++)Lt=Z(ve,H,be,Y[be],re),Lt!==null&&(t&&Lt.alternate!==null&&ve.delete(Lt.key===null?be:Lt.key),L=m(Lt,L,be),ke===null?me=Lt:ke.sibling=Lt,ke=Lt);return t&&ve.forEach(function(Yr){return r(H,Yr)}),Fe&&js(H,be),me}function Te(H,L,Y,re){if(Y==null)throw Error(s(151));for(var me=null,ke=null,ve=L,be=L=0,Lt=null,ze=Y.next();ve!==null&&!ze.done;be++,ze=Y.next()){ve.index>be?(Lt=ve,ve=null):Lt=ve.sibling;var Yr=W(H,ve,ze.value,re);if(Yr===null){ve===null&&(ve=Lt);break}t&&ve&&Yr.alternate===null&&r(H,ve),L=m(Yr,L,be),ke===null?me=Yr:ke.sibling=Yr,ke=Yr,ve=Lt}if(ze.done)return a(H,ve),Fe&&js(H,be),me;if(ve===null){for(;!ze.done;be++,ze=Y.next())ze=ae(H,ze.value,re),ze!==null&&(L=m(ze,L,be),ke===null?me=ze:ke.sibling=ze,ke=ze);return Fe&&js(H,be),me}for(ve=c(ve);!ze.done;be++,ze=Y.next())ze=Z(ve,H,be,ze.value,re),ze!==null&&(t&&ze.alternate!==null&&ve.delete(ze.key===null?be:ze.key),L=m(ze,L,be),ke===null?me=ze:ke.sibling=ze,ke=ze);return t&&ve.forEach(function(QS){return r(H,QS)}),Fe&&js(H,be),me}function et(H,L,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var me=Y.key;L!==null;){if(L.key===me){if(me=Y.type,me===I){if(L.tag===7){a(H,L.sibling),re=d(L,Y.props.children),re.return=H,H=re;break e}}else if(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===x&&By(me)===L.type){a(H,L.sibling),re=d(L,Y.props),gl(re,Y),re.return=H,H=re;break e}a(H,L);break}else r(H,L);L=L.sibling}Y.type===I?(re=Ms(Y.props.children,H.mode,re,Y.key),re.return=H,H=re):(re=ru(Y.type,Y.key,Y.props,null,H.mode,re),gl(re,Y),re.return=H,H=re)}return T(H);case R:e:{for(me=Y.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===Y.containerInfo&&L.stateNode.implementation===Y.implementation){a(H,L.sibling),re=d(L,Y.children||[]),re.return=H,H=re;break e}else{a(H,L);break}else r(H,L);L=L.sibling}re=Nd(Y,H.mode,re),re.return=H,H=re}return T(H);case x:return me=Y._init,Y=me(Y._payload),et(H,L,Y,re)}if(Ge(Y))return Se(H,L,Y,re);if(q(Y)){if(me=q(Y),typeof me!="function")throw Error(s(150));return Y=me.call(Y),Te(H,L,Y,re)}if(typeof Y.then=="function")return et(H,L,Tu(Y),re);if(Y.$$typeof===z)return et(H,L,lu(H,Y),re);wu(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,L!==null&&L.tag===6?(a(H,L.sibling),re=d(L,Y),re.return=H,H=re):(a(H,L),re=Id(Y,H.mode,re),re.return=H,H=re),T(H)):a(H,L)}return function(H,L,Y,re){try{pl=0;var me=et(H,L,Y,re);return za=null,me}catch(ve){if(ve===al||ve===uu)throw ve;var ke=wn(29,ve,null,H.mode);return ke.lanes=re,ke.return=H,ke}finally{}}}var qa=zy(!0),qy=zy(!1),Un=ie(null),gi=null;function Or(t){var r=t.alternate;ee(Ot,Ot.current&1),ee(Un,t),gi===null&&(r===null||Pa.current!==null||r.memoizedState!==null)&&(gi=t)}function Fy(t){if(t.tag===22){if(ee(Ot,Ot.current),ee(Un,t),gi===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(gi=t)}}else Mr()}function Mr(){ee(Ot,Ot.current),ee(Un,Un.current)}function Zi(t){he(Un),gi===t&&(gi=null),he(Ot)}var Ot=ie(0);function bu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function uf(t,r,a,c){r=t.memoizedState,a=a(c,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,r,a){t=t._reactInternals;var c=Rn(),d=Nr(c);d.payload=r,a!=null&&(d.callback=a),r=Dr(t,d,c),r!==null&&(xn(r,t,c),ll(r,t,c))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var c=Rn(),d=Nr(c);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Dr(t,d,c),r!==null&&(xn(r,t,c),ll(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Rn(),c=Nr(a);c.tag=2,r!=null&&(c.callback=r),r=Dr(t,c,a),r!==null&&(xn(r,t,a),ll(r,t,a))}};function Hy(t,r,a,c,d,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,T):r.prototype&&r.prototype.isPureReactComponent?!Zo(a,c)||!Zo(d,m):!0}function Gy(t,r,a,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==t&&hf.enqueueReplaceState(r,r.state,null)}function Fs(t,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Su=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function $y(t){Su(t)}function Ky(t){console.error(t)}function Yy(t){Su(t)}function Au(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qy(t,r,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function df(t,r,a){return a=Nr(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,r)},a}function Xy(t){return t=Nr(t),t.tag=3,t}function Wy(t,r,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=c.value;t.payload=function(){return d(m)},t.callback=function(){Qy(r,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Qy(r,a,c),typeof d!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function Qb(t,r,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&il(r,a,d,!0),a=Un.current,a!==null){switch(a.tag){case 13:return gi===null?jf():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===Bd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Lf(t,c,d)),!1;case 22:return a.flags|=65536,c===Bd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Lf(t,c,d)),!1}throw Error(s(435,a.tag))}return Lf(t,c,d),jf(),!1}if(Fe)return r=Un.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,c!==Od&&(t=Error(s(422),{cause:c}),nl(Vn(t,a)))):(c!==Od&&(r=Error(s(423),{cause:c}),nl(Vn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,c=Vn(c,a),d=df(t.stateNode,c,d),Fd(t,d),ft!==4&&(ft=2)),!1;var m=Error(s(520),{cause:c});if(m=Vn(m,a),bl===null?bl=[m]:bl.push(m),ft!==4&&(ft=2),r===null)return!0;c=Vn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=df(a.stateNode,c,t),Fd(a,t),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Br===null||!Br.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Xy(d),Wy(d,t,a,c),Fd(a,d),!1}a=a.return}while(a!==null);return!1}var Zy=Error(s(461)),jt=!1;function Ht(t,r,a,c){r.child=t===null?qy(r,null,a,c):qa(r,t.child,a,c)}function Jy(t,r,a,c,d){a=a.render;var m=r.ref;if("ref"in c){var T={};for(var b in c)b!=="ref"&&(T[b]=c[b])}else T=c;return Bs(r),c=Yd(t,r,a,T,m,d),b=Qd(),t!==null&&!jt?(Xd(t,r,d),Ji(t,r,d)):(Fe&&b&&Dd(r),r.flags|=1,Ht(t,r,c,d),r.child)}function ev(t,r,a,c,d){if(t===null){var m=a.type;return typeof m=="function"&&!Cd(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,tv(t,r,m,c,d)):(t=ru(a.type,null,c,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Ef(t,d)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:Zo,a(T,c)&&t.ref===r.ref)return Ji(t,r,d)}return r.flags|=1,t=$i(m,c),t.ref=r.ref,t.return=r,r.child=t}function tv(t,r,a,c,d){if(t!==null){var m=t.memoizedProps;if(Zo(m,c)&&t.ref===r.ref)if(jt=!1,r.pendingProps=c=m,Ef(t,d))(t.flags&131072)!==0&&(jt=!0);else return r.lanes=t.lanes,Ji(t,r,d)}return ff(t,r,a,c,d)}function nv(t,r,a){var c=r.pendingProps,d=c.children,m=t!==null?t.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=m!==null?m.baseLanes|a:a,t!==null){for(d=r.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;r.childLanes=m&~c}else r.childLanes=0,r.child=null;return iv(t,r,c,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(r,m!==null?m.cachePool:null),m!==null?ty(r,m):Gd(),Fy(r);else return r.lanes=r.childLanes=536870912,iv(t,r,m!==null?m.baseLanes|a:a,a)}else m!==null?(cu(r,m.cachePool),ty(r,m),Mr(),r.memoizedState=null):(t!==null&&cu(r,null),Gd(),Mr());return Ht(t,r,d,a),r.child}function iv(t,r,a,c){var d=Ud();return d=d===null?null:{parent:kt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&cu(r,null),Gd(),Fy(r),t!==null&&il(t,r,c,!0),null}function Ru(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function ff(t,r,a,c,d){return Bs(r),a=Yd(t,r,a,c,void 0,d),c=Qd(),t!==null&&!jt?(Xd(t,r,d),Ji(t,r,d)):(Fe&&c&&Dd(r),r.flags|=1,Ht(t,r,a,d),r.child)}function rv(t,r,a,c,d,m){return Bs(r),r.updateQueue=null,a=iy(r,c,a,d),ny(t),c=Qd(),t!==null&&!jt?(Xd(t,r,m),Ji(t,r,m)):(Fe&&c&&Dd(r),r.flags|=1,Ht(t,r,a,m),r.child)}function sv(t,r,a,c,d){if(Bs(r),r.stateNode===null){var m=ka,T=a.contextType;typeof T=="object"&&T!==null&&(m=Zt(T)),m=new a(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},zd(r),T=a.contextType,m.context=typeof T=="object"&&T!==null?Zt(T):ka,m.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(uf(r,a,T,c),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&hf.enqueueReplaceState(m,m.state,null),ul(r,c,m,d),cl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var b=r.memoizedProps,M=Fs(a,b);m.props=M;var X=m.context,ne=a.contextType;T=ka,typeof ne=="object"&&ne!==null&&(T=Zt(ne));var ae=a.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||X!==T)&&Gy(r,m,c,T),Ir=!1;var W=r.memoizedState;m.state=W,ul(r,c,m,d),cl(),X=r.memoizedState,b||W!==X||Ir?(typeof ae=="function"&&(uf(r,a,ae,c),X=r.memoizedState),(M=Ir||Hy(r,a,M,c,W,X,T))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=X),m.props=c,m.state=X,m.context=T,c=M):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,qd(t,r),T=r.memoizedProps,ne=Fs(a,T),m.props=ne,ae=r.pendingProps,W=m.context,X=a.contextType,M=ka,typeof X=="object"&&X!==null&&(M=Zt(X)),b=a.getDerivedStateFromProps,(X=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ae||W!==M)&&Gy(r,m,c,M),Ir=!1,W=r.memoizedState,m.state=W,ul(r,c,m,d),cl();var Z=r.memoizedState;T!==ae||W!==Z||Ir||t!==null&&t.dependencies!==null&&ou(t.dependencies)?(typeof b=="function"&&(uf(r,a,b,c),Z=r.memoizedState),(ne=Ir||Hy(r,a,ne,c,W,Z,M)||t!==null&&t.dependencies!==null&&ou(t.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Z,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Z,M)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=M,c=ne):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,Ru(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=qa(r,t.child,null,d),r.child=qa(r,null,a,d)):Ht(t,r,a,d),r.memoizedState=m.state,t=r.child):t=Ji(t,r,d),t}function av(t,r,a,c){return tl(),r.flags|=256,Ht(t,r,a,c),r.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(t){return{baseLanes:t,cachePool:Kg()}}function gf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Bn),t}function ov(t,r,a){var c=r.pendingProps,d=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),T&&(d=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,t===null){if(Fe){if(d?Or(r):Mr(),Fe){var b=dt,M;if(M=b){e:{for(M=b,b=pi;M.nodeType!==8;){if(!b){b=null;break e}if(M=Qn(M.nextSibling),M===null){b=null;break e}}b=M}b!==null?(r.memoizedState={dehydrated:b,treeContext:Vs!==null?{id:Ki,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},M=wn(18,null,null,0),M.stateNode=b,M.return=r,r.child=M,un=r,dt=null,M=!0):M=!1}M||Ls(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Jf(b)?r.lanes=32:r.lanes=536870912,null;Zi(r)}return b=c.children,c=c.fallback,d?(Mr(),d=r.mode,b=xu({mode:"hidden",children:b},d),c=Ms(c,d,a,null),b.return=r,c.return=r,b.sibling=c,r.child=b,d=r.child,d.memoizedState=pf(a),d.childLanes=gf(t,T,a),r.memoizedState=mf,c):(Or(r),yf(r,b))}if(M=t.memoizedState,M!==null&&(b=M.dehydrated,b!==null)){if(m)r.flags&256?(Or(r),r.flags&=-257,r=vf(t,r,a)):r.memoizedState!==null?(Mr(),r.child=t.child,r.flags|=128,r=null):(Mr(),d=c.fallback,b=r.mode,c=xu({mode:"visible",children:c.children},b),d=Ms(d,b,a,null),d.flags|=2,c.return=r,d.return=r,c.sibling=d,r.child=c,qa(r,t.child,null,a),c=r.child,c.memoizedState=pf(a),c.childLanes=gf(t,T,a),r.memoizedState=mf,r=d);else if(Or(r),Jf(b)){if(T=b.nextSibling&&b.nextSibling.dataset,T)var X=T.dgst;T=X,c=Error(s(419)),c.stack="",c.digest=T,nl({value:c,source:null,stack:null}),r=vf(t,r,a)}else if(jt||il(t,r,a,!1),T=(a&t.childLanes)!==0,jt||T){if(T=nt,T!==null&&(c=a&-a,c=(c&42)!==0?1:Tr(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==M.retryLane))throw M.retryLane=c,Da(t,c),xn(T,t,c),Zy;b.data==="$?"||jf(),r=vf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,dt=Qn(b.nextSibling),un=r,Fe=!0,Ps=null,pi=!1,t!==null&&(Pn[Ln++]=Ki,Pn[Ln++]=Yi,Pn[Ln++]=Vs,Ki=t.id,Yi=t.overflow,Vs=r),r=yf(r,c.children),r.flags|=4096);return r}return d?(Mr(),d=c.fallback,b=r.mode,M=t.child,X=M.sibling,c=$i(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,X!==null?d=$i(X,d):(d=Ms(d,b,a,null),d.flags|=2),d.return=r,c.return=r,c.sibling=d,r.child=c,c=d,d=r.child,b=t.child.memoizedState,b===null?b=pf(a):(M=b.cachePool,M!==null?(X=kt._currentValue,M=M.parent!==X?{parent:X,pool:X}:M):M=Kg(),b={baseLanes:b.baseLanes|a,cachePool:M}),d.memoizedState=b,d.childLanes=gf(t,T,a),r.memoizedState=mf,c):(Or(r),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,t!==null&&(T=r.deletions,T===null?(r.deletions=[t],r.flags|=16):T.push(t)),r.child=a,r.memoizedState=null,a)}function yf(t,r){return r=xu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xu(t,r){return t=wn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vf(t,r,a){return qa(r,t.child,null,a),t=yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function lv(t,r,a){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Vd(t.return,r,a)}function _f(t,r,a,c,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function cv(t,r,a){var c=r.pendingProps,d=c.revealOrder,m=c.tail;if(Ht(t,r,c.children,a),c=Ot.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,a,r);else if(t.tag===19)lv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}switch(ee(Ot,c),d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&bu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),_f(r,!1,d,a,m);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&bu(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}_f(r,!0,a,null,m);break;case"together":_f(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ji(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ur|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(il(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=$i(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Ef(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ou(t)))}function Xb(t,r,a){switch(r.tag){case 3:ye(r,r.stateNode.containerInfo),Cr(r,kt,t.memoizedState.cache),tl();break;case 27:case 5:ei(r);break;case 4:ye(r,r.stateNode.containerInfo);break;case 10:Cr(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Or(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ov(t,r,a):(Or(r),t=Ji(t,r,a),t!==null?t.sibling:null);Or(r);break;case 19:var d=(t.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(il(t,r,a,!1),c=(a&r.childLanes)!==0),d){if(c)return cv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(Ot,Ot.current),c)break;return null;case 22:case 23:return r.lanes=0,nv(t,r,a);case 24:Cr(r,kt,t.memoizedState.cache)}return Ji(t,r,a)}function uv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)jt=!0;else{if(!Ef(t,a)&&(r.flags&128)===0)return jt=!1,Xb(t,r,a);jt=(t.flags&131072)!==0}else jt=!1,Fe&&(r.flags&1048576)!==0&&Bg(r,au,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var c=r.elementType,d=c._init;if(c=d(c._payload),r.type=c,typeof c=="function")Cd(c)?(t=Fs(c,t),r.tag=1,r=sv(null,r,c,t,a)):(r.tag=0,r=ff(null,r,c,t,a));else{if(c!=null){if(d=c.$$typeof,d===G){r.tag=11,r=Jy(null,r,c,t,a);break e}else if(d===C){r.tag=14,r=ev(null,r,c,t,a);break e}}throw r=mt(c)||c,Error(s(306,r,""))}}return r;case 0:return ff(t,r,r.type,r.pendingProps,a);case 1:return c=r.type,d=Fs(c,r.pendingProps),sv(t,r,c,d,a);case 3:e:{if(ye(r,r.stateNode.containerInfo),t===null)throw Error(s(387));c=r.pendingProps;var m=r.memoizedState;d=m.element,qd(t,r),ul(r,c,null,a);var T=r.memoizedState;if(c=T.cache,Cr(r,kt,c),c!==m.cache&&jd(r,[kt],a,!0),cl(),c=T.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=av(t,r,c,a);break e}else if(c!==d){d=Vn(Error(s(424)),r),nl(d),r=av(t,r,c,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=Qn(t.firstChild),un=r,Fe=!0,Ps=null,pi=!0,a=qy(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(tl(),c===d){r=Ji(t,r,a);break e}Ht(t,r,c,a)}r=r.child}return r;case 26:return Ru(t,r),t===null?(a=m_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,t=r.pendingProps,c=zu(we.current).createElement(a),c[It]=r,c[bt]=t,$t(c,a,t),pt(c),r.stateNode=c):r.memoizedState=m_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ei(r),t===null&&Fe&&(c=r.stateNode=h_(r.type,r.pendingProps,we.current),un=r,pi=!0,d=dt,Fr(r.type)?(em=d,dt=Qn(c.firstChild)):dt=d),Ht(t,r,r.pendingProps.children,a),Ru(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Fe&&((d=c=dt)&&(c=SS(c,r.type,r.pendingProps,pi),c!==null?(r.stateNode=c,un=r,dt=Qn(c.firstChild),pi=!1,d=!0):d=!1),d||Ls(r)),ei(r),d=r.type,m=r.pendingProps,T=t!==null?t.memoizedProps:null,c=m.children,Xf(d,m)?c=null:T!==null&&Xf(d,T)&&(r.flags|=32),r.memoizedState!==null&&(d=Yd(t,r,qb,null,null,a),kl._currentValue=d),Ru(t,r),Ht(t,r,c,a),r.child;case 6:return t===null&&Fe&&((t=a=dt)&&(a=AS(a,r.pendingProps,pi),a!==null?(r.stateNode=a,un=r,dt=null,t=!0):t=!1),t||Ls(r)),null;case 13:return ov(t,r,a);case 4:return ye(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=qa(r,null,c,a):Ht(t,r,c,a),r.child;case 11:return Jy(t,r,r.type,r.pendingProps,a);case 7:return Ht(t,r,r.pendingProps,a),r.child;case 8:return Ht(t,r,r.pendingProps.children,a),r.child;case 12:return Ht(t,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Cr(r,r.type,c.value),Ht(t,r,c.children,a),r.child;case 9:return d=r.type._context,c=r.pendingProps.children,Bs(r),d=Zt(d),c=c(d),r.flags|=1,Ht(t,r,c,a),r.child;case 14:return ev(t,r,r.type,r.pendingProps,a);case 15:return tv(t,r,r.type,r.pendingProps,a);case 19:return cv(t,r,a);case 31:return c=r.pendingProps,a=r.mode,c={mode:c.mode,children:c.children},t===null?(a=xu(c,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=$i(t.child,c),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return nv(t,r,a);case 24:return Bs(r),c=Zt(kt),t===null?(d=Ud(),d===null&&(d=nt,m=Pd(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),r.memoizedState={parent:c,cache:d},zd(r),Cr(r,kt,d)):((t.lanes&a)!==0&&(qd(t,r),ul(r,null,null,a),cl()),d=t.memoizedState,m=r.memoizedState,d.parent!==c?(d={parent:c,cache:c},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Cr(r,kt,c)):(c=m.cache,Cr(r,kt,c),c!==d.cache&&jd(r,[kt],a,!0))),Ht(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function er(t){t.flags|=4}function hv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!__(r)){if(r=Un.current,r!==null&&((Ue&4194048)===Ue?gi!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==gi))throw ol=Bd,Yg;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Mo():536870912,t.lanes|=r,$a|=r)}function yl(t,r){if(!Fe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function lt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=a,r}function Wb(t,r,a){var c=r.pendingProps;switch(kd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Xi(kt),Xt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(el(r)?er(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fg())),lt(r),null;case 26:return a=r.memoizedState,t===null?(er(r),a!==null?(lt(r),hv(r,a)):(lt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(er(r),lt(r),hv(r,a)):(lt(r),r.flags&=-16777217):(t.memoizedProps!==c&&er(r),lt(r),r.flags&=-16777217),null;case 27:Fn(r),a=we.current;var d=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==c&&er(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return lt(r),null}t=fe.current,el(r)?zg(r):(t=h_(d,c,a),r.stateNode=t,er(r))}return lt(r),null;case 5:if(Fn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&er(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(t=fe.current,el(r))zg(r);else{switch(d=zu(we.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?t.multiple=!0:c.size&&(t.size=c.size);break;default:t=typeof c.is=="string"?d.createElement(a,{is:c.is}):d.createElement(a)}}t[It]=r,t[bt]=c;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=t;e:switch($t(t,a,c),a){case"button":case"input":case"select":case"textarea":t=!!c.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&er(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&er(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,el(r)){if(t=r.stateNode,a=r.memoizedProps,c=null,d=un,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}t[It]=r,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||r_(t.nodeValue,a)),t||Ls(r)}else t=zu(t).createTextNode(c),t[It]=r,r.stateNode=t}return lt(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=el(r),c!==null&&c.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[It]=r}else tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),d=!1}else d=Fg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Zi(r),r):(Zi(r),null)}if(Zi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=c!==null,t=t!==null&&t.memoizedState!==null,a){c=r.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==d&&(c.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Cu(r,r.updateQueue),lt(r),null;case 4:return Xt(),t===null&&Gf(r.stateNode.containerInfo),lt(r),null;case 10:return Xi(r.type),lt(r),null;case 19:if(he(Ot),d=r.memoizedState,d===null)return lt(r),null;if(c=(r.flags&128)!==0,m=d.rendering,m===null)if(c)yl(d,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=bu(t),m!==null){for(r.flags|=128,yl(d,!1),t=m.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ug(a,t),a=a.sibling;return ee(Ot,Ot.current&1|2),r.child}t=t.sibling}d.tail!==null&&dn()>Du&&(r.flags|=128,c=!0,yl(d,!1),r.lanes=4194304)}else{if(!c)if(t=bu(m),t!==null){if(r.flags|=128,c=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),yl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Fe)return lt(r),null}else 2*dn()-d.renderingStartTime>Du&&a!==536870912&&(r.flags|=128,c=!0,yl(d,!1),r.lanes=4194304);d.isBackwards?(m.sibling=r.child,r.child=m):(t=d.last,t!==null?t.sibling=m:r.child=m,d.last=m)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=dn(),r.sibling=null,t=Ot.current,ee(Ot,c?t&1|2:t&1),r):(lt(r),null);case 22:case 23:return Zi(r),$d(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&Cu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),t!==null&&he(zs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Xi(kt),lt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Zb(t,r){switch(kd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Xi(kt),Xt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Fn(r),null;case 13:if(Zi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));tl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return he(Ot),null;case 4:return Xt(),null;case 10:return Xi(r.type),null;case 22:case 23:return Zi(r),$d(),t!==null&&he(zs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Xi(kt),null;case 25:return null;default:return null}}function dv(t,r){switch(kd(r),r.tag){case 3:Xi(kt),Xt();break;case 26:case 27:case 5:Fn(r);break;case 4:Xt();break;case 13:Zi(r);break;case 19:he(Ot);break;case 10:Xi(r.type);break;case 22:case 23:Zi(r),$d(),t!==null&&he(zs);break;case 24:Xi(kt)}}function vl(t,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&t)===t){c=void 0;var m=a.create,T=a.inst;c=m(),T.destroy=c}a=a.next}while(a!==d)}}catch(b){tt(r,r.return,b)}}function Vr(t,r,a){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&t)===t){var T=c.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,d=r;var M=a,X=b;try{X()}catch(ne){tt(d,M,ne)}}}c=c.next}while(c!==m)}}catch(ne){tt(r,r.return,ne)}}function fv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ey(r,a)}catch(c){tt(t,t.return,c)}}}function mv(t,r,a){a.props=Fs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){tt(t,r,c)}}function _l(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(d){tt(t,r,d)}}function yi(t,r){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){tt(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){tt(t,r,d)}else a.current=null}function pv(t){var r=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){tt(t,t.return,d)}}function Tf(t,r,a){try{var c=t.stateNode;_S(c,t.type,a,r),c[bt]=r}catch(d){tt(t,t.return,d)}}function gv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fr(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,r,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bu));else if(c!==4&&(c===27&&Fr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(bf(t,r,a),t=t.sibling;t!==null;)bf(t,r,a),t=t.sibling}function Iu(t,r,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(c!==4&&(c===27&&Fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,r,a),t=t.sibling;t!==null;)Iu(t,r,a),t=t.sibling}function yv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);$t(r,c,a),r[It]=t,r[bt]=a}catch(m){tt(t,t.return,m)}}var tr=!1,yt=!1,Sf=!1,vv=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Jb(t,r){if(t=t.containerInfo,Yf=Ku,t=Ig(t),Td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,b=-1,M=-1,X=0,ne=0,ae=t,W=null;t:for(;;){for(var Z;ae!==a||d!==0&&ae.nodeType!==3||(b=T+d),ae!==m||c!==0&&ae.nodeType!==3||(M=T+c),ae.nodeType===3&&(T+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)W=ae,ae=Z;for(;;){if(ae===t)break t;if(W===a&&++X===d&&(b=T),W===m&&++ne===c&&(M=T),(Z=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=Z}a=b===-1||M===-1?null:{start:b,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qf={focusedElem:t,selectionRange:a},Ku=!1,Pt=r;Pt!==null;)if(r=Pt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Pt=t;else for(;Pt!==null;){switch(r=Pt,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=r,d=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var Se=Fs(a.type,d,a.elementType===a.type);t=c.getSnapshotBeforeUpdate(Se,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(Te){tt(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Pt=t;break}Pt=r.return}}function _v(t,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:jr(t,a),c&4&&vl(5,a);break;case 1:if(jr(t,a),c&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){tt(a,a.return,T)}else{var d=Fs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(a,a.return,T)}}c&64&&fv(a),c&512&&_l(a,a.return);break;case 3:if(jr(t,a),c&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ey(t,r)}catch(T){tt(a,a.return,T)}}break;case 27:r===null&&c&4&&yv(a);case 26:case 5:jr(t,a),r===null&&c&4&&pv(a),c&512&&_l(a,a.return);break;case 12:jr(t,a);break;case 13:jr(t,a),c&4&&wv(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=lS.bind(null,a),RS(t,a))));break;case 22:if(c=a.memoizedState!==null||tr,!c){r=r!==null&&r.memoizedState!==null||yt,d=tr;var m=yt;tr=c,(yt=r)&&!m?Pr(t,a,(a.subtreeFlags&8772)!==0):jr(t,a),tr=d,yt=m}break;case 30:break;default:jr(t,a)}}function Ev(t){var r=t.alternate;r!==null&&(t.alternate=null,Ev(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Sr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,mn=!1;function nr(t,r,a){for(a=a.child;a!==null;)Tv(t,r,a),a=a.sibling}function Tv(t,r,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:yt||yi(a,r),nr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||yi(a,r);var c=at,d=mn;Fr(a.type)&&(at=a.stateNode,mn=!1),nr(t,r,a),Cl(a.stateNode),at=c,mn=d;break;case 5:yt||yi(a,r);case 6:if(c=at,d=mn,at=null,nr(t,r,a),at=c,mn=d,at!==null)if(mn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(m){tt(a,r,m)}else try{at.removeChild(a.stateNode)}catch(m){tt(a,r,m)}break;case 18:at!==null&&(mn?(t=at,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),jl(t)):c_(at,a.stateNode));break;case 4:c=at,d=mn,at=a.stateNode.containerInfo,mn=!0,nr(t,r,a),at=c,mn=d;break;case 0:case 11:case 14:case 15:yt||Vr(2,a,r),yt||Vr(4,a,r),nr(t,r,a);break;case 1:yt||(yi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&mv(a,r,c)),nr(t,r,a);break;case 21:nr(t,r,a);break;case 22:yt=(c=yt)||a.memoizedState!==null,nr(t,r,a),yt=c;break;default:nr(t,r,a)}}function wv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jl(t)}catch(a){tt(r,r.return,a)}}function eS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new vv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new vv),r;default:throw Error(s(435,t.tag))}}function Af(t,r){var a=eS(t);r.forEach(function(c){var d=cS.bind(null,t,c);a.has(c)||(a.add(c),c.then(d,d))})}function bn(t,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],m=t,T=r,b=T;e:for(;b!==null;){switch(b.tag){case 27:if(Fr(b.type)){at=b.stateNode,mn=!1;break e}break;case 5:at=b.stateNode,mn=!1;break e;case 3:case 4:at=b.stateNode.containerInfo,mn=!0;break e}b=b.return}if(at===null)throw Error(s(160));Tv(m,T,d),at=null,mn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)bv(r,t),r=r.sibling}var Yn=null;function bv(t,r){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(r,t),Sn(t),c&4&&(Vr(3,t,t.return),vl(3,t),Vr(5,t,t.return));break;case 1:bn(r,t),Sn(t),c&512&&(yt||a===null||yi(a,a.return)),c&64&&tr&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=Yn;if(bn(r,t),Sn(t),c&512&&(yt||a===null||yi(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":m=d.getElementsByTagName("title")[0],(!m||m[vs]||m[It]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(c),d.head.insertBefore(m,d.querySelector("head > title"))),$t(m,c,a),m[It]=t,pt(m),c=m;break e;case"link":var T=y_("link","href",d).get(c+(a.href||""));if(T){for(var b=0;b<T.length;b++)if(m=T[b],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(b,1);break t}}m=d.createElement(c),$t(m,c,a),d.head.appendChild(m);break;case"meta":if(T=y_("meta","content",d).get(c+(a.content||""))){for(b=0;b<T.length;b++)if(m=T[b],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(b,1);break t}}m=d.createElement(c),$t(m,c,a),d.head.appendChild(m);break;default:throw Error(s(468,c))}m[It]=t,pt(m),c=m}t.stateNode=c}else v_(d,t.type,t.stateNode);else t.stateNode=g_(d,c,t.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?v_(d,t.type,t.stateNode):g_(d,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Tf(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(r,t),Sn(t),c&512&&(yt||a===null||yi(a,a.return)),a!==null&&c&4&&Tf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(r,t),Sn(t),c&512&&(yt||a===null||yi(a,a.return)),t.flags&32){d=t.stateNode;try{Dn(d,"")}catch(Z){tt(t,t.return,Z)}}c&4&&t.stateNode!=null&&(d=t.memoizedProps,Tf(t,d,a!==null?a.memoizedProps:d)),c&1024&&(Sf=!0);break;case 6:if(bn(r,t),Sn(t),c&4){if(t.stateNode===null)throw Error(s(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(Z){tt(t,t.return,Z)}}break;case 3:if(Hu=null,d=Yn,Yn=qu(r.containerInfo),bn(r,t),Yn=d,Sn(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{jl(r.containerInfo)}catch(Z){tt(t,t.return,Z)}Sf&&(Sf=!1,Sv(t));break;case 4:c=Yn,Yn=qu(t.stateNode.containerInfo),bn(r,t),Sn(t),Yn=c;break;case 12:bn(r,t),Sn(t);break;case 13:bn(r,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Df=dn()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Af(t,c)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,X=tr,ne=yt;if(tr=X||d,yt=ne||M,bn(r,t),yt=ne,tr=X,Sn(t),c&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||M||tr||yt||Hs(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(m=M.stateNode,d)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{b=M.stateNode;var ae=M.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;b.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){tt(M,M.return,Z)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(Z){tt(M,M.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Af(t,a))));break;case 19:bn(r,t),Sn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Af(t,c)));break;case 30:break;case 21:break;default:bn(r,t),Sn(t)}}function Sn(t){var r=t.flags;if(r&2){try{for(var a,c=t.return;c!==null;){if(gv(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,m=wf(t);Iu(t,m,d);break;case 5:var T=a.stateNode;a.flags&32&&(Dn(T,""),a.flags&=-33);var b=wf(t);Iu(t,b,T);break;case 3:case 4:var M=a.stateNode.containerInfo,X=wf(t);bf(t,X,M);break;default:throw Error(s(161))}}catch(ne){tt(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Sv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Sv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function jr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_v(t,r.alternate,r),r=r.sibling}function Hs(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Vr(4,r,r.return),Hs(r);break;case 1:yi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&mv(r,r.return,a),Hs(r);break;case 27:Cl(r.stateNode);case 26:case 5:yi(r,r.return),Hs(r);break;case 22:r.memoizedState===null&&Hs(r);break;case 30:Hs(r);break;default:Hs(r)}t=t.sibling}}function Pr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,d=t,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:Pr(d,m,a),vl(4,m);break;case 1:if(Pr(d,m,a),c=m,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(X){tt(c,c.return,X)}if(c=m,d=c.updateQueue,d!==null){var b=c.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)Jg(M[d],b)}catch(X){tt(c,c.return,X)}}a&&T&64&&fv(m),_l(m,m.return);break;case 27:yv(m);case 26:case 5:Pr(d,m,a),a&&c===null&&T&4&&pv(m),_l(m,m.return);break;case 12:Pr(d,m,a);break;case 13:Pr(d,m,a),a&&T&4&&wv(d,m);break;case 22:m.memoizedState===null&&Pr(d,m,a),_l(m,m.return);break;case 30:break;default:Pr(d,m,a)}r=r.sibling}}function Rf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&rl(a))}function xf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t))}function vi(t,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Av(t,r,a,c),r=r.sibling}function Av(t,r,a,c){var d=r.flags;switch(r.tag){case 0:case 11:case 15:vi(t,r,a,c),d&2048&&vl(9,r);break;case 1:vi(t,r,a,c);break;case 3:vi(t,r,a,c),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t)));break;case 12:if(d&2048){vi(t,r,a,c),t=r.stateNode;try{var m=r.memoizedProps,T=m.id,b=m.onPostCommit;typeof b=="function"&&b(T,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){tt(r,r.return,M)}}else vi(t,r,a,c);break;case 13:vi(t,r,a,c);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?vi(t,r,a,c):El(t,r):m._visibility&2?vi(t,r,a,c):(m._visibility|=2,Fa(t,r,a,c,(r.subtreeFlags&10256)!==0)),d&2048&&Rf(T,r);break;case 24:vi(t,r,a,c),d&2048&&xf(r.alternate,r);break;default:vi(t,r,a,c)}}function Fa(t,r,a,c,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,T=r,b=a,M=c,X=T.flags;switch(T.tag){case 0:case 11:case 15:Fa(m,T,b,M,d),vl(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?Fa(m,T,b,M,d):El(m,T):(ne._visibility|=2,Fa(m,T,b,M,d)),d&&X&2048&&Rf(T.alternate,T);break;case 24:Fa(m,T,b,M,d),d&&X&2048&&xf(T.alternate,T);break;default:Fa(m,T,b,M,d)}r=r.sibling}}function El(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,c=r,d=c.flags;switch(c.tag){case 22:El(a,c),d&2048&&Rf(c.alternate,c);break;case 24:El(a,c),d&2048&&xf(c.alternate,c);break;default:El(a,c)}r=r.sibling}}var Tl=8192;function Ha(t){if(t.subtreeFlags&Tl)for(t=t.child;t!==null;)Rv(t),t=t.sibling}function Rv(t){switch(t.tag){case 26:Ha(t),t.flags&Tl&&t.memoizedState!==null&&US(Yn,t.memoizedState,t.memoizedProps);break;case 5:Ha(t);break;case 3:case 4:var r=Yn;Yn=qu(t.stateNode.containerInfo),Ha(t),Yn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Tl,Tl=16777216,Ha(t),Tl=r):Ha(t));break;default:Ha(t)}}function xv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function wl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Pt=c,Iv(c,t)}xv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cv(t),t=t.sibling}function Cv(t){switch(t.tag){case 0:case 11:case 15:wl(t),t.flags&2048&&Vr(9,t,t.return);break;case 3:wl(t);break;case 12:wl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Nu(t)):wl(t);break;default:wl(t)}}function Nu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Pt=c,Iv(c,t)}xv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Vr(8,r,r.return),Nu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(r));break;default:Nu(r)}t=t.sibling}}function Iv(t,r){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Vr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:rl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Pt=c;else e:for(a=t;Pt!==null;){c=Pt;var d=c.sibling,m=c.return;if(Ev(c),c===a){Pt=null;break e}if(d!==null){d.return=m,Pt=d;break e}Pt=m}}}var tS={getCacheForType:function(t){var r=Zt(kt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},nS=typeof WeakMap=="function"?WeakMap:Map,Ye=0,nt=null,Oe=null,Ue=0,Qe=0,An=null,Lr=!1,Ga=!1,Cf=!1,ir=0,ft=0,Ur=0,Gs=0,If=0,Bn=0,$a=0,bl=null,pn=null,Nf=!1,Df=0,Du=1/0,ku=null,Br=null,Gt=0,zr=null,Ka=null,Ya=0,kf=0,Of=null,Nv=null,Sl=0,Mf=null;function Rn(){if((Ye&2)!==0&&Ue!==0)return Ue&-Ue;if(te.T!==null){var t=Va;return t!==0?t:zf()}return wr()}function Dv(){Bn===0&&(Bn=(Ue&536870912)===0||Fe?Oo():536870912);var t=Un.current;return t!==null&&(t.flags|=32),Bn}function xn(t,r,a){(t===nt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Qa(t,0),qr(t,Ue,Bn,!1)),Vi(t,a),((Ye&2)===0||t!==nt)&&(t===nt&&((Ye&2)===0&&(Gs|=a),ft===4&&qr(t,Ue,Bn,!1)),_i(t))}function kv(t,r,a){if((Ye&6)!==0)throw Error(s(327));var c=!a&&(r&124)===0&&(r&t.expiredLanes)===0||ys(t,r),d=c?sS(t,r):Pf(t,r,!0),m=c;do{if(d===0){Ga&&!c&&qr(t,r,0,!1);break}else{if(a=t.current.alternate,m&&!iS(a)){d=Pf(t,r,!1),m=!1;continue}if(d===2){if(m=r,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var b=t;d=bl;var M=b.current.memoizedState.isDehydrated;if(M&&(Qa(b,T).flags|=256),T=Pf(b,T,!1),T!==2){if(Cf&&!M){b.errorRecoveryDisabledLanes|=m,Gs|=m,d=4;break e}m=pn,pn=d,m!==null&&(pn===null?pn=m:pn.push.apply(pn,m))}d=T}if(m=!1,d!==2)continue}}if(d===1){Qa(t,0),qr(t,r,0,!0);break}e:{switch(c=t,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:qr(c,r,Bn,!Lr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Df+300-dn(),10<d)){if(qr(c,r,Bn,!Lr),da(c,0,!0)!==0)break e;c.timeoutHandle=o_(Ov.bind(null,c,a,pn,ku,Nf,r,Bn,Gs,$a,Lr,m,2,-0,0),d);break e}Ov(c,a,pn,ku,Nf,r,Bn,Gs,$a,Lr,m,0,-0,0)}}break}while(!0);_i(t)}function Ov(t,r,a,c,d,m,T,b,M,X,ne,ae,W,Z){if(t.timeoutHandle=-1,ae=r.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:LS},Rv(r),ae=BS(),ae!==null)){t.cancelPendingCommit=ae(Bv.bind(null,t,r,m,a,c,d,T,b,M,ne,1,W,Z)),qr(t,m,T,!X);return}Bv(t,r,m,a,c,d,T,b,M)}function iS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Tn(m(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qr(t,r,a,c){r&=~If,r&=~Gs,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var d=r;0<d;){var m=31-Wt(d),T=1<<m;c[m]=-1,d&=~T}a!==0&&ri(t,a,r)}function Ou(){return(Ye&6)===0?(Al(0),!1):!0}function Vf(){if(Oe!==null){if(Qe===0)var t=Oe.return;else t=Oe,Qi=Us=null,Wd(t),za=null,pl=0,t=Oe;for(;t!==null;)dv(t.alternate,t),t=t.return;Oe=null}}function Qa(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,TS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vf(),nt=t,Oe=a=$i(t.current,null),Ue=r,Qe=0,An=null,Lr=!1,Ga=ys(t,r),Cf=!1,$a=Bn=If=Gs=Ur=ft=0,pn=bl=null,Nf=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var d=31-Wt(c),m=1<<d;r|=t[d],c&=~m}return ir=r,tu(),a}function Mv(t,r){De=null,te.H=Eu,r===al||r===uu?(r=Wg(),Qe=3):r===Yg?(r=Wg(),Qe=4):Qe=r===Zy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,Oe===null&&(ft=1,Au(t,Vn(r,t.current)))}function Vv(){var t=te.H;return te.H=Eu,t===null?Eu:t}function jv(){var t=te.A;return te.A=tS,t}function jf(){ft=4,Lr||(Ue&4194048)!==Ue&&Un.current!==null||(Ga=!0),(Ur&134217727)===0&&(Gs&134217727)===0||nt===null||qr(nt,Ue,Bn,!1)}function Pf(t,r,a){var c=Ye;Ye|=2;var d=Vv(),m=jv();(nt!==t||Ue!==r)&&(ku=null,Qa(t,r)),r=!1;var T=ft;e:do try{if(Qe!==0&&Oe!==null){var b=Oe,M=An;switch(Qe){case 8:Vf(),T=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(r=!0);var X=Qe;if(Qe=0,An=null,Xa(t,b,M,X),a&&Ga){T=0;break e}break;default:X=Qe,Qe=0,An=null,Xa(t,b,M,X)}}rS(),T=ft;break}catch(ne){Mv(t,ne)}while(!0);return r&&t.shellSuspendCounter++,Qi=Us=null,Ye=c,te.H=d,te.A=m,Oe===null&&(nt=null,Ue=0,tu()),T}function rS(){for(;Oe!==null;)Pv(Oe)}function sS(t,r){var a=Ye;Ye|=2;var c=Vv(),d=jv();nt!==t||Ue!==r?(ku=null,Du=dn()+500,Qa(t,r)):Ga=ys(t,r);e:do try{if(Qe!==0&&Oe!==null){r=Oe;var m=An;t:switch(Qe){case 1:Qe=0,An=null,Xa(t,r,m,1);break;case 2:case 9:if(Qg(m)){Qe=0,An=null,Lv(r);break}r=function(){Qe!==2&&Qe!==9||nt!==t||(Qe=7),_i(t)},m.then(r,r);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Qg(m)?(Qe=0,An=null,Lv(r)):(Qe=0,An=null,Xa(t,r,m,7));break;case 5:var T=null;switch(Oe.tag){case 26:T=Oe.memoizedState;case 5:case 27:var b=Oe;if(!T||__(T)){Qe=0,An=null;var M=b.sibling;if(M!==null)Oe=M;else{var X=b.return;X!==null?(Oe=X,Mu(X)):Oe=null}break t}}Qe=0,An=null,Xa(t,r,m,5);break;case 6:Qe=0,An=null,Xa(t,r,m,6);break;case 8:Vf(),ft=6;break e;default:throw Error(s(462))}}aS();break}catch(ne){Mv(t,ne)}while(!0);return Qi=Us=null,te.H=c,te.A=d,Ye=a,Oe!==null?0:(nt=null,Ue=0,tu(),ft)}function aS(){for(;Oe!==null&&!Er();)Pv(Oe)}function Pv(t){var r=uv(t.alternate,t,ir);t.memoizedProps=t.pendingProps,r===null?Mu(t):Oe=r}function Lv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=rv(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=rv(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Wd(r);default:dv(a,r),r=Oe=Ug(r,ir),r=uv(a,r,ir)}t.memoizedProps=t.pendingProps,r===null?Mu(t):Oe=r}function Xa(t,r,a,c){Qi=Us=null,Wd(r),za=null,pl=0;var d=r.return;try{if(Qb(t,d,r,a,Ue)){ft=1,Au(t,Vn(a,t.current)),Oe=null;return}}catch(m){if(d!==null)throw Oe=d,m;ft=1,Au(t,Vn(a,t.current)),Oe=null;return}r.flags&32768?(Fe||c===1?t=!0:Ga||(Ue&536870912)!==0?t=!1:(Lr=t=!0,(c===2||c===9||c===3||c===6)&&(c=Un.current,c!==null&&c.tag===13&&(c.flags|=16384))),Uv(r,t)):Mu(r)}function Mu(t){var r=t;do{if((r.flags&32768)!==0){Uv(r,Lr);return}t=r.return;var a=Wb(r.alternate,r,ir);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);ft===0&&(ft=5)}function Uv(t,r){do{var a=Zb(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ft=6,Oe=null}function Bv(t,r,a,c,d,m,T,b,M){t.cancelPendingCommit=null;do Vu();while(Gt!==0);if((Ye&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Rd,Vo(t,a,m,T,b,M),t===nt&&(Oe=nt=null,Ue=0),Ka=r,zr=t,Ya=a,kf=m,Of=d,Nv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,uS(fs,function(){return Gv(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,d=Q.p,Q.p=2,T=Ye,Ye|=4;try{Jb(t,r,a)}finally{Ye=T,Q.p=d,te.T=c}}Gt=1,zv(),qv(),Fv()}}function zv(){if(Gt===1){Gt=0;var t=zr,r=Ka,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var c=Q.p;Q.p=2;var d=Ye;Ye|=4;try{bv(r,t);var m=Qf,T=Ig(t.containerInfo),b=m.focusedElem,M=m.selectionRange;if(T!==b&&b&&b.ownerDocument&&Cg(b.ownerDocument.documentElement,b)){if(M!==null&&Td(b)){var X=M.start,ne=M.end;if(ne===void 0&&(ne=X),"selectionStart"in b)b.selectionStart=X,b.selectionEnd=Math.min(ne,b.value.length);else{var ae=b.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Se=b.textContent.length,Te=Math.min(M.start,Se),et=M.end===void 0?Te:Math.min(M.end,Se);!Z.extend&&Te>et&&(T=et,et=Te,Te=T);var H=xg(b,Te),L=xg(b,et);if(H&&L&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var Y=ae.createRange();Y.setStart(H.node,H.offset),Z.removeAllRanges(),Te>et?(Z.addRange(Y),Z.extend(L.node,L.offset)):(Y.setEnd(L.node,L.offset),Z.addRange(Y))}}}}for(ae=[],Z=b;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ae.length;b++){var re=ae[b];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ku=!!Yf,Qf=Yf=null}finally{Ye=d,Q.p=c,te.T=a}}t.current=r,Gt=2}}function qv(){if(Gt===2){Gt=0;var t=zr,r=Ka,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var c=Q.p;Q.p=2;var d=Ye;Ye|=4;try{_v(t,r.alternate,r)}finally{Ye=d,Q.p=c,te.T=a}}Gt=3}}function Fv(){if(Gt===4||Gt===3){Gt=0,ii();var t=zr,r=Ka,a=Ya,c=Nv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Gt=5:(Gt=0,Ka=zr=null,Hv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Br=null),fa(a),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=te.T,d=Q.p,Q.p=2,te.T=null;try{for(var m=t.onRecoverableError,T=0;T<c.length;T++){var b=c[T];m(b.value,{componentStack:b.stack})}}finally{te.T=r,Q.p=d}}(Ya&3)!==0&&Vu(),_i(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Mf?Sl++:(Sl=0,Mf=t):Sl=0,Al(0)}}function Hv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,rl(r)))}function Vu(t){return zv(),qv(),Fv(),Gv()}function Gv(){if(Gt!==5)return!1;var t=zr,r=kf;kf=0;var a=fa(Ya),c=te.T,d=Q.p;try{Q.p=32>a?32:a,te.T=null,a=Of,Of=null;var m=zr,T=Ya;if(Gt=0,Ka=zr=null,Ya=0,(Ye&6)!==0)throw Error(s(331));var b=Ye;if(Ye|=4,Cv(m.current),Av(m,m.current,T,a),Ye=b,Al(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ht,m)}catch{}return!0}finally{Q.p=d,te.T=c,Hv(t,r)}}function $v(t,r,a){r=Vn(a,r),r=df(t.stateNode,r,2),t=Dr(t,r,2),t!==null&&(Vi(t,2),_i(t))}function tt(t,r,a){if(t.tag===3)$v(t,t,a);else for(;r!==null;){if(r.tag===3){$v(r,t,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Br===null||!Br.has(c))){t=Vn(a,t),a=Xy(2),c=Dr(r,a,2),c!==null&&(Wy(a,c,r,t),Vi(c,2),_i(c));break}}r=r.return}}function Lf(t,r,a){var c=t.pingCache;if(c===null){c=t.pingCache=new nS;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(Cf=!0,d.add(a),t=oS.bind(null,t,r,a),r.then(t,t))}function oS(t,r,a){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(Ue&a)===a&&(ft===4||ft===3&&(Ue&62914560)===Ue&&300>dn()-Df?(Ye&2)===0&&Qa(t,0):If|=a,$a===Ue&&($a=0)),_i(t)}function Kv(t,r){r===0&&(r=Mo()),t=Da(t,r),t!==null&&(Vi(t,r),_i(t))}function lS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Kv(t,a)}function cS(t,r){var a=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),Kv(t,a)}function uS(t,r){return ti(t,r)}var ju=null,Wa=null,Uf=!1,Pu=!1,Bf=!1,$s=0;function _i(t){t!==Wa&&t.next===null&&(Wa===null?ju=Wa=t:Wa=Wa.next=t),Pu=!0,Uf||(Uf=!0,dS())}function Al(t,r){if(!Bf&&Pu){Bf=!0;do for(var a=!1,c=ju;c!==null;){if(t!==0){var d=c.pendingLanes;if(d===0)var m=0;else{var T=c.suspendedLanes,b=c.pingedLanes;m=(1<<31-Wt(42|t)+1)-1,m&=d&~(T&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Wv(c,m))}else m=Ue,m=da(c,c===nt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ys(c,m)||(a=!0,Wv(c,m));c=c.next}while(a);Bf=!1}}function hS(){Yv()}function Yv(){Pu=Uf=!1;var t=0;$s!==0&&(ES()&&(t=$s),$s=0);for(var r=dn(),a=null,c=ju;c!==null;){var d=c.next,m=Qv(c,r);m===0?(c.next=null,a===null?ju=d:a.next=d,d===null&&(Wa=a)):(a=c,(t!==0||(m&3)!==0)&&(Pu=!0)),c=d}Al(t)}function Qv(t,r){for(var a=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Wt(m),b=1<<T,M=d[T];M===-1?((b&a)===0||(b&c)!==0)&&(d[T]=ko(b,r)):M<=r&&(t.expiredLanes|=b),m&=~b}if(r=nt,a=Ue,a=da(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===r&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&ni(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ys(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(c!==null&&ni(c),fa(a)){case 2:case 8:a=ua;break;case 32:a=fs;break;case 268435456:a=ha;break;default:a=fs}return c=Xv.bind(null,t),a=ti(a,c),t.callbackPriority=r,t.callbackNode=a,r}return c!==null&&c!==null&&ni(c),t.callbackPriority=2,t.callbackNode=null,2}function Xv(t,r){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Vu()&&t.callbackNode!==a)return null;var c=Ue;return c=da(t,t===nt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(kv(t,c,r),Qv(t,dn()),t.callbackNode!=null&&t.callbackNode===a?Xv.bind(null,t):null)}function Wv(t,r){if(Vu())return null;kv(t,r,!0)}function dS(){wS(function(){(Ye&6)!==0?ti(No,hS):Yv()})}function zf(){return $s===0&&($s=Oo()),$s}function Zv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_a(""+t)}function Jv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function fS(t,r,a,c,d){if(r==="submit"&&a&&a.stateNode===d){var m=Zv((d[bt]||null).action),T=c.submitter;T&&(r=(r=T[bt]||null)?Zv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var b=new Ea("action","action",null,c,d);t.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if($s!==0){var M=T?Jv(d,T):new FormData(d);of(a,{pending:!0,data:M,method:d.method,action:m},null,M)}}else typeof m=="function"&&(b.preventDefault(),M=T?Jv(d,T):new FormData(d),of(a,{pending:!0,data:M,method:d.method,action:m},m,M))},currentTarget:d}]})}}for(var qf=0;qf<Ad.length;qf++){var Ff=Ad[qf],mS=Ff.toLowerCase(),pS=Ff[0].toUpperCase()+Ff.slice(1);Kn(mS,"on"+pS)}Kn(kg,"onAnimationEnd"),Kn(Og,"onAnimationIteration"),Kn(Mg,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(kb,"onTransitionRun"),Kn(Ob,"onTransitionStart"),Kn(Mb,"onTransitionCancel"),Kn(Vg,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function e_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var T=c.length-1;0<=T;T--){var b=c[T],M=b.instance,X=b.currentTarget;if(b=b.listener,M!==m&&d.isPropagationStopped())break e;m=b,d.currentTarget=X;try{m(d)}catch(ne){Su(ne)}d.currentTarget=null,m=M}else for(T=0;T<c.length;T++){if(b=c[T],M=b.instance,X=b.currentTarget,b=b.listener,M!==m&&d.isPropagationStopped())break e;m=b,d.currentTarget=X;try{m(d)}catch(ne){Su(ne)}d.currentTarget=null,m=M}}}}function Me(t,r){var a=r[Po];a===void 0&&(a=r[Po]=new Set);var c=t+"__bubble";a.has(c)||(t_(r,t,2,!1),a.add(c))}function Hf(t,r,a){var c=0;r&&(c|=4),t_(a,t,c,r)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Gf(t){if(!t[Lu]){t[Lu]=!0,Lo.forEach(function(a){a!=="selectionchange"&&(gS.has(a)||Hf(a,!1,t),Hf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Lu]||(r[Lu]=!0,Hf("selectionchange",!1,r))}}function t_(t,r,a,c){switch(A_(r)){case 2:var d=FS;break;case 8:d=HS;break;default:d=sm}a=d.bind(null,r,a,t),d=void 0,!On||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function $f(t,r,a,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var b=c.stateNode.containerInfo;if(b===d)break;if(T===4)for(T=c.return;T!==null;){var M=T.tag;if((M===3||M===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;b!==null;){if(T=ji(b),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){c=m=T;continue e}b=b.parentNode}}c=c.return}Bc(function(){var X=m,ne=kn(a),ae=[];e:{var W=jg.get(t);if(W!==void 0){var Z=Ea,Se=t;switch(t){case"keypress":if(ui(a)===0)break e;case"keydown":case"keyup":Z=Ra;break;case"focusin":Se="focus",Z=ba;break;case"focusout":Se="blur",Z=ba;break;case"beforeblur":case"afterblur":Z=ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Yc;break;case kg:case Og:case Mg:Z=Sa;break;case Vg:Z=Xc;break;case"scroll":case"scrollend":Z=zc;break;case"wheel":Z=xa;break;case"copy":case"cut":case"paste":Z=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Xo;break;case"toggle":case"beforetoggle":Z=Zc}var Te=(r&4)!==0,et=!Te&&(t==="scroll"||t==="scrollend"),H=Te?W!==null?W+"Capture":null:W;Te=[];for(var L=X,Y;L!==null;){var re=L;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||H===null||(re=As(L,H),re!=null&&Te.push(xl(L,re,Y))),et)break;L=L.return}0<Te.length&&(W=new Z(W,Se,null,a,ne),ae.push({event:W,listeners:Te}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==Bi&&(Se=a.relatedTarget||a.fromElement)&&(ji(Se)||Se[Nn]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Se=a.relatedTarget||a.toElement,Z=X,Se=Se?ji(Se):null,Se!==null&&(et=l(Se),Te=Se.tag,Se!==et||Te!==5&&Te!==27&&Te!==6)&&(Se=null)):(Z=null,Se=X),Z!==Se)){if(Te=Mn,re="onMouseLeave",H="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Xo,re="onPointerLeave",H="onPointerEnter",L="pointer"),et=Z==null?W:ai(Z),Y=Se==null?W:ai(Se),W=new Te(re,L+"leave",Z,a,ne),W.target=et,W.relatedTarget=Y,re=null,ji(ne)===X&&(Te=new Te(H,L+"enter",Se,a,ne),Te.target=Y,Te.relatedTarget=et,re=Te),et=re,Z&&Se)t:{for(Te=Z,H=Se,L=0,Y=Te;Y;Y=Za(Y))L++;for(Y=0,re=H;re;re=Za(re))Y++;for(;0<L-Y;)Te=Za(Te),L--;for(;0<Y-L;)H=Za(H),Y--;for(;L--;){if(Te===H||H!==null&&Te===H.alternate)break t;Te=Za(Te),H=Za(H)}Te=null}else Te=null;Z!==null&&n_(ae,W,Z,Te,!1),Se!==null&&et!==null&&n_(ae,et,Se,Te,!0)}}e:{if(W=X?ai(X):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var me=Tg;else if(Dt(W))if(wg)me=Ib;else{me=xb;var ke=Rb}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Fo(X.elementType)&&(me=Tg):me=Cb;if(me&&(me=me(t,X))){Gi(ae,me,a,ne);break e}ke&&ke(t,W,X),t==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Rr(W,"number",W.value)}switch(ke=X?ai(X):window,t){case"focusin":(Dt(ke)||ke.contentEditable==="true")&&(Ca=ke,wd=X,Jo=null);break;case"focusout":Jo=wd=Ca=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Ng(ae,a,ne);break;case"selectionchange":if(Db)break;case"keydown":case"keyup":Ng(ae,a,ne)}var ve;if(fi)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Pe?J(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(E&&a.locale!=="ko"&&(Pe||be!=="onCompositionStart"?be==="onCompositionEnd"&&Pe&&(ve=Go()):(ci=ne,xr="value"in ci?ci.value:ci.textContent,Pe=!0)),ke=Uu(X,be),0<ke.length&&(be=new Yo(be,t,null,a,ne),ae.push({event:be,listeners:ke}),ve?be.data=ve:(ve=ue(a),ve!==null&&(be.data=ve)))),(ve=y?Nt(t,a):Le(t,a))&&(be=Uu(X,"onBeforeInput"),0<be.length&&(ke=new Yo("onBeforeInput","beforeinput",null,a,ne),ae.push({event:ke,listeners:be}),ke.data=ve)),fS(ae,t,X,a,ne)}e_(ae,r)})}function xl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Uu(t,r){for(var a=r+"Capture",c=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=As(t,a),d!=null&&c.unshift(xl(t,d,m)),d=As(t,r),d!=null&&c.push(xl(t,d,m))),t.tag===3)return c;t=t.return}return[]}function Za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n_(t,r,a,c,d){for(var m=r._reactName,T=[];a!==null&&a!==c;){var b=a,M=b.alternate,X=b.stateNode;if(b=b.tag,M!==null&&M===c)break;b!==5&&b!==26&&b!==27||X===null||(M=X,d?(X=As(a,m),X!=null&&T.unshift(xl(a,X,M))):d||(X=As(a,m),X!=null&&T.push(xl(a,X,M)))),a=a.return}T.length!==0&&t.push({event:r,listeners:T})}var yS=/\r\n?/g,vS=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(yS,`
`).replace(vS,"")}function r_(t,r){return r=i_(r),i_(t)===r}function Bu(){}function Je(t,r,a,c,d,m){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Dn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Dn(t,""+c);break;case"className":oi(t,"class",c);break;case"tabIndex":oi(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(t,a,c);break;case"style":qo(t,c,m);break;case"data":if(r!=="object"){oi(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=_a(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Je(t,r,"name",d.name,d,null),Je(t,r,"formEncType",d.formEncType,d,null),Je(t,r,"formMethod",d.formMethod,d,null),Je(t,r,"formTarget",d.formTarget,d,null)):(Je(t,r,"encType",d.encType,d,null),Je(t,r,"method",d.method,d,null),Je(t,r,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=_a(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=Bu);break;case"onScroll":c!=null&&Me("scroll",t);break;case"onScrollEnd":c!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=_a(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Ar(t,"popover",c);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ar(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=pd.get(a)||a,Ar(t,a,c))}}function Kf(t,r,a,c,d,m){switch(a){case"style":qo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof c=="string"?Dn(t,c):(typeof c=="number"||typeof c=="bigint")&&Dn(t,""+c);break;case"onScroll":c!=null&&Me("scroll",t);break;case"onScrollEnd":c!=null&&Me("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Bu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),m=t[bt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(r,m,d),typeof c=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,c,d);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):Ar(t,a,c)}}}function $t(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var c=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,m,T,a,null)}}d&&Je(t,r,"srcSet",a.srcSet,a,null),c&&Je(t,r,"src",a.src,a,null);return;case"input":Me("invalid",t);var b=m=T=d=null,M=null,X=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":d=ne;break;case"type":T=ne;break;case"checked":M=ne;break;case"defaultChecked":X=ne;break;case"value":m=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:Je(t,r,c,ne,a,null)}}ws(t,m,b,M,X,T,d,!1),va(t);return;case"select":Me("invalid",t),c=T=m=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":m=b;break;case"defaultValue":T=b;break;case"multiple":c=b;default:Je(t,r,d,b,a,null)}r=m,a=T,t.multiple=!!c,r!=null?Ui(t,!!c,r,!1):a!=null&&Ui(t,!!c,a,!0);return;case"textarea":Me("invalid",t),m=d=c=null;for(T in a)if(a.hasOwnProperty(T)&&(b=a[T],b!=null))switch(T){case"value":c=b;break;case"defaultValue":d=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:Je(t,r,T,b,a,null)}bs(t,c,d,m),va(t);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(c=a[M],c!=null))switch(M){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Je(t,r,M,c,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(c=0;c<Rl.length;c++)Me(Rl[c],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(c=a[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,X,c,a,null)}return;default:if(Fo(r)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&Kf(t,r,ne,c,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(c=a[b],c!=null&&Je(t,r,b,c,a,null))}function _S(t,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,T=null,b=null,M=null,X=null,ne=null;for(Z in a){var ae=a[Z];if(a.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ae;default:c.hasOwnProperty(Z)||Je(t,r,Z,null,c,ae)}}for(var W in c){var Z=c[W];if(ae=a[W],c.hasOwnProperty(W)&&(Z!=null||ae!=null))switch(W){case"type":m=Z;break;case"name":d=Z;break;case"checked":X=Z;break;case"defaultChecked":ne=Z;break;case"value":T=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:Z!==ae&&Je(t,r,W,Z,c,ae)}}En(t,T,b,M,X,ne,m,d);return;case"select":Z=T=b=W=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Z=M;default:c.hasOwnProperty(m)||Je(t,r,m,null,c,M)}for(d in c)if(m=c[d],M=a[d],c.hasOwnProperty(d)&&(m!=null||M!=null))switch(d){case"value":W=m;break;case"defaultValue":b=m;break;case"multiple":T=m;default:m!==M&&Je(t,r,d,m,c,M)}r=b,a=T,c=Z,W!=null?Ui(t,!!a,W,!1):!!c!=!!a&&(r!=null?Ui(t,!!a,r,!0):Ui(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Je(t,r,b,null,c,d)}for(T in c)if(d=c[T],m=a[T],c.hasOwnProperty(T)&&(d!=null||m!=null))switch(T){case"value":W=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&Je(t,r,T,d,c,m)}We(t,W,Z);return;case"option":for(var Se in a)if(W=a[Se],a.hasOwnProperty(Se)&&W!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Je(t,r,Se,null,c,W)}for(M in c)if(W=c[M],Z=a[M],c.hasOwnProperty(M)&&W!==Z&&(W!=null||Z!=null))switch(M){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Je(t,r,M,W,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)W=a[Te],a.hasOwnProperty(Te)&&W!=null&&!c.hasOwnProperty(Te)&&Je(t,r,Te,null,c,W);for(X in c)if(W=c[X],Z=a[X],c.hasOwnProperty(X)&&W!==Z&&(W!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:Je(t,r,X,W,c,Z)}return;default:if(Fo(r)){for(var et in a)W=a[et],a.hasOwnProperty(et)&&W!==void 0&&!c.hasOwnProperty(et)&&Kf(t,r,et,void 0,c,W);for(ne in c)W=c[ne],Z=a[ne],!c.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||Kf(t,r,ne,W,c,Z);return}}for(var H in a)W=a[H],a.hasOwnProperty(H)&&W!=null&&!c.hasOwnProperty(H)&&Je(t,r,H,null,c,W);for(ae in c)W=c[ae],Z=a[ae],!c.hasOwnProperty(ae)||W===Z||W==null&&Z==null||Je(t,r,ae,W,c,Z)}var Yf=null,Qf=null;function zu(t){return t.nodeType===9?t:t.ownerDocument}function s_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Xf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wf=null;function ES(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(t){return l_.resolve(null).then(t).catch(bS)}:o_;function bS(t){setTimeout(function(){throw t})}function Fr(t){return t==="head"}function c_(t,r){var a=r,c=0,d=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<c&&8>c){a=c;var T=t.ownerDocument;if(a&1&&Cl(T.documentElement),a&2&&Cl(T.body),a&4)for(a=T.head,Cl(a),T=a.firstChild;T;){var b=T.nextSibling,M=T.nodeName;T[vs]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=b}}if(d===0){t.removeChild(m),jl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:c=a.charCodeAt(0)-48;else c=0;a=m}while(a);jl(r)}function Zf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),Sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function SS(t,r,a,c){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[vs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function AS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function RS(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Qn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var em=null;function u_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function h_(t,r,a){switch(r=zu(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Cl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Sr(t)}var zn=new Map,d_=new Set;function qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rr=Q.d;Q.d={f:xS,r:CS,D:IS,C:NS,L:DS,m:kS,X:MS,S:OS,M:VS};function xS(){var t=rr.f(),r=Ou();return t||r}function CS(t){var r=si(t);r!==null&&r.tag===5&&r.type==="form"?ky(r):rr.r(t)}var Ja=typeof document>"u"?null:document;function f_(t,r,a){var c=Ja;if(c&&typeof r=="string"&&r){var d=St(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),d_.has(d)||(d_.add(d),t={rel:t,crossOrigin:a,href:r},c.querySelector(d)===null&&(r=c.createElement("link"),$t(r,"link",t),pt(r),c.head.appendChild(r)))}}function IS(t){rr.D(t),f_("dns-prefetch",t,null)}function NS(t,r){rr.C(t,r),f_("preconnect",t,r)}function DS(t,r,a){rr.L(t,r,a);var c=Ja;if(c&&t&&r){var d='link[rel="preload"][as="'+St(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+St(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+St(a.imageSizes)+'"]')):d+='[href="'+St(t)+'"]';var m=d;switch(r){case"style":m=eo(t);break;case"script":m=to(t)}zn.has(m)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),zn.set(m,t),c.querySelector(d)!==null||r==="style"&&c.querySelector(Il(m))||r==="script"&&c.querySelector(Nl(m))||(r=c.createElement("link"),$t(r,"link",t),pt(r),c.head.appendChild(r)))}}function kS(t,r){rr.m(t,r);var a=Ja;if(a&&t){var c=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+St(c)+'"][href="'+St(t)+'"]',m=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=to(t)}if(!zn.has(m)&&(t=_({rel:"modulepreload",href:t},r),zn.set(m,t),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(m)))return}c=a.createElement("link"),$t(c,"link",t),pt(c),a.head.appendChild(c)}}}function OS(t,r,a){rr.S(t,r,a);var c=Ja;if(c&&t){var d=on(c).hoistableStyles,m=eo(t);r=r||"default";var T=d.get(m);if(!T){var b={loading:0,preload:null};if(T=c.querySelector(Il(m)))b.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=zn.get(m))&&tm(t,a);var M=T=c.createElement("link");pt(M),$t(M,"link",t),M._p=new Promise(function(X,ne){M.onload=X,M.onerror=ne}),M.addEventListener("load",function(){b.loading|=1}),M.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Fu(T,r,c)}T={type:"stylesheet",instance:T,count:1,state:b},d.set(m,T)}}}function MS(t,r){rr.X(t,r);var a=Ja;if(a&&t){var c=on(a).hoistableScripts,d=to(t),m=c.get(d);m||(m=a.querySelector(Nl(d)),m||(t=_({src:t,async:!0},r),(r=zn.get(d))&&nm(t,r),m=a.createElement("script"),pt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function VS(t,r){rr.M(t,r);var a=Ja;if(a&&t){var c=on(a).hoistableScripts,d=to(t),m=c.get(d);m||(m=a.querySelector(Nl(d)),m||(t=_({src:t,async:!0,type:"module"},r),(r=zn.get(d))&&nm(t,r),m=a.createElement("script"),pt(m),$t(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function m_(t,r,a,c){var d=(d=we.current)?qu(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=eo(a.href),a=on(d).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var m=on(d).hoistableStyles,T=m.get(t);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=d.querySelector(Il(t)))&&!m._p&&(T.instance=m,T.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),m||jS(d,t,a,T.state))),r&&c===null)throw Error(s(528,""));return T}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=to(a),a=on(d).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function eo(t){return'href="'+St(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function p_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function jS(t,r,a,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),$t(r,"link",a),pt(r),t.head.appendChild(r))}function to(t){return'[src="'+St(t)+'"]'}function Nl(t){return"script[async]"+t}function g_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+St(a.href)+'"]');if(c)return r.instance=c,pt(c),c;var d=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),pt(c),$t(c,"style",d),Fu(c,a.precedence,t),r.instance=c;case"stylesheet":d=eo(a.href);var m=t.querySelector(Il(d));if(m)return r.state.loading|=4,r.instance=m,pt(m),m;c=p_(a),(d=zn.get(d))&&tm(c,d),m=(t.ownerDocument||t).createElement("link"),pt(m);var T=m;return T._p=new Promise(function(b,M){T.onload=b,T.onerror=M}),$t(m,"link",c),r.state.loading|=4,Fu(m,a.precedence,t),r.instance=m;case"script":return m=to(a.src),(d=t.querySelector(Nl(m)))?(r.instance=d,pt(d),d):(c=a,(d=zn.get(m))&&(c=_({},a),nm(c,d)),t=t.ownerDocument||t,d=t.createElement("script"),pt(d),$t(d,"link",c),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Fu(c,a.precedence,t));return r.instance}function Fu(t,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,m=d,T=0;T<c.length;T++){var b=c[T];if(b.dataset.precedence===r)m=b;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function nm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Hu=null;function y_(t,r,a){if(Hu===null){var c=new Map,d=Hu=new Map;d.set(a,c)}else d=Hu,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[vs]||m[It]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=t+T;var b=c.get(T);b?b.push(m):c.set(T,[m])}}return c}function v_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function PS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function __(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Dl=null;function LS(){}function US(t,r,a){if(Dl===null)throw Error(s(475));var c=Dl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=eo(a.href),m=t.querySelector(Il(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(c.count++,c=Gu.bind(c),t.then(c,c)),r.state.loading|=4,r.instance=m,pt(m);return}m=t.ownerDocument||t,a=p_(a),(d=zn.get(d))&&tm(a,d),m=m.createElement("link"),pt(m);var T=m;T._p=new Promise(function(b,M){T.onload=b,T.onerror=M}),$t(m,"link",a),r.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Gu.bind(c),t.addEventListener("load",r),t.addEventListener("error",r))}}function BS(){if(Dl===null)throw Error(s(475));var t=Dl;return t.stylesheets&&t.count===0&&im(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&im(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Gu(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function im(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,r.forEach(zS,t),$u=null,Gu.call(t))}function zS(t,r){if(!(r.state.loading&4)){var a=$u.get(t);if(a)var c=a.get(null);else{a=new Map,$u.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var T=d[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}d=r.instance,T=d.getAttribute("data-precedence"),m=a.get(T)||c,m===c&&a.set(null,d),a.set(T,d),this.count++,c=Gu.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var kl={$$typeof:z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function qS(t,r,a,c,d,m,T,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function E_(t,r,a,c,d,m,T,b,M,X,ne,ae){return t=new qS(t,r,a,T,b,M,X,ae),r=1,m===!0&&(r|=24),m=wn(3,null,null,r),t.current=m,m.stateNode=t,r=Pd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:r},zd(m),t}function T_(t){return t?(t=ka,t):ka}function w_(t,r,a,c,d,m){d=T_(d),c.context===null?c.context=d:c.pendingContext=d,c=Nr(r),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=Dr(t,c,r),a!==null&&(xn(a,t,r),ll(a,t,r))}function b_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function rm(t,r){b_(t,r),(t=t.alternate)&&b_(t,r)}function S_(t){if(t.tag===13){var r=Da(t,67108864);r!==null&&xn(r,t,67108864),rm(t,67108864)}}var Ku=!0;function FS(t,r,a,c){var d=te.T;te.T=null;var m=Q.p;try{Q.p=2,sm(t,r,a,c)}finally{Q.p=m,te.T=d}}function HS(t,r,a,c){var d=te.T;te.T=null;var m=Q.p;try{Q.p=8,sm(t,r,a,c)}finally{Q.p=m,te.T=d}}function sm(t,r,a,c){if(Ku){var d=am(c);if(d===null)$f(t,r,c,Yu,a),R_(t,c);else if($S(d,t,r,a,c))c.stopPropagation();else if(R_(t,c),r&4&&-1<GS.indexOf(t)){for(;d!==null;){var m=si(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Hn(m.pendingLanes);if(T!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var M=1<<31-Wt(T);b.entanglements[1]|=M,T&=~M}_i(m),(Ye&6)===0&&(Du=dn()+500,Al(0))}}break;case 13:b=Da(m,2),b!==null&&xn(b,m,2),Ou(),rm(m,2)}if(m=am(c),m===null&&$f(t,r,c,Yu,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else $f(t,r,c,null,a)}}function am(t){return t=kn(t),om(t)}var Yu=null;function om(t){if(Yu=null,t=ji(t),t!==null){var r=l(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yu=t,null}function A_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Io()){case No:return 2;case ua:return 8;case fs:case ud:return 32;case ha:return 268435456;default:return 32}default:return 32}}var lm=!1,Hr=null,Gr=null,$r=null,Ol=new Map,Ml=new Map,Kr=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R_(t,r){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Ol.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Vl(t,r,a,c,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=si(r),r!==null&&S_(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function $S(t,r,a,c,d){switch(r){case"focusin":return Hr=Vl(Hr,t,r,a,c,d),!0;case"dragenter":return Gr=Vl(Gr,t,r,a,c,d),!0;case"mouseover":return $r=Vl($r,t,r,a,c,d),!0;case"pointerover":var m=d.pointerId;return Ol.set(m,Vl(Ol.get(m)||null,t,r,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Ml.set(m,Vl(Ml.get(m)||null,t,r,a,c,d)),!0}return!1}function x_(t){var r=ji(t.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,Oc(t.priority,function(){if(a.tag===13){var c=Rn();c=Tr(c);var d=Da(a,c);d!==null&&xn(d,a,c),rm(a,c)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=am(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);Bi=c,a.target.dispatchEvent(c),Bi=null}else return r=si(a),r!==null&&S_(r),t.blockedOn=a,!1;r.shift()}return!0}function C_(t,r,a){Qu(t)&&a.delete(r)}function KS(){lm=!1,Hr!==null&&Qu(Hr)&&(Hr=null),Gr!==null&&Qu(Gr)&&(Gr=null),$r!==null&&Qu($r)&&($r=null),Ol.forEach(C_),Ml.forEach(C_)}function Xu(t,r){t.blockedOn===r&&(t.blockedOn=null,lm||(lm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,KS)))}var Wu=null;function I_(t){Wu!==t&&(Wu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var r=0;r<t.length;r+=3){var a=t[r],c=t[r+1],d=t[r+2];if(typeof c!="function"){if(om(c||a)===null)continue;break}var m=si(a);m!==null&&(t.splice(r,3),r-=3,of(m,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function jl(t){function r(M){return Xu(M,t)}Hr!==null&&Xu(Hr,t),Gr!==null&&Xu(Gr,t),$r!==null&&Xu($r,t),Ol.forEach(r),Ml.forEach(r);for(var a=0;a<Kr.length;a++){var c=Kr[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)x_(a),a.blockedOn===null&&Kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],m=a[c+1],T=d[bt]||null;if(typeof m=="function")T||I_(a);else if(T){var b=null;if(m&&m.hasAttribute("formAction")){if(d=m,T=m[bt]||null)b=T.formAction;else if(om(d)!==null)continue}else b=T.action;typeof b=="function"?a[c+1]=b:(a.splice(c,3),c-=3),I_(a)}}}function cm(t){this._internalRoot=t}Zu.prototype.render=cm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=Rn();w_(a,c,t,r,null,null)},Zu.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;w_(t.current,2,null,t,null,null),Ou(),r[Nn]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var r=wr();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Kr.length&&r!==0&&r<Kr[a].priority;a++);Kr.splice(a,0,t),a===0&&x_(t)}};var N_=e.version;if(N_!=="19.1.1")throw Error(s(527,N_,"19.1.1"));Q.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var YS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{ht=Ju.inject(YS),Ke=Ju}catch{}}return Ll.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,c="",d=$y,m=Ky,T=Yy,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=E_(t,1,!1,null,null,a,c,d,m,T,b,null),t[Nn]=r.current,Gf(t),new cm(r)},Ll.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var c=!1,d="",m=$y,T=Ky,b=Yy,M=null,X=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(X=a.formState)),r=E_(t,1,!0,r,a??null,c,d,m,T,b,M,X),r.context=T_(null),a=r.current,c=Rn(),c=Tr(c),d=Nr(c),d.callback=null,Dr(a,d,c),a=c,r.current.lanes=a,Vi(r,a),_i(r),t[Nn]=r.current,Gf(t),new Zu(r)},Ll.version="19.1.1",Ll}var B_;function sA(){if(B_)return dm.exports;B_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dm.exports=rA(),dm.exports}var aA=sA();const oA=bE(aA);AE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Zl.apply(this,arguments)}var Xr;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Xr||(Xr={}));const z_="popstate";function lA(i){i===void 0&&(i={});function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return Om("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:gh(o)}return uA(e,n,null,i)}function _t(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function RE(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cA(){return Math.random().toString(36).substr(2,8)}function q_(i,e){return{usr:i.state,key:i.key,idx:e}}function Om(i,e,n,s){return n===void 0&&(n=null),Zl({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?_o(e):e,{state:n,key:e&&e.key||s||cA()})}function gh(i){let{pathname:e="/",search:n="",hash:s=""}=i;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function _o(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substr(n),i=i.substr(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function uA(i,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Xr.Pop,p=null,g=_();g==null&&(g=0,h.replaceState(Zl({},h.state,{idx:g}),""));function _(){return(h.state||{idx:null}).idx}function w(){f=Xr.Pop;let N=_(),U=N==null?null:N-g;g=N,p&&p({action:f,location:F.location,delta:U})}function S(N,U){f=Xr.Push;let P=Om(F.location,N,U);g=_()+1;let z=q_(P,g),G=F.createHref(P);try{h.pushState(z,"",G)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(G)}l&&p&&p({action:f,location:F.location,delta:1})}function R(N,U){f=Xr.Replace;let P=Om(F.location,N,U);g=_();let z=q_(P,g),G=F.createHref(P);h.replaceState(z,"",G),l&&p&&p({action:f,location:F.location,delta:0})}function I(N){let U=o.location.origin!=="null"?o.location.origin:o.location.href,P=typeof N=="string"?N:gh(N);return P=P.replace(/ $/,"%20"),_t(U,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,U)}let F={get action(){return f},get location(){return i(o,h)},listen(N){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(z_,w),p=N,()=>{o.removeEventListener(z_,w),p=null}},createHref(N){return e(o,N)},createURL:I,encodeLocation(N){let U=I(N);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:S,replace:R,go(N){return h.go(N)}};return F}var F_;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(F_||(F_={}));function hA(i,e,n){return n===void 0&&(n="/"),dA(i,e,n)}function dA(i,e,n,s){let o=typeof e=="string"?_o(e):e,l=cp(o.pathname||"/",n);if(l==null)return null;let h=xE(i);fA(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let g=AA(l);f=wA(h[p],g)}return f}function xE(i,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(_t(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=Zr([s,p.relativePath]),_=n.concat(p);l.children&&l.children.length>0&&(_t(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),xE(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:EA(g,l.index),routesMeta:_})};return i.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of CE(l.path))o(l,h,p)}),e}function CE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=CE(s.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>i.startsWith("/")&&p===""?"/":p)}function fA(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:TA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const mA=/^:[\w-]+$/,pA=3,gA=2,yA=1,vA=10,_A=-2,H_=i=>i==="*";function EA(i,e){let n=i.split("/"),s=n.length;return n.some(H_)&&(s+=_A),e&&(s+=gA),n.filter(o=>!H_(o)).reduce((o,l)=>o+(mA.test(l)?pA:l===""?yA:vA),s)}function TA(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function wA(i,e,n){let{routesMeta:s}=i,o={},l="/",h=[];for(let f=0;f<s.length;++f){let p=s[f],g=f===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=bA({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Zr([l,w.pathname]),pathnameBase:IA(Zr([l,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(l=Zr([l,w.pathnameBase]))}return h}function bA(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=SA(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((g,_,w)=>{let{paramName:S,isOptional:R}=_;if(S==="*"){let F=f[w]||"";h=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const I=f[w];return R&&!I?g[S]=void 0:g[S]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:i}}function SA(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),RE(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function AA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return RE(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function cp(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function RA(i,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?_o(i):i;return{pathname:n?n.startsWith("/")?n:xA(n,e):e,search:NA(s),hash:DA(o)}}function xA(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function gm(i,e,n,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CA(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function up(i,e){let n=CA(i);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function hp(i,e,n,s){s===void 0&&(s=!1);let o;typeof i=="string"?o=_o(i):(o=Zl({},i),_t(!o.pathname||!o.pathname.includes("?"),gm("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),gm("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),gm("#","search","hash",o)));let l=i===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=n;else{let w=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}f=w>=0?e[w]:"/"}let p=RA(o,f),g=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}const Zr=i=>i.join("/").replace(/\/\/+/g,"/"),IA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,DA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function kA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const IE=["post","put","patch","delete"];new Set(IE);const OA=["get",...IE];new Set(OA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Jl.apply(this,arguments)}const dp=O.createContext(null),MA=O.createContext(null),os=O.createContext(null),Vh=O.createContext(null),Ni=O.createContext({outlet:null,matches:[],isDataRoute:!1}),NE=O.createContext(null);function VA(i,e){let{relative:n}=e===void 0?{}:e;Eo()||_t(!1);let{basename:s,navigator:o}=O.useContext(os),{hash:l,pathname:h,search:f}=kE(i,{relative:n}),p=h;return s!=="/"&&(p=h==="/"?s:Zr([s,h])),o.createHref({pathname:p,search:f,hash:l})}function Eo(){return O.useContext(Vh)!=null}function ls(){return Eo()||_t(!1),O.useContext(Vh).location}function DE(i){O.useContext(os).static||O.useLayoutEffect(i)}function vr(){let{isDataRoute:i}=O.useContext(Ni);return i?XA():jA()}function jA(){Eo()||_t(!1);let i=O.useContext(dp),{basename:e,future:n,navigator:s}=O.useContext(os),{matches:o}=O.useContext(Ni),{pathname:l}=ls(),h=JSON.stringify(up(o,n.v7_relativeSplatPath)),f=O.useRef(!1);return DE(()=>{f.current=!0}),O.useCallback(function(g,_){if(_===void 0&&(_={}),!f.current)return;if(typeof g=="number"){s.go(g);return}let w=hp(g,JSON.parse(h),l,_.relative==="path");i==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Zr([e,w.pathname])),(_.replace?s.replace:s.push)(w,_.state,_)},[e,s,h,l,i])}const PA=O.createContext(null);function LA(i){let e=O.useContext(Ni).outlet;return e&&O.createElement(PA.Provider,{value:i},e)}function fp(){let{matches:i}=O.useContext(Ni),e=i[i.length-1];return e?e.params:{}}function kE(i,e){let{relative:n}=e===void 0?{}:e,{future:s}=O.useContext(os),{matches:o}=O.useContext(Ni),{pathname:l}=ls(),h=JSON.stringify(up(o,s.v7_relativeSplatPath));return O.useMemo(()=>hp(i,JSON.parse(h),l,n==="path"),[i,h,l,n])}function UA(i,e){return BA(i,e)}function BA(i,e,n,s){Eo()||_t(!1);let{navigator:o}=O.useContext(os),{matches:l}=O.useContext(Ni),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=ls(),_;if(e){var w;let N=typeof e=="string"?_o(e):e;p==="/"||(w=N.pathname)!=null&&w.startsWith(p)||_t(!1),_=N}else _=g;let S=_.pathname||"/",R=S;if(p!=="/"){let N=p.replace(/^\//,"").split("/");R="/"+S.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=hA(i,{pathname:R}),F=GA(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:Zr([p,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Zr([p,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,s);return e&&F?O.createElement(Vh.Provider,{value:{location:Jl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Xr.Pop}},F):F}function zA(){let i=QA(),e=kA(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:o},n):null,null)}const qA=O.createElement(zA,null);class FA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ni.Provider,{value:this.props.routeContext},O.createElement(NE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HA(i){let{routeContext:e,match:n,children:s}=i,o=O.useContext(dp);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ni.Provider,{value:e},s)}function GA(i,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),i==null){var l;if(!n)return null;if(n.errors)i=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let h=i,f=(o=n)==null?void 0:o.errors;if(f!=null){let _=h.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);_>=0||_t(!1),h=h.slice(0,Math.min(h.length,_+1))}let p=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let _=0;_<h.length;_++){let w=h[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=_),w.route.id){let{loaderData:S,errors:R}=n,I=w.route.loader&&S[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||I){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((_,w,S)=>{let R,I=!1,F=null,N=null;n&&(R=f&&w.route.id?f[w.route.id]:void 0,F=w.route.errorElement||qA,p&&(g<0&&S===0?(WA("route-fallback"),I=!0,N=null):g===S&&(I=!0,N=w.route.hydrateFallbackElement||null)));let U=e.concat(h.slice(0,S+1)),P=()=>{let z;return R?z=F:I?z=N:w.route.Component?z=O.createElement(w.route.Component,null):w.route.element?z=w.route.element:z=_,O.createElement(HA,{match:w,routeContext:{outlet:_,matches:U,isDataRoute:n!=null},children:z})};return n&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?O.createElement(FA,{location:n.location,revalidation:n.revalidation,component:F,error:R,children:P(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):P()},null)}var OE=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(OE||{}),ME=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(ME||{});function $A(i){let e=O.useContext(dp);return e||_t(!1),e}function KA(i){let e=O.useContext(MA);return e||_t(!1),e}function YA(i){let e=O.useContext(Ni);return e||_t(!1),e}function VE(i){let e=YA(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function QA(){var i;let e=O.useContext(NE),n=KA(),s=VE();return e!==void 0?e:(i=n.errors)==null?void 0:i[s]}function XA(){let{router:i}=$A(OE.UseNavigateStable),e=VE(ME.UseNavigateStable),n=O.useRef(!1);return DE(()=>{n.current=!0}),O.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?i.navigate(o):i.navigate(o,Jl({fromRouteId:e},l)))},[i,e])}const G_={};function WA(i,e,n){G_[i]||(G_[i]=!0)}function ZA(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function jE(i){let{to:e,replace:n,state:s,relative:o}=i;Eo()||_t(!1);let{future:l,static:h}=O.useContext(os),{matches:f}=O.useContext(Ni),{pathname:p}=ls(),g=vr(),_=hp(e,up(f,l.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(_);return O.useEffect(()=>g(JSON.parse(w),{replace:n,state:s,relative:o}),[g,w,o,n,s]),null}function JA(i){return LA(i.context)}function tn(i){_t(!1)}function e1(i){let{basename:e="/",children:n=null,location:s,navigationType:o=Xr.Pop,navigator:l,static:h=!1,future:f}=i;Eo()&&_t(!1);let p=e.replace(/^\/*/,"/"),g=O.useMemo(()=>({basename:p,navigator:l,static:h,future:Jl({v7_relativeSplatPath:!1},f)}),[p,f,l,h]);typeof s=="string"&&(s=_o(s));let{pathname:_="/",search:w="",hash:S="",state:R=null,key:I="default"}=s,F=O.useMemo(()=>{let N=cp(_,p);return N==null?null:{location:{pathname:N,search:w,hash:S,state:R,key:I},navigationType:o}},[p,_,w,S,R,I,o]);return F==null?null:O.createElement(os.Provider,{value:g},O.createElement(Vh.Provider,{children:n,value:F}))}function t1(i){let{children:e,location:n}=i;return UA(Mm(e),n)}new Promise(()=>{});function Mm(i,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(i,(s,o)=>{if(!O.isValidElement(s))return;let l=[...e,o];if(s.type===O.Fragment){n.push.apply(n,Mm(s.props.children,l));return}s.type!==tn&&_t(!1),!s.props.index||!s.props.children||_t(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Mm(s.props.children,l)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Vm.apply(this,arguments)}function n1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}function i1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function r1(i,e){return i.button===0&&(!e||e==="_self")&&!i1(i)}const s1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],a1="6";try{window.__reactRouterVersion=a1}catch{}const o1="startTransition",$_=eA[o1];function l1(i){let{basename:e,children:n,future:s,window:o}=i,l=O.useRef();l.current==null&&(l.current=lA({window:o,v5Compat:!0}));let h=l.current,[f,p]=O.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},_=O.useCallback(w=>{g&&$_?$_(()=>p(w)):p(w)},[p,g]);return O.useLayoutEffect(()=>h.listen(_),[h,_]),O.useEffect(()=>ZA(s),[s]),O.createElement(e1,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:h,future:s})}const c1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sn=O.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:p,to:g,preventScrollReset:_,viewTransition:w}=e,S=n1(e,s1),{basename:R}=O.useContext(os),I,F=!1;if(typeof g=="string"&&u1.test(g)&&(I=g,c1))try{let z=new URL(window.location.href),G=g.startsWith("//")?new URL(z.protocol+g):new URL(g),K=cp(G.pathname,R);G.origin===z.origin&&K!=null?g=K+G.search+G.hash:F=!0}catch{}let N=VA(g,{relative:o}),U=h1(g,{replace:h,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:w});function P(z){s&&s(z),z.defaultPrevented||U(z)}return O.createElement("a",Vm({},S,{href:I||N,onClick:F||l?s:P,ref:n,target:p}))});var K_;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(K_||(K_={}));var Y_;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Y_||(Y_={}));function h1(i,e){let{target:n,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,p=vr(),g=ls(),_=kE(i,{relative:h});return O.useCallback(w=>{if(r1(w,n)){w.preventDefault();let S=s!==void 0?s:gh(g)===gh(_);p(i,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[g,p,_,s,o,n,i,l,h,f])}var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},d1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[n++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[n++],h=i[n++],f=i[n++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const l=i[o],h=o+1<i.length,f=h?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,_=l>>2,w=(l&3)<<4|f>>4;let S=(f&15)<<2|g>>6,R=g&63;p||(R=64,h||(S=64)),s.push(n[_],n[w],n[S],n[R])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(PE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):d1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const l=n[i.charAt(o++)],f=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,l==null||f==null||g==null||w==null)throw new f1;const S=l<<2|f>>4;if(s.push(S),g!==64){const R=f<<4&240|g>>2;if(s.push(R),w!==64){const I=g<<6&192|w;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class f1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m1=function(i){const e=PE(i);return LE.encodeByteArray(e,!0)},yh=function(i){return m1(i).replace(/\./g,"")},UE=function(i){try{return LE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=()=>p1().__FIREBASE_DEFAULTS__,y1=()=>{if(typeof process>"u"||typeof Q_>"u")return;const i=Q_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},v1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&UE(i[1]);return e&&JSON.parse(e)},jh=()=>{try{return g1()||y1()||v1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},BE=i=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},_1=i=>{const e=BE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},zE=()=>{var i;return(i=jh())===null||i===void 0?void 0:i.config},qE=i=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[yh(JSON.stringify(n)),yh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function b1(){var i;const e=(i=jh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function R1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x1(){const i=an();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function C1(){return!b1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I1(){try{return typeof indexedDB=="object"}catch{return!1}}function N1(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="FirebaseError";class Di extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=D1,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?k1(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Di(o,f,s)}}function k1(i,e){return i.replace(O1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const O1=/\{\$([^}]+)}/g;function M1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function vh(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const l=i[o],h=e[o];if(X_(l)&&X_(h)){if(!vh(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function X_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function zl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function V1(i,e){const n=new j1(i,e);return n.subscribe.bind(n)}class j1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");P1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=ym),o.error===void 0&&(o.error=ym),o.complete===void 0&&(o.complete=ym);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(i){return i&&i._delegate?i._delegate:i}class ts{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new E1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B1(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:U1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U1(i){return i===Ys?void 0:i}function B1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const q1={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},F1=je.INFO,H1={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},G1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=H1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=F1,this._logHandler=G1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const $1=(i,e)=>e.some(n=>i instanceof n);let W_,Z_;function K1(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y1(){return Z_||(Z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,jm=new WeakMap,HE=new WeakMap,vm=new WeakMap,pp=new WeakMap;function Q1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",h)},l=()=>{n(Jr(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,i)}).catch(()=>{}),pp.set(e,i),e}function X1(i){if(jm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",h),i.removeEventListener("abort",h)},l=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",h),i.addEventListener("abort",h)});jm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return jm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||HE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function W1(i){Pm=i(Pm)}function Z1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(_m(this),e,...n);return HE.set(s,e.sort?e.sort():[e]),Jr(s)}:Y1().includes(i)?function(...e){return i.apply(_m(this),e),Jr(FE.get(this))}:function(...e){return Jr(i.apply(_m(this),e))}}function J1(i){return typeof i=="function"?Z1(i):(i instanceof IDBTransaction&&X1(i),$1(i,K1())?new Proxy(i,Pm):i)}function Jr(i){if(i instanceof IDBRequest)return Q1(i);if(vm.has(i))return vm.get(i);const e=J1(i);return e!==i&&(vm.set(i,e),pp.set(e,i)),e}const _m=i=>pp.get(i);function eR(i,e,{blocked:n,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(i,e),f=Jr(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Jr(h.result),p.oldVersion,p.newVersion,Jr(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const tR=["get","getKey","getAll","getAllKeys","count"],nR=["put","add","delete","clear"],Em=new Map;function J_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=nR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||tR.includes(n)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),o&&p.done]))[0]};return Em.set(e,l),l}W1(i=>({...i,get:(e,n,s)=>J_(e,n)||i.get(e,n,s),has:(e,n)=>!!J_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function rR(i){const e=i.getComponent();return e?.type==="VERSION"}const Lm="@firebase/app",e0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new mp("@firebase/app"),sR="@firebase/app-compat",aR="@firebase/analytics-compat",oR="@firebase/analytics",lR="@firebase/app-check-compat",cR="@firebase/app-check",uR="@firebase/auth",hR="@firebase/auth-compat",dR="@firebase/database",fR="@firebase/data-connect",mR="@firebase/database-compat",pR="@firebase/functions",gR="@firebase/functions-compat",yR="@firebase/installations",vR="@firebase/installations-compat",_R="@firebase/messaging",ER="@firebase/messaging-compat",TR="@firebase/performance",wR="@firebase/performance-compat",bR="@firebase/remote-config",SR="@firebase/remote-config-compat",AR="@firebase/storage",RR="@firebase/storage-compat",xR="@firebase/firestore",CR="@firebase/vertexai-preview",IR="@firebase/firestore-compat",NR="firebase",DR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",kR={[Lm]:"fire-core",[sR]:"fire-core-compat",[oR]:"fire-analytics",[aR]:"fire-analytics-compat",[cR]:"fire-app-check",[lR]:"fire-app-check-compat",[uR]:"fire-auth",[hR]:"fire-auth-compat",[dR]:"fire-rtdb",[fR]:"fire-data-connect",[mR]:"fire-rtdb-compat",[pR]:"fire-fn",[gR]:"fire-fn-compat",[yR]:"fire-iid",[vR]:"fire-iid-compat",[_R]:"fire-fcm",[ER]:"fire-fcm-compat",[TR]:"fire-perf",[wR]:"fire-perf-compat",[bR]:"fire-rc",[SR]:"fire-rc-compat",[AR]:"fire-gcs",[RR]:"fire-gcs-compat",[xR]:"fire-fst",[IR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[NR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,OR=new Map,Bm=new Map;function t0(i,e){try{i.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Js(i){const e=i.name;if(Bm.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,i);for(const n of _h.values())t0(n,i);for(const n of OR.values())t0(n,i);return!0}function gp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Xn(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new hc("app","Firebase",MR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=DR;function GE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Um,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw es.create("bad-app-name",{appName:String(o)});if(n||(n=zE()),!n)throw es.create("no-options");const l=_h.get(o);if(l){if(vh(n,l.options)&&vh(s,l.config))return l;throw es.create("duplicate-app",{appName:o})}const h=new z1(o);for(const p of Bm.values())h.addComponent(p);const f=new VR(n,s,h);return _h.set(o,f),f}function $E(i=Um){const e=_h.get(i);if(!e&&i===Um&&zE())return GE();if(!e)throw es.create("no-app",{appName:i});return e}function wi(i,e,n){var s;let o=(s=kR[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(f.join(" "));return}Js(new ts(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebase-heartbeat-database",PR=1,ec="firebase-heartbeat-store";let Tm=null;function KE(){return Tm||(Tm=eR(jR,PR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ec)}catch(n){console.warn(n)}}}}).catch(i=>{throw es.create("idb-open",{originalErrorMessage:i.message})})),Tm}async function LR(i){try{const n=(await KE()).transaction(ec),s=await n.objectStore(ec).get(YE(i));return await n.done,s}catch(e){if(e instanceof Di)mr.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e?.message});mr.warn(n.message)}}}async function n0(i,e){try{const s=(await KE()).transaction(ec,"readwrite");await s.objectStore(ec).put(e,YE(i)),await s.done}catch(n){if(n instanceof Di)mr.warn(n.message);else{const s=es.create("idb-set",{originalErrorMessage:n?.message});mr.warn(s.message)}}}function YE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1024,BR=720*60*60*1e3;class zR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=i0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=BR}),this._storage.overwrite(this._heartbeatsCache))}catch(s){mr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=i0(),{heartbeatsToSend:s,unsentEntries:o}=qR(this._heartbeatsCache.heartbeats),l=yh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return mr.warn(n),""}}}function i0(){return new Date().toISOString().substring(0,10)}function qR(i,e=UR){const n=[];let s=i.slice();for(const o of i){const l=n.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),r0(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),r0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class FR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I1()?N1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function r0(i){return yh(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(i){Js(new ts("platform-logger",e=>new iR(e),"PRIVATE")),Js(new ts("heartbeat",e=>new zR(e),"PRIVATE")),wi(Lm,e0,i),wi(Lm,e0,"esm2017"),wi("fire-js","")}HR("");function yp(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XE=QE,WE=new hc("auth","Firebase",QE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new mp("@firebase/auth");function GR(i,...e){Eh.logLevel<=je.WARN&&Eh.warn(`Auth (${aa}): ${i}`,...e)}function oh(i,...e){Eh.logLevel<=je.ERROR&&Eh.error(`Auth (${aa}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(i,...e){throw _p(i,...e)}function Zn(i,...e){return _p(i,...e)}function vp(i,e,n){const s=Object.assign(Object.assign({},XE()),{[e]:n});return new hc("auth","Firebase",s).create(e,{appName:i.name})}function hr(i){return vp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $R(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&qn(i,"argument-error"),vp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _p(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return WE.create(i,...e)}function Ae(i,e,...n){if(!i)throw _p(e,...n)}function lr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw oh(e),new Error(e)}function pr(i,e){i||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function KR(){return s0()==="http:"||s0()==="https:"}function s0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KR()||A1()||"connection"in navigator)?navigator.onLine:!0}function QR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=w1()||R1()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(i,e){pr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new fc(3e4,6e4);function cs(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function us(i,e,n,s,o={}){return JE(i,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=dc(Object.assign({key:i.config.apiKey},h)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},l);return S1()||(g.referrerPolicy="no-referrer"),ZE.fetch()(eT(i,i.config.apiHost,n,f),g)})}async function JE(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},XR),e);try{const o=new JR(i),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw eh(i,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw eh(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw eh(i,"user-disabled",h);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw vp(i,_,g);qn(i,_)}}catch(o){if(o instanceof Di)throw o;qn(i,"network-request-failed",{message:String(o)})}}async function mc(i,e,n,s,o={}){const l=await us(i,e,n,s,o);return"mfaPendingCredential"in l&&qn(i,"multi-factor-auth-required",{_serverResponse:l}),l}function eT(i,e,n,s){const o=`${e}${n}?${s}`;return i.config.emulator?Ep(i.config,o):`${i.config.apiScheme}://${o}`}function ZR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zn(this.auth,"network-request-failed")),WR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Zn(i,e,s);return o.customData._tokenResponse=n,o}function a0(i){return i!==void 0&&i.enterprise!==void 0}class ex{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tx(i,e){return us(i,"GET","/v2/recaptchaConfig",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(i,e){return us(i,"POST","/v1/accounts:delete",e)}async function tT(i,e){return us(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nT(i,e=!1){const n=wt(i),s=await n.getIdToken(e),o=Tp(s);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Gl(wm(o.auth_time)),issuedAtTime:Gl(wm(o.iat)),expirationTime:Gl(wm(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function wm(i){return Number(i)*1e3}function Tp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const o=UE(n);return o?JSON.parse(o):(oh("Failed to decode base64 JWT payload"),null)}catch(o){return oh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function o0(i){const e=Tp(i);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Di&&ix(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function ix({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(i){var e;const n=i.auth,s=await i.getIdToken(),o=await tc(i,tT(n,{idToken:s}));Ae(o?.users.length,n,"internal-error");const l=o.users[0];i._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?rT(l.providerUserInfo):[],f=sx(i.providerData,h),p=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!f?.length,_=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new qm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(i,w)}async function iT(i){const e=wt(i);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sx(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function rT(i){return i.map(e=>{var{providerId:n}=e,s=yp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(i,e){const n=await JE(i,{},async()=>{const s=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=i.config,h=eT(i,o,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",ZE.fetch()(h,{method:"POST",headers:f,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ox(i,e){return us(i,"POST","/v2/accounts:revokeToken",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=o0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:l}=await ax(e,n);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:l}=n,h=new oo;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ae(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(i,e){Ae(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class cr{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,l=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await tc(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nT(this,e)}reload(){return iT(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Th(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await tc(this,nx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,l,h,f,p,g,_;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,R=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,I=(h=n.photoURL)!==null&&h!==void 0?h:void 0,F=(f=n.tenantId)!==null&&f!==void 0?f:void 0,N=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,U=(g=n.createdAt)!==null&&g!==void 0?g:void 0,P=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:z,emailVerified:G,isAnonymous:K,providerData:oe,stsTokenManager:C}=n;Ae(z&&C,e,"internal-error");const x=oo.fromJSON(this.name,C);Ae(typeof z=="string",e,"internal-error"),Qr(w,e.name),Qr(S,e.name),Ae(typeof G=="boolean",e,"internal-error"),Ae(typeof K=="boolean",e,"internal-error"),Qr(R,e.name),Qr(I,e.name),Qr(F,e.name),Qr(N,e.name),Qr(U,e.name),Qr(P,e.name);const D=new cr({uid:z,auth:e,email:S,emailVerified:G,displayName:w,isAnonymous:K,photoURL:I,phoneNumber:R,tenantId:F,stsTokenManager:x,createdAt:U,lastLoginAt:P});return oe&&Array.isArray(oe)&&(D.providerData=oe.map(k=>Object.assign({},k))),N&&(D._redirectEventId=N),D}static async _fromIdTokenResponse(e,n,s=!1){const o=new oo;o.updateFromServerResponse(n);const l=new cr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Th(l),l}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?rT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new oo;f.updateFromIdToken(s);const p=new cr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function ur(i){pr(i instanceof Function,"Expected a class definition");let e=l0.get(i);return e?(pr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,l0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sT.type="NONE";const Fm=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(i,e,n){return`firebase:${i}:${e}:${n}`}class lo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=lh(this.userKey,o.apiKey,l),this.fullPersistenceKey=lh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new lo(ur(Fm),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ur(Fm);const h=lh(s,e.config.apiKey,e.name);let f=null;for(const g of n)try{const _=await g._get(h);if(_){const w=cr._fromJSON(e,_);g!==l&&(f=w),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new lo(l,e,s):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(h)}catch{}})),new lo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hT(e))return"Blackberry";if(dT(e))return"Webos";if(oT(e))return"Safari";if((e.includes("chrome/")||lT(e))&&!e.includes("edge/"))return"Chrome";if(uT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function aT(i=an()){return/firefox\//i.test(i)}function oT(i=an()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lT(i=an()){return/crios\//i.test(i)}function cT(i=an()){return/iemobile/i.test(i)}function uT(i=an()){return/android/i.test(i)}function hT(i=an()){return/blackberry/i.test(i)}function dT(i=an()){return/webos/i.test(i)}function wp(i=an()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function lx(i=an()){var e;return wp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cx(){return x1()&&document.documentMode===10}function fT(i=an()){return wp(i)||uT(i)||dT(i)||hT(i)||/windows phone/i.test(i)||cT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(i,e=[]){let n;switch(i){case"Browser":n=c0(an());break;case"Worker":n=`${c0(an())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(i,e={}){return us(i,"GET","/v2/passwordPolicy",cs(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=6;class fx{constructor(e){var n,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:dx,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new ux(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tT(this,{idToken:e}),s=await cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(hr(this));const n=e?wt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hx(this),n=new fx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ox(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&GR(`Error while retrieving App Check token: ${n.error}`),n?.token}}function hs(i){return wt(i)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=V1(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function px(i){Ph=i}function pT(i){return Ph.loadJS(i)}function gx(){return Ph.recaptchaEnterpriseScript}function yx(){return Ph.gapiScript}function vx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}const _x="recaptcha-enterprise",Ex="NO_RECAPTCHA";class Tx{constructor(e){this.type=_x,this.auth=hs(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{tx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new ex(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,h(g.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;a0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{h(g)}).catch(()=>{h(Ex)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{s(this.auth).then(f=>{if(!n&&a0(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=gx();p.length!==0&&(p+=f),pT(p).then(()=>{o(f,l,h)}).catch(g=>{h(g)})}}).catch(f=>{h(f)})})}}async function h0(i,e,n,s=!1){const o=new Tx(i);let l;try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h=Object.assign({},e);return s?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Hm(i,e,n,s){var o;if(!((o=i._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await h0(i,e,n,n==="getOobCode");return s(i,l)}else return s(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await h0(i,e,n,n==="getOobCode");return s(i,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(i,e){const n=gp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(vh(l,e??{}))return o;qn(o,"already-initialized")}return n.initialize({options:e})}function wx(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ur);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function yT(i,e,n){const s=hs(i);Ae(s._canInitEmulator,s,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=vT(e),{host:h,port:f}=bx(e),p=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),Sx()}function vT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function bx(i){const e=vT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:d0(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:d0(h)}}}function d0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Sx(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function Ax(i,e){return us(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(i,e){return mc(i,"POST","/v1/accounts:signInWithPassword",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",cs(i,e))}async function Cx(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends Lh{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new ho(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new ho(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,n,"signInWithPassword",Rx);case"emailLink":return xx(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,s,"signUpPassword",Ax);case"emailLink":return Cx(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(i,e){return mc(i,"POST","/v1/accounts:signInWithIdp",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="http://localhost";class ns extends Lh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,l=yp(n,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ns(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:Ix,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dx(i){const e=Bl(zl(i)).link,n=e?Bl(zl(e)).deep_link_id:null,s=Bl(zl(i)).deep_link_id;return(s?Bl(zl(s)).link:null)||s||n||e||i}class Uh{constructor(e){var n,s,o,l,h,f;const p=Bl(zl(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,w=Nx((o=p.mode)!==null&&o!==void 0?o:null);Ae(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const n=Dx(e);try{return new Uh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,n){return ho._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Uh.parseLink(n);return Ae(s,"argument-error"),ho._fromEmailAndCode(e,s.code,s.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends bp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends pc{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ei.credential(n,s)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends pc{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends pc{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return or.credential(n,s)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(i,e){return mc(i,"POST","/v1/accounts:signUp",cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const l=await cr._fromIdTokenResponse(e,s,o),h=f0(s);return new ea({user:l,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=f0(s);return new ea({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function f0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Di{constructor(e,n,s,o){var l;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new wh(e,n,s,o)}}function _T(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(i,l,e,s):l})}async function Ox(i,e,n=!1){const s=await tc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ea._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(i,e,n=!1){const{auth:s}=i;if(Xn(s.app))return Promise.reject(hr(s));const o="reauthenticate";try{const l=await tc(i,_T(s,o,e,i),n);Ae(l.idToken,s,"internal-error");const h=Tp(l.idToken);Ae(h,s,"internal-error");const{sub:f}=h;return Ae(i.uid===f,s,"user-mismatch"),ea._forOperation(i,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&qn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(i,e,n=!1){if(Xn(i.app))return Promise.reject(hr(i));const s="signIn",o=await _T(i,s,e),l=await ea._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(l.user),l}async function TT(i,e){return ET(hs(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(i){const e=hs(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bT(i,e,n){if(Xn(i.app))return Promise.reject(hr(i));const s=hs(i),h=await Hm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&wT(i),p}),f=await ea._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function ST(i,e,n){return Xn(i.app)?Promise.reject(hr(i)):TT(wt(i),oa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&wT(i),s})}function AT(i,e,n,s){return wt(i).onIdTokenChanged(e,n,s)}function RT(i,e,n){return wt(i).beforeAuthStateChanged(e,n)}function Sp(i,e,n,s){return wt(i).onAuthStateChanged(e,n,s)}function xT(i){return wt(i).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=1e3,jx=10;class IT extends CT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);cx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Vx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IT.type="LOCAL";const NT=IT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends CT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DT.type="SESSION";const Ap=DT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Bh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:l}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async g=>g(n.origin,l)),p=await Px(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const g=Rp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function Ux(i){bi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function Bx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zx(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function qx(){return kT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="firebaseLocalStorageDb",Fx=1,Sh="firebaseLocalStorage",MT="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(i,e){return i.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function Hx(){const i=indexedDB.deleteDatabase(OT);return new gc(i).toPromise()}function Gm(){const i=indexedDB.open(OT,Fx);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Sh,{keyPath:MT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Sh)?e(s):(s.close(),await Hx(),e(await Gm()))})})}async function m0(i,e,n){const s=zh(i,!0).put({[MT]:e,value:n});return new gc(s).toPromise()}async function Gx(i,e){const n=zh(i,!1).get(e),s=await new gc(n).toPromise();return s===void 0?null:s.value}function p0(i,e){const n=zh(i,!0).delete(e);return new gc(n).toPromise()}const $x=800,Kx=3;class VT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Kx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(qx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Bx(),!this.activeServiceWorker)return;this.sender=new Lx(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await m0(e,bh,"1"),await p0(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>m0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Gx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=zh(o,!1).getAll();return new gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VT.type="LOCAL";const jT=VT;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(i,e){return e?ur(e):(Ae(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Lh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Yx(i){return ET(i.auth,new xp(i),i.bypassAuthState)}function Qx(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),Mx(n,new xp(i),i.bypassAuthState)}async function Xx(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),Ox(n,new xp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yx;case"linkViaPopup":case"linkViaRedirect":return Xx;case"reauthViaPopup":case"reauthViaRedirect":return Qx;default:qn(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new fc(2e3,1e4);async function Cp(i,e,n){if(Xn(i.app))return Promise.reject(Zn(i,"operation-not-supported-in-this-environment"));const s=hs(i);$R(i,e,bp);const o=PT(s,n);return new Xs(s,"signInViaPopup",e,o).executeNotNull()}class Xs extends LT{constructor(e,n,s,o,l){super(e,n,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wx.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="pendingRedirect",ch=new Map;class Jx extends LT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const s=await eC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eC(i,e){const n=iC(e),s=nC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function tC(i,e){ch.set(i._key(),e)}function nC(i){return ur(i._redirectPersistence)}function iC(i){return lh(Zx,i.config.apiKey,i.name)}async function rC(i,e,n=!1){if(Xn(i.app))return Promise.reject(hr(i));const s=hs(i),o=PT(s,e),h=await new Jx(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=600*1e3;class aC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!UT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sC&&this.cachedEventUids.clear(),this.cachedEventUids.has(g0(e))}saveEventToCache(e){this.cachedEventUids.add(g0(e)),this.lastProcessedEventTime=Date.now()}}function g0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function UT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function oC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(i,e={}){return us(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uC=/^https?/;async function hC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await lC(i);for(const n of e)try{if(dC(n))return}catch{}qn(i,"unauthorized-domain")}function dC(i){const e=zm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!uC.test(n))return!1;if(cC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new fc(3e4,6e4);function y0(){const i=bi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function mC(i){return new Promise((e,n)=>{var s,o,l;function h(){y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y0(),n(Zn(i,"network-request-failed"))},timeout:fC.get()})}if(!((o=(s=bi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=bi().gapi)===null||l===void 0)&&l.load)h();else{const f=vx("iframefcb");return bi()[f]=()=>{gapi.load?h():n(Zn(i,"network-request-failed"))},pT(`${yx()}?onload=${f}`).catch(p=>n(p))}}).catch(e=>{throw uh=null,e})}let uh=null;function pC(i){return uh=uh||mC(i),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new fc(5e3,15e3),yC="__/auth/iframe",vC="emulator/auth/iframe",_C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TC(i){const e=i.config;Ae(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ep(e,vC):`https://${i.config.authDomain}/${yC}`,s={apiKey:e.apiKey,appName:i.name,v:aa},o=EC.get(i.config.apiHost);o&&(s.eid=o);const l=i._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${dc(s).slice(1)}`}async function wC(i){const e=await pC(i),n=bi().gapi;return Ae(n,i,"internal-error"),e.open({where:document.body,url:TC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_C,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Zn(i,"network-request-failed"),f=bi().setTimeout(()=>{l(h)},gC.get());function p(){bi().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SC=500,AC=600,RC="_blank",xC="http://localhost";class v0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CC(i,e,n,s=SC,o=AC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},bC),{width:s.toString(),height:o.toString(),top:l,left:h}),g=an().toLowerCase();n&&(f=lT(g)?RC:n),aT(g)&&(e=e||xC,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[R,I])=>`${S}${R}=${I},`,"");if(lx(g)&&f!=="_self")return IC(e||"",f),new v0(null);const w=window.open(e||"",f,_);Ae(w,i,"popup-blocked");try{w.focus()}catch{}return new v0(w)}function IC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="__/auth/handler",DC="emulator/auth/handler",kC=encodeURIComponent("fac");async function _0(i,e,n,s,o,l){Ae(i.config.authDomain,i,"auth-domain-config-required"),Ae(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:aa,eventId:o};if(e instanceof bp){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",M1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof pc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}i.tenantId&&(h.tid=i.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await i._getAppCheckToken(),g=p?`#${kC}=${encodeURIComponent(p)}`:"";return`${OC(i)}?${dc(f).slice(1)}${g}`}function OC({config:i}){return i.emulator?Ep(i,DC):`https://${i.authDomain}/${NC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class MC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ap,this._completeRedirectFn=rC,this._overrideRedirectResult=tC}async _openPopup(e,n,s,o){var l;pr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await _0(e,n,s,zm(),o);return CC(e,h,Rp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const l=await _0(e,n,s,zm(),o);return Ux(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(pr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await wC(e),s=new aC(e);return n.register("authEvent",o=>(Ae(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bm,{type:bm},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[bm];h!==void 0&&n(!!h),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fT()||oT()||wp()}}const BT=MC;var E0="@firebase/auth",T0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PC(i){Js(new ts("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ae(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mT(i)},g=new mx(s,o,l,p);return wx(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Js(new ts("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(s=>new VC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(E0,T0,jC(i)),wi(E0,T0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=300,UC=qE("authIdTokenMaxAge")||LC;let w0=null;const BC=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>UC)return;const o=n?.token;w0!==o&&(w0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function yc(i=$E()){const e=gp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=gT(i,{popupRedirectResolver:BT,persistence:[jT,NT,Ap]}),s=qE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=BC(l.toString());RT(n,h,()=>h(n.currentUser)),AT(n,f=>h(f))}}const o=BE("auth");return o&&yT(n,`http://${o}`),n}function zC(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}px({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const l=Zn("internal-error");l.customData=o,n(l)},s.type="text/javascript",s.charset="UTF-8",zC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PC("Browser");const zT=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Uh,AuthCredential:Lh,EmailAuthCredential:ho,EmailAuthProvider:oa,FacebookAuthProvider:sr,GithubAuthProvider:ar,GoogleAuthProvider:Ei,OAuthCredential:ns,TwitterAuthProvider:or,beforeAuthStateChanged:RT,browserLocalPersistence:NT,browserPopupRedirectResolver:BT,browserSessionPersistence:Ap,connectAuthEmulator:yT,createUserWithEmailAndPassword:bT,getAuth:yc,getIdTokenResult:nT,inMemoryPersistence:Fm,indexedDBLocalPersistence:jT,initializeAuth:gT,onAuthStateChanged:Sp,onIdTokenChanged:AT,prodErrorMap:XE,reload:iT,signInWithCredential:TT,signInWithEmailAndPassword:ST,signInWithPopup:Cp,signOut:xT},Symbol.toStringTag,{value:"Module"}));var qC="firebase",FC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(qC,FC,"app");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,qT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function D(){}D.prototype=x.prototype,C.D=x.prototype,C.prototype=new D,C.prototype.constructor=C,C.C=function(k,B,q){for(var V=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)V[mt-2]=arguments[mt];return x.prototype[B].apply(k,V)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,x,D){D||(D=0);var k=Array(16);if(typeof x=="string")for(var B=0;16>B;++B)k[B]=x.charCodeAt(D++)|x.charCodeAt(D++)<<8|x.charCodeAt(D++)<<16|x.charCodeAt(D++)<<24;else for(B=0;16>B;++B)k[B]=x[D++]|x[D++]<<8|x[D++]<<16|x[D++]<<24;x=C.g[0],D=C.g[1],B=C.g[2];var q=C.g[3],V=x+(q^D&(B^q))+k[0]+3614090360&4294967295;x=D+(V<<7&4294967295|V>>>25),V=q+(B^x&(D^B))+k[1]+3905402710&4294967295,q=x+(V<<12&4294967295|V>>>20),V=B+(D^q&(x^D))+k[2]+606105819&4294967295,B=q+(V<<17&4294967295|V>>>15),V=D+(x^B&(q^x))+k[3]+3250441966&4294967295,D=B+(V<<22&4294967295|V>>>10),V=x+(q^D&(B^q))+k[4]+4118548399&4294967295,x=D+(V<<7&4294967295|V>>>25),V=q+(B^x&(D^B))+k[5]+1200080426&4294967295,q=x+(V<<12&4294967295|V>>>20),V=B+(D^q&(x^D))+k[6]+2821735955&4294967295,B=q+(V<<17&4294967295|V>>>15),V=D+(x^B&(q^x))+k[7]+4249261313&4294967295,D=B+(V<<22&4294967295|V>>>10),V=x+(q^D&(B^q))+k[8]+1770035416&4294967295,x=D+(V<<7&4294967295|V>>>25),V=q+(B^x&(D^B))+k[9]+2336552879&4294967295,q=x+(V<<12&4294967295|V>>>20),V=B+(D^q&(x^D))+k[10]+4294925233&4294967295,B=q+(V<<17&4294967295|V>>>15),V=D+(x^B&(q^x))+k[11]+2304563134&4294967295,D=B+(V<<22&4294967295|V>>>10),V=x+(q^D&(B^q))+k[12]+1804603682&4294967295,x=D+(V<<7&4294967295|V>>>25),V=q+(B^x&(D^B))+k[13]+4254626195&4294967295,q=x+(V<<12&4294967295|V>>>20),V=B+(D^q&(x^D))+k[14]+2792965006&4294967295,B=q+(V<<17&4294967295|V>>>15),V=D+(x^B&(q^x))+k[15]+1236535329&4294967295,D=B+(V<<22&4294967295|V>>>10),V=x+(B^q&(D^B))+k[1]+4129170786&4294967295,x=D+(V<<5&4294967295|V>>>27),V=q+(D^B&(x^D))+k[6]+3225465664&4294967295,q=x+(V<<9&4294967295|V>>>23),V=B+(x^D&(q^x))+k[11]+643717713&4294967295,B=q+(V<<14&4294967295|V>>>18),V=D+(q^x&(B^q))+k[0]+3921069994&4294967295,D=B+(V<<20&4294967295|V>>>12),V=x+(B^q&(D^B))+k[5]+3593408605&4294967295,x=D+(V<<5&4294967295|V>>>27),V=q+(D^B&(x^D))+k[10]+38016083&4294967295,q=x+(V<<9&4294967295|V>>>23),V=B+(x^D&(q^x))+k[15]+3634488961&4294967295,B=q+(V<<14&4294967295|V>>>18),V=D+(q^x&(B^q))+k[4]+3889429448&4294967295,D=B+(V<<20&4294967295|V>>>12),V=x+(B^q&(D^B))+k[9]+568446438&4294967295,x=D+(V<<5&4294967295|V>>>27),V=q+(D^B&(x^D))+k[14]+3275163606&4294967295,q=x+(V<<9&4294967295|V>>>23),V=B+(x^D&(q^x))+k[3]+4107603335&4294967295,B=q+(V<<14&4294967295|V>>>18),V=D+(q^x&(B^q))+k[8]+1163531501&4294967295,D=B+(V<<20&4294967295|V>>>12),V=x+(B^q&(D^B))+k[13]+2850285829&4294967295,x=D+(V<<5&4294967295|V>>>27),V=q+(D^B&(x^D))+k[2]+4243563512&4294967295,q=x+(V<<9&4294967295|V>>>23),V=B+(x^D&(q^x))+k[7]+1735328473&4294967295,B=q+(V<<14&4294967295|V>>>18),V=D+(q^x&(B^q))+k[12]+2368359562&4294967295,D=B+(V<<20&4294967295|V>>>12),V=x+(D^B^q)+k[5]+4294588738&4294967295,x=D+(V<<4&4294967295|V>>>28),V=q+(x^D^B)+k[8]+2272392833&4294967295,q=x+(V<<11&4294967295|V>>>21),V=B+(q^x^D)+k[11]+1839030562&4294967295,B=q+(V<<16&4294967295|V>>>16),V=D+(B^q^x)+k[14]+4259657740&4294967295,D=B+(V<<23&4294967295|V>>>9),V=x+(D^B^q)+k[1]+2763975236&4294967295,x=D+(V<<4&4294967295|V>>>28),V=q+(x^D^B)+k[4]+1272893353&4294967295,q=x+(V<<11&4294967295|V>>>21),V=B+(q^x^D)+k[7]+4139469664&4294967295,B=q+(V<<16&4294967295|V>>>16),V=D+(B^q^x)+k[10]+3200236656&4294967295,D=B+(V<<23&4294967295|V>>>9),V=x+(D^B^q)+k[13]+681279174&4294967295,x=D+(V<<4&4294967295|V>>>28),V=q+(x^D^B)+k[0]+3936430074&4294967295,q=x+(V<<11&4294967295|V>>>21),V=B+(q^x^D)+k[3]+3572445317&4294967295,B=q+(V<<16&4294967295|V>>>16),V=D+(B^q^x)+k[6]+76029189&4294967295,D=B+(V<<23&4294967295|V>>>9),V=x+(D^B^q)+k[9]+3654602809&4294967295,x=D+(V<<4&4294967295|V>>>28),V=q+(x^D^B)+k[12]+3873151461&4294967295,q=x+(V<<11&4294967295|V>>>21),V=B+(q^x^D)+k[15]+530742520&4294967295,B=q+(V<<16&4294967295|V>>>16),V=D+(B^q^x)+k[2]+3299628645&4294967295,D=B+(V<<23&4294967295|V>>>9),V=x+(B^(D|~q))+k[0]+4096336452&4294967295,x=D+(V<<6&4294967295|V>>>26),V=q+(D^(x|~B))+k[7]+1126891415&4294967295,q=x+(V<<10&4294967295|V>>>22),V=B+(x^(q|~D))+k[14]+2878612391&4294967295,B=q+(V<<15&4294967295|V>>>17),V=D+(q^(B|~x))+k[5]+4237533241&4294967295,D=B+(V<<21&4294967295|V>>>11),V=x+(B^(D|~q))+k[12]+1700485571&4294967295,x=D+(V<<6&4294967295|V>>>26),V=q+(D^(x|~B))+k[3]+2399980690&4294967295,q=x+(V<<10&4294967295|V>>>22),V=B+(x^(q|~D))+k[10]+4293915773&4294967295,B=q+(V<<15&4294967295|V>>>17),V=D+(q^(B|~x))+k[1]+2240044497&4294967295,D=B+(V<<21&4294967295|V>>>11),V=x+(B^(D|~q))+k[8]+1873313359&4294967295,x=D+(V<<6&4294967295|V>>>26),V=q+(D^(x|~B))+k[15]+4264355552&4294967295,q=x+(V<<10&4294967295|V>>>22),V=B+(x^(q|~D))+k[6]+2734768916&4294967295,B=q+(V<<15&4294967295|V>>>17),V=D+(q^(B|~x))+k[13]+1309151649&4294967295,D=B+(V<<21&4294967295|V>>>11),V=x+(B^(D|~q))+k[4]+4149444226&4294967295,x=D+(V<<6&4294967295|V>>>26),V=q+(D^(x|~B))+k[11]+3174756917&4294967295,q=x+(V<<10&4294967295|V>>>22),V=B+(x^(q|~D))+k[2]+718787259&4294967295,B=q+(V<<15&4294967295|V>>>17),V=D+(q^(B|~x))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+B&4294967295,C.g[3]=C.g[3]+q&4294967295}s.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var D=x-this.blockSize,k=this.B,B=this.h,q=0;q<x;){if(B==0)for(;q<=D;)o(this,C,q),q+=this.blockSize;if(typeof C=="string"){for(;q<x;)if(k[B++]=C.charCodeAt(q++),B==this.blockSize){o(this,k),B=0;break}}else for(;q<x;)if(k[B++]=C[q++],B==this.blockSize){o(this,k),B=0;break}}this.h=B,this.o+=x},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var D=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=D&255,D/=256;for(this.u(C),C=Array(16),x=D=0;4>x;++x)for(var k=0;32>k;k+=8)C[D++]=this.g[x]>>>k&255;return C};function l(C,x){var D=f;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=x(C)}function h(C,x){this.h=x;for(var D=[],k=!0,B=C.length-1;0<=B;B--){var q=C[B]|0;k&&q==x||(D[B]=q,k=!1)}this.g=D}var f={};function p(C){return-128<=C&&128>C?l(C,function(x){return new h([x|0],0>x?-1:0)}):new h([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return N(g(-C));for(var x=[],D=1,k=0;C>=D;k++)x[k]=C/D|0,D*=4294967296;return new h(x,0)}function _(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return N(_(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(x,8)),k=w,B=0;B<C.length;B+=8){var q=Math.min(8,C.length-B),V=parseInt(C.substring(B,B+q),x);8>q?(q=g(Math.pow(x,q)),k=k.j(q).add(g(V))):(k=k.j(D),k=k.add(g(V)))}return k}var w=p(0),S=p(1),R=p(16777216);i=h.prototype,i.m=function(){if(F(this))return-N(this).m();for(var C=0,x=1,D=0;D<this.g.length;D++){var k=this.i(D);C+=(0<=k?k:4294967296+k)*x,x*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(F(this))return"-"+N(this).toString(C);for(var x=g(Math.pow(C,6)),D=this,k="";;){var B=G(D,x).g;D=U(D,B.j(x));var q=((0<D.g.length?D.g[0]:D.h)>>>0).toString(C);if(D=B,I(D))return q+k;for(;6>q.length;)q="0"+q;k=q+k}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function F(C){return C.h==-1}i.l=function(C){return C=U(this,C),F(C)?-1:I(C)?0:1};function N(C){for(var x=C.g.length,D=[],k=0;k<x;k++)D[k]=~C.g[k];return new h(D,~C.h).add(S)}i.abs=function(){return F(this)?N(this):this},i.add=function(C){for(var x=Math.max(this.g.length,C.g.length),D=[],k=0,B=0;B<=x;B++){var q=k+(this.i(B)&65535)+(C.i(B)&65535),V=(q>>>16)+(this.i(B)>>>16)+(C.i(B)>>>16);k=V>>>16,q&=65535,V&=65535,D[B]=V<<16|q}return new h(D,D[D.length-1]&-2147483648?-1:0)};function U(C,x){return C.add(N(x))}i.j=function(C){if(I(this)||I(C))return w;if(F(this))return F(C)?N(this).j(N(C)):N(N(this).j(C));if(F(C))return N(this.j(N(C)));if(0>this.l(R)&&0>C.l(R))return g(this.m()*C.m());for(var x=this.g.length+C.g.length,D=[],k=0;k<2*x;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var B=0;B<C.g.length;B++){var q=this.i(k)>>>16,V=this.i(k)&65535,mt=C.i(B)>>>16,Ge=C.i(B)&65535;D[2*k+2*B]+=V*Ge,P(D,2*k+2*B),D[2*k+2*B+1]+=q*Ge,P(D,2*k+2*B+1),D[2*k+2*B+1]+=V*mt,P(D,2*k+2*B+1),D[2*k+2*B+2]+=q*mt,P(D,2*k+2*B+2)}for(k=0;k<x;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=x;k<2*x;k++)D[k]=0;return new h(D,0)};function P(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function z(C,x){this.g=C,this.h=x}function G(C,x){if(I(x))throw Error("division by zero");if(I(C))return new z(w,w);if(F(C))return x=G(N(C),x),new z(N(x.g),N(x.h));if(F(x))return x=G(C,N(x)),new z(N(x.g),x.h);if(30<C.g.length){if(F(C)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var D=S,k=x;0>=k.l(C);)D=K(D),k=K(k);var B=oe(D,1),q=oe(k,1);for(k=oe(k,2),D=oe(D,2);!I(k);){var V=q.add(k);0>=V.l(C)&&(B=B.add(D),q=V),k=oe(k,1),D=oe(D,1)}return x=U(C,B.j(x)),new z(B,x)}for(B=w;0<=C.l(x);){for(D=Math.max(1,Math.floor(C.m()/x.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),q=g(D),V=q.j(x);F(V)||0<V.l(C);)D-=k,q=g(D),V=q.j(x);I(q)&&(q=S),B=B.add(q),C=U(C,V)}return new z(B,C)}i.A=function(C){return G(this,C).h},i.and=function(C){for(var x=Math.max(this.g.length,C.g.length),D=[],k=0;k<x;k++)D[k]=this.i(k)&C.i(k);return new h(D,this.h&C.h)},i.or=function(C){for(var x=Math.max(this.g.length,C.g.length),D=[],k=0;k<x;k++)D[k]=this.i(k)|C.i(k);return new h(D,this.h|C.h)},i.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),D=[],k=0;k<x;k++)D[k]=this.i(k)^C.i(k);return new h(D,this.h^C.h)};function K(C){for(var x=C.g.length+1,D=[],k=0;k<x;k++)D[k]=C.i(k)<<1|C.i(k-1)>>>31;return new h(D,C.h)}function oe(C,x){var D=x>>5;x%=32;for(var k=C.g.length-D,B=[],q=0;q<k;q++)B[q]=0<x?C.i(q+D)>>>x|C.i(q+D+1)<<32-x:C.i(q+D);return new h(B,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,qT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,Zs=h}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FT,ql,HT,hh,$m,GT,$T,KT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,E){return u==Array.prototype||u==Object.prototype||(u[y]=E.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var y=0;y<u.length;++y){var E=u[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(u,y){if(y)e:{var E=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var $=u[A];if(!($ in E))break e;E=E[$]}u=u[u.length-1],A=E[u],y=y(A),y!=A&&y!=null&&e(E,u,{configurable:!0,writable:!0,value:y})}}function l(u,y){u instanceof String&&(u+="");var E=0,A=!1,$={next:function(){if(!A&&E<u.length){var J=E++;return{value:y(J,u[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(u){return u||function(){return l(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function g(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function _(u,y,E){return u.call.apply(u.bind,arguments)}function w(u,y,E){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,A),u.apply(y,$)}}return function(){return u.apply(y,arguments)}}function S(u,y,E){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,S.apply(null,arguments)}function R(u,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function I(u,y){function E(){}E.prototype=y.prototype,u.aa=y.prototype,u.prototype=new E,u.prototype.constructor=u,u.Qb=function(A,$,J){for(var ue=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ue[Pe-2]=arguments[Pe];return y.prototype[$].apply(A,ue)}}function F(u){const y=u.length;if(0<y){const E=Array(y);for(let A=0;A<y;A++)E[A]=u[A];return E}return[]}function N(u,y){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(p(A)){const $=u.length||0,J=A.length||0;u.length=$+J;for(let ue=0;ue<J;ue++)u[$+ue]=A[ue]}else u.push(A)}}class U{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(u){return/^[\s\xa0]*$/.test(u)}function z(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var K=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function oe(u,y,E){for(const A in u)y.call(E,u[A],A,u)}function C(u,y){for(const E in u)y.call(void 0,u[E],E,u)}function x(u){const y={};for(const E in u)y[E]=u[E];return y}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,y){let E,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(E in A)u[E]=A[E];for(let J=0;J<D.length;J++)E=D[J],Object.prototype.hasOwnProperty.call(A,E)&&(u[E]=A[E])}}function B(u){var y=1;u=u.split(":");const E=[];for(;0<y&&u.length;)E.push(u.shift()),y--;return u.length&&E.push(u.join(":")),E}function q(u){f.setTimeout(()=>{throw u},0)}function V(){var u=pe;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class mt{constructor(){this.h=this.g=null}add(y,E){const A=Ge.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Ge=new U(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,ce=!1,pe=new mt,j=()=>{const u=f.Promise.resolve(void 0);Q=()=>{u.then(ie)}};var ie=()=>{for(var u;u=V();){try{u.h.call(u.g)}catch(E){q(E)}var y=Ge;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}ce=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};f.addEventListener("test",E,y),f.removeEventListener("test",E,y)}catch{}return u})();function Ie(u,y){if(ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var E=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(K){e:{try{G(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else E=="mouseover"?y=u.fromElement:E=="mouseout"&&(y=u.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}I(Ie,ee);var we={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Xt(u,y,E,A,$){this.listener=u,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=$,this.key=++ye,this.da=this.fa=!1}function ei(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fn(u){this.src=u,this.g={},this.h=0}Fn.prototype.add=function(u,y,E,A,$){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var ue=ti(u,y,A,$);return-1<ue?(y=u[ue],E||(y.fa=!1)):(y=new Xt(y,this.src,J,!!A,$),y.fa=E,u.push(y)),y};function Oi(u,y){var E=y.type;if(E in u.g){var A=u.g[E],$=Array.prototype.indexOf.call(A,y,void 0),J;(J=0<=$)&&Array.prototype.splice.call(A,$,1),J&&(ei(y),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ti(u,y,E,A){for(var $=0;$<u.length;++$){var J=u[$];if(!J.da&&J.listener==y&&J.capture==!!E&&J.ha==A)return $}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),Er={};function ii(u,y,E,A,$){if(Array.isArray(y)){for(var J=0;J<y.length;J++)ii(u,y[J],E,A,$);return null}return E=Dc(E),u&&u[ut]?u.K(y,E,g(A)?!!A.capture:!1,$):dn(u,y,E,!1,A,$)}function dn(u,y,E,A,$,J){if(!y)throw Error("Invalid event type");var ue=g($)?!!$.capture:!!$,Pe=ha(u);if(Pe||(u[ni]=Pe=new Fn(u)),E=Pe.add(y,E,A,ue,J),E.proxy)return E;if(A=Io(),E.proxy=A,A.src=u,A.listener=E,u.addEventListener)fe||($=ue),$===void 0&&($=!1),u.addEventListener(y.toString(),A,$);else if(u.attachEvent)u.attachEvent(fs(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Io(){function u(E){return y.call(u.src,u.listener,E)}const y=ud;return u}function No(u,y,E,A,$){if(Array.isArray(y))for(var J=0;J<y.length;J++)No(u,y[J],E,A,$);else A=g(A)?!!A.capture:!!A,E=Dc(E),u&&u[ut]?(u=u.i,y=String(y).toString(),y in u.g&&(J=u.g[y],E=ti(J,E,A,$),-1<E&&(ei(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete u.g[y],u.h--)))):u&&(u=ha(u))&&(y=u.g[y.toString()],u=-1,y&&(u=ti(y,E,A,$)),(E=-1<u?y[u]:null)&&ua(E))}function ua(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ut])Oi(y.i,u);else{var E=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(E,A,u.capture):y.detachEvent?y.detachEvent(fs(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=ha(y))?(Oi(E,u),E.h==0&&(E.src=null,y[ni]=null)):ei(u)}}}function fs(u){return u in Er?Er[u]:Er[u]="on"+u}function ud(u,y){if(u.da)u=!0;else{y=new Ie(y,this);var E=u.listener,A=u.ha||u.src;u.fa&&ua(u),u=E.call(A,y)}return u}function ha(u){return u=u[ni],u instanceof Fn?u:null}var Do="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dc(u){return typeof u=="function"?u:(u[Do]||(u[Do]=function(y){return u.handleEvent(y)}),u[Do])}function ht(){he.call(this),this.i=new Fn(this),this.M=this,this.F=null}I(ht,he),ht.prototype[ut]=!0,ht.prototype.removeEventListener=function(u,y,E,A){No(this,u,y,E,A)};function Ke(u,y){var E,A=u.F;if(A)for(E=[];A;A=A.F)E.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new ee(y,u);else if(y instanceof ee)y.target=y.target||u;else{var $=y;y=new ee(A,u),k(y,$)}if($=!0,E)for(var J=E.length-1;0<=J;J--){var ue=y.g=E[J];$=_n(ue,A,!0,y)&&$}if(ue=y.g=u,$=_n(ue,A,!0,y)&&$,$=_n(ue,A,!1,y)&&$,E)for(J=0;J<E.length;J++)ue=y.g=E[J],$=_n(ue,A,!1,y)&&$}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var E=u.g[y],A=0;A<E.length;A++)ei(E[A]);delete u.g[y],u.h--}}this.F=null},ht.prototype.K=function(u,y,E,A){return this.i.add(String(u),y,!1,E,A)},ht.prototype.L=function(u,y,E,A){return this.i.add(String(u),y,!0,E,A)};function _n(u,y,E,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,J=0;J<y.length;++J){var ue=y[J];if(ue&&!ue.da&&ue.capture==E){var Pe=ue.listener,Nt=ue.ha||ue.src;ue.fa&&Oi(u.i,ue),$=Pe.call(Nt,A)!==!1&&$}}return $&&!A.defaultPrevented}function Wt(u,y,E){if(typeof u=="function")E&&(u=S(u,E));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:f.setTimeout(u,y||0)}function kc(u){u.g=Wt(()=>{u.g=null,u.i&&(u.i=!1,kc(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class hd extends he{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:kc(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(u){he.call(this),this.h=u,this.g={}}I(ms,he);var ps=[];function gs(u){oe(u.g,function(y,E){this.g.hasOwnProperty(E)&&ua(y)},u),u.g={}}ms.prototype.N=function(){ms.aa.N.call(this),gs(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=f.JSON.stringify,da=f.JSON.parse,ys=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ko(){}ko.prototype.h=null;function Oo(u){return u.h||(u.h=u.i())}function Mo(){}var Mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vi(){ee.call(this,"d")}I(Vi,ee);function Vo(){ee.call(this,"c")}I(Vo,ee);var ri={},jo=null;function Tr(){return jo=jo||new ht}ri.La="serverreachability";function fa(u){ee.call(this,ri.La,u)}I(fa,ee);function wr(u){const y=Tr();Ke(y,new fa(y))}ri.STAT_EVENT="statevent";function Oc(u,y){ee.call(this,ri.STAT_EVENT,u),this.stat=y}I(Oc,ee);function st(u){const y=Tr();Ke(y,new Oc(y,u))}ri.Ma="timingevent";function It(u,y){ee.call(this,ri.Ma,u),this.size=y}I(It,ee);function bt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},y)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Po(u,y,E,A,$,J){u.info(function(){if(u.g)if(J)for(var ue="",Pe=J.split("&"),Nt=0;Nt<Pe.length;Nt++){var Le=Pe[Nt].split("=");if(1<Le.length){var Vt=Le[0];Le=Le[1];var Dt=Vt.split("_");ue=2<=Dt.length&&Dt[1]=="type"?ue+(Vt+"="+Le+"&"):ue+(Vt+"=redacted&")}}else ue=null;else ue=J;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+y+`
`+E+`
`+ue})}function dd(u,y,E,A,$,J,ue){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+y+`
`+E+`
`+J+" "+ue})}function br(u,y,E,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+vs(u,E)+(A?" "+A:"")})}function Mc(u,y){u.info(function(){return"TIMEOUT: "+y})}Nn.prototype.info=function(){};function vs(u,y){if(!u.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(u=0;u<E.length;u++)if(Array.isArray(E[u])){var A=E[u];if(!(2>A.length)){var $=A[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Hn(E)}catch{return y}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ai(){}I(ai,ko),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},si=new ai;function on(u,y,E,A){this.j=u,this.i=y,this.l=E,this.R=A||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Lo={},ma={};function Gn(u,y,E){u.L=1,u.v=bs(En(y)),u.m=E,u.P=!0,Pi(u,null)}function Pi(u,y){u.F=Date.now(),_s(u),u.A=En(u.v);var E=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Ho(E.i,"t",A),u.C=0,E=u.j.J,u.h=new pt,u.g=Xc(u.j,E?y:null,!u.m),0<u.O&&(u.M=new hd(S(u.Y,u,u.g),u.O)),y=u.U,E=u.g,A=u.ca;var $="readystatechange";Array.isArray($)||($&&(ps[0]=$.toString()),$=ps);for(var J=0;J<$.length;J++){var ue=ii(E,$[J],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),wr(),Po(u.i,u.u,u.A,u.l,u.R,u.m)}on.prototype.ca=function(u){u=u.target;const y=this.M;y&&Mn(u)==3?y.j():this.Y(u)},on.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=Mn(this.g);var y=this.g.Ba();const Gi=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||qc(this.g)))){this.J||Dt!=4||y==7||(y==8||0>=Gi?wr(3):wr(2)),Ar(this);var E=this.g.Z();this.X=E;t:if(Vc(this)){var A=qc(this.g);u="";var $=A.length,J=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),oi(this);var ue="";break t}this.h.i=new f.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,u+=this.h.i.decode(A[y],{stream:!(J&&y==$-1)});A.length=0,this.h.g+=u,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,dd(this.i,this.u,this.A,this.l,this.R,Dt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Nt=this.g;if((Pe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Pe)){var Le=Pe;break t}}Le=null}if(E=Le)br(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,E);else{this.o=!1,this.s=3,st(12),qt(this),oi(this);break e}}if(this.P){E=!0;let Ft;for(;!this.J&&this.C<ue.length;)if(Ft=jc(this,ue),Ft==ma){Dt==4&&(this.s=4,st(14),E=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Lo){this.s=4,st(15),br(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else br(this.i,this.l,Ft,null),Es(this,Ft);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||ue.length!=0||this.h.h||(this.s=1,st(16),E=!1),this.o=this.o&&E,!E)br(this.i,this.l,ue,"[Invalid Chunked Response]"),qt(this),oi(this);else if(0<ue.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ds(Vt),Vt.M=!0,st(11))}}else br(this.i,this.l,ue,null),Es(this,ue);Dt==4&&qt(this),this.o&&!this.J&&(Dt==4?Kc(this.j,this):(this.o=!1,_s(this)))}else yd(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),qt(this),oi(this)}}}catch{}finally{}};function Vc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jc(u,y){var E=u.C,A=y.indexOf(`
`,E);return A==-1?ma:(E=Number(y.substring(E,A)),isNaN(E)?Lo:(A+=1,A+E>y.length?ma:(y=y.slice(A,A+E),u.C=A+E,y)))}on.prototype.cancel=function(){this.J=!0,qt(this)};function _s(u){u.S=Date.now()+u.I,Pc(u,u.I)}function Pc(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bt(S(u.ba,u),y)}function Ar(u){u.B&&(f.clearTimeout(u.B),u.B=null)}on.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Mc(this.i,this.A),this.L!=2&&(wr(),st(17)),qt(this),this.s=2,oi(this)):Pc(this,this.S-u)};function oi(u){u.j.G==0||u.J||Kc(u.j,u)}function qt(u){Ar(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,gs(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Es(u,y){try{var E=u.j;if(E.G!=0&&(E.g==u||Uo(E.h,u))){if(!u.K&&Uo(E.h,u)&&E.G==3){try{var A=E.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<u.F)Ra(E),Sa(E);else break e;Qo(E),st(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=bt(S(E.Za,E),6e3));if(1>=ga(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Hi(E,11)}else if((u.K||E.g==u)&&Ra(E),!P(y))for($=E.Da.g.parse(y),y=0;y<$.length;y++){let Le=$[y];if(E.T=Le[0],Le=Le[1],E.G==2)if(Le[0]=="c"){E.K=Le[1],E.ia=Le[2];const Vt=Le[3];Vt!=null&&(E.la=Vt,E.j.info("VER="+E.la));const Dt=Le[4];Dt!=null&&(E.Aa=Dt,E.j.info("SVER="+E.Aa));const Gi=Le[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(A=1.5*Gi,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Ft=u.g;if(Ft){const mi=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var J=A.h;J.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ya(J,J.h),J.h=null))}if(A.D){const Wo=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(A.ya=Wo,We(A.I,A.D,Wo))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-u.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var ue=u;if(A.qa=Qc(A,A.J?A.ia:null,A.W),ue.K){ln(A.h,ue);var Pe=ue,Nt=A.L;Nt&&(Pe.I=Nt),Pe.B&&(Ar(Pe),_s(Pe)),A.g=ue}else Gc(A);0<E.i.length&&Aa(E)}else Le[0]!="stop"&&Le[0]!="close"||Hi(E,7);else E.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Hi(E,7):Ko(E):Le[0]!="noop"&&E.l&&E.l.ta(Le),E.v=0)}}wr(4)}catch{}}var Lc=class{constructor(u,y){this.g=u,this.map=y}};function Li(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ga(u){return u.h?1:u.g?u.g.size:0}function Uo(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function ya(u,y){u.g?u.g.add(y):u.h=y}function ln(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Li.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Bo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const E of u.g.values())y=y.concat(E.D);return y}return F(u.i)}function fd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var y=[],E=u.length,A=0;A<E;A++)y.push(u[A]);return y}y=[],E=0;for(A in u)y[E++]=u[A];return y}function va(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var y=[];u=u.length;for(var E=0;E<u;E++)y.push(E);return y}y=[],E=0;for(const A in u)y[E++]=A;return y}}}function zo(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var E=va(u),A=fd(u),$=A.length,J=0;J<$;J++)y.call(void 0,A[J],E&&E[J],u)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function md(u,y){if(u){u=u.split("&");for(var E=0;E<u.length;E++){var A=u[E].indexOf("="),$=null;if(0<=A){var J=u[E].substring(0,A);$=u[E].substring(A+1)}else J=u[E];y(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function St(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof St){this.h=u.h,ws(this,u.j),this.o=u.o,this.g=u.g,Rr(this,u.s),this.l=u.l;var y=u.i,E=new Bi;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Ui(this,E),this.m=u.m}else u&&(y=String(u).match(Ts))?(this.h=!1,ws(this,y[1]||"",!0),this.o=Dn(y[2]||""),this.g=Dn(y[3]||"",!0),Rr(this,y[4]),this.l=Dn(y[5]||"",!0),Ui(this,y[6]||"",!0),this.m=Dn(y[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}St.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Ss(y,qo,!0),":");var E=this.g;return(E||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Ss(y,qo,!0),"@"),u.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&u.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Ss(E,E.charAt(0)=="/"?pd:Fo,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Ss(E,_a)),u.join("")};function En(u){return new St(u)}function ws(u,y,E){u.j=E?Dn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Rr(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function Ui(u,y,E){y instanceof Bi?(u.i=y,Bc(u.i,u.h)):(E||(y=Ss(y,gd)),u.i=new Bi(y,u.h))}function We(u,y,E){u.i.set(y,E)}function bs(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Dn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ss(u,y,E){return typeof u=="string"?(u=encodeURI(u).replace(y,Uc),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Uc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qo=/[#\/\?@]/g,Fo=/[#\?:]/g,pd=/[#\?]/g,gd=/[#\?@]/g,_a=/#/g;function Bi(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function kn(u){u.g||(u.g=new Map,u.h=0,u.i&&md(u.i,function(y,E){u.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=Bi.prototype,i.add=function(u,y){kn(this),this.i=null,u=li(this,u);var E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(y),this.h+=1,this};function zi(u,y){kn(u),y=li(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function qi(u,y){return kn(u),y=li(u,y),u.g.has(y)}i.forEach=function(u,y){kn(this),this.g.forEach(function(E,A){E.forEach(function($){u.call(y,$,A,this)},this)},this)},i.na=function(){kn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let A=0;A<y.length;A++){const $=u[A];for(let J=0;J<$.length;J++)E.push(y[A])}return E},i.V=function(u){kn(this);let y=[];if(typeof u=="string")qi(this,u)&&(y=y.concat(this.g.get(li(this,u))));else{u=Array.from(this.g.values());for(let E=0;E<u.length;E++)y=y.concat(u[E])}return y},i.set=function(u,y){return kn(this),this.i=null,u=li(this,u),qi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},i.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function Ho(u,y,E){zi(u,y),0<E.length&&(u.i=null,u.g.set(li(u,y),F(E)),u.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var A=y[E];const J=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var $=J;ue[A]!==""&&($+="="+encodeURIComponent(String(ue[A]))),u.push($)}}return this.i=u.join("&")};function li(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Bc(u,y){y&&!u.j&&(kn(u),u.i=null,u.g.forEach(function(E,A){var $=A.toLowerCase();A!=$&&(zi(this,A),Ho(this,$,E))},u)),u.j=y}function As(u,y){const E=new Nn;if(f.Image){const A=new Image;A.onload=R(On,E,"TestLoadImage: loaded",!0,y,A),A.onerror=R(On,E,"TestLoadImage: error",!1,y,A),A.onabort=R(On,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=R(On,E,"TestLoadImage: timeout",!1,y,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function $n(u,y){const E=new Nn,A=new AbortController,$=setTimeout(()=>{A.abort(),On(E,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(J=>{clearTimeout($),J.ok?On(E,"TestPingServer: ok",!0,y):On(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),On(E,"TestPingServer: error",!1,y)})}function On(u,y,E,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(E)}catch{}}function Rs(){this.g=new ys}function ci(u,y,E){const A=E||"";try{zo(u,function($,J){let ue=$;g($)&&(ue=Hn($)),y.push(A+J+"="+encodeURIComponent(ue))})}catch($){throw y.push(A+"type="+encodeURIComponent("_badmap")),$}}function xr(u){this.l=u.Ub||null,this.j=u.eb||!1}I(xr,ko),xr.prototype.g=function(){return new Fi(this.l,this.j)},xr.prototype.i=(function(u){return function(){return u}})({});function Fi(u,y){ht.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Fi,ht),i=Fi.prototype,i.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,hi(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||f).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Go(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Go(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?ui(this):hi(this),this.readyState==3&&Go(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,ui(this))},i.Qa=function(u){this.g&&(this.response=u,ui(this))},i.ga=function(){this.g&&ui(this)};function ui(u){u.readyState=4,u.l=null,u.j=null,u.v=null,hi(u)}i.setRequestHeader=function(u,y){this.u.append(u,y)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=y.next();return u.join(`\r
`)};function hi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $o(u){let y="";return oe(u,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function Mt(u,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=$o(E),typeof u=="string"?E!=null&&encodeURIComponent(String(E)):We(u,y,E))}function $e(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I($e,ht);var Ea=/^https?$/i,xs=["POST","PUT"];i=$e.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?Oo(this.o):Oo(si),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(J){zc(this,J);return}if(u=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)E.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())E.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),$=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(xs,y,void 0))||A||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of E)this.g.setRequestHeader(J,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cs(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){zc(this,J)}};function zc(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,Ta(u),di(u)}function Ta(u){u.A||(u.A=!0,Ke(u,"complete"),Ke(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ke(this,"complete"),Ke(this,"abort"),di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),$e.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?wa(this):this.bb())},i.bb=function(){wa(this)};function wa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)Wt(u.Ea,0,u);else if(Ke(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const ue=u.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=ue===0){var $=String(u.D).match(Ts)[1]||null;!$&&f.self&&f.self.location&&($=f.self.location.protocol.slice(0,-1)),A=!Ea.test($?$.toLowerCase():"")}E=A}if(E)Ke(u,"complete"),Ke(u,"success");else{u.m=6;try{var J=2<Mn(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",Ta(u)}}finally{di(u)}}}}function di(u,y){if(u.g){Cs(u);const E=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Ke(u,"ready");try{E.onreadystatechange=A}catch{}}}function Cs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),da(y)}};function qc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yd(u){const y={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(P(u[A]))continue;var E=B(u[A]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=y[$]||[];y[$]=J,J.push(E)}C(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(u,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||y}function ba(u){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,u),this.cb=Is("retryDelaySeedMs",1e4,u),this.Wa=Is("forwardChannelMaxRetries",2,u),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Li(u&&u.concurrentRequestLimit),this.Da=new Rs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ba.prototype,i.la=8,i.G=1,i.connect=function(u,y,E,A){st(0),this.W=u,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=Qc(this,null,this.W),Aa(this)};function Ko(u){if(Fc(u),u.G==3){var y=u.U++,E=En(u.I);if(We(E,"SID",u.K),We(E,"RID",y),We(E,"TYPE","terminate"),Ns(u,E),y=new on(u,u.j,y),y.L=2,y.v=bs(En(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&f.Image&&(new Image().src=y.v,E=!0),E||(y.g=Xc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),_s(y)}Yc(u)}function Sa(u){u.g&&(Ds(u),u.g.cancel(),u.g=null)}function Fc(u){Sa(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ra(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Aa(u){if(!pa(u.h)&&!u.s){u.s=!0;var y=u.Ga;Q||j(),ce||(Q(),ce=!0),pe.add(y,u),u.B=0}}function vd(u,y){return ga(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bt(S(u.Ga,u,y),Xo(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new on(this,this.j,u);let J=this.o;if(this.S&&(J?(J=x(J),k(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Hc(this,$,y),E=En(this.I),We(E,"RID",u),We(E,"CVER",22),this.D&&We(E,"X-HTTP-Session-Id",this.D),Ns(this,E),J&&(this.O?y="headers="+encodeURIComponent(String($o(J)))+"&"+y:this.m&&Mt(E,this.m,J)),ya(this.h,$),this.Ua&&We(E,"TYPE","init"),this.P?(We(E,"$req",y),We(E,"SID","null"),$.T=!0,Gn($,E,null)):Gn($,E,y),this.G=2}}else this.G==3&&(u?Yo(this,u):this.i.length==0||pa(this.h)||Yo(this))};function Yo(u,y){var E;y?E=y.l:E=u.U++;const A=En(u.I);We(A,"SID",u.K),We(A,"RID",E),We(A,"AID",u.T),Ns(u,A),u.m&&u.o&&Mt(A,u.m,u.o),E=new on(u,u.j,E,u.B+1),u.m===null&&(E.H=u.o),y&&(u.i=y.D.concat(u.i)),y=Hc(u,E,1e3),E.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ya(u.h,E),Gn(E,A,y)}function Ns(u,y){u.H&&oe(u.H,function(E,A){We(y,A,E)}),u.l&&zo({},function(E,A){We(y,A,E)})}function Hc(u,y,E){E=Math.min(u.i.length,E);var A=u.l?S(u.l.Na,u.l,u):null;e:{var $=u.i;let J=-1;for(;;){const ue=["count="+E];J==-1?0<E?(J=$[0].g,ue.push("ofs="+J)):J=0:ue.push("ofs="+J);let Pe=!0;for(let Nt=0;Nt<E;Nt++){let Le=$[Nt].g;const Vt=$[Nt].map;if(Le-=J,0>Le)J=Math.max(0,$[Nt].g-100),Pe=!1;else try{ci(Vt,ue,"req"+Le+"_")}catch{A&&A(Vt)}}if(Pe){A=ue.join("&");break e}}}return u=u.i.splice(0,E),y.D=u,A}function Gc(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;Q||j(),ce||(Q(),ce=!0),pe.add(y,u),u.v=0}}function Qo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bt(S(u.Fa,u),Xo(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bt(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Sa(this),$c(this))};function Ds(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function $c(u){u.g=new on(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=En(u.qa);We(y,"RID","rpc"),We(y,"SID",u.K),We(y,"AID",u.T),We(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(y,"TO",u.ja),We(y,"TYPE","xmlhttp"),Ns(u,y),u.m&&u.o&&Mt(y,u.m,u.o),u.L&&(u.g.I=u.L);var E=u.g;u=u.ia,E.L=1,E.v=bs(En(y)),E.m=null,E.P=!0,Pi(E,u)}i.Za=function(){this.C!=null&&(this.C=null,Sa(this),Qo(this),st(19))};function Ra(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Kc(u,y){var E=null;if(u.g==y){Ra(u),Ds(u),u.g=null;var A=2}else if(Uo(u.h,y))E=y.D,ln(u.h,y),A=1;else return;if(u.G!=0){if(y.o)if(A==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var $=u.B;A=Tr(),Ke(A,new It(A,E)),Aa(u)}else Gc(u);else if($=y.s,$==3||$==0&&0<y.X||!(A==1&&vd(u,y)||A==2&&Qo(u)))switch(E&&0<E.length&&(y=u.h,y.i=y.i.concat(E)),$){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function Xo(u,y){let E=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(E*=2),E*y}function Hi(u,y){if(u.j.info("Error code "+y),y==2){var E=S(u.fb,u),A=u.Xa;const $=!A;A=new St(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ws(A,"https"),bs(A),$?As(A.toString(),E):$n(A.toString(),E)}else st(2);u.G=0,u.l&&u.l.sa(y),Yc(u),Fc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Yc(u){if(u.G=0,u.ka=[],u.l){const y=Bo(u.h);(y.length!=0||u.i.length!=0)&&(N(u.ka,y),N(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function Qc(u,y,E){var A=E instanceof St?En(E):new St(E);if(A.g!="")y&&(A.g=y+"."+A.g),Rr(A,A.s);else{var $=f.location;A=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var J=new St(null);A&&ws(J,A),y&&(J.g=y),$&&Rr(J,$),E&&(J.l=E),A=J}return E=u.D,y=u.ya,E&&y&&We(A,E,y),We(A,"VER",u.la),Ns(u,A),A}function Xc(u,y,E){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new $e(new xr({eb:E})):new $e(u.pa),y.Ha(u.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}i=Wc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function xa(){}xa.prototype.g=function(u,y){return new cn(u,y)};function cn(u,y){ht.call(this),this.g=new ba(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!P(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new fi(this)}I(cn,ht),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ko(this.g)},cn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.u&&(E={},E.__data__=Hn(u),u=E);y.i.push(new Lc(y.Ya++,u)),y.G==3&&Aa(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,cn.aa.N.call(this)};function Zc(u){Vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const E in y){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}I(Zc,Vi);function Jc(){Vo.call(this),this.status=1}I(Jc,Vo);function fi(u){this.g=u}I(fi,Wc),fi.prototype.ua=function(){Ke(this.g,"a")},fi.prototype.ta=function(u){Ke(this.g,new Zc(u))},fi.prototype.sa=function(u){Ke(this.g,new Jc)},fi.prototype.ra=function(){Ke(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,KT=function(){return new xa},$T=function(){return Tr()},GT=ri,$m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,hh=Sr,ji.COMPLETE="complete",HT=ji,Mo.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",ht.prototype.listen=ht.prototype.K,ql=Mo,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,FT=$e}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new mp("@firebase/firestore");function Ul(){return ta.logLevel}function ge(i,...e){if(ta.logLevel<=je.DEBUG){const n=e.map(Ip);ta.debug(`Firestore (${To}): ${i}`,...n)}}function gr(i,...e){if(ta.logLevel<=je.ERROR){const n=e.map(Ip);ta.error(`Firestore (${To}): ${i}`,...n)}}function na(i,...e){if(ta.logLevel<=je.WARN){const n=e.map(Ip);ta.warn(`Firestore (${To}): ${i}`,...n)}}function Ip(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(i="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+i;throw gr(e),new Error(e)}function Xe(i,e){i||Re()}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class HC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GC{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let l=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new dr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new dr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string"),new YT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new nn(e)}}class $C{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KC{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new $C(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xe(this.o===void 0);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new YC(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=XC(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<n&&(s+=e.charAt(o[l]%e.length))}return s}}function qe(i,e){return i<e?-1:i>e?1:0}function fo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Et(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Et(0,0))}static max(){return new xe(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(),s===void 0?s=e.length-n:s>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return nc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nc?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const l=e.get(o),h=n.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends nc{construct(e,n,s){return new rt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new rt(n)}static emptyPath(){return new rt([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends nc{construct(e,n,s){return new Bt(e,n,s)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const n=[];let s="",o=0;const l=()=>{if(s.length===0)throw new de(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new de(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new de(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(rt.fromString(e))}static fromName(e){return new Ee(rt.fromString(e).popFirst(5))}static empty(){return new Ee(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new rt(e.slice()))}}function ZC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new Et(n+1,0):new Et(n,s));return new is(o,Ee.empty(),e)}function JC(i){return new is(i.readTime,i.key,-1)}class is{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new is(xe.min(),Ee.empty(),-1)}static max(){return new is(xe.max(),Ee.empty(),-1)}}function eI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(i){if(i.code!==se.FAILED_PRECONDITION||i.message!==tI)throw i;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,s)=>{n(e)}))}static reject(e){return new le(((n,s)=>{s(e)}))}static waitFor(e){return new le(((n,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&n()}),(p=>s(p)))})),h=!0,l===o&&n()}))}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next((o=>o?le.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,l)=>{s.push(n.call(this,o,l))})),this.waitFor(s)}static mapArray(e,n){return new le(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;n(e[g]).next((_=>{h[g]=_,++f,f===l&&s(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new le(((s,o)=>{const l=()=>{e()===!0?n().next((()=>{l()}),o):s()};l()}))}}function iI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _c(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dp.oe=-1;function qh(i){return i==null}function Ah(i){return i===0&&1/i==-1/0}function rI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ah(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function la(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function XT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,o,l){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=o??Kt.EMPTY,this.right=l??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,l){return new Kt(e??this.key,n??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,s),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,s,o,l){return this}insert(e,n,s){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R0(this.data.getIterator())}getIteratorFrom(e){return new R0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class R0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Yt(Bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new WT("Invalid base64 string: "+l):l}})(e);return new zt(n)}static fromUint8Array(e){const n=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const sI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(i){if(Xe(!!i),typeof i=="string"){let e=0;const n=sI.exec(i);if(Xe(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(i.seconds),nanos:vt(i.nanos)}}function vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ia(i){return typeof i=="string"?zt.fromBase64String(i):zt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i){var e,n;return((n=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Op(i){const e=i.mapValue.fields.__previous_value__;return kp(e)?Op(e):e}function ic(i){const e=rs(i.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,s,o,l,h,f,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g}}class mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih={mapValue:{}};function ra(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?kp(i)?4:lI(i)?9007199254740991:oI(i)?10:11:Re()}function xi(i,e){if(i===e)return!0;const n=ra(i);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ic(i).isEqual(ic(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=rs(o.timestampValue),f=rs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return ia(o.bytesValue).isEqual(ia(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return vt(o.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return vt(o.integerValue)===vt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=vt(o.doubleValue),f=vt(l.doubleValue);return h===f?Ah(h)===Ah(f):isNaN(h)&&isNaN(f)}return!1})(i,e);case 9:return fo(i.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(A0(h)!==A0(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!xi(h[p],f[p])))return!1;return!0})(i,e);default:return Re()}}function rc(i,e){return(i.values||[]).find((n=>xi(n,e)))!==void 0}function po(i,e){if(i===e)return 0;const n=ra(i),s=ra(e);if(n!==s)return qe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(i.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=vt(l.integerValue||l.doubleValue),p=vt(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(i,e);case 3:return x0(i.timestampValue,e.timestampValue);case 4:return x0(ic(i),ic(e));case 5:return qe(i.stringValue,e.stringValue);case 6:return(function(l,h){const f=ia(l),p=ia(h);return f.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let g=0;g<f.length&&g<p.length;g++){const _=qe(f[g],p[g]);if(_!==0)return _}return qe(f.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=qe(vt(l.latitude),vt(h.latitude));return f!==0?f:qe(vt(l.longitude),vt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return C0(i.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,p,g,_;const w=l.fields||{},S=h.fields||{},R=(f=w.value)===null||f===void 0?void 0:f.arrayValue,I=(p=S.value)===null||p===void 0?void 0:p.arrayValue,F=qe(((g=R?.values)===null||g===void 0?void 0:g.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:C0(R,I)})(i.mapValue,e.mapValue);case 11:return(function(l,h){if(l===ih.mapValue&&h===ih.mapValue)return 0;if(l===ih.mapValue)return 1;if(h===ih.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=h.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const S=qe(p[w],_[w]);if(S!==0)return S;const R=po(f[p[w]],g[_[w]]);if(R!==0)return R}return qe(p.length,_.length)})(i.mapValue,e.mapValue);default:throw Re()}}function x0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return qe(i,e);const n=rs(i),s=rs(e),o=qe(n.seconds,s.seconds);return o!==0?o:qe(n.nanos,s.nanos)}function C0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const l=po(n[o],s[o]);if(l)return l}return qe(n.length,s.length)}function go(i){return Km(i)}function Km(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=rs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ia(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ee.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const l of n.values||[])o?o=!1:s+=",",s+=Km(l);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Km(n.fields[h])}`;return o+"}"})(i.mapValue):Re()}function I0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ym(i){return!!i&&"integerValue"in i}function Mp(i){return!!i&&"arrayValue"in i}function N0(i){return!!i&&"nullValue"in i}function D0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function dh(i){return!!i&&"mapValue"in i}function oI(i){var e,n;return((n=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $l(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return la(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=$l(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(i.arrayValue.values[n]);return e}return Object.assign({},i)}function lI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=Bt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!n.isImmediateParentOf(f)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=f.popLast()}h?s[f.lastSegment()]=$l(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,o)}delete(e){const n=this.field(e.popLast());dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];dh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){la(n,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new gn($l(this.value))}}function ZT(i){const e=[];return la(i.fields,((n,s)=>{const o=new Bt([n]);if(dh(s)){const l=ZT(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,o,l,h,f){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new rn(e,0,xe.min(),xe.min(),xe.min(),gn.empty(),0)}static newFoundDocument(e,n,s,o){return new rn(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new rn(e,2,n,xe.min(),xe.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,xe.min(),xe.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function k0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const l=e[o],h=i.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),n.key):s=po(h,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function O0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!xi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{}class Ct extends JT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new hI(e,n,s):n==="array-contains"?new mI(e,s):n==="in"?new pI(e,s):n==="not-in"?new gI(e,s):n==="array-contains-any"?new yI(e,s):new Ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new dI(e,s):new fI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends JT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jn(e,n)}matches(e){return ew(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ew(i){return i.op==="and"}function tw(i){return uI(i)&&ew(i)}function uI(i){for(const e of i.filters)if(e instanceof Jn)return!1;return!0}function Qm(i){if(i instanceof Ct)return i.field.canonicalString()+i.op.toString()+go(i.value);if(tw(i))return i.filters.map((e=>Qm(e))).join(",");{const e=i.filters.map((n=>Qm(n))).join(",");return`${i.op}(${e})`}}function nw(i,e){return i instanceof Ct?(function(s,o){return o instanceof Ct&&s.op===o.op&&s.field.isEqual(o.field)&&xi(s.value,o.value)})(i,e):i instanceof Jn?(function(s,o){return o instanceof Jn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&nw(h,o.filters[f])),!0):!1})(i,e):void Re()}function iw(i){return i instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`})(i):i instanceof Jn?(function(n){return n.op.toString()+" {"+n.getFilters().map(iw).join(" ,")+"}"})(i):"Filter"}class hI extends Ct{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class dI extends Ct{constructor(e,n){super(e,"in",n),this.keys=rw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fI extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=rw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function rw(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class mI extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mp(n)&&rc(n.arrayValue,this.value)}}class pI extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rc(this.value.arrayValue,n)}}class gI extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rc(this.value.arrayValue,n)}}class yI extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>rc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function M0(i,e=null,n=[],s=[],o=null,l=null,h=null){return new vI(i,e,n,s,o,l,h)}function Vp(i){const e=Ce(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Qm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>go(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>go(s))).join(",")),e.ue=n}return e.ue}function jp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!cI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!nw(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!O0(i.startAt,e.startAt)&&O0(i.endAt,e.endAt)}function Xm(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n=null,s=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _I(i,e,n,s,o,l,h,f){return new wo(i,e,n,s,o,l,h,f)}function Fh(i){return new wo(i)}function V0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function sw(i){return i.collectionGroup!==null}function Kl(i){const e=Ce(i);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Yt(Bt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new sc(l,s))})),n.has(Bt.keyField().canonicalString())||e.ce.push(new sc(Bt.keyField(),s))}return e.ce}function Si(i){const e=Ce(i);return e.le||(e.le=EI(e,Kl(i))),e.le}function EI(i,e){if(i.limitType==="F")return M0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new sc(o.field,l)}));const n=i.endAt?new Rh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Rh(i.startAt.position,i.startAt.inclusive):null;return M0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Wm(i,e){const n=i.filters.concat([e]);return new wo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Zm(i,e,n){return new wo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Hh(i,e){return jp(Si(i),Si(e))&&i.limitType===e.limitType}function aw(i){return`${Vp(Si(i))}|lt:${i.limitType}`}function io(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>iw(o))).join(", ")}]`),qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>go(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>go(o))).join(",")),`Target(${s})`})(Si(i))}; limitType=${i.limitType})`}function Gh(i,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(i,e)&&(function(s,o){for(const l of Kl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,p){const g=k0(h,f,p);return h.inclusive?g<=0:g<0})(s.startAt,Kl(s),o)||s.endAt&&!(function(h,f,p){const g=k0(h,f,p);return h.inclusive?g>=0:g>0})(s.endAt,Kl(s),o))})(i,e)}function TI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ow(i){return(e,n)=>{let s=!1;for(const o of Kl(i)){const l=wI(o,e,n);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function wI(i,e,n){const s=i.field.isKeyField()?Ee.comparator(e.key,n.key):(function(l,h,f){const p=h.data.field(l),g=f.data.field(l);return p!==null&&g!==null?po(p,g):Re()})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((n,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return XT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new ct(Ee.comparator);function yr(){return bI}const lw=new ct(Ee.comparator);function Fl(...i){let e=lw;for(const n of i)e=e.insert(n.key,n);return e}function cw(i){let e=lw;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ws(){return Yl()}function uw(){return Yl()}function Yl(){return new bo((i=>i.toString()),((i,e)=>i.isEqual(e)))}const SI=new ct(Ee.comparator),AI=new Yt(Ee.comparator);function Ve(...i){let e=AI;for(const n of i)e=e.add(n);return e}const RI=new Yt(qe);function xI(){return RI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function hw(i){return{integerValue:""+i}}function CI(i,e){return rI(e)?hw(e):Pp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function II(i,e,n){return i instanceof ac?(function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&kp(l)&&(l=Op(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}})(n,e):i instanceof oc?fw(i,e):i instanceof lc?mw(i,e):(function(o,l){const h=dw(o,l),f=j0(h)+j0(o.Pe);return Ym(h)&&Ym(o.Pe)?hw(f):Pp(o.serializer,f)})(i,e)}function NI(i,e,n){return i instanceof oc?fw(i,e):i instanceof lc?mw(i,e):n}function dw(i,e){return i instanceof xh?(function(s){return Ym(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ac extends $h{}class oc extends $h{constructor(e){super(),this.elements=e}}function fw(i,e){const n=pw(e);for(const s of i.elements)n.some((o=>xi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class lc extends $h{constructor(e){super(),this.elements=e}}function mw(i,e){let n=pw(e);for(const s of i.elements)n=n.filter((o=>!xi(o,s)));return{arrayValue:{values:n}}}class xh extends $h{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function j0(i){return vt(i.integerValue||i.doubleValue)}function pw(i){return Mp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.field=e,this.transform=n}}function kI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof oc&&o instanceof oc||s instanceof lc&&o instanceof lc?fo(s.elements,o.elements,xi):s instanceof xh&&o instanceof xh?xi(s.Pe,o.Pe):s instanceof ac&&o instanceof ac})(i.transform,e.transform)}class OI{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Kh{}function gw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Lp(i.key,yn.none()):new Ec(i.key,i.data,yn.none());{const n=i.data,s=gn.empty();let o=new Yt(Bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=n.field(l);h===null&&l.length>1&&(l=l.popLast(),h=n.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ds(i.key,s,new Cn(o.toArray()),yn.none())}}function MI(i,e,n){i instanceof Ec?(function(o,l,h){const f=o.value.clone(),p=L0(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(i,e,n):i instanceof ds?(function(o,l,h){if(!fh(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=L0(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(yw(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Ql(i,e,n,s){return i instanceof Ec?(function(l,h,f,p){if(!fh(l.precondition,h))return f;const g=l.value.clone(),_=U0(l.fieldTransforms,p,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof ds?(function(l,h,f,p){if(!fh(l.precondition,h))return f;const g=U0(l.fieldTransforms,p,h),_=h.data;return _.setAll(yw(l)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(i,e,n,s):(function(l,h,f){return fh(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(i,e,n)}function VI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),l=dw(s.transform,o||null);l!=null&&(n===null&&(n=gn.empty()),n.set(s.field,l))}return n||null}function P0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&fo(s,o,((l,h)=>kI(l,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ec extends Kh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ds extends Kh{constructor(e,n,s,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yw(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function L0(i,e,n){const s=new Map;Xe(i.length===n.length);for(let o=0;o<n.length;o++){const l=i[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,NI(h,f,n[o]))}return s}function U0(i,e,n){const s=new Map;for(const o of i){const l=o.transform,h=n.data.field(o.field);s.set(o.field,II(l,h,e))}return s}class Lp extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&MI(l,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ql(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ql(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=uw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=n.has(o.key)?null:f;const p=gw(h,f);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,((n,s)=>P0(n,s)))&&fo(this.baseMutations,e.baseMutations,((n,s)=>P0(n,s)))}}class Up{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Xe(e.mutations.length===s.length);let o=(function(){return SI})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Up(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Be;function BI(i){switch(i){default:return Re();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function vw(i){if(i===void 0)return gr("GRPC error has no .code"),se.UNKNOWN;switch(i){case xt.OK:return se.OK;case xt.CANCELLED:return se.CANCELLED;case xt.UNKNOWN:return se.UNKNOWN;case xt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case xt.INTERNAL:return se.INTERNAL;case xt.UNAVAILABLE:return se.UNAVAILABLE;case xt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case xt.NOT_FOUND:return se.NOT_FOUND;case xt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case xt.ABORTED:return se.ABORTED;case xt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case xt.DATA_LOSS:return se.DATA_LOSS;default:return Re()}}(Be=xt||(xt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new Zs([4294967295,4294967295],0);function B0(i){const e=zI().encode(i),n=new qT;return n.update(e),new Uint8Array(n.digest())}function z0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zs([n,s],0),new Zs([o,l],0)]}class Bp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(s<0)throw new Hl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zs.fromNumber(this.Ie)}Ee(e,n,s){let o=e.add(n.multiply(Zs.fromNumber(s)));return o.compare(qI)===1&&(o=new Zs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B0(e),[s,o]=z0(n);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);if(!this.de(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Bp(l,o,n);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.Ie===0)return;const n=B0(e),[s,o]=z0(n);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,s,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Yh(xe.min(),o,new ct(qe),yr(),Ve())}}class Tc{constructor(e,n,s,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tc(s,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,s,o){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=o}}class _w{constructor(e,n){this.targetId=e,this.me=n}}class Ew{constructor(e,n,s=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class q0{constructor(){this.fe=0,this.ge=H0(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),n=Ve(),s=Ve();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Re()}})),new Tc(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=H0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FI{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=F0(),this.Qe=new ct(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((s,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,s=e.me.count,o=this.Je(n);if(o){const l=o.target;if(Xm(l))if(s===0){const h=new Ee(l.path);this.Ue(n,h,rn.newNoDocument(h,xe.min()))}else Xe(s===1);else{const h=this.Ye(n);if(h!==s){const f=this.Ze(e),p=f?this.Xe(f,e,h):1;if(p!==0){this.je(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=n;let h,f;try{h=ia(s).toUint8Array()}catch(p){if(p instanceof WT)return na("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Bp(h,o,l)}catch(p){return na(p instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Ie===0?null:f}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let o=0;return s.forEach((l=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(n,l,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((l,h)=>{const f=this.Je(h);if(f){if(l.current&&Xm(f.target)){const p=new Ee(f.target.path);this.ke.get(p)!==null||this.it(h,p)||this.Ue(h,p,rn.newNoDocument(p,e))}l.be&&(n.set(h,l.ve()),l.Ce())}}));let s=Ve();this.qe.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const g=this.Je(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ke.forEach(((l,h)=>h.setReadTime(e)));const o=new Yh(e,n,this.Qe,this.ke,s);return this.ke=yr(),this.qe=F0(),this.Qe=new ct(qe),o}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new q0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Yt(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new q0),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function F0(){return new ct(Ee.comparator)}function H0(){return new ct(Ee.comparator)}const HI={asc:"ASCENDING",desc:"DESCENDING"},GI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$I={and:"AND",or:"OR"};class KI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jm(i,e){return i.useProto3Json||qh(e)?e:{value:e}}function Ch(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function YI(i,e){return Ch(i,e.toTimestamp())}function Ai(i){return Xe(!!i),xe.fromTimestamp((function(n){const s=rs(n);return new Et(s.seconds,s.nanos)})(i))}function zp(i,e){return ep(i,e).canonicalString()}function ep(i,e){const n=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function ww(i){const e=rt.fromString(i);return Xe(xw(e)),e}function tp(i,e){return zp(i.databaseId,e.path)}function Sm(i,e){const n=ww(e);if(n.get(1)!==i.databaseId.projectId)throw new de(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(Sw(n))}function bw(i,e){return zp(i.databaseId,e)}function QI(i){const e=ww(i);return e.length===4?rt.emptyPath():Sw(e)}function np(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Sw(i){return Xe(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function G0(i,e,n){return{name:tp(i,e),fields:n.value.mapValue.fields}}function XI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Xe(_===void 0||typeof _=="string"),zt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),zt.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(g){const _=g.code===void 0?se.UNKNOWN:vw(g.code);return new de(_,g.message||"")})(h);n=new Ew(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Sm(i,s.document.name),l=Ai(s.document.updateTime),h=s.document.createTime?Ai(s.document.createTime):xe.min(),f=new gn({mapValue:{fields:s.document.fields}}),p=rn.newFoundDocument(o,l,h,f),g=s.targetIds||[],_=s.removedTargetIds||[];n=new mh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Sm(i,s.document),l=s.readTime?Ai(s.readTime):xe.min(),h=rn.newNoDocument(o,l),f=s.removedTargetIds||[];n=new mh([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Sm(i,s.document),l=s.removedTargetIds||[];n=new mh([],l,o,null)}else{if(!("filter"in e))return Re();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new UI(o,l),f=s.targetId;n=new _w(f,h)}}return n}function WI(i,e){let n;if(e instanceof Ec)n={update:G0(i,e.key,e.value)};else if(e instanceof Lp)n={delete:tp(i,e.key)};else if(e instanceof ds)n={update:G0(i,e.key,e.data),updateMask:a2(e.fieldMask)};else{if(!(e instanceof jI))return Re();n={verify:tp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof ac)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof oc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof lc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof xh)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Re()})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:YI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re()})(i,e.precondition)),n}function ZI(i,e){return i&&i.length>0?(Xe(e!==void 0),i.map((n=>(function(o,l){let h=o.updateTime?Ai(o.updateTime):Ai(l);return h.isEqual(xe.min())&&(h=Ai(l)),new OI(h,o.transformResults||[])})(n,e)))):[]}function JI(i,e){return{documents:[bw(i,e.path)]}}function e2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=bw(i,o);const l=(function(g){if(g.length!==0)return Rw(Jn.create(g,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const h=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:ro(S.field),direction:i2(S.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const f=Jm(i,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{_t:n,parent:o}}function t2(i){let e=QI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Xe(s===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(w){const S=Aw(w);return S instanceof Jn&&tw(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((S=>(function(I){return new sc(so(I.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(S)))})(n.orderBy));let f=null;n.limit&&(f=(function(w){let S;return S=typeof w=="object"?w.value:w,qh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(w){const S=!!w.before,R=w.values||[];return new Rh(R,S)})(n.startAt));let g=null;return n.endAt&&(g=(function(w){const S=!w.before,R=w.values||[];return new Rh(R,S)})(n.endAt)),_I(e,o,h,l,f,"F",p,g)}function n2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Aw(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=so(n.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=so(n.unaryFilter.field);return Ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=so(n.unaryFilter.field);return Ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=so(n.unaryFilter.field);return Ct.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(i):i.fieldFilter!==void 0?(function(n){return Ct.create(so(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Jn.create(n.compositeFilter.filters.map((s=>Aw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(n.compositeFilter.op))})(i):Re()}function i2(i){return HI[i]}function r2(i){return GI[i]}function s2(i){return $I[i]}function ro(i){return{fieldPath:i.canonicalString()}}function so(i){return Bt.fromServerFormat(i.fieldPath)}function Rw(i){return i instanceof Ct?(function(n){if(n.op==="=="){if(D0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(N0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(N0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:r2(n.op),value:n.value}}})(i):i instanceof Jn?(function(n){const s=n.getFilters().map((o=>Rw(o)));return s.length===1?s[0]:{compositeFilter:{op:s2(n.op),filters:s}}})(i):Re()}function a2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,s,o,l=xe.min(),h=xe.min(),f=zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.ct=e}}function l2(i){const e=t2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.un=new u2}addToCollectionParentIndex(e,n){return this.un.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(is.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class u2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Yt(rt.comparator),l=!o.has(s);return this.index[n]=o.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Yt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new bo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Ql(s.mutation,o,Cn.empty(),Et.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ve()){const o=Ws();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((l=>{let h=Fl();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Ws();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ve())))}populateOverlays(e,n,s){const o=[];return s.forEach((l=>{n.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{n.set(h,f)}))}))}computeViews(e,n,s,o){let l=yr();const h=Yl(),f=(function(){return Yl()})();return n.forEach(((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof ds)?l=l.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),Ql(_.mutation,g,_.mutation.getFieldMask(),Et.now())):h.set(g.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>h.set(g,_))),n.forEach(((g,_)=>{var w;return f.set(g,new d2(_,(w=h.get(g))!==null&&w!==void 0?w:null))})),f)))}recalculateAndSaveOverlays(e,n){const s=Yl();let o=new ct(((h,f)=>h-f)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const f of h)f.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let _=s.get(p)||Cn.empty();_=f.applyToLocalView(g,_),s.set(p,_);const w=(o.get(f.batchId)||Ve()).add(p);o=o.insert(f.batchId,w)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,_=p.value,w=uw();_.forEach((S=>{if(!l.has(S)){const R=gw(n.get(S),s.get(S));R!==null&&w.set(S,R),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,w))}return le.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-l.size):le.resolve(Ws());let f=-1,p=l;return h.next((g=>le.forEach(g,((_,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ve()))).next((_=>({batchId:f,changes:cw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const l=n.collectionGroup;let h=Fl();return this.indexManager.getCollectionParents(e,l).next((f=>le.forEach(f,(p=>{const g=(function(w,S){return new wo(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((w,S)=>{h=h.insert(w,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,o)))).next((h=>{l.forEach(((p,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,rn.newInvalidDocument(_)))}));let f=Fl();return h.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Ql(_.mutation,g,Cn.empty(),Et.now()),Gh(n,g)&&(f=f.insert(p,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return le.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ai(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:l2(o.bundledQuery),readTime:Ai(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.overlays=new ct(Ee.comparator),this.Ir=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ws();return le.forEach(n,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,l)=>{this.ht(e,n,l)})),le.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const o=Ws(),l=n.length+1,h=new Ee(n.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let l=new ct(((g,_)=>g-_));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=l.get(g.largestBatchId);_===null&&(_=Ws(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=Ws(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=o)););return le.resolve(f)}ht(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new LI(n,s));let l=this.Ir.get(n);l===void 0&&(l=Ve(),this.Ir.set(n,l)),this.Ir.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Tr=new Yt(Ut.Er),this.dr=new Yt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Ut(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach((s=>this.removeReference(s,n)))}gr(e){const n=new Ee(new rt([])),s=new Ut(n,e),o=new Ut(n,e+1),l=[];return this.dr.forEachInRange([s,o],(h=>{this.Vr(h),l.push(h.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ee(new rt([])),s=new Ut(n,e),o=new Ut(n,e+1);let l=Ve();return this.dr.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const n=new Ut(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ee.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Yt(Ut.Er)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new PI(l,n,s,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new Ut(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(h)}lookupMutationBatch(e,n){return le.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.vr(s),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ut(n,0),o=new Ut(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([s,o],(h=>{const f=this.Dr(h.wr);l.push(f)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Yt(qe);return n.forEach((o=>{const l=new Ut(o,0),h=new Ut(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],(f=>{s=s.add(f.wr)}))})),le.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Ut(new Ee(l),0);let f=new Yt(qe);return this.br.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(f=f.add(p.wr)),!0)}),h),le.resolve(this.Cr(f))}Cr(e){const n=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return le.forEach(n.mutations,(o=>{const l=new Ut(o.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,n){const s=new Ut(n,0),o=this.br.firstAfterOrEqual(s);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.Mr=e,this.docs=(function(){return new ct(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),l=o?o.size:0,h=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=yr();return n.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():rn.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let l=yr();const h=n.path,f=new Ee(h.child("")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||eI(JC(_),s)<=0||(o.has(_.key)||Gh(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,n,s,o){Re()}Or(e,n){return le.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new _2(this)}getSize(e){return le.resolve(this.size)}}class _2 extends h2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),le.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.persistence=e,this.Nr=new bo((n=>Vp(n)),jp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qp,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((s,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),le.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Kn(n),le.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let o=0;const l=[];return this.Nr.forEach(((h,f)=>{f.sequenceNumber<=n&&s.get(f.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dp(0),this.Kr=!1,this.Kr=!0,this.$r=new g2,this.referenceDelegate=e(this),this.Ur=new E2(this),this.indexManager=new c2,this.remoteDocumentCache=(function(o){return new v2(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new o2(n),this.Gr=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new p2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new y2(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const o=new w2(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,n){return le.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,n))))}}class w2 extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Jr=new qp,this.Yr=null}static Zr(e){return new Fp(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),le.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xr,(s=>{const o=Ee.fromPath(s);return this.ei(e,o).next((l=>{l||n.removeEntry(o,xe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return le.or([()=>le.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=o}static Wi(e,n){let s=Ve(),o=Ve();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Hp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return C1()?8:iI(an())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,o){const l={result:null};return this.Yi(e,n).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.Zi(e,n,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new b2;return this.Xi(e,n,h).next((f=>{if(l.result=f,this.zi)return this.es(e,n,h,f.size)}))})).next((()=>l.result))}es(e,n,s,o){return s.documentReadCount<this.ji?(Ul()<=je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),le.resolve()):(Ul()<=je.DEBUG&&ge("QueryEngine","Query:",io(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Ul()<=je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(n))):le.resolve())}Yi(e,n){if(V0(n))return le.resolve(null);let s=Si(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Zm(n,null,"F"),s=Si(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Ve(...l);return this.Ji.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.ts(n,f);return this.ns(n,g,h,p.readTime)?this.Yi(e,Zm(n,null,"F")):this.rs(e,g,n,p)}))))})))))}Zi(e,n,s,o){return V0(n)||o.isEqual(xe.min())?le.resolve(null):this.Ji.getDocuments(e,s).next((l=>{const h=this.ts(n,l);return this.ns(n,h,s,o)?le.resolve(null):(Ul()<=je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.rs(e,h,n,ZC(o,-1)).next((f=>f)))}))}ts(e,n){let s=new Yt(ow(e));return n.forEach(((o,l)=>{Gh(e,l)&&(s=s.add(l))})),s}ns(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,n,s){return Ul()<=je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",io(n)),this.Ji.getDocumentsMatchingQuery(e,n,is.min(),s)}rs(e,n,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((l=>(n.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,s,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ct(qe),this._s=new bo((l=>Vp(l)),jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function R2(i,e,n,s){return new A2(i,e,n,s)}async function Cw(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,n.ls(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let p=Ve();for(const g of o){h.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(s,p).next((g=>({hs:g,removedBatchIds:h,addedBatchIds:f})))}))}))}function x2(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,_){const w=g.batch,S=w.keys();let R=le.resolve();return S.forEach((I=>{R=R.next((()=>_.getEntry(p,I))).next((F=>{const N=g.docVersions.get(I);Xe(N!==null),F.version.compareTo(N)<0&&(w.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),_.addEntry(F)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(p,w)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Ve();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Iw(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function C2(i,e){const n=Ce(i),s=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const f=[];e.targetChanges.forEach(((_,w)=>{const S=o.get(w);if(!S)return;f.push(n.Ur.removeMatchingKeys(l,_.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(l,_.addedDocuments,w))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(zt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,s)),o=o.insert(w,R),(function(F,N,U){return F.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(S,R,_)&&f.push(n.Ur.updateTargetData(l,R))}));let p=yr(),g=Ve();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(I2(l,h,e.documentUpdates).next((_=>{p=_.Ps,g=_.Is}))),!s.isEqual(xe.min())){const _=n.Ur.getLastRemoteSnapshotVersion(l).next((w=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(_)}return le.waitFor(f).next((()=>h.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(n.os=o,l)))}function I2(i,e,n){let s=Ve(),o=Ve();return n.forEach((l=>s=s.add(l))),e.getEntries(i,s).next((l=>{let h=yr();return n.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):ge("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{Ps:h,Is:o}}))}function N2(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function D2(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Ur.getTargetData(s,e).next((l=>l?(o=l,le.resolve(o)):n.Ur.allocateTargetId(s).next((h=>(o=new Wr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s}))}async function ip(i,e,n){const s=Ce(i),o=s.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!_c(h))throw h;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function $0(i,e,n){const s=Ce(i);let o=xe.min(),l=Ve();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,g,_){const w=Ce(p),S=w._s.get(_);return S!==void 0?le.resolve(w.os.get(S)):w.Ur.getTargetData(g,_)})(s,h,Si(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>s.ss.getDocumentsMatchingQuery(h,e,n?o:xe.min(),n?l:Ve()))).next((f=>(k2(s,TI(e),f),{documents:f,Ts:l})))))}function k2(i,e,n){let s=i.us.get(e)||xe.min();n.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),i.us.set(e,s)}class K0{constructor(){this.activeTargetIds=xI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O2{constructor(){this.so=new K0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Am(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class P2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(n,s,o,l,h){const f=Am(),p=this.xo(n,s.toUriEncodedString());ge("RestConnection",`Sending RPC '${n}' ${f}:`,p,o);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,l,h),this.No(n,p,g,o).then((_=>(ge("RestConnection",`Received RPC '${n}' ${f}: `,_),_)),(_=>{throw na("RestConnection",`RPC '${n}' ${f} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(n,s,o,l,h,f){return this.Mo(n,s,o,l,h)}Oo(n,s,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+To})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((l,h)=>n[h]=l)),o&&o.headers.forEach(((l,h)=>n[h]=l))}xo(n,s){const o=V2[n];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,o){const l=Am();return new Promise(((h,f)=>{const p=new FT;p.setWithCredentials(!0),p.listenOnce(HT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case hh.NO_ERROR:const _=p.getResponseJson();ge(en,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),h(_);break;case hh.TIMEOUT:ge(en,`RPC '${e}' ${l} timed out`),f(new de(se.DEADLINE_EXCEEDED,"Request time out"));break;case hh.HTTP_ERROR:const w=p.getStatus();if(ge(en,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const I=(function(N){const U=N.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(U)>=0?U:se.UNKNOWN})(R.status);f(new de(I,R.message))}else f(new de(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new de(se.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ge(en,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(o);ge(en,`RPC '${e}' ${l} sending request:`,o),p.send(n,"POST",g,s,15)}))}Bo(e,n,s){const o=Am(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=KT(),f=$T(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=l.join("");ge(en,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=h.createWebChannel(_,p);let S=!1,R=!1;const I=new j2({Io:N=>{R?ge(en,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(S||(ge(en,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),ge(en,`RPC '${e}' stream ${o} sending:`,N),w.send(N))},To:()=>w.close()}),F=(N,U,P)=>{N.listen(U,(z=>{try{P(z)}catch(G){setTimeout((()=>{throw G}),0)}}))};return F(w,ql.EventType.OPEN,(()=>{R||(ge(en,`RPC '${e}' stream ${o} transport opened.`),I.yo())})),F(w,ql.EventType.CLOSE,(()=>{R||(R=!0,ge(en,`RPC '${e}' stream ${o} transport closed`),I.So())})),F(w,ql.EventType.ERROR,(N=>{R||(R=!0,na(en,`RPC '${e}' stream ${o} transport errored:`,N),I.So(new de(se.UNAVAILABLE,"The operation could not be completed")))})),F(w,ql.EventType.MESSAGE,(N=>{var U;if(!R){const P=N.data[0];Xe(!!P);const z=P,G=z.error||((U=z[0])===null||U===void 0?void 0:U.error);if(G){ge(en,`RPC '${e}' stream ${o} received error:`,G);const K=G.status;let oe=(function(D){const k=xt[D];if(k!==void 0)return vw(k)})(K),C=G.message;oe===void 0&&(oe=se.INTERNAL,C="Unknown error status: "+K+" with message "+G.message),R=!0,I.So(new de(oe,C)),w.close()}else ge(en,`RPC '${e}' stream ${o} received:`,P),I.bo(P)}})),F(f,GT.STAT_EVENT,(N=>{N.stat===$m.PROXY?ge(en,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===$m.NOPROXY&&ge(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{I.wo()}),0),I}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(i){return new KI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n,s=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-s);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,s,o,l,h,f,p){this.ui=e,this.Ho=s,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===n&&this.P_(s,o)}),(s=>{e((()=>{const o=new de(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class L2 extends Dw{constructor(e,n,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?Ai(h.readTime):xe.min()})(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=np(this.serializer),n.addTarget=(function(l,h){let f;const p=h.target;if(f=Xm(p)?{documents:JI(l,p)}:{query:e2(l,p)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Tw(l,h.resumeToken);const g=Jm(l,h.expectedCount);g!==null&&(f.expectedCount=g)}else if(h.snapshotVersion.compareTo(xe.min())>0){f.readTime=Ch(l,h.snapshotVersion.toTimestamp());const g=Jm(l,h.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const s=n2(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=np(this.serializer),n.removeTarget=e,this.a_(n)}}class U2 extends Dw{constructor(e,n,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZI(e.writeResults,e.commitTime),s=Ai(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=np(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>WI(this.serializer,s)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2 extends class{}{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new de(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Mo(e,ep(n,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(se.UNKNOWN,l.toString())}))}Lo(e,n,s,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Lo(e,ep(n,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(se.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gr(n),this.D_=!1):ge("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,s,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((h=>{s.enqueueAndForget((async()=>{ca(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const g=Ce(p);g.L_.add(4),await wc(g),g.q_.set("Unknown"),g.L_.delete(4),await Xh(g)})(this))}))})),this.q_=new z2(s,o)}}async function Xh(i){if(ca(i))for(const e of i.B_)await e(!0)}async function wc(i){for(const e of i.B_)await e(!1)}function kw(i,e){const n=Ce(i);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yp(n)?Kp(n):So(n).r_()&&$p(n,e))}function Gp(i,e){const n=Ce(i),s=So(n);n.N_.delete(e),s.r_()&&Ow(n,e),n.N_.size===0&&(s.r_()?s.o_():ca(n)&&n.q_.set("Unknown"))}function $p(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(i).A_(e)}function Ow(i,e){i.Q_.xe(e),So(i).R_(e)}function Kp(i){i.Q_=new FI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),So(i).start(),i.q_.v_()}function Yp(i){return ca(i)&&!So(i).n_()&&i.N_.size>0}function ca(i){return Ce(i).L_.size===0}function Mw(i){i.Q_=void 0}async function F2(i){i.q_.set("Online")}async function H2(i){i.N_.forEach(((e,n)=>{$p(i,e)}))}async function G2(i,e){Mw(i),Yp(i)?(i.q_.M_(e),Kp(i)):i.q_.set("Unknown")}async function $2(i,e,n){if(i.q_.set("Online"),e instanceof Ew&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))})(i,e)}catch(s){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ih(i,s)}else if(e instanceof mh?i.Q_.Ke(e):e instanceof _w?i.Q_.He(e):i.Q_.We(e),!n.isEqual(xe.min()))try{const s=await Iw(i.localStore);n.compareTo(s)>=0&&await(function(l,h){const f=l.Q_.rt(h);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.N_.get(g);_&&l.N_.set(g,_.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,g)=>{const _=l.N_.get(p);if(!_)return;l.N_.set(p,_.withResumeToken(zt.EMPTY_BYTE_STRING,_.snapshotVersion)),Ow(l,p);const w=new Wr(_.target,p,g,_.sequenceNumber);$p(l,w)})),l.remoteSyncer.applyRemoteEvent(f)})(i,n)}catch(s){ge("RemoteStore","Failed to raise snapshot:",s),await Ih(i,s)}}async function Ih(i,e,n){if(!_c(e))throw e;i.L_.add(1),await wc(i),i.q_.set("Offline"),n||(n=()=>Iw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ge("RemoteStore","Retrying IndexedDB access"),await n(),i.L_.delete(1),await Xh(i)}))}function Vw(i,e){return e().catch((n=>Ih(i,n,e)))}async function Wh(i){const e=Ce(i),n=ss(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;K2(e);)try{const o=await N2(e.localStore,s);if(o===null){e.O_.length===0&&n.o_();break}s=o.batchId,Y2(e,o)}catch(o){await Ih(e,o)}jw(e)&&Pw(e)}function K2(i){return ca(i)&&i.O_.length<10}function Y2(i,e){i.O_.push(e);const n=ss(i);n.r_()&&n.V_&&n.m_(e.mutations)}function jw(i){return ca(i)&&!ss(i).n_()&&i.O_.length>0}function Pw(i){ss(i).start()}async function Q2(i){ss(i).p_()}async function X2(i){const e=ss(i);for(const n of i.O_)e.m_(n.mutations)}async function W2(i,e,n){const s=i.O_.shift(),o=Up.from(s,e,n);await Vw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Wh(i)}async function Z2(i,e){e&&ss(i).V_&&await(async function(s,o){if((function(h){return BI(h)&&h!==se.ABORTED})(o.code)){const l=s.O_.shift();ss(s).s_(),await Vw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Wh(s)}})(i,e),jw(i)&&Pw(i)}async function Q0(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const s=ca(n);n.L_.add(3),await wc(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xh(n)}async function J2(i,e){const n=Ce(i);e?(n.L_.delete(2),await Xh(n)):e||(n.L_.add(2),await wc(n),n.q_.set("Unknown"))}function So(i){return i.K_||(i.K_=(function(n,s,o){const l=Ce(n);return l.w_(),new L2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Eo:F2.bind(null,i),Ro:H2.bind(null,i),mo:G2.bind(null,i),d_:$2.bind(null,i)}),i.B_.push((async e=>{e?(i.K_.s_(),Yp(i)?Kp(i):i.q_.set("Unknown")):(await i.K_.stop(),Mw(i))}))),i.K_}function ss(i){return i.U_||(i.U_=(function(n,s,o){const l=Ce(n);return l.w_(),new U2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q2.bind(null,i),mo:Z2.bind(null,i),f_:X2.bind(null,i),g_:W2.bind(null,i)}),i.B_.push((async e=>{e?(i.U_.s_(),await Wh(i)):(await i.U_.stop(),i.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,s,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,l){const h=Date.now()+s,f=new Qp(e,n,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(i,e){if(gr("AsyncQueue",`${e}: ${i}`),_c(i))return new de(se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new uo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new uo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.W_=new ct(Ee.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,s)=>{e.push(s)})),e}}class vo{constructor(e,n,s,o,l,h,f,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,l){const h=[];return n.forEach((f=>{h.push({type:0,doc:f})})),new vo(e,n,uo.emptySet(n),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class tN{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const o=Ce(n),l=o.queries;o.queries=W0(),l.forEach(((h,f)=>{for(const p of f.j_)p.onError(s)}))})(this,new de(se.ABORTED,"Firestore shutting down"))}}function W0(){return new bo((i=>aw(i)),Hh)}async function Wp(i,e){const n=Ce(i);let s=3;const o=e.query;let l=n.queries.get(o);l?!l.H_()&&e.J_()&&(s=2):(l=new eN,s=e.J_()?0:1);try{switch(s){case 0:l.z_=await n.onListen(o,!0);break;case 1:l.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const f=Xp(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(f)}n.queries.set(o,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&Jp(n)}async function Zp(i,e){const n=Ce(i),s=e.query;let o=3;const l=n.queries.get(s);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function nN(i,e){const n=Ce(i);let s=!1;for(const o of e){const l=o.query,h=n.queries.get(l);if(h){for(const f of h.j_)f.X_(o)&&(s=!0);h.z_=o}}s&&Jp(n)}function iN(i,e,n){const s=Ce(i),o=s.queries.get(e);if(o)for(const l of o.j_)l.onError(n);s.queries.delete(e)}function Jp(i){i.Y_.forEach((e=>{e.next()}))}var rp,Z0;(Z0=rp||(rp={})).ea="default",Z0.Cache="cache";class eg{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.key=e}}class Uw{constructor(e){this.key=e}}class rN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=ow(e),this.Ra=new uo(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new X0,o=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const S=o.get(_),R=Gh(this.query,w)?w:null,I=!!S&&this.mutatedKeys.has(S.key),F=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let N=!1;S&&R?S.data.isEqual(R.data)?I!==F&&(s.track({type:3,doc:R}),N=!0):this.ga(S,R)||(s.track({type:2,doc:R}),N=!0,(p&&this.Aa(R,p)>0||g&&this.Aa(R,g)<0)&&(f=!0)):!S&&R?(s.track({type:0,doc:R}),N=!0):S&&!R&&(s.track({type:1,doc:S}),N=!0,(p||g)&&(f=!0)),N&&(R?(h=h.add(R),l=F?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{Ra:h,fa:s,ns:f,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((_,w)=>(function(R,I){const F=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return F(R)-F(I)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(s),o=o!=null&&o;const f=n&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,g=p!==this.Ea;return this.Ea=p,h.length!==0||g?{snapshot:new vo(this.query,e.Ra,l,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new X0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const n=[];return e.forEach((s=>{this.da.has(s)||n.push(new Uw(s))})),this.da.forEach((s=>{e.has(s)||n.push(new Lw(s))})),n}ba(e){this.Ta=e.Ts,this.da=Ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return vo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class aN{constructor(e){this.key=e,this.va=!1}}class oN{constructor(e,n,s,o,l,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new bo((f=>aw(f)),Hh),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Ee.comparator),this.Na=new Map,this.La=new qp,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function lN(i,e,n=!0){const s=Gw(i);let o;const l=s.Fa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Bw(s,e,n,!0),o}async function cN(i,e){const n=Gw(i);await Bw(n,e,!0,!1)}async function Bw(i,e,n,s){const o=await D2(i.localStore,Si(e)),l=o.targetId,h=i.sharedClientState.addLocalQueryTarget(l,n);let f;return s&&(f=await uN(i,e,l,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&kw(i.remoteStore,o),f}async function uN(i,e,n,s,o){i.Ka=(w,S,R)=>(async function(F,N,U,P){let z=N.view.ma(U);z.ns&&(z=await $0(F.localStore,N.query,!1).then((({documents:C})=>N.view.ma(C,z))));const G=P&&P.targetChanges.get(N.targetId),K=P&&P.targetMismatches.get(N.targetId)!=null,oe=N.view.applyChanges(z,F.isPrimaryClient,G,K);return eE(F,N.targetId,oe.wa),oe.snapshot})(i,w,S,R);const l=await $0(i.localStore,e,!0),h=new rN(e,l.Ts),f=h.ma(l.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=h.applyChanges(f,i.isPrimaryClient,p);eE(i,n,g.wa);const _=new sN(e,n,h);return i.Fa.set(e,_),i.Ma.has(n)?i.Ma.get(n).push(e):i.Ma.set(n,[e]),g.snapshot}async function hN(i,e,n){const s=Ce(i),o=s.Fa.get(e),l=s.Ma.get(o.targetId);if(l.length>1)return s.Ma.set(o.targetId,l.filter((h=>!Hh(h,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Gp(s.remoteStore,o.targetId),sp(s,o.targetId)})).catch(vc)):(sp(s,o.targetId),await ip(s.localStore,o.targetId,!0))}async function dN(i,e){const n=Ce(i),s=n.Fa.get(e),o=n.Ma.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gp(n.remoteStore,s.targetId))}async function fN(i,e,n){const s=EN(i);try{const o=await(function(h,f){const p=Ce(h),g=Et.now(),_=f.reduce(((R,I)=>R.add(I.key)),Ve());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let I=yr(),F=Ve();return p.cs.getEntries(R,_).next((N=>{I=N,I.forEach(((U,P)=>{P.isValidDocument()||(F=F.add(U))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,I))).next((N=>{w=N;const U=[];for(const P of f){const z=VI(P,w.get(P.key).overlayedDocument);z!=null&&U.push(new ds(P.key,z,ZT(z.value.mapValue),yn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,U,f)})).next((N=>{S=N;const U=N.applyToLocalDocumentSet(w,F);return p.documentOverlayCache.saveOverlays(R,N.batchId,U)}))})).then((()=>({batchId:S.batchId,changes:cw(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let g=h.Ba[h.currentUser.toKey()];g||(g=new ct(qe)),g=g.insert(f,p),h.Ba[h.currentUser.toKey()]=g})(s,o.batchId,n),await bc(s,o.changes),await Wh(s.remoteStore)}catch(o){const l=Xp(o,"Failed to persist write");n.reject(l)}}async function zw(i,e){const n=Ce(i);try{const s=await C2(n.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=n.Na.get(l);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Xe(h.va):o.removedDocuments.size>0&&(Xe(h.va),h.va=!1))})),await bc(n,s,e)}catch(s){await vc(s)}}function J0(i,e,n){const s=Ce(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Fa.forEach(((l,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Ce(h);p.onlineState=f;let g=!1;p.queries.forEach(((_,w)=>{for(const S of w.j_)S.Z_(f)&&(g=!0)})),g&&Jp(p)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mN(i,e,n){const s=Ce(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Na.get(e),l=o&&o.key;if(l){let h=new ct(Ee.comparator);h=h.insert(l,rn.newNoDocument(l,xe.min()));const f=Ve().add(l),p=new Yh(xe.min(),new Map,new ct(qe),h,f);await zw(s,p),s.Oa=s.Oa.remove(l),s.Na.delete(e),tg(s)}else await ip(s.localStore,e,!1).then((()=>sp(s,e,n))).catch(vc)}async function pN(i,e){const n=Ce(i),s=e.batch.batchId;try{const o=await x2(n.localStore,e);Fw(n,s,null),qw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bc(n,o)}catch(o){await vc(o)}}async function gN(i,e,n){const s=Ce(i);try{const o=await(function(h,f){const p=Ce(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,f).next((w=>(Xe(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);Fw(s,e,n),qw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await bc(s,o)}catch(o){await vc(o)}}function qw(i,e){(i.ka.get(e)||[]).forEach((n=>{n.resolve()})),i.ka.delete(e)}function Fw(i,e,n){const s=Ce(i);let o=s.Ba[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function sp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),n&&i.Ca.$a(s,n);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach((s=>{i.La.containsKey(s)||Hw(i,s)}))}function Hw(i,e){i.xa.delete(e.path.canonicalString());const n=i.Oa.get(e);n!==null&&(Gp(i.remoteStore,n),i.Oa=i.Oa.remove(e),i.Na.delete(n),tg(i))}function eE(i,e,n){for(const s of n)s instanceof Lw?(i.La.addReference(s.key,e),yN(i,s)):s instanceof Uw?(ge("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||Hw(i,s.key)):Re()}function yN(i,e){const n=e.key,s=n.path.canonicalString();i.Oa.get(n)||i.xa.has(s)||(ge("SyncEngine","New document in limbo: "+n),i.xa.add(s),tg(i))}function tg(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const n=new Ee(rt.fromString(e)),s=i.qa.next();i.Na.set(s,new aN(n)),i.Oa=i.Oa.insert(n,s),kw(i.remoteStore,new Wr(Si(Fh(n.path)),s,"TargetPurposeLimboResolution",Dp.oe))}}async function bc(i,e,n){const s=Ce(i),o=[],l=[],h=[];s.Fa.isEmpty()||(s.Fa.forEach(((f,p)=>{h.push(s.Ka(p,e,n).then((g=>{var _;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(_=n?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Hp.Wi(p.targetId,g);l.push(w)}})))})),await Promise.all(h),s.Ca.d_(o),await(async function(p,g){const _=Ce(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>le.forEach(g,(S=>le.forEach(S.$i,(R=>_.persistence.referenceDelegate.addReference(w,S.targetId,R))).next((()=>le.forEach(S.Ui,(R=>_.persistence.referenceDelegate.removeReference(w,S.targetId,R)))))))))}catch(w){if(!_c(w))throw w;ge("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const S=w.targetId;if(!w.fromCache){const R=_.os.get(S),I=R.snapshotVersion,F=R.withLastLimboFreeSnapshotVersion(I);_.os=_.os.insert(S,F)}}})(s.localStore,l))}async function vN(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const s=await Cw(n.localStore,e);n.currentUser=e,(function(l,h){l.ka.forEach((f=>{f.forEach((p=>{p.reject(new de(se.CANCELLED,h))}))})),l.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await bc(n,s.hs)}}function _N(i,e){const n=Ce(i),s=n.Na.get(e);if(s&&s.va)return Ve().add(s.key);{let o=Ve();const l=n.Ma.get(e);if(!l)return o;for(const h of l){const f=n.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function Gw(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.Ca.d_=nN.bind(null,e.eventManager),e.Ca.$a=iN.bind(null,e.eventManager),e}function EN(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gN.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return R2(this.persistence,new S2,e.initialUser,this.serializer)}Ga(e){return new T2(Fp.Zr,this.serializer)}Wa(e){return new O2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>J0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await J2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tN})()}createDatastore(e){const n=Qh(e.databaseInfo.databaseId),s=(function(l){return new P2(l)})(e.databaseInfo);return(function(l,h,f,p){return new B2(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,l,h,f){return new q2(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>J0(this.syncEngine,n,0)),(function(){return Y0.D()?new Y0:new M2})())}createSyncEngine(e,n){return(function(o,l,h,f,p,g,_){const w=new oN(o,l,h,f,p,g);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const l=Ce(o);ge("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await wc(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,s,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ge("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ge("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Xp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function xm(i,e){i.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Cw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function tE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await wN(i);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Q0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Q0(e.remoteStore,o))),i._onlineComponents=e}async function wN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await xm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;na("Error using user provided cache. Falling back to memory cache: "+n),await xm(i,new Nh)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await xm(i,new Nh);return i._offlineComponents}async function $w(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await tE(i,i._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await tE(i,new ap))),i._onlineComponents}function bN(i){return $w(i).then((e=>e.syncEngine))}async function Dh(i){const e=await $w(i),n=e.eventManager;return n.onListen=lN.bind(null,e.syncEngine),n.onUnlisten=hN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dN.bind(null,e.syncEngine),n}function SN(i,e,n={}){const s=new dr;return i.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,g){const _=new ng({next:S=>{_.Za(),h.enqueueAndForget((()=>Zp(l,w)));const R=S.docs.has(f);!R&&S.fromCache?g.reject(new de(se.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&p&&p.source==="server"?g.reject(new de(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),w=new eg(Fh(f.path),_,{includeMetadataChanges:!0,_a:!0});return Wp(l,w)})(await Dh(i),i.asyncQueue,e,n,s))),s.promise}function AN(i,e,n={}){const s=new dr;return i.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,g){const _=new ng({next:S=>{_.Za(),h.enqueueAndForget((()=>Zp(l,w))),S.fromCache&&p.source==="server"?g.reject(new de(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),w=new eg(f,_,{includeMetadataChanges:!0,_a:!0});return Wp(l,w)})(await Dh(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(i,e,n){if(!n)throw new de(se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Qw(i,e,n,s){if(e===!0&&s===!0)throw new de(se.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function iE(i){if(!Ee.isDocumentKey(i))throw new de(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function rE(i){if(Ee.isDocumentKey(i))throw new de(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Zh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Re()}function hn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(i);throw new de(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new de(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new de(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new de(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new de(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sE(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new QT;switch(s.type){case"firstParty":return new KC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=nE.get(n);s&&(ge("ComponentProvider","Removing Datastore"),nE.delete(n),s.terminate())})(this),Promise.resolve()}}function Xw(i,e,n,s={}){var o;const l=(i=hn(i,Jh))._getSettings(),h=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let f,p;if(typeof s.mockUserToken=="string")f=s.mockUserToken,p=nn.MOCK_USER;else{f=T1(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new de(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nn(g)}i._authCredentials=new HC(new YT(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _r(this.firestore,e,this._query)}}class Qt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class fr extends _r{constructor(e,n,s){super(e,n,Fh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ee(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function He(i,e,...n){if(i=wt(i),Yw("collection","path",e),i instanceof Jh){const s=rt.fromString(e,...n);return rE(s),new fr(i,null,s)}{if(!(i instanceof Qt||i instanceof fr))throw new de(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return rE(s),new fr(i.firestore,null,s)}}function _e(i,e,...n){if(i=wt(i),arguments.length===1&&(e=Np.newId()),Yw("doc","path",e),i instanceof Jh){const s=rt.fromString(e,...n);return iE(s),new Qt(i,null,new Ee(s))}{if(!(i instanceof Qt||i instanceof fr))throw new de(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return iE(s),new Qt(i.firestore,i instanceof fr?i.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nw(this,"async_queue_retry"),this.Vu=()=>{const s=Rm();s&&ge("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=Rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new dr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_c(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f})(s);throw gr("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=Qp.createAndSchedule(this,e,n,s,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function oE(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class Ci extends Jh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new aE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aE(e),this._firestoreClient=void 0,await e}}}function Ww(i,e){const n=typeof i=="object"?i:$E(),s=typeof i=="string"?i:"(default)",o=gp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=_1("firestore");l&&Xw(o,...l)}return o}function Ao(i){if(i._terminated)throw new de(se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||RN(i),i._firestoreClient}function RN(i){var e,n,s;const o=i._freezeSettings(),l=(function(f,p,g,_){return new aI(f,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Kw(_.experimentalLongPollingOptions),_.useFetchStreams)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new TN(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(f){const p=f?._online.build();return{_offline:f?._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(zt.fromBase64String(e))}catch(n){throw new de(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=/^__.*__$/;class CN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ec(e,this.data,n,this.fieldTransforms)}}class Zw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class ig{constructor(e,n,s,o,l,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Jw(this.Cu)&&xN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Qh(e)}Qu(e,n,s,o=!1){return new ig({Cu:e,methodName:n,qu:s,path:Bt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ac(i){const e=i._freezeSettings(),n=Qh(i._databaseId);return new IN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function rg(i,e,n,s,o,l={}){const h=i.Qu(l.merge||l.mergeFields?2:0,e,n,o);ag("Data must be an object, but it was:",h,s);const f=nb(s,h);let p,g;if(l.merge)p=new Cn(h.fieldMask),g=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const S=op(e,w,n);if(!h.contains(S))throw new de(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);rb(_,S)||_.push(S)}p=new Cn(_),g=h.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,g=h.fieldTransforms;return new CN(new gn(f),p,g)}class nd extends Sc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}class sg extends Sc{_toFieldTransform(e){return new DI(e.path,new ac)}isEqual(e){return e instanceof sg}}function eb(i,e,n,s){const o=i.Qu(1,e,n);ag("Data must be an object, but it was:",o,s);const l=[],h=gn.empty();la(s,((p,g)=>{const _=og(e,p,n);g=wt(g);const w=o.Nu(_);if(g instanceof nd)l.push(_);else{const S=Rc(g,w);S!=null&&(l.push(_),h.set(_,S))}}));const f=new Cn(l);return new Zw(h,f,o.fieldTransforms)}function tb(i,e,n,s,o,l){const h=i.Qu(1,e,n),f=[op(e,s,n)],p=[o];if(l.length%2!=0)throw new de(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(op(e,l[S])),p.push(l[S+1]);const g=[],_=gn.empty();for(let S=f.length-1;S>=0;--S)if(!rb(g,f[S])){const R=f[S];let I=p[S];I=wt(I);const F=h.Nu(R);if(I instanceof nd)g.push(R);else{const N=Rc(I,F);N!=null&&(g.push(R),_.set(R,N))}}const w=new Cn(g);return new Zw(_,w,h.fieldTransforms)}function NN(i,e,n,s=!1){return Rc(n,i.Qu(s?4:3,e))}function Rc(i,e){if(ib(i=wt(i)))return ag("Unsupported field value:",e,i),nb(i,e);if(i instanceof Sc)return(function(s,o){if(!Jw(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let p=Rc(f,o.Lu(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(i,e)}return(function(s,o){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Et.fromDate(s);return{timestampValue:Ch(o.serializer,l)}}if(s instanceof Et){const l=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ch(o.serializer,l)}}if(s instanceof ed)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sa)return{bytesValue:Tw(o.serializer,s._byteString)};if(s instanceof Qt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof td)return(function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw f.Bu("VectorValues must only contain numeric values.");return Pp(f.serializer,p)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${Zh(s)}`)})(i,e)}function nb(i,e){const n={};return XT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(i,((s,o)=>{const l=Rc(o,e.Mu(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function ib(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Et||i instanceof ed||i instanceof sa||i instanceof Qt||i instanceof Sc||i instanceof td)}function ag(i,e,n){if(!ib(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const s=Zh(n);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function op(i,e,n){if((e=wt(e))instanceof Ro)return e._internalPath;if(typeof e=="string")return og(i,e);throw kh("Field path arguments must be of type string or ",i,!1,void 0,n)}const DN=new RegExp("[~\\*/\\[\\]]");function og(i,e,n){if(e.search(DN)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function kh(i,e,n,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new de(se.INVALID_ARGUMENT,f+i+p)}function rb(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,s,o,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(id("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kN extends sb{data(){return super.data()}}function id(i,e){return typeof e=="string"?og(i,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lg{}class cg extends lg{}function as(i,e,...n){let s=[];e instanceof lg&&s.push(e),s=s.concat(n),(function(l){const h=l.filter((p=>p instanceof rd)).length,f=l.filter((p=>p instanceof xc)).length;if(h>1||h>0&&f>0)throw new de(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class xc extends cg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new xc(e,n,s)}_apply(e){const n=this._parse(e);return ob(e._query,n),new _r(e.firestore,e.converter,Wm(e._query,n))}_parse(e){const n=Ac(e.firestore);return(function(l,h,f,p,g,_,w){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){cE(w,_);const R=[];for(const I of w)R.push(lE(p,l,I));S={arrayValue:{values:R}}}else S=lE(p,l,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||cE(w,_),S=NN(f,h,w,_==="in"||_==="not-in");return Ct.create(g,_,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ti(i,e,n){const s=e,o=id("where",i);return xc._create(o,s,n)}class rd extends lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rd(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)ob(h,p),h=Wm(h,p)})(e._query,n),new _r(e.firestore,e.converter,Wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sd extends cg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sd(e,n)}_apply(e){const n=(function(o,l,h){if(o.startAt!==null)throw new de(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(l,h)})(e._query,this._field,this._direction);return new _r(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new wo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ad(i,e="asc"){const n=e,s=id("orderBy",i);return sd._create(s,n)}function lE(i,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new de(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&n.indexOf("/")!==-1)throw new de(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(rt.fromString(n));if(!Ee.isDocumentKey(s))throw new de(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return I0(i,new Ee(s))}if(n instanceof Qt)return I0(i,n._key);throw new de(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(n)}.`)}function cE(i,e){if(!Array.isArray(i)||i.length===0)throw new de(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ob(i,e){const n=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lb{convertValue(e,n="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return la(e,((o,l)=>{s[o]=this.convertValue(l,n)})),s}convertVectorValue(e){var n,s,o;const l=(o=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((h=>vt(h.doubleValue)));return new td(l)}convertGeoPoint(e){return new ed(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Op(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=rt.fromString(e);Xe(xw(s));const o=new mo(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(n)||gr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hg extends sb{constructor(e,n,s,o,l,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(id("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Xl extends hg{data(e={}){return super.data(e)}}class dg{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ao(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Xl(this._firestore,this._userDataWriter,s.key,s,new ao(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new Xl(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ao(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Xl(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ao(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return f.type!==0&&(g=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:ON(f.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ON(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(i){i=hn(i,Qt);const e=hn(i.firestore,Ci);return SN(Ao(e),i._key).then((n=>cb(e,i,n)))}class fg extends lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function cc(i){i=hn(i,_r);const e=hn(i.firestore,Ci),n=Ao(e),s=new fg(e);return ab(i._query),AN(n,i._query).then((o=>new dg(e,s,i,o)))}function ot(i,e,n){i=hn(i,Qt);const s=hn(i.firestore,Ci),o=ug(i.converter,e,n);return Ic(s,[rg(Ac(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,yn.none())])}function uc(i,e,n,...s){i=hn(i,Qt);const o=hn(i.firestore,Ci),l=Ac(o);let h;return h=typeof(e=wt(e))=="string"||e instanceof Ro?tb(l,"updateDoc",i._key,e,n,s):eb(l,"updateDoc",i._key,e),Ic(o,[h.toMutation(i._key,yn.exists(!0))])}function Cc(i,e){const n=hn(i.firestore,Ci),s=_e(i),o=ug(i.converter,e);return Ic(n,[rg(Ac(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,yn.exists(!1))]).then((()=>s))}function vn(i,...e){var n,s,o;i=wt(i);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||oE(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(oE(e[h])){const w=e[h];e[h]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[h+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[h+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,_;if(i instanceof Qt)g=hn(i.firestore,Ci),_=Fh(i._key.path),p={next:w=>{e[h]&&e[h](cb(g,i,w))},error:e[h+1],complete:e[h+2]};else{const w=hn(i,_r);g=hn(w.firestore,Ci),_=w._query;const S=new fg(g);p={next:R=>{e[h]&&e[h](new dg(g,S,w,R))},error:e[h+1],complete:e[h+2]},ab(i._query)}return(function(S,R,I,F){const N=new ng(F),U=new eg(R,N,I);return S.asyncQueue.enqueueAndForget((async()=>Wp(await Dh(S),U))),()=>{N.Za(),S.asyncQueue.enqueueAndForget((async()=>Zp(await Dh(S),U)))}})(Ao(g),_,f,p)}function Ic(i,e){return(function(s,o){const l=new dr;return s.asyncQueue.enqueueAndForget((async()=>fN(await bN(s),o,l))),l.promise})(Ao(i),e)}function cb(i,e,n){const s=n.docs.get(e._key),o=new fg(i);return new hg(i,o,e._key,s,new ao(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,n,s){this._verifyNotCommitted();const o=Cm(e,this._firestore),l=ug(o.converter,n,s),h=rg(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,yn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const l=Cm(e,this._firestore);let h;return h=typeof(n=wt(n))=="string"||n instanceof Ro?tb(this._dataReader,"WriteBatch.update",l._key,n,s,o):eb(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(h.toMutation(l._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cm(e,this._firestore);return this._mutations=this._mutations.concat(new Lp(n._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cm(i,e){if((i=wt(i)).firestore!==e)throw new de(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function In(){return new sg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(i){return Ao(i=hn(i,Ci)),new ub(i,(e=>Ic(i,e)))}(function(e,n=!0){(function(o){To=o})(aa),Js(new ts("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Ci(new GC(s.getProvider("auth-internal")),new QC(s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(g.options.projectId,_)})(h,o),h);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),wi(S0,"4.7.3",e),wi(S0,"4.7.3","esm2017")})();const db=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:lb,Bytes:sa,CollectionReference:fr,DocumentReference:Qt,DocumentSnapshot:hg,FieldPath:Ro,FieldValue:Sc,Firestore:Ci,FirestoreError:de,GeoPoint:ed,Query:_r,QueryCompositeFilterConstraint:rd,QueryConstraint:cg,QueryDocumentSnapshot:Xl,QueryFieldFilterConstraint:xc,QueryOrderByConstraint:sd,QuerySnapshot:dg,SnapshotMetadata:ao,Timestamp:Et,VectorValue:td,WriteBatch:ub,_AutoId:Np,_ByteString:zt,_DatabaseId:mo,_DocumentKey:Ee,_EmptyAuthCredentialsProvider:QT,_FieldPath:Bt,_cast:hn,_logWarn:na,_validateIsNotUsedTogether:Qw,addDoc:Cc,collection:He,connectFirestoreEmulator:Xw,doc:_e,ensureFirestoreConfigured:Ao,executeWrite:Ic,getDoc:Ri,getDocs:cc,getFirestore:Ww,onSnapshot:vn,orderBy:ad,query:as,serverTimestamp:In,setDoc:ot,updateDoc:uc,where:Ti,writeBatch:hb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firebasestorage.googleapis.com",MN="storageBucket",VN=120*1e3,jN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Di{constructor(e,n,s=0){super(Im(e),`Firebase Storage: ${n} (${Im(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Im(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ii;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ii||(Ii={}));function Im(i){return"storage/"+i}function PN(){const i="An unknown error occurred, please check the error payload for server response.";return new ki(Ii.UNKNOWN,i)}function LN(){return new ki(Ii.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UN(){return new ki(Ii.CANCELED,"User canceled the upload/download.")}function BN(i){return new ki(Ii.INVALID_URL,"Invalid URL '"+i+"'.")}function zN(i){return new ki(Ii.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function uE(i){return new ki(Ii.INVALID_ARGUMENT,i)}function mb(){return new ki(Ii.APP_DELETED,"The Firebase app was deleted.")}function qN(i){return new ki(Ii.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Wn.makeFromUrl(e,n)}catch{return new Wn(e,"")}if(s.path==="")return s;throw zN(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const h="(/(.*))?$",f=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(G){G.path_=decodeURIComponent(G.path)}const _="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${w}/${_}/b/${o}/o${S}`,"i"),I={bucket:1,path:3},F=n===fb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",U=new RegExp(`^https?://${F}/${o}/${N}`,"i"),z=[{regex:f,indices:p,postModify:l},{regex:R,indices:I,postModify:g},{regex:U,indices:{bucket:1,path:2},postModify:g}];for(let G=0;G<z.length;G++){const K=z[G],oe=K.regex.exec(e);if(oe){const C=oe[K.indices.bucket];let x=oe[K.indices.path];x||(x=""),s=new Wn(C,x),K.postModify(s);break}}if(s==null)throw BN(e);return s}}class FN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(i,e,n){let s=1,o=null,l=null,h=!1,f=0;function p(){return f===2}let g=!1;function _(...N){g||(g=!0,e.apply(null,N))}function w(N){o=setTimeout(()=>{o=null,i(R,p())},N)}function S(){l&&clearTimeout(l)}function R(N,...U){if(g){S();return}if(N){S(),_.call(null,N,...U);return}if(p()||h){S(),_.call(null,N,...U);return}s<64&&(s*=2);let z;f===1?(f=2,z=0):z=(s+Math.random())*1e3,w(z)}let I=!1;function F(N){I||(I=!0,S(),!g&&(o!==null?(N||(f=2),clearTimeout(o),w(0)):N||(f=1)))}return w(0),l=setTimeout(()=>{h=!0,F(!0)},n),F}function GN(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(i){return i!==void 0}function hE(i,e,n,s){if(s<e)throw uE(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw uE(`Invalid value for '${i}'. Expected ${n} or less.`)}function KN(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Oh;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Oh||(Oh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,l=e.indexOf(i)!==-1;return n||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,s,o,l,h,f,p,g,_,w,S=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=f,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,I)=>{this.resolve_=R,this.reject_=I,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new sh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=f=>{const p=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const f=l.getErrorCode()===Oh.NO_ERROR,p=l.getStatus();if(!f||YN(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Oh.ABORT;s(!1,new sh(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new sh(g,l))})},n=(s,o)=>{const l=this.resolve_,h=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());$N(p)?l(p):l()}catch(p){h(p)}else if(f!==null){const p=PN();p.serverResponse=f.getErrorText(),this.errorCallback_?h(this.errorCallback_(f,p)):h(p)}else if(o.canceled){const p=this.appDelete_?mb():UN();h(p)}else{const p=LN();h(p)}};this.canceled_?n(!1,new sh(!1,null,!0)):this.backoffId_=HN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function XN(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function WN(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZN(i,e){e&&(i["X-Firebase-GMPID"]=e)}function JN(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function eD(i,e,n,s,o,l,h=!0){const f=KN(i.urlParams),p=i.url+f,g=Object.assign({},i.headers);return ZN(g,e),XN(g,n),WN(g,l),JN(g,s),new QN(p,i.method,g,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function nD(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mh(e,n)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nD(this._location.path)}get storage(){return this._service}get parent(){const e=tD(this._location.path);if(e===null)return null;const n=new Wn(this._location.bucket,e);return new Mh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qN(e)}}function dE(i,e){const n=e?.[MN];return n==null?null:Wn.makeFromBucketSpec(n,i)}class iD{constructor(e,n,s,o,l){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=fb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VN,this._maxUploadRetryTime=jN,this._requests=new Set,o!=null?this._bucket=Wn.makeFromBucketSpec(o,this._host):this._bucket=dE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=dE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mh(this,e)}_makeRequest(e,n,s,o,l=!0){if(this._deleted)return new FN(mb());{const h=eD(e,this._appId,s,o,n,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const fE="@firebase/storage",mE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="storage";function sD(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new iD(n,s,o,e,aa)}function aD(){Js(new ts(rD,sD,"PUBLIC").setMultipleInstances(!0)),wi(fE,mE,""),wi(fE,mE,"esm2017")}aD();const Qs={apiKey:"AIzaSyBz72fyTht-OZNaTkpMqYMpwcw1MpcBHmA",authDomain:"live-stream-app-139f1.firebaseapp.com",projectId:"live-stream-app-139f1",storageBucket:"live-stream-app-139f1.appspot.com",messagingSenderId:"311177662154",appId:"1:311177662154:web:3b8aa122d7515bc23f6e33"},oD={apiKey:"VITE_FIREBASE_API_KEY",authDomain:"VITE_FIREBASE_AUTH_DOMAIN",projectId:"VITE_FIREBASE_PROJECT_ID",storageBucket:"VITE_FIREBASE_STORAGE_BUCKET",messagingSenderId:"VITE_FIREBASE_MESSAGING_SENDER_ID",appId:"VITE_FIREBASE_APP_ID"};Object.entries(Qs).forEach(([i,e])=>{const n=oD[i];e||console.warn(`Missing ${n} in environment (.env)`)});const pE={apiKey:Qs.apiKey,authDomain:Qs.authDomain,projectId:Qs.projectId,storageBucket:Qs.storageBucket,messagingSenderId:Qs.messagingSenderId,appId:Qs.appId,measurementId:"G-CQTDYNBBBW"};let Nm=null,Dm=null,km=null;const mg=new Ei;function pb(){if(!Nm){if(!pE.apiKey)throw new Error("Missing VITE_FIREBASE_API_KEY in environment. Add .env and restart dev server.");Nm=GE(pE)}return Nm}function xo(){return Dm||(Dm=yc(pb())),Dm}function Tt(){return km||(km=Ww(pb())),km}const lD=Object.freeze(Object.defineProperty({__proto__:null,getAuthInstance:xo,getFirestoreInstance:Tt,googleProvider:mg},Symbol.toStringTag,{value:"Module"}));function pg(){const[i,e]=O.useState(null),[n,s]=O.useState(!0);return O.useEffect(()=>{const o=xo(),l=Sp(o,h=>{e(h?{uid:h.uid,displayName:h.displayName??null,email:h.email??null,photoURL:h.photoURL??null}:null),s(!1)});return()=>l()},[]),{user:i,loading:n}}const gb=O.createContext(void 0);function cD({children:i}){const e=pg();return v.jsx(gb.Provider,{value:e,children:i})}function Nc(){const i=O.useContext(gb);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}function Ks({children:i}){const{user:e,loading:n}=Nc();return n?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:v.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?v.jsx(v.Fragment,{children:i}):v.jsx(jE,{to:"/login",replace:!0})}function gE({children:i}){const{user:e,loading:n}=Nc();return n?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:v.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?v.jsx(jE,{to:"/",replace:!0}):v.jsx(v.Fragment,{children:i})}/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hD=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),yE=i=>{const e=hD(i);return e.charAt(0).toUpperCase()+e.slice(1)},yb=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),dD=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=O.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...f},p)=>O.createElement("svg",{ref:p,...fD,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:yb("lucide",o),...!l&&!dD(f)&&{"aria-hidden":"true"},...f},[...h.map(([g,_])=>O.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(i,e)=>{const n=O.forwardRef(({className:s,...o},l)=>O.createElement(mD,{ref:l,iconNode:e,className:yb(`lucide-${uD(yE(i))}`,`lucide-${i}`,s),...o}));return n.displayName=yE(i),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],gD=it("bookmark",pD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vD=it("chevron-down",yD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ED=it("chevron-up",_D);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],wD=it("circle-plus",TD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],od=it("heart",bD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],vb=it("house",SD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],RD=it("loader",AD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],CD=it("maximize",xD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gg=it("message-circle",ID);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],DD=it("moon",ND);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],OD=it("pause",kD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],VD=it("play",MD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],PD=it("plus",jD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yg=it("search",LD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],BD=it("send",UD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_b=it("share-2",zD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],FD=it("share",qD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],GD=it("smile",HD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],KD=it("sun",$D);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}]],QD=it("tv-minimal-play",YD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Eb=it("user",XD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vg=it("users",WD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Tb=it("video",ZD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ek=it("volume-2",JD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],nk=it("volume-x",tk);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rk=it("x",ik);function wb({value:i,onChange:e,onSubmit:n}){const[s,o]=O.useState(i??"");O.useEffect(()=>{typeof i=="string"&&o(i)},[i]);function l(h){h.preventDefault(),n?.(s.trim())}return v.jsxs("form",{onSubmit:l,className:"search-bar",children:[v.jsx("span",{className:"search-bar__icon",children:v.jsx(yg,{size:16})}),v.jsx("input",{value:s,onChange:h=>{o(h.target.value),e?.(h.target.value)},className:"search-bar__input",placeholder:"Search","aria-label":"Search"})]})}function Co({photoURL:i,displayName:e,email:n,size:s=36,className:o=""}){const l=(e??n??"")[0]?.toUpperCase()??"?";return i?v.jsx("img",{src:i,alt:e??"avatar",width:s,height:s,className:`rounded-full object-cover ${o}`}):v.jsx("div",{className:`flex items-center justify-center bg-primary text-white rounded-full font-medium ${o}`,style:{width:s,height:s},"aria-hidden":!0,children:l})}function sk(){const[i,e]=O.useState("light");O.useEffect(()=>{const s=localStorage.getItem("theme");if(s)e(s),document.documentElement.setAttribute("data-theme",s);else{const o=window.matchMedia("(prefers-color-scheme: dark)").matches;e(o?"dark":"light"),document.documentElement.setAttribute("data-theme",o?"dark":"light")}},[]);const n=()=>{const s=i==="light"?"dark":"light";e(s),document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s)};return v.jsx("button",{className:"theme-toggle",onClick:n,"aria-label":`Switch to ${i==="light"?"dark":"light"} theme`,children:i==="light"?v.jsx(DD,{size:20}):v.jsx(KD,{size:20})})}function ak(){const{user:i,loading:e}=Nc(),[n,s]=O.useState(!1),o=O.useRef(null),l=vr();O.useEffect(()=>{function p(g){o.current&&!o.current.contains(g.target)&&s(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=async()=>{try{const p=xo();await xT(p),s(!1),l("/login")}catch(p){console.error("Error signing out:",p)}},f=()=>{s(!1),l("/profile/me")};return v.jsxs("div",{className:"topbar__container",children:[v.jsx("div",{className:"topbar__logo",children:v.jsx(sn,{to:"/",className:"topbar__logo-link",children:"LivePulse"})}),v.jsx("div",{className:"topbar__search",children:v.jsx(wb,{})}),v.jsxs("div",{className:"topbar__user",children:[v.jsx(sk,{}),e?v.jsx("div",{className:"avatar avatar--md skeleton"}):i?v.jsxs("div",{className:"topbar__user-menu",ref:o,children:[v.jsx("button",{onClick:()=>s(!n),className:"avatar avatar--md avatar--bordered","aria-label":"User menu",children:v.jsx(Co,{photoURL:i.photoURL,displayName:i.displayName,email:i.email,size:36})}),n&&v.jsxs("div",{className:"dropdown",children:[v.jsx("button",{onClick:f,className:"dropdown__item",children:"Profile"}),v.jsx("button",{onClick:h,className:"dropdown__item",children:"Logout"})]})]}):v.jsx(sn,{to:"/login",className:"button button--primary","aria-label":"Sign in",children:"Sign In"})]})]})}function ok(){const i=ls(),e=[{path:"/",label:"Home",icon:v.jsx(vb,{size:24,strokeWidth:2,color:i.pathname==="/"?"#ff2c55":"currentColor"})},{path:"/explore",label:"Discover",icon:v.jsx(yg,{size:24,strokeWidth:2,color:i.pathname==="/explore"?"#ff2c55":"currentColor"})},{path:"/following",label:"Following",icon:v.jsx(vg,{size:24,strokeWidth:2,color:i.pathname==="/following"?"#ff2c55":"currentColor"})},{path:"/live/go",label:"Go Live",icon:v.jsx(Tb,{size:24,strokeWidth:2,color:i.pathname==="/live/go"?"#ff2c55":"currentColor"})},{path:"/profile/me",label:"Profile",icon:v.jsx(Eb,{size:24,strokeWidth:2,color:i.pathname.startsWith("/profile")?"#ff2c55":"currentColor"})}];return v.jsxs("nav",{className:"left-nav__container",children:[v.jsx("div",{className:"left-nav__logo",children:v.jsx(sn,{to:"/",className:"left-nav__logo-link",children:v.jsx(QD,{})})}),v.jsx("ul",{className:"left-nav__list",children:e.map(n=>{const s=i.pathname===n.path||n.path!=="/"&&i.pathname.startsWith(n.path);return v.jsx("li",{className:"left-nav__item",children:v.jsxs(sn,{to:n.path,className:`nav-item ${s?"nav-item--active":""}`,"aria-current":s?"page":void 0,children:[v.jsx("span",{className:"nav-item__icon",children:n.icon}),v.jsx("span",{className:"nav-item__label",children:n.label})]})},n.path)})})]})}function no({icon:i,label:e,count:n,onClick:s,to:o,highlight:l,animated:h}){const[f,p]=O.useState(!1),g=`action-icon__button ${l?"action-icon__button--primary":""} ${h&&f?"action-icon__button--animated":""}`,_=()=>{h&&(p(!0),setTimeout(()=>p(!1),1e3)),s&&s()};return o?v.jsxs("div",{className:"action-icon",children:[v.jsx(sn,{to:o,"aria-label":e,className:g,children:i}),typeof n=="number"&&v.jsx("span",{className:"action-icon__count",children:n>999?`${(n/1e3).toFixed(1)}K`:n})]}):v.jsxs("div",{className:"action-icon",children:[v.jsx("button",{onClick:_,"aria-label":e,className:g,children:i}),typeof n=="number"&&v.jsx("span",{className:"action-icon__count",children:n>999?`${(n/1e3).toFixed(1)}K`:n})]})}function lk(){const{user:i}=Nc(),e=ls(),n=e.pathname.startsWith("/watch/"),s=e.pathname.startsWith("/live/watch"),o=n?e.pathname.split("/").pop():null,[l,h]=O.useState(!1),[f,p]=O.useState(1254),g=n||s,_=()=>{h(!l),p(S=>l?S-1:S+1)},w=()=>{console.log("Show comments panel")};return v.jsxs("div",{className:"action-rail__container",children:[g&&v.jsxs("div",{className:"action-rail__section",children:[v.jsxs("div",{className:"action-rail__avatar-container",children:[v.jsx(Co,{photoURL:i?.photoURL||"",displayName:i?.displayName||"User",size:40,className:"action-rail__avatar"}),v.jsx("button",{className:"action-rail__follow-button","aria-label":"Follow",children:v.jsx(PD,{size:16})})]}),v.jsxs("div",{className:"action-rail__actions",children:[v.jsx(no,{icon:v.jsx(od,{size:28,fill:l?"currentColor":"none"}),label:"Like",count:f,onClick:_,highlight:l,animated:!0}),v.jsx(no,{icon:v.jsx(gg,{size:28}),label:"Comments",count:244,onClick:w}),v.jsx(no,{icon:v.jsx(gD,{size:28}),label:"Save",count:96}),v.jsx(no,{icon:v.jsx(_b,{size:28}),label:"Share"})]})]}),n&&o&&i&&v.jsxs("div",{className:"action-rail__section",children:[v.jsx("h3",{className:"action-rail__title",children:"Join Stream"}),v.jsx("div",{className:"action-rail__list",children:v.jsx(no,{icon:v.jsx(vg,{size:24}),label:"Join as Co-Host",highlight:!0,to:`/watch/${o}`})})]}),!n&&i&&v.jsxs("div",{className:"action-rail__section",children:[v.jsx("h3",{className:"action-rail__title",children:"Create"}),v.jsx("div",{className:"action-rail__list",children:v.jsx(no,{icon:v.jsx(Tb,{size:24}),label:"Go Live",highlight:!0,to:"/live/go"})})]})]})}function ck(){O.useEffect(()=>{document.documentElement.setAttribute("data-theme","dark")},[]);const e=ls().pathname;return v.jsxs("div",{className:"app-shell",children:[v.jsx("header",{className:"topbar",children:v.jsx(ak,{})}),v.jsx("nav",{className:"left-nav",children:v.jsx(ok,{})}),v.jsx("main",{className:"main-content",children:v.jsx(JA,{})}),v.jsx("aside",{className:"action-rail",children:v.jsx(lk,{})}),v.jsxs("div",{className:"mobile-nav",children:[v.jsxs(sn,{to:"/",className:`mobile-nav__item ${e==="/"?"mobile-nav__item--active":""}`,children:[v.jsx("span",{className:"mobile-nav__icon",children:v.jsx(vb,{size:24,strokeWidth:2})}),v.jsx("span",{className:"mobile-nav__label",children:"Home"})]}),v.jsxs(sn,{to:"/explore",className:`mobile-nav__item ${e==="/explore"?"mobile-nav__item--active":""}`,children:[v.jsx("span",{className:"mobile-nav__icon",children:v.jsx(yg,{size:24,strokeWidth:2})}),v.jsx("span",{className:"mobile-nav__label",children:"Discover"})]}),v.jsxs(sn,{to:"/live/go",className:`mobile-nav__item ${e==="/live/go"?"mobile-nav__item--active":""}`,children:[v.jsx("span",{className:"mobile-nav__icon",children:v.jsx(wD,{size:24,strokeWidth:2})}),v.jsx("span",{className:"mobile-nav__label",children:"Create"})]}),v.jsxs(sn,{to:"/following",className:`mobile-nav__item ${e==="/following"?"mobile-nav__item--active":""}`,children:[v.jsx("span",{className:"mobile-nav__icon",children:v.jsx(vg,{size:24,strokeWidth:2})}),v.jsx("span",{className:"mobile-nav__label",children:"Following"})]}),v.jsxs(sn,{to:"/profile/me",className:`mobile-nav__item ${e.startsWith("/profile")?"mobile-nav__item--active":""}`,children:[v.jsx("span",{className:"mobile-nav__icon",children:v.jsx(Eb,{size:24,strokeWidth:2})}),v.jsx("span",{className:"mobile-nav__label",children:"Profile"})]})]})]})}async function _g(i,e,n={}){const s=Tt(),o=!!n.allowEnd,l={};Object.keys(e).forEach(f=>{const p=e[f];p!==void 0&&(l[f]=p)}),o||("endedAt"in l&&(console.warn("🛑 Removing unintended endedAt from payload (allowEnd=false)"),delete l.endedAt),l.status==="ended"&&(console.warn("� Removing unintended status='ended' from payload (allowEnd=false)"),delete l.status));const h={...l};"lastSeen"in h&&(h.lastSeen="[serverTimestamp()]"),"endedAt"in h&&(h.endedAt="[serverTimestamp()]"),console.log("📝 safeUpdateLiveStream payload:",{id:i,payload:h,allowEnd:o}),await uc(_e(s,"liveStreams",i),l)}async function uk(i){const e=Tt(),n=`stream_${Date.now()}`,s=_e(e,"liveStreams",n),l=yc().currentUser;if(l?.uid)try{const h=as(He(e,"liveStreams"),Ti("status","==","live"),Ti("uid","==",l.uid)),f=as(He(e,"liveStreams"),Ti("status","==","live"),Ti("userId","==",l.uid)),[p,g]=await Promise.all([cc(h),cc(f)]),_=new Map;p.forEach(w=>_.set(w.id,w)),g.forEach(w=>_.set(w.id,w)),await Promise.all(Array.from(_.values()).map(async w=>{try{await _g(w.id,{status:"ended",endedAt:In()},{allowEnd:!0})}catch{}}))}catch(h){console.warn("⚠️ Failed to end previous lives for user:",h)}return await ot(s,{id:n,title:i,status:"live",startedAt:In(),lastSeen:In(),uid:l?l.uid:null,userId:l?l.uid:null,displayName:l?.displayName||"Anonymous",photoURL:l?.photoURL||null}),n}async function ph(i){await _g(i,{status:"ended",endedAt:In()},{allowEnd:!0})}async function hk(){const i=Tt();console.log("📊 Fetching live streams...");const e=as(He(i,"liveStreams"),Ti("status","==","live"),ad("startedAt","desc")),n=await cc(e);console.log(`📊 Found ${n.docs.length} live streams in database`);const s=n.docs.map(h=>({...h.data(),id:h.id})),o=Date.now(),l=s.filter(h=>{const f=h.lastSeen||h.startedAt;try{const p=typeof f?.toMillis=="function"?f.toMillis():typeof f=="number"?f:0,g=p&&o-p<=3e5;return g||console.log(`⚠️ Stream ${h.id} filtered out due to staleness: Last seen ${new Date(p).toISOString()}`),g}catch(p){return console.error(`❌ Error checking freshness for stream ${h.id}:`,p),!1}});return console.log(`📊 Returning ${l.length} fresh live streams`),l.map(h=>({...h,cohosts:h.cohosts||{},hostName:h.hostName||h.displayName||"Unknown Host",description:h.description||"",viewerCount:h.viewerCount||0,hasCoHost:h.hasCoHost||!1}))}async function ah(i){const e=Tt(),n=_e(e,"liveStreams",i);try{const s=await Ri(n);if(!s.exists()){console.warn(`⚠️ Heartbeat failed: Stream ${i} does not exist`);return}const o=s.data();o.status!=="live"&&console.warn(`🔄 Stream ${i} was marked as ${o.status}, restoring to 'live'`),console.log(`💓 Preparing heartbeat payload for stream ${i}`);const l={lastSeen:In(),status:"live",heartbeatCount:(o.heartbeatCount||0)+1};o.status!=="live"&&(l.recoveredAt=new Date().toISOString()),Object.entries(l).some(([,p])=>p===void 0)&&(console.warn("⚠️ Stripping undefined fields from heartbeat payload"),Object.keys(l).forEach(p=>{l[p]===void 0&&delete l[p]}));const f={...l,lastSeen:"[serverTimestamp()]"};console.log("💓 Heartbeat updateDoc payload:",f),await uc(n,l),console.log(`✅ Heartbeat updated for stream ${i}`)}catch(s){console.error(`❌ Error during heartbeat for stream ${i}:`,s);try{const o={lastSeen:new Date,status:"live",errorRecovery:!0};console.log("💓 Heartbeat Fallback updateDoc payload:",o),await uc(n,o),console.log(`✅ Fallback heartbeat updated for stream ${i}`)}catch(o){throw console.error(`❌ Even fallback heartbeat failed for stream ${i}:`,o),o}}}async function dk(i){const e=Tt(),n=_e(e,"liveStreams",i),s=await Ri(n);if(!s.exists())return null;const o=s.data();return{...o,id:s.id,cohosts:o.cohosts||{},hostName:o.hostName||o.displayName||"Unknown Host",description:o.description||"",viewerCount:o.viewerCount||0,hasCoHost:o.hasCoHost||!1}}async function vE(i,e){const n=Tt(),o=yc().currentUser;if(!o)throw new Error("User must be signed in to request co-host");const l=_e(n,"liveStreams",i,"requests",o.uid);await ot(l,{uid:o.uid,displayName:o.displayName,photoURL:o.photoURL,status:e,createdAt:In(),updatedAt:In()})}async function _E(i,e,n){const s=Tt();if(n==="approved")try{const l=as(He(s,"liveStreams",i,"requests"),Ti("status","==","approved")),h=await cc(l),f=hb(s);h.docs.forEach(p=>{if(p.id!==e){const g=_e(s,"liveStreams",i,"requests",p.id);f.update(g,{status:"rejected",updatedAt:In()})}}),console.log(`💡 Committing batch update to reject ${h.docs.length-1} previous approvals`),await f.commit()}catch(l){console.error("Failed to reject previous approved requests:",l)}const o=_e(s,"liveStreams",i,"requests",e);await uc(o,{status:n,updatedAt:In()})}function fk(i,e){const n=Tt(),s=He(n,"liveStreams",i,"requests"),o=as(s,ad("createdAt","desc"));return console.log(`🔔 Subscribing to requests for live stream: ${i}`),vn(o,l=>{const h=l.docs.map(f=>({id:f.id,...f.data()}));console.log(`📊 Received ${h.length} requests:`,h),e(h)},l=>{console.error("❌ Error subscribing to requests:",l),e([])})}function bb(i,e){const n=Tt(),o=yc().currentUser;if(!o)return e(null),()=>{};const l=_e(n,"liveStreams",i,"requests",o.uid);return vn(l,h=>{h.exists()?e({id:h.id,...h.data()}):e(null)},h=>{console.error("Error subscribing to user request:",h),e(null)})}function mk(i){const e=Tt(),n=45e3,s=Et.fromMillis(Date.now()-n),o=as(He(e,"liveStreams"),Ti("status","==","live"),Ti("lastSeen",">=",s),ad("lastSeen","desc")),l=g=>{const _=g.lastSeen||g.startedAt;try{return typeof _?.toMillis=="function"?_.toMillis():typeof _=="number"?_:0}catch{return 0}},h=g=>{const _=new Map;for(const w of g){const S=w.uid||"unknown",R=_.get(S);if(!R){_.set(S,w);continue}l(w)>l(R)&&_.set(S,w)}return Array.from(_.values()).sort((w,S)=>l(S)-l(w))},f=g=>{const _=Date.now(),w=g.map(S=>S.data()).filter(S=>{const R=S.lastSeen||S.startedAt;try{const I=typeof R?.toMillis=="function"?R.toMillis():typeof R=="number"?R:0;return I&&_-I<=n}catch{return!1}});return h(w)};let p=()=>{};return p=vn(o,g=>{const _=g.docs.map(w=>w.data());i(h(_))},g=>{console.warn("[live] Falling back to client-side freshness filter:",g?.message||g);try{p()}catch{}const _=as(He(e,"liveStreams"),Ti("status","==","live"));p=vn(_,w=>{i(f(w.docs))})}),()=>{try{p()}catch{}}}function pk({children:i,onIndexChange:e,initialIndex:n=0,className:s=""}){const[o,l]=O.useState(n),[h,f]=O.useState(!1),p=O.useRef(null),[g,_]=O.useState(null),[w,S]=O.useState(null),R=50,I=()=>{if(!p.current)return;const{scrollTop:G,clientHeight:K}=p.current,oe=Math.round(G/K);oe!==o&&(l(oe),e&&e(oe))},F=G=>{if(!p.current)return;const K=Math.max(0,Math.min(G,i.length-1));f(!0),p.current.scrollTo({top:K*p.current.clientHeight,behavior:"smooth"}),l(K),e&&e(K),setTimeout(()=>{f(!1)},500)};O.useEffect(()=>{const G=K=>{h||(K.key==="ArrowUp"?(K.preventDefault(),F(o-1)):K.key==="ArrowDown"&&(K.preventDefault(),F(o+1)))};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[o,h]);const N=G=>{S(null),_(G.targetTouches[0].clientY)},U=G=>{S(G.targetTouches[0].clientY)},P=()=>{if(!g||!w)return;const G=g-w;Math.abs(G)>R&&(G>0&&o<i.length-1?F(o+1):G<0&&o>0&&F(o-1))},z=G=>{h||(f(!0),G.deltaY>0&&o<i.length-1?F(o+1):G.deltaY<0&&o>0?F(o-1):f(!1))};return v.jsxs("div",{className:`vertical-feed-container ${s}`,children:[v.jsx("div",{ref:p,className:"vertical-feed",onScroll:I,onWheel:z,onTouchStart:N,onTouchMove:U,onTouchEnd:P,children:i.map((G,K)=>v.jsx("div",{className:"vertical-feed__item",children:G},K))}),v.jsxs("div",{className:"vertical-feed__navigation",children:[o>0&&v.jsx("button",{className:"vertical-feed__nav-button vertical-feed__nav-button--up",onClick:()=>F(o-1),"aria-label":"Previous item",children:v.jsx(ED,{})}),o<i.length-1&&v.jsx("button",{className:"vertical-feed__nav-button vertical-feed__nav-button--down",onClick:()=>F(o+1),"aria-label":"Next item",children:v.jsx(vD,{})})]}),v.jsx("div",{className:"vertical-feed__progress",children:i.map((G,K)=>v.jsx("div",{className:`vertical-feed__progress-dot ${K===o?"vertical-feed__progress-dot--active":""}`,onClick:()=>F(K),role:"button",tabIndex:0,"aria-label":`Go to item ${K+1} of ${i.length}`},K))})]})}function gk({src:i,poster:e,autoPlay:n=!1,loop:s=!0,muted:o=!0,className:l="",onPlay:h,onPause:f,onEnded:p,onVolumeChange:g,onProgress:_,onDoubleTap:w}){const[S,R]=O.useState(n),[I,F]=O.useState(o),[N,U]=O.useState(1),[P,z]=O.useState(0),[G,K]=O.useState(!1),[oe,C]=O.useState(!0),[x,D]=O.useState(0),k=O.useRef(null),B=O.useRef(null),q=O.useRef(null);O.useEffect(()=>{if(k.current){const ee=()=>C(!0),fe=()=>C(!1);return k.current.addEventListener("loadstart",ee),k.current.addEventListener("canplay",fe),()=>{k.current&&(k.current.removeEventListener("loadstart",ee),k.current.removeEventListener("canplay",fe))}}},[i]),O.useEffect(()=>{k.current&&(S?k.current.play().catch(()=>R(!1)):k.current.pause(),k.current.muted=I,k.current.volume=N,k.current.loop=s)},[S,I,N,s]),O.useEffect(()=>(G&&(q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{K(!1)},3e3)),()=>{q.current&&clearTimeout(q.current)}),[G]);const V=()=>{R(!0),h&&h()},mt=()=>{R(!1),f&&f()},Ge=()=>{s||R(!1),p&&p()},te=()=>{if(k.current){const ee=k.current.currentTime/k.current.duration;z(ee),_&&_(ee)}},Q=()=>{k.current&&(S?k.current.pause():k.current.play().catch(ee=>console.error("Error playing video:",ee)))},ce=()=>{const ee=!I;F(ee),g&&g(N,ee)},pe=ee=>{const fe=parseFloat(ee.target.value);U(fe),F(fe===0),k.current&&(k.current.volume=fe),g&&g(fe,fe===0)},j=ee=>{if(k.current){const fe=parseFloat(ee.target.value)*k.current.duration;k.current.currentTime=fe,z(parseFloat(ee.target.value))}},ie=()=>{B.current&&(document.fullscreenElement?document.exitFullscreen():B.current.requestFullscreen())},he=()=>{const ee=Date.now();ee-x<300?(w&&w(),D(0)):(D(ee),K(!G))};return O.useEffect(()=>{if(!k.current||!n)return;const ee=new IntersectionObserver(fe=>{fe.forEach(Ie=>{Ie.isIntersecting?k.current&&(k.current.play().catch(we=>console.error("Error playing video:",we)),R(!0)):k.current&&(k.current.pause(),R(!1))})},{threshold:.5});return k.current&&ee.observe(k.current),()=>{k.current&&ee.unobserve(k.current)}},[n]),v.jsxs("div",{ref:B,className:`video-player ${l} ${G?"video-player--controls-visible":""}`,onClick:he,children:[oe&&i&&v.jsx("div",{className:"video-player__loader",children:v.jsx(RD,{size:48,className:"video-player__loader-icon"})}),i?v.jsx("video",{ref:k,className:"video-player__video",src:i,poster:e,playsInline:!0,muted:I,loop:s,onPlay:V,onPause:mt,onEnded:Ge,onTimeUpdate:te}):v.jsx("div",{className:"video-player__placeholder",children:e?v.jsx("img",{src:e,alt:"Video thumbnail",className:"video-player__placeholder-img"}):v.jsx("div",{className:"video-player__no-stream",children:"Stream not available"})}),v.jsx("div",{className:"video-player__tap-overlay"}),v.jsxs("div",{className:`video-player__controls ${G?"video-player__controls--visible":""}`,children:[v.jsxs("div",{className:"video-player__progress",children:[v.jsx("input",{type:"range",min:"0",max:"1",step:"0.001",value:P,onChange:j,className:"video-player__progress-bar","aria-label":"Video progress"}),v.jsx("div",{className:"video-player__progress-fill",style:{width:`${P*100}%`}})]}),v.jsxs("div",{className:"video-player__controls-bottom",children:[v.jsx("button",{className:"video-player__control-button",onClick:ee=>{ee.stopPropagation(),Q()},"aria-label":S?"Pause":"Play",children:S?v.jsx(OD,{size:24}):v.jsx(VD,{size:24})}),v.jsxs("div",{className:"video-player__volume-control",children:[v.jsx("button",{className:"video-player__control-button",onClick:ee=>{ee.stopPropagation(),ce()},"aria-label":I?"Unmute":"Mute",children:I?v.jsx(nk,{size:20}):v.jsx(ek,{size:20})}),v.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:N,onChange:pe,className:"video-player__volume-slider",onClick:ee=>ee.stopPropagation(),"aria-label":"Volume"})]}),v.jsx("button",{className:"video-player__control-button",onClick:ee=>{ee.stopPropagation(),ie()},"aria-label":"Fullscreen",children:v.jsx(CD,{size:20})})]})]})]})}function yk({isOpen:i,onClose:e,initialComments:n=[],onAddComment:s,onLikeComment:o}){const[l,h]=O.useState(n),[f,p]=O.useState(""),[g,_]=O.useState(!1),w=O.useRef(null),S=O.useRef(null);O.useEffect(()=>{i&&w.current&&setTimeout(()=>{w.current?.focus()},300)},[i]),O.useEffect(()=>{const N=U=>{S.current&&!S.current.contains(U.target)&&e()};return i&&document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[i,e]),O.useEffect(()=>{const N=window.getComputedStyle(document.body).overflow;return i&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=N}},[i]),O.useEffect(()=>{n.length===0&&h([{id:"1",userId:"user1",username:"alex_chen",photoURL:"https://i.pravatar.cc/150?img=1",text:"This stream is awesome! 🔥",timestamp:Date.now()-1e3*60*5,likes:42,isLiked:!1},{id:"2",userId:"user2",username:"emma_j",photoURL:"https://i.pravatar.cc/150?img=5",text:"How did you set up this lighting? It looks so professional!",timestamp:Date.now()-1e3*60*10,likes:24,isLiked:!0},{id:"3",userId:"user3",username:"taylor_swift_fan",photoURL:"https://i.pravatar.cc/150?img=9",text:"Can you play the song you mentioned earlier?",timestamp:Date.now()-1e3*60*15,likes:18,isLiked:!1}])},[n]);const R=async N=>{if(N.preventDefault(),!(!f.trim()||g)){_(!0);try{const U={id:`temp-${Date.now()}`,userId:"current-user",username:"You",text:f,timestamp:Date.now(),likes:0};h(P=>[U,...P]),p(""),s&&await s(f)}catch(U){console.error("Error adding comment:",U)}finally{_(!1)}}},I=async N=>{if(h(U=>U.map(P=>{if(P.id===N){const z=!P.isLiked;return{...P,isLiked:z,likes:z?P.likes+1:P.likes-1}}return P})),o){const U=l.find(P=>P.id===N);U&&await o(N,!U.isLiked)}},F=N=>{const U=Math.floor((Date.now()-N)/1e3);return U<60?`${U}s`:U<3600?`${Math.floor(U/60)}m`:U<86400?`${Math.floor(U/3600)}h`:`${Math.floor(U/86400)}d`};return v.jsx("div",{className:`comments-panel-container ${i?"comments-panel-container--open":""}`,children:v.jsxs("div",{className:`comments-panel ${i?"comments-panel--open":""}`,ref:S,children:[v.jsxs("div",{className:"comments-panel__header",children:[v.jsxs("h3",{className:"comments-panel__title",children:[l.length," comments"]}),v.jsx("button",{className:"comments-panel__close-button",onClick:e,"aria-label":"Close comments",children:v.jsx(rk,{size:24})})]}),v.jsx("div",{className:"comments-panel__content",children:l.map(N=>v.jsxs("div",{className:"comment-item",children:[v.jsx("div",{className:"comment-item__avatar",children:v.jsx(Co,{photoURL:N.photoURL,displayName:N.username,size:32})}),v.jsxs("div",{className:"comment-item__content",children:[v.jsxs("div",{className:"comment-item__header",children:[v.jsx("span",{className:"comment-item__username",children:N.username}),v.jsx("span",{className:"comment-item__time",children:F(N.timestamp)})]}),v.jsx("p",{className:"comment-item__text",children:N.text})]}),v.jsxs("button",{className:`comment-item__like-button ${N.isLiked?"comment-item__like-button--liked":""}`,onClick:()=>I(N.id),"aria-label":`Like comment by ${N.username}`,"aria-pressed":N.isLiked,children:[v.jsx(od,{size:16}),N.likes>0&&v.jsx("span",{className:"comment-item__like-count",children:N.likes})]})]},N.id))}),v.jsxs("form",{className:"comments-panel__form",onSubmit:R,children:[v.jsx("input",{ref:w,type:"text",className:"comments-panel__input",placeholder:"Add a comment...",value:f,onChange:N=>p(N.target.value),maxLength:150}),v.jsx("button",{type:"button",className:"comments-panel__emoji-button","aria-label":"Add emoji",children:v.jsx(GD,{size:20})}),v.jsx("button",{type:"submit",className:`comments-panel__submit-button ${!f.trim()||g?"comments-panel__submit-button--disabled":""}`,disabled:!f.trim()||g,"aria-label":"Post comment",children:v.jsx(BD,{size:20})})]})]})})}function vk(){const[i,e]=O.useState([]),[n,s]=O.useState(0),[o,l]=O.useState(!1),h=vr(),f=()=>[{id:"demo-stream-1",title:"Live Coding Session",displayName:"CodeMaster",photoURL:"https://placehold.co/600x800/111/FFF?text=Live+Coding",status:"live",streamUrl:null,startedAt:{toMillis:()=>Date.now()},likes:931,comments:68,isLiked:!1},{id:"demo-stream-2",title:"Gaming Stream",displayName:"GamePro",photoURL:"https://placehold.co/600x800/001/FFF?text=Gaming",status:"live",streamUrl:null,startedAt:{toMillis:()=>Date.now()},likes:452,comments:32,isLiked:!1},{id:"demo-stream-3",title:"Music Session",displayName:"MusicLover",photoURL:"https://placehold.co/600x800/100/FFF?text=Music",status:"live",streamUrl:null,startedAt:{toMillis:()=>Date.now()},likes:1254,comments:89,isLiked:!1}];O.useEffect(()=>{const S=mk(R=>{if(R.length>0){const I=R.map(F=>{const N=F.photoURL||`https://placehold.co/600x800/000000/FFFFFF?text=${encodeURIComponent(F.displayName||"Live")}`;return{...F,streamUrl:null,photoURL:F.photoURL||N,likes:Math.floor(Math.random()*1e3)+50,comments:Math.floor(Math.random()*200)+10,isLiked:!1}});e(I)}else e(f())});return()=>S()},[]);const p=O.useCallback(S=>{e(R=>R.map((I,F)=>{if(F===S){const N=!I.isLiked;return{...I,isLiked:N,likes:N?(I.likes||0)+1:Math.max(0,(I.likes||0)-1)}}return I}))},[]),g=O.useCallback(()=>{l(!0)},[]),_=O.useCallback(S=>{h(`/watch/${S}`)},[h]),w=O.useCallback(S=>{s(S)},[]);return v.jsxs("div",{className:"page-home",children:[i.length===0?v.jsxs("div",{className:"feed__empty",children:[v.jsx("h2",{children:"No one is live right now"}),v.jsx("p",{children:"Go live yourself or check back later!"})]}):v.jsx(pk,{onIndexChange:w,initialIndex:0,children:i.map((S,R)=>v.jsx("div",{className:"feed-item",children:v.jsxs("div",{className:"feed-item__video-container",children:[S.streamUrl?v.jsx(gk,{src:S.streamUrl,poster:S.photoURL||void 0,autoPlay:R===n,onDoubleTap:()=>p(R)}):v.jsx("div",{className:"feed-item__placeholder",onClick:()=>_(S.id),children:S.photoURL?v.jsx("img",{src:S.photoURL,alt:S.title||"Live Stream",className:"feed-item__placeholder-image"}):v.jsx("div",{className:"feed-item__placeholder-fallback",children:"🎬"})}),v.jsxs("div",{className:"feed-item__overlay",children:[v.jsxs("div",{className:"feed-item__user-info",children:[v.jsx(Co,{photoURL:S.photoURL||void 0,displayName:S.displayName||"User",size:48,className:"feed-item__avatar"}),v.jsxs("div",{children:[v.jsx("h3",{className:"feed-item__username",children:S.displayName||"User"}),v.jsx("p",{className:"feed-item__title",children:S.title||"Live Stream"})]})]}),v.jsx("div",{className:"feed-item__live-badge",children:"LIVE"}),v.jsxs("div",{className:"feed-item__actions",children:[v.jsxs("button",{className:`feed-item__action-button ${S.isLiked?"feed-item__action-button--active":""}`,onClick:()=>p(R),"aria-label":"Like stream",children:[v.jsx(od,{fill:S.isLiked?"currentColor":"none",size:28}),v.jsx("span",{children:S.likes})]}),v.jsxs("button",{className:"feed-item__action-button",onClick:g,"aria-label":"View comments",children:[v.jsx(gg,{size:28}),v.jsx("span",{children:S.comments})]}),v.jsx("button",{className:"feed-item__action-button","aria-label":"Share stream",children:v.jsx(_b,{size:28})})]}),v.jsx("button",{className:"feed-item__watch-button",onClick:()=>_(S.id),children:"Watch Stream"})]})]})},S.id))}),v.jsx(yk,{isOpen:o,onClose:()=>l(!1),contentId:i[n]?.id||""})]})}function _k({live:i}){return v.jsxs("div",{className:"video-meta",children:[v.jsxs("div",{className:"video-meta__handle",children:[v.jsx("span",{className:"live-badge",children:"LIVE"}),v.jsxs("span",{children:["@",i.userHandle]})]}),v.jsx("div",{className:"video-meta__title",children:i.title}),v.jsxs("div",{className:"video-meta__viewers",children:[i.viewers," viewers"]}),v.jsx("div",{className:"video-meta__tags",children:i.tags.slice(0,3).map(e=>v.jsxs("span",{className:"video-meta__tag",children:["#",e]},e))})]})}function EE({compact:i}){return v.jsxs("div",{className:`action-buttons ${i?"action-buttons--compact":""}`,role:"toolbar","aria-label":"live actions",children:[v.jsxs("div",{className:"action-icon",children:[v.jsx("button",{className:"action-icon__button","aria-label":"like",children:v.jsx(od,{size:24,strokeWidth:2})}),v.jsx("span",{className:"action-icon__count",children:"12.4k"})]}),v.jsxs("div",{className:"action-icon",children:[v.jsx("button",{className:"action-icon__button","aria-label":"comment",children:v.jsx(gg,{size:24,strokeWidth:2})}),v.jsx("span",{className:"action-icon__count",children:"432"})]}),v.jsxs("div",{className:"action-icon",children:[v.jsx("button",{className:"action-icon__button","aria-label":"share",children:v.jsx(FD,{size:24,strokeWidth:2})}),v.jsx("span",{className:"action-icon__count",children:"Share"})]})]})}function Ek({live:i}){return v.jsxs("article",{className:"video-card",children:[i.thumbnail?v.jsx("img",{src:i.thumbnail,alt:i.title,className:"video-card__media"}):v.jsx("div",{className:"video-card__placeholder",children:"🎬"}),v.jsx("div",{className:"video-card__gradient"}),v.jsx("div",{className:"video-card__meta",children:v.jsx(_k,{live:i})}),v.jsx("div",{className:"video-card__actions video-card__actions--desktop",children:v.jsx(EE,{liveId:i.id})}),v.jsx("div",{className:"video-card__actions video-card__actions--mobile",children:v.jsx(EE,{liveId:i.id,compact:!0})})]})}function Tk(i=0,e=5){const n=i*e;return Array.from({length:e}).map((s,o)=>{const l=n+o,h=l%4===0;return{id:`live_${l}`,userHandle:h?`f_alice${l}`:`user${l}`,userName:h?`Alice ${l}`:`User ${l}`,title:`Demo live #${l}`,viewers:50+l*7,tags:["music","gaming","chat"].slice(0,l%3+1),thumbnail:`https://picsum.photos/seed/live_${l}/720/1280`,isLive:!0,startedAt:Date.now()-l*1e3*60,isFollowed:h}})}function wk(i=5){const[e,n]=O.useState(0),[s,o]=O.useState(!1),[l,h]=O.useState(!0),f=O.useMemo(()=>Array.from({length:e+1}).flatMap((g,_)=>Tk(_,i)),[e,i]),p=O.useCallback(()=>{s||!l||(o(!0),setTimeout(()=>{n(g=>g+1),h(()=>e+1<10),o(!1)},400))},[s,l,e]);return{items:f,loadMore:p,hasMore:l,loading:s}}function bk(){const i=O.useRef(null),[e,n]=O.useState(0),s=O.useCallback(h=>{const f=i.current;if(!f)return;const p=Array.from(f.querySelectorAll(".snap-start")),g=Math.max(0,Math.min(p.length-1,h)),_=p[g];_&&(_.scrollIntoView({behavior:"smooth"}),n(g))},[]),o=O.useCallback(()=>s(e+1),[e,s]),l=O.useCallback(()=>s(e-1),[e,s]);return O.useEffect(()=>{const h=i.current;if(!h)return;const f=()=>{const p=Array.from(h.querySelectorAll(".snap-start"));if(!p.length)return;const g=h.scrollTop;let _=0,w=1/0;p.forEach((S,R)=>{const I=Math.abs(S.offsetTop-g);I<w&&(w=I,_=R)}),n(_)};return h.addEventListener("scroll",f,{passive:!0}),f(),()=>h.removeEventListener("scroll",f)},[i]),{containerRef:i,activeIndex:e,next:o,prev:l}}function Sk({onUp:i,onDown:e,onMuteToggle:n}){O.useEffect(()=>{const s=o=>{o.key==="ArrowDown"?(o.preventDefault(),e?.()):o.key==="ArrowUp"?(o.preventDefault(),i?.()):o.key.toLowerCase()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[i,e,n])}function Ak({filterFollowed:i=!1}){const{items:e,loadMore:n,hasMore:s}=wk(),{containerRef:o,next:l,prev:h}=bk();Sk({onDown:l,onUp:h,onMuteToggle:()=>{}});const f=i?e.filter(p=>!!p.isFollowed):e;return O.useEffect(()=>{const p=o.current;if(!p)return;const g=p.querySelector("#feed-end"),_=new IntersectionObserver(w=>{w[0].isIntersecting&&s&&n()},{root:p,rootMargin:"400px"});return g&&_.observe(g),()=>_.disconnect()},[o,n,s]),v.jsxs("div",{ref:o,className:"feed feed--vertical","aria-label":"feed",children:[f.map(p=>v.jsx("div",{className:"feed__item",children:v.jsx("div",{className:"feed__item-container",children:v.jsx("div",{className:"feed__item-content",children:v.jsx(Ek,{live:p})})})},p.id)),v.jsx("div",{id:"feed-end",className:"h-24"})]})}function Rk(){return v.jsx("div",{className:"pt-12 max-w-5xl mx-auto",children:v.jsx(Ak,{filterFollowed:!0})})}const xk=["music","gaming","chat","cooking","art","fitness","tech","travel"];function Ck(){return v.jsxs("div",{className:"explore",children:[v.jsx("div",{className:"explore__search",children:v.jsx(wb,{})}),v.jsx("div",{className:"explore__tags",children:xk.map(i=>v.jsxs("div",{className:"explore__tag",children:["#",i]},i))})]})}function Ik(i){const[e,n]=O.useState(null),[s,o]=O.useState(!0),[l,h]=O.useState(null);return O.useEffect(()=>{let f,p=!1;async function g(_){try{const w=Tt(),S=_e(w,"users",_),R=await Ri(S);if(!R.exists())h("not-found"),n(null);else{const I=R.data(),F={uid:I.uid||void 0,handle:I.uid||"",name:I.name||I.displayName||"",avatarUrl:I.avatarUrl||void 0,role:I.role||"user",email:I.email||void 0,createdAt:I.createdAt||void 0};n(F)}}catch(w){h(w?.message??String(w)),n(null)}finally{p||o(!1)}}if(o(!0),h(null),n(null),i==="me"){const _=xo();f=Sp(_,w=>{const S=w;S&&typeof S.uid=="string"?g(S.uid):(o(!1),h("not-authenticated"))})}else g(i);return()=>{p=!0,f&&f()}},[i]),{user:e,loading:s,error:l}}function Nk(){const{handle:i}=fp(),e=vr(),n=i||"me",{user:s,loading:o,error:l}=Ik(n);if(O.useEffect(()=>{l==="not-authenticated"&&e("/login")},[l,e]),o)return v.jsx("div",{className:"profile profile--loading",children:"Loading profile..."});if(l)return v.jsxs("div",{className:"profile profile--error",children:["Error: ",l]});if(!s)return v.jsx("div",{className:"profile profile--not-found",children:"Profile not found"});let h;const f=s.createdAt;return typeof f=="number"?h=new Date(f):f&&typeof f=="object"&&"seconds"in f&&typeof f.seconds=="number"?h=new Date(f.seconds*1e3):h=void 0,v.jsx("div",{className:"profile",children:v.jsxs("div",{className:"profile__card",children:[v.jsxs("div",{className:"profile__header",children:[v.jsx("div",{className:"profile__avatar",children:s.photoURL?v.jsx(Co,{photoURL:s.photoURL,displayName:s.name,email:s.email,size:80}):v.jsx("div",{className:"avatar avatar--lg",children:s.name?.charAt(0)??"?"})}),v.jsxs("div",{className:"profile__info",children:[v.jsx("h1",{className:"profile__name",children:s.name}),v.jsx("div",{className:"profile__email",children:s.email})]})]}),v.jsxs("div",{className:"profile__details",children:[v.jsxs("div",{className:"profile__detail",children:[v.jsx("span",{className:"profile__detail-label",children:"Role"}),v.jsx("span",{className:"profile__detail-value",children:s.role})]}),v.jsxs("div",{className:"profile__detail",children:[v.jsx("span",{className:"profile__detail-label",children:"Joined"}),v.jsx("span",{className:"profile__detail-value",children:h?h.toLocaleDateString():"—"})]})]})]})})}const Dk="modulepreload",kk=function(i){return"/"+i},TE={},Wl=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let g=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var h=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");o=g(n.map(_=>{if(_=kk(_),_ in TE)return;TE[_]=!0;const w=_.endsWith(".css"),S=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${S}`))return;const R=document.createElement("link");if(R.rel=w?"stylesheet":Dk,w||(R.as="script"),R.crossOrigin="",R.href=_,p&&R.setAttribute("nonce",p),document.head.appendChild(R),w)return new Promise((I,F)=>{R.addEventListener("load",I),R.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return o.then(f=>{for(const p of f||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},Sb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyBz72fyTht-OZNaTkpMqYMpwcw1MpcBHmA",VITE_FIREBASE_APP_ID:"1:311177662154:web:3b8aa122d7515bc23f6e33",VITE_FIREBASE_AUTH_DOMAIN:"live-stream-app-139f1.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-CQTDYNBBBW",VITE_FIREBASE_MESSAGING_SENDER_ID:"311177662154",VITE_FIREBASE_PROJECT_ID:"live-stream-app-139f1",VITE_FIREBASE_STORAGE_BUCKET:"live-stream-app-139f1.appspot.com",VITE_FORCE_RELAY_FOR_BROADCASTER:"false",VITE_FORCE_RELAY_FOR_VIEWER:"true",VITE_PREFER_H264:"true",VITE_TURN_CREDENTIAL:"",VITE_TURN_URL:"",VITE_TURN_USERNAME:""};function Ok(){return[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]}function ld(i){const e=Sb||{},n=(e.VITE_FORCE_RELAY_FOR_VIEWER||"false")==="true",s=(e.VITE_FORCE_RELAY_FOR_BROADCASTER||"false")==="true",o={iceServers:Ok(),iceCandidatePoolSize:2};try{const l=(o.iceServers||[]).some(h=>Array.isArray(h.urls)?h.urls.some(f=>f.startsWith("turn:")||f.startsWith("turns:")):typeof h.urls=="string"&&h.urls.startsWith("turn"));(i==="viewer"&&n||i==="broadcaster"&&s)&&(l?o.iceTransportPolicy="relay":console.warn(`[RTC] ${i}: FORCE_RELAY requested but no TURN configured; falling back to default policy.`)),console.log(`[RTC] ${i} config:`,{hasTurn:l,forceRelayViewer:n,forceRelayBroadcaster:s,policy:o.iceTransportPolicy||"all"})}catch{}return o}function cd(i){try{if(!(((Sb||{}).VITE_PREFER_H264||"false")==="true"))return;const s=RTCRtpSender.getCapabilities?.(i.sender.track?.kind||"video");if(!s||!s.codecs)return;const l=s.codecs.slice().sort((h,f)=>{const p=g=>String(g.mimeType||"").toLowerCase().includes("h264")?0:1;return p(h)-p(f)});i.setCodecPreferences?.(l),console.log("🎛️ Applied codec preference (H264 first)")}catch{}}async function Mk(i,e,n){if(!i||!(i instanceof MediaStream))throw console.error("⚠️ createBroadcasterPC called without valid MediaStream!",i),new Error("❌ Broadcaster must be started with a valid MediaStream");console.log("🎥 Creating broadcaster PC for stream:",e),console.log("📹 Local tracks:",i.getTracks().map(I=>({kind:I.kind,id:I.id,enabled:I.enabled,muted:I.muted,readyState:I.readyState})));const s=new RTCPeerConnection(ld("broadcaster"));console.log("[broadcasterPC] 🎛️ Created RTCPeerConnection for stream",e);const o=I=>{try{const F=s.getSenders().map(N=>N.track?.kind||"none");console.log(`[broadcasterPC] 🔎 senders @ ${I}:`,F)}catch{}},l=i.getVideoTracks()[0]||null,h=i.getAudioTracks()[0]||null;if(l){console.log("➕ Adding VIDEO track:",l.id,{enabled:l.enabled,muted:l.muted,readyState:l.readyState});let I=s.getTransceivers().find(F=>F.sender?.track?.kind==="video"||F.receiver?.track?.kind==="video");if(I)try{I.direction="sendonly"}catch{}else try{I=s.addTransceiver("video",{direction:"sendonly"})}catch{}try{cd(I)}catch{}try{await I.sender.replaceTrack(l)}catch{}}else console.warn("⚠️ No local VIDEO track found");if(h){console.log("➕ Adding AUDIO track:",h.id,{enabled:h.enabled,muted:h.muted,readyState:h.readyState});let I=s.getTransceivers().find(F=>F.sender?.track?.kind==="audio"||F.receiver?.track?.kind==="audio");if(I)try{I.direction="sendonly"}catch{}else try{I=s.addTransceiver("audio",{direction:"sendonly"})}catch{}try{await I.sender.replaceTrack(h)}catch{}}else console.warn("⚠️ No local AUDIO track found");o("after attach local tracks"),s.ontrack=I=>{console.log("📡 Broadcaster got remote track (loopback?):",I.track.kind,{readyState:I.track.readyState,muted:I.track.muted})};const f=Tt(),p=e;s.onicecandidate=async I=>{if(I.candidate)try{console.log("🧊 Broadcaster ICE candidate:",I.candidate.candidate),await Cc(He(f,"liveStreams",p,"candidates_broadcaster"),I.candidate.toJSON())}catch(F){console.error("❌ Failed to add broadcaster ICE candidate:",F)}},console.log("[broadcasterPC] 📝 Creating broadcaster offer…");let g=!1;g=!0;const _=await s.createOffer();await s.setLocalDescription(_),g=!1;try{await ot(_e(f,"liveStreams",p,"sdp","offer"),_),console.log("✅ Broadcaster offer saved")}catch(I){throw console.error("❌ Failed to save offer:",I),I}const w=vn(_e(f,"liveStreams",p,"sdp","answer"),async I=>{if(!I.exists())return;const F=I.data();try{s.signalingState!=="stable"?(await s.setRemoteDescription(new RTCSessionDescription(F)),console.log("✅ Remote description set from viewer answer")):console.log("ℹ️ Broadcaster signalingState is stable, skip setRemoteDescription")}catch(N){console.error("❌ Failed to set remote description:",N)}}),S=vn(He(f,"liveStreams",p,"candidates_viewers"),I=>{I.docChanges().forEach(F=>{if(F.type==="added"){const N=F.doc.data();console.log("🧊 Adding viewer ICE candidate:",N.candidate),s.addIceCandidate(new RTCIceCandidate(N)).catch(U=>{console.error("❌ Failed to add viewer ICE candidate:",U)})}})});s.onconnectionstatechange=()=>{console.log("🔗 Broadcaster connection state:",s.connectionState)},s.onnegotiationneeded=async()=>{try{if(g)return;g=!0,console.log("[broadcasterPC] 🧩 negotiationneeded → creating new offer");const I=await s.createOffer();await s.setLocalDescription(I),await ot(_e(Tt(),"liveStreams",p,"sdp","offer"),I),console.log("[broadcasterPC] 🧩 negotiationcompleted")}catch(I){console.error("❌ negotiationneeded failed:",I)}finally{g=!1}};let R=!1;return s.oniceconnectionstatechange=async()=>{if(console.log("🧊 Broadcaster ICE state:",s.iceConnectionState),(s.iceConnectionState==="failed"||s.iceConnectionState==="disconnected")&&!R){console.warn("⚠️ Broadcaster ICE issue, attempting ICE restart…");try{R=!0;const I=await s.createOffer({iceRestart:!0});await s.setLocalDescription(I),await ot(_e(Tt(),"liveStreams",p,"sdp","offer"),I),console.log("🔁 Broadcaster ICE restart offer saved")}catch(I){console.error("❌ ICE restart failed:",I)}finally{setTimeout(()=>R=!1,3e3)}}},setInterval(()=>o("periodic"),5e3),{pc:s,unsubAnswer:w,unsubViewerICE:S}}async function Eg(i,e){console.log("👁️ Connecting as viewer to stream:",i);const n=Tt(),s=_e(n,"liveStreams",i),o=await Ri(s);if(!o.exists())throw new Error("Live not found");if(o.data().status!=="live")throw new Error("Live has ended");const h=_e(n,"liveStreams",i,"sdp","offer");let f=await Ri(h);if(f.exists()||(console.warn("ℹ️ Offer not found yet, waiting 500ms…"),await new Promise(N=>setTimeout(N,500)),f=await Ri(h)),!f.exists())throw new Error("Offer not found");const p=f.data(),g=new RTCPeerConnection(ld("viewer"));try{const N=g.addTransceiver("video",{direction:"recvonly"});cd(N)}catch{}try{g.addTransceiver("audio",{direction:"recvonly"})}catch{}function _(N){N.play().then(()=>{console.log("▶️ Video started automatically")}).catch(U=>{console.warn("⚠️ Autoplay blocked, waiting for user gesture:",U);const P=()=>{N.play().catch(z=>console.warn("❌ Still failed to play:",z)),window.removeEventListener("click",P),window.removeEventListener("touchstart",P),window.removeEventListener("keydown",P)};window.addEventListener("click",P,{once:!0}),window.addEventListener("touchstart",P,{once:!0}),window.addEventListener("keydown",P,{once:!0})})}g.ontrack=N=>{console.log("📡 Viewer received track:",N.track.kind,{muted:N.track.muted,readyState:N.track.readyState});let U=null;e.srcObject instanceof MediaStream?U=e.srcObject:N.streams&&N.streams[0]?U=new MediaStream:U=new MediaStream;const P=N.track.kind,G=U.getTracks().filter(K=>K.kind===P);G.length>0&&G.forEach(K=>U.removeTrack(K));try{U.addTrack(N.track)}catch(K){console.warn("⚠️ Failed to add track to composite stream",K)}e.srcObject!==U&&(e.srcObject=U),e.autoplay=!0,e.playsInline=!0,e.controls=!0,e.muted=!0;try{const K=()=>console.log("🎥 viewer loadedmetadata",{w:e.videoWidth,h:e.videoHeight,duration:e.duration}),oe=()=>console.log("🎥 viewer canplay"),C=()=>console.log("🎥 viewer playing"),x=D=>console.error("🎥 viewer video error",D?.message||D);e.addEventListener("loadedmetadata",K,{once:!0}),e.addEventListener("canplay",oe,{once:!0}),e.addEventListener("play",C,{once:!0}),e.addEventListener("error",x)}catch{}_(e)},g.onicecandidate=async N=>{if(N.candidate)try{await Cc(He(n,"liveStreams",i,"candidates_viewers"),N.candidate.toJSON()),console.log("🧊 Viewer ICE candidate sent")}catch(U){console.error("❌ Failed to add viewer ICE candidate:",U)}},await g.setRemoteDescription(new RTCSessionDescription(p));const w=await g.createAnswer();await g.setLocalDescription(w);try{await ot(_e(n,"liveStreams",i,"sdp","answer"),w),console.log("✅ Viewer answer saved")}catch(N){throw console.error("❌ Failed to save answer:",N),N}const S=vn(_e(n,"liveStreams",i,"sdp","offer"),async N=>{if(!N.exists())return;const U=N.data();try{if(g.signalingState!=="stable"&&g.remoteDescription?.type==="offer")return;await g.setRemoteDescription(new RTCSessionDescription(U));const P=await g.createAnswer();await g.setLocalDescription(P),await ot(_e(n,"liveStreams",i,"sdp","answer"),P),console.log("🔁 Viewer updated answer after new offer")}catch(P){console.error("❌ Failed to handle updated offer:",P)}}),R=vn(He(n,"liveStreams",i,"candidates_broadcaster"),N=>{N.docChanges().forEach(U=>{if(U.type==="added"){const P=U.doc.data();console.log("🧊 Adding broadcaster ICE candidate:",P.candidate),g.addIceCandidate(new RTCIceCandidate(P)).catch(z=>{console.error("❌ Failed to add broadcaster ICE candidate:",z)})}})});g.onconnectionstatechange=()=>{console.log("🔗 Viewer connection state:",g.connectionState)},g.oniceconnectionstatechange=()=>{console.log("🧊 Viewer ICE state:",g.iceConnectionState)},g.onicecandidateerror=N=>{console.error("🧊 Viewer ICE candidate error",N?.errorText||N)};const I=setInterval(async()=>{try{const N=await g.getStats();let U=0,P=0,z=0,G=0,K=null;if(N.forEach(oe=>{oe.type==="inbound-rtp"&&oe.kind==="video"&&(U=oe.bytesReceived||U,P=oe.framesDecoded||P),oe.type==="track"&&oe.kind==="video"&&(z=oe.frameWidth||z,G=oe.frameHeight||G),oe.type==="transport"&&oe.selectedCandidatePairId&&typeof N.get=="function"&&(K=N.get(oe.selectedCandidatePairId))}),K){const oe=N.get(K.localCandidateId),C=N.get(K.remoteCandidateId);console.log("📈 viewer stats",{bytesReceived:U,framesDecoded:P,frameSize:`${z}x${G}`,candidatePair:{state:K.state,local:oe?{type:oe.candidateType,ip:oe.ip,protocol:oe.protocol}:null,remote:C?{type:C.candidateType,ip:C.ip,protocol:C.protocol}:null}})}}catch{}},3e3);return{pc:g,cleanup:()=>{try{R()}catch{}try{S()}catch{}try{clearInterval(I)}catch{}try{g.close()}catch{}}}}async function Vk(i,e,n,s){if(console.log("🤝 Host accepting co-host:",s,"for stream:",i),!e||!(e instanceof MediaStream))throw console.error("⚠️ hostAcceptCoHost called without valid MediaStream!",e),new Error("❌ Host must have a valid local MediaStream");const o=Tt(),l=new RTCPeerConnection(ld("broadcaster"));console.log("[hostPC] 🎛️ Created RTCPeerConnection for co-host session",{streamId:i,coHostId:s});const h=U=>{try{const P=l.getSenders().map(z=>z.track?.kind||"none");console.log(`[hostPC] 🔎 senders @ ${U}:`,P)}catch{}},f=U=>{let P=l.getTransceivers().find(z=>z.sender&&(z.sender.track?.kind===U||z.mid)||z.receiver&&z.receiver.track?.kind===U);if(!P)P=l.addTransceiver(U,{direction:"sendrecv"});else try{P.direction="sendrecv"}catch{}try{U==="video"&&cd(P)}catch{}return P},p=e.getVideoTracks()[0],g=e.getAudioTracks()[0];if(p)try{p.readyState!=="live"&&console.warn("[hostPC] video track not live:",p.readyState),p.enabled=!0,await f("video").sender.replaceTrack(p)}catch(U){console.warn("replaceTrack(video) failed",U)}if(g)try{g.readyState!=="live"&&console.warn("[hostPC] audio track not live:",g.readyState),g.enabled=!0,await f("audio").sender.replaceTrack(g)}catch(U){console.warn("replaceTrack(audio) failed",U)}h("after attach local (sendrecv)"),e.getTracks().length===0?console.error("⚠️ Host has no tracks to send to co-host!"):console.log("✅ Host has",e.getTracks().length,"tracks to send to co-host"),l.ontrack=U=>{const P=n,z=U.track.kind;console.log("📡 Host received track from co-host:",z,{readyState:U.track.readyState,muted:U.track.muted});let G;P.srcObject instanceof MediaStream?G=P.srcObject:G=new MediaStream,G.getTracks().filter(x=>x.kind===z).forEach(x=>{try{G.removeTrack(x)}catch{}});try{G.addTrack(U.track)}catch(x){console.warn("addTrack failed",x)}P.srcObject!==G&&(P.srcObject=G),P.autoplay=!0,P.playsInline=!0,P.muted=!0;try{P.removeAttribute("controls")}catch{}try{P.style.width="100%",P.style.objectFit="contain"}catch{}P.play().catch(()=>{const x=()=>{P.play().catch(()=>{}),D()},D=()=>["click","touchstart","keydown"].forEach(k=>window.removeEventListener(k,x));["click","touchstart","keydown"].forEach(k=>window.addEventListener(k,x,{once:!0}))});const oe=G.getVideoTracks().length,C=G.getAudioTracks().length;console.log("[host] ontrack",{kind:z,vids:oe,auds:C,trackId:U.track.id})};const _=setInterval(async()=>{try{const U=await l.getStats();let P=0,z=0,G=0;U.forEach(K=>{K.type==="inbound-rtp"&&K.kind==="video"&&(P=K.framesDecoded||P),K.type==="track"&&K.kind==="video"&&(z=K.frameWidth||z,G=K.frameHeight||G)}),console.log("[host] inbound stats",{framesDecoded:P,frameSize:z&&G?`${z}x${G}`:void 0})}catch{}},5e3);l.onicecandidate=async U=>{if(U.candidate)try{if(console.log("🧊 Host sending ICE candidate to co-host"),!i||!s||!o){console.error("⚠️ Missing required parameters for ICE candidate:",{streamId:i,coHostId:s});return}const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s),G=He(z,"hostCandidates");await Cc(G,U.candidate.toJSON())}catch(P){console.error("❌ Failed to send host ICE candidate:",P)}};let w=!1;l.onnegotiationneeded=async()=>{if(!w){w=!0;try{console.log("[hostPC] 🧩 negotiationneeded (noop-answerer): keeping existing description to avoid glare")}finally{w=!1}}};const S=_e(o,"liveStreams",i),R=_e(He(S,"cohost"),s);let I;try{const U=await Ri(S);if(U.exists()){const P=U.data();if(P.status!=="live"){console.warn(`⚠️ Stream status is ${P.status}, attempting to fix...`);const{serverTimestamp:z}=await Wl(async()=>{const{serverTimestamp:G}=await Promise.resolve().then(()=>db);return{serverTimestamp:G}},void 0);await _g(i,{status:"live",lastSeen:z(),updatedAt:z(),hasCoHost:!0}),console.log("✅ Stream status corrected to live")}}}catch(U){console.error("❌ Failed to verify stream status:",U)}const F=await Ri(R);if(F.exists()&&F.data().offer)console.log("✅ Found existing co-host offer"),I=F.data().offer;else{console.log("⏳ Waiting for co-host offer...");try{await ot(R,{hostWaiting:!0,timestamp:new Date().toISOString(),streamStatus:"live"},{merge:!0})}catch(U){console.warn("⚠️ Failed to update waiting status:",U)}I=await new Promise((U,P)=>{const z=vn(R,K=>{if(K.exists()&&K.data().offer){const oe=K.data().offer;console.log("✅ Received co-host offer data"),z(),U(oe)}}),G=setTimeout(()=>{z(),P(new Error("Timeout waiting for co-host offer (30s). Co-host may be offline or having connection issues."))},3e4);return()=>{clearTimeout(G),z()}}).catch(U=>{throw console.error("❌ Error waiting for co-host offer:",U),U})}try{console.log("[hostPC] 📝 Setting remote description from co-host offer"),await l.setRemoteDescription(new RTCSessionDescription(I))}catch(U){console.error("❌ Failed to set remote description:",U);try{await ot(R,{hostError:`Failed to process your offer: ${U instanceof Error?U.message:"Unknown error"}`,errorTimestamp:new Date().toISOString()},{merge:!0})}catch(P){console.error("❌ Could not update error status:",P)}throw U}try{console.log("[hostPC] 📝 Creating answer for co-host"),w=!0;const U=await l.createAnswer();if(await l.setLocalDescription(U),w=!1,console.log("📤 Sending answer to co-host"),!i||!s)throw console.error("⚠️ Missing required parameters for sending answer:",{streamId:i,coHostId:s}),new Error("Missing stream ID or co-host ID for sending answer");const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s),G={...U,timestamp:new Date().toISOString()};await ot(z,{answer:G,hostConnected:!0,updatedAt:new Date().toISOString()},{merge:!0}),console.log("✅ Answer sent to co-host successfully")}catch(U){console.error("❌ Failed to create or send answer:",U);try{const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s);await ot(z,{hostError:`Failed to create or send answer: ${U instanceof Error?U.message:"Unknown error"}`,errorTimestamp:new Date().toISOString(),hostConnected:!1},{merge:!0}),console.log("✅ Error status updated for co-host")}catch(P){console.error("❌ Could not update error status:",P)}throw U}let N=()=>{};try{if(!i||!s)throw console.error("⚠️ Missing required parameters for ICE candidates:",{streamId:i,coHostId:s}),new Error("Missing stream ID or co-host ID for ICE candidates");const U=_e(o,"liveStreams",i),P=_e(He(U,"cohost"),s),z=He(P,"coHostCandidates");N=vn(z,G=>{G.docChanges().forEach(K=>{if(K.type==="added"){const oe=K.doc.data();console.log("🧊 Adding ICE candidate from co-host"),l.addIceCandidate(new RTCIceCandidate(oe)).catch(C=>console.error("❌ Failed to add co-host ICE candidate:",C))}})},G=>{console.error("❌ Error listening for co-host ICE candidates:",G)})}catch(U){console.error("❌ Failed to set up co-host ICE candidates listener:",U)}return l.onconnectionstatechange=async()=>{console.log("🔗 Host-CoHost connection state:",l.connectionState),h(`onconnectionstatechange:${l.connectionState}`);try{const U=_e(o,"liveStreams",i),P=_e(He(U,"cohost"),s);await ot(P,{hostConnectionState:l.connectionState,connectionStateTimestamp:new Date().toISOString()},{merge:!0})}catch(U){console.warn("⚠️ Failed to update connection state:",U)}if(l.connectionState==="connected")console.log("✅ Host-CoHost connection established successfully");else if(l.connectionState==="disconnected"||l.connectionState==="failed"||l.connectionState==="closed"){console.log("⚠️ Co-host connection ended or failed");try{const U=_e(o,"liveStreams",i),P=_e(He(U,"cohost"),s);await ot(P,{hostConnectionEnded:!0,hostConnectionState:l.connectionState,connectionStateTimestamp:new Date().toISOString()},{merge:!0})}catch(U){console.warn("⚠️ Failed to update connection end state:",U)}}},l.oniceconnectionstatechange=async()=>{console.log("🧊 Host-CoHost ICE state:",l.iceConnectionState);try{const U=_e(o,"liveStreams",i),P=_e(He(U,"cohost"),s);await ot(P,{hostIceState:l.iceConnectionState,iceStateTimestamp:new Date().toISOString()},{merge:!0})}catch(U){console.warn("⚠️ Failed to update ICE state:",U)}(l.iceConnectionState==="disconnected"||l.iceConnectionState==="failed")&&console.warn("⚠️ Co-host ICE connection issue")},{pc:l,cleanup:()=>{try{N(),clearInterval(_),l.close()}catch(U){console.error("❌ Error during cleanup:",U)}}}}async function jk(i,e,n,s){console.log("👥 Connecting as co-host to stream:",i);const{getAuth:o}=await Wl(async()=>{const{getAuth:g}=await Promise.resolve().then(()=>zT);return{getAuth:g}},void 0),l=n||document.createElement("video");l.autoplay=!0,l.playsInline=!0;const f=o().currentUser?.uid;if(!f)throw new Error("User must be logged in to join as co-host");const p=await Pk(i,e,l,f);return{pc:p.pc,unsubAnswer:()=>{},unsubHostICE:p.cleanup,cleanup:p.cleanup}}async function Pk(i,e,n,s){if(console.log("👥 Co-Host joining stream:",i,"as co-host ID:",s),!e||!(e instanceof MediaStream))throw console.error("⚠️ coHostJoinStream called without valid MediaStream!",e),new Error("❌ Co-Host must have a valid local MediaStream");if(!i||typeof i!="string")throw console.error("⚠️ coHostJoinStream called without valid streamId!",i),new Error("❌ Co-Host must have a valid streamId");if(!s||typeof s!="string")throw console.error("⚠️ coHostJoinStream called without valid coHostId!",s),new Error("❌ Co-Host must have a valid coHostId");const o=Tt(),l=new RTCPeerConnection(ld("broadcaster"));console.log("[cohostPC] 🎛️ Created RTCPeerConnection for co-host joining",{streamId:i,coHostId:s});const h=P=>{try{const z=l.getSenders().map(G=>G.track?.kind||"none");console.log(`[cohostPC] 🔎 senders @ ${P}:`,z)}catch{}},f=l.addTransceiver("video",{direction:"sendrecv"});try{cd(f)}catch{}const p=l.addTransceiver("audio",{direction:"sendrecv"}),g=e.getVideoTracks()[0],_=e.getAudioTracks()[0];if(!g)throw new Error("No local video track");if(g.readyState!=="live")throw new Error(`Video track not live: ${g.readyState}`);if(g)try{g.readyState!=="live"&&console.warn("[cohostPC] video track not live:",g.readyState),g.enabled=!0,await(l.getSenders().find(z=>z.track?.kind==="video")||f.sender).replaceTrack(g)}catch(P){console.warn("replaceTrack(video) failed",P)}if(_)try{_.readyState!=="live"&&console.warn("[cohostPC] audio track not live:",_.readyState),_.enabled=!0,await(l.getSenders().find(z=>z.track?.kind==="audio")||p.sender).replaceTrack(_)}catch(P){console.warn("replaceTrack(audio) failed",P)}h("after attach local (sendrecv)"),e.getTracks().length===0?console.error("⚠️ Co-host has no tracks to send to host!"):console.log("✅ Co-host has",e.getTracks().length,"tracks to send to host"),l.ontrack=P=>{const z=n,G=P.track.kind;console.log("📡 Co-Host received track from host:",G,{readyState:P.track.readyState,muted:P.track.muted});let K;z.srcObject instanceof MediaStream?K=z.srcObject:K=new MediaStream,K.getTracks().filter(D=>D.kind===G).forEach(D=>{try{K.removeTrack(D)}catch{}});try{K.addTrack(P.track)}catch(D){console.error("addTrack failed",D)}z.srcObject!==K&&(z.srcObject=K),z.autoplay=!0,z.playsInline=!0,z.muted=!0;try{z.removeAttribute("controls")}catch{}try{z.style.objectFit="contain",z.style.width||(z.style.width="100%"),z.style.maxWidth||(z.style.maxWidth="480px"),z.style.minHeight||(z.style.minHeight="1px")}catch{}z.play().catch(()=>{const D=()=>{z.play().catch(()=>{}),k()},k=()=>["click","touchstart","keydown"].forEach(B=>window.removeEventListener(B,D));["click","touchstart","keydown"].forEach(B=>window.addEventListener(B,D,{once:!0}))});const C=K.getVideoTracks().length,x=K.getAudioTracks().length;console.log("[cohost] ontrack:",G,{vids:C,auds:x,trackId:P.track.id})};const w=setInterval(async()=>{try{const P=await l.getStats();let z=0,G=0,K=0,oe=null;if(P.forEach(C=>{C.type==="inbound-rtp"&&C.kind==="video"&&(z=C.framesDecoded||z),C.type==="track"&&C.kind==="video"&&(G=C.frameWidth||G,K=C.frameHeight||K),C.type==="transport"&&C.selectedCandidatePairId&&typeof P.get=="function"&&(oe=P.get(C.selectedCandidatePairId))}),oe){const C=P.get(oe.localCandidateId),x=P.get(oe.remoteCandidateId);console.log("[cohost] inbound stats",{framesDecoded:z,frameSize:G&&K?`${G}x${K}`:void 0,candidatePair:{state:oe.state,local:C?{type:C.candidateType,ip:C.ip,protocol:C.protocol}:null,remote:x?{type:x.candidateType,ip:x.ip,protocol:x.protocol}:null}})}else console.log("[cohost] inbound stats",{framesDecoded:z,frameSize:G&&K?`${G}x${K}`:void 0})}catch{}},5e3);l.onicecandidate=async P=>{if(P.candidate)try{if(console.log("🧊 Co-Host sending ICE candidate to host"),!i||!s||!o){console.error("⚠️ Missing required parameters for ICE candidate:",{streamId:i,coHostId:s});return}const z=_e(o,"liveStreams",i),G=_e(He(z,"cohost"),s),K=He(G,"coHostCandidates");await Cc(K,P.candidate.toJSON())}catch(z){console.error("❌ Failed to send co-host ICE candidate:",z)}};let S=!1;l.onnegotiationneeded=async()=>{if(!S){S=!0;try{console.log("[cohostPC] 🧩 negotiationneeded (noop): renegotiation not wired to Firestore updates; skipping")}finally{S=!1}}};try{console.log("[cohostPC] 📝 Creating offer for host"),S=!0;const P=await l.createOffer();if(await l.setLocalDescription(P),S=!1,console.log("📤 Sending offer to host"),!i||!s)throw console.error("⚠️ Missing required parameters for sending offer:",{streamId:i,coHostId:s}),new Error("Missing stream ID or co-host ID for sending offer");const z=_e(o,"liveStreams",i),G=He(z,"cohost"),K=_e(G,s);await ot(K,{offer:P},{merge:!0})}catch(P){throw console.error("❌ Failed to create or send offer:",P),P}if(console.log("⏳ Waiting for host answer..."),!i||!s)throw console.error("⚠️ Missing required parameters for receiving answer:",{streamId:i,coHostId:s}),new Error("Missing stream ID or co-host ID for receiving answer");const R=_e(o,"liveStreams",i),I=He(R,"cohost"),F=_e(I,s);try{const P=await Ri(_e(o,"liveStreams",i));if(!P.exists())throw new Error("Stream not found");const z=P.data();if(z.status!=="live")throw new Error(`Stream is not live (status: ${z.status})`);console.log("✅ Stream is live, host should be available:",{streamId:i,hostUid:z.uid,status:z.status})}catch(P){throw console.error("❌ Error checking stream status:",P),new Error("Could not verify if stream is active")}try{await ot(F,{waitingForAnswer:!0,timestamp:new Date().toISOString(),updated:Date.now()},{merge:!0}),console.log("📣 Notification sent to host about waiting co-host")}catch(P){console.error("⚠️ Failed to notify host:",P)}const N=await new Promise((P,z)=>{const G=new Map,K=vn(F,D=>{if(!D.exists())return;const k=D.data(),B=D.id+(k.updatedAt||k.timestamp||Date.now());if(!G.has(B)){if(G.set(B,!0),k.hostError){console.error("❌ Host reported an error:",k.hostError),K(),z(new Error(`Host error: ${k.hostError}`));return}if(k.answer){console.log("✅ Received answer from host:",!!k.answer),K(),P(k.answer);return}}}),oe=45e3;console.log(`⏱️ Setting timeout for ${oe/1e3} seconds`);const C=setInterval(async()=>{try{await ot(F,{ping:new Date().toISOString(),waitingForAnswer:!0},{merge:!0}),console.log("📣 Ping sent to host")}catch(D){console.warn("⚠️ Failed to send ping:",D)}},1e4),x=setTimeout(()=>{clearInterval(C),K(),z(new Error("Timeout waiting for host answer (45s). Host may be offline or busy."))},oe);return()=>{clearTimeout(x),clearInterval(C),K()}}).catch(P=>{throw console.error("❌ Error waiting for host answer:",P),P});try{console.log("[cohostPC] 📝 Setting remote description from host answer"),await l.setRemoteDescription(new RTCSessionDescription(N))}catch(P){throw console.error("❌ Failed to set remote description:",P),P}let U=()=>{};try{if(!i||!s)throw console.error("⚠️ Missing required parameters for ICE candidates:",{streamId:i,coHostId:s}),new Error("Missing stream ID or co-host ID for ICE candidates");const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s),G=He(z,"hostCandidates");U=vn(G,K=>{K.docChanges().forEach(oe=>{if(oe.type==="added"){const C=oe.doc.data();console.log("🧊 Adding ICE candidate from host"),l.addIceCandidate(new RTCIceCandidate(C)).catch(x=>console.error("❌ Failed to add host ICE candidate:",x))}})},K=>{console.error("❌ Error listening for host ICE candidates:",K)})}catch(P){console.error("❌ Failed to set up host ICE candidates listener:",P)}return l.onconnectionstatechange=async()=>{console.log("🔗 CoHost-Host connection state:",l.connectionState),h(`onconnectionstatechange:${l.connectionState}`);try{const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s);await ot(z,{cohostConnectionState:l.connectionState,connectionStateTimestamp:new Date().toISOString()},{merge:!0})}catch(P){console.warn("⚠️ Failed to update connection state:",P)}if(l.connectionState==="connected")console.log("✅ CoHost-Host connection established successfully");else if(l.connectionState==="disconnected"||l.connectionState==="failed"||l.connectionState==="closed"){console.log("⚠️ Host connection ended or failed:",l.connectionState);try{const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s);await ot(z,{cohostConnectionEnded:!0,cohostConnectionState:l.connectionState,connectionStateTimestamp:new Date().toISOString()},{merge:!0})}catch(P){console.warn("⚠️ Failed to update connection end state:",P)}}},l.oniceconnectionstatechange=async()=>{console.log("🧊 CoHost-Host ICE state:",l.iceConnectionState);try{const P=_e(o,"liveStreams",i),z=_e(He(P,"cohost"),s);await ot(z,{cohostIceState:l.iceConnectionState,iceStateTimestamp:new Date().toISOString()},{merge:!0})}catch(P){console.warn("⚠️ Failed to update ICE state:",P)}(l.iceConnectionState==="disconnected"||l.iceConnectionState==="failed")&&console.warn("⚠️ Host ICE connection issue:",l.iceConnectionState)},{pc:l,cleanup:()=>{try{U(),clearInterval(w),l.close()}catch(P){console.error("❌ Error during cleanup:",P)}}}}async function Lk(i,e){return await Eg(i,e)}function Uk({liveId:i,onApproved:e,hasActiveCohost:n}){const[s,o]=O.useState([]),[l,h]=O.useState(!1),[f,p]=O.useState(null);O.useEffect(()=>{const R=fk(i,I=>{o(I)});return()=>R()},[i]);const g=async R=>{p(R),h(!0);try{await _E(i,R,"approved"),console.log("✅ Request approved"),e?.(R)}catch(I){console.error("❌ Failed to approve request:",I)}finally{h(!1),p(null)}},_=async R=>{p(R),h(!0);try{await _E(i,R,"rejected"),console.log("✅ Request rejected")}catch(I){console.error("❌ Failed to reject request:",I)}finally{h(!1),p(null)}},w=s.filter(R=>R.status==="pending"),S=s.filter(R=>R.status==="approved");return O.useEffect(()=>{console.log("🔍 RequestsPanel - liveId:",i),console.log("🔍 RequestsPanel - requests count:",s.length),console.log("🔍 RequestsPanel - all requests:",s),console.log("🔍 RequestsPanel - pending requests:",w)},[s,w,i]),s.length===0?v.jsxs("div",{className:"mb-6 p-5 bg-white rounded-md border-2 border-blue-200 shadow-md transition-all duration-300",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[v.jsx("span",{className:"text-blue-500 mr-2",children:"👥"})," Co-host Requests"]}),v.jsx("p",{className:"text-gray-700 mt-3 p-3 bg-gray-50 rounded-md border border-gray-200",children:n?"You have an active co-host in your stream.":"No requests to join yet."})]}):v.jsxs("div",{className:"mb-6 p-5 bg-white rounded-md border-2 border-blue-200 shadow-md transition-all duration-300",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[v.jsx("span",{className:"text-blue-500 mr-2",children:"👥"})," Co-host Requests",n&&v.jsx("span",{className:"ml-2 px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full shadow-md animate-pulse",children:"Active Co-host"})]}),l&&v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin mr-2"}),v.jsx("span",{className:"text-blue-500",children:"Processing..."})]})]}),w.length>0&&v.jsxs("div",{className:"mt-4",children:[v.jsxs("div",{className:"flex items-center mb-3",children:[v.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"Pending Requests"}),v.jsx("span",{className:"ml-2 px-3 py-1 bg-yellow-400 text-gray-800 text-sm font-bold rounded-full shadow-md animate-pulse",children:w.length}),n&&v.jsx("span",{className:"ml-2 text-sm text-yellow-600",children:"(You already have an active co-host)"})]}),v.jsx("div",{className:"space-y-4 mt-3",children:w.map(R=>v.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 border-2 border-yellow-200 rounded-lg shadow-md",children:[v.jsxs("div",{className:"flex items-center",children:[R.photoURL?v.jsx("img",{src:R.photoURL,alt:R.displayName||"User",className:"w-12 h-12 rounded-full mr-3 border-2 border-yellow-300 shadow-md"}):v.jsx("div",{className:"w-12 h-12 rounded-full mr-3 bg-yellow-300 flex items-center justify-center text-gray-800 font-bold border-2 border-yellow-200",children:(R.displayName||"A").charAt(0).toUpperCase()}),v.jsxs("div",{children:[v.jsx("span",{className:"font-bold text-gray-800 text-lg",children:R.displayName||"Anonymous"}),v.jsx("div",{className:"text-yellow-700 text-sm",children:"Wants to join your stream"})]})]}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsxs("button",{onClick:()=>g(R.id),disabled:l||f===R.id||n,className:`px-4 py-2 bg-gradient-to-r from-green-400 to-green-500 text-white rounded-md text-sm font-bold shadow-md transition-all transform hover:scale-105 flex items-center ${n?"opacity-50 cursor-not-allowed":"hover:from-green-500 hover:to-green-600"}`,title:n?"You already have an active co-host":"Approve this request",children:[v.jsx("span",{className:"mr-1",children:"✓"})," Approve"]}),v.jsxs("button",{onClick:()=>_(R.id),disabled:l||f===R.id,className:"px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-md text-sm font-bold shadow-md hover:from-red-500 hover:to-red-600 transition-all transform hover:scale-105 flex items-center",children:[v.jsx("span",{className:"mr-1",children:"✕"})," Reject"]})]})]},R.id))})]}),S.length>0&&v.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-gray-200",children:[v.jsxs("div",{className:"flex items-center mb-3",children:[v.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"Approved Co-hosts"}),v.jsx("span",{className:"ml-2 px-3 py-1 bg-green-400 text-gray-800 text-sm font-bold rounded-full shadow-md",children:S.length})]}),v.jsx("div",{className:"space-y-4 mt-3",children:S.map(R=>v.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100 border-2 border-green-200 rounded-lg shadow-md",children:[v.jsxs("div",{className:"flex items-center",children:[R.photoURL?v.jsx("img",{src:R.photoURL,alt:R.displayName||"User",className:"w-12 h-12 rounded-full mr-3 border-2 border-green-300 shadow-md"}):v.jsx("div",{className:"w-12 h-12 rounded-full mr-3 bg-green-300 flex items-center justify-center text-gray-800 font-bold border-2 border-green-200",children:(R.displayName||"A").charAt(0).toUpperCase()}),v.jsxs("div",{children:[v.jsx("span",{className:"font-bold text-gray-800 text-lg",children:R.displayName||"Anonymous"}),v.jsxs("div",{className:"text-green-700 text-sm flex items-center",children:[v.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Currently co-hosting"]})]})]}),v.jsx("div",{className:"flex space-x-2",children:v.jsxs("button",{onClick:()=>_(R.id),disabled:l||f===R.id,className:"px-4 py-2 bg-gradient-to-r from-red-400 to-red-500 text-white rounded-md text-sm font-bold shadow-md hover:from-red-500 hover:to-red-600 transition-all transform hover:scale-105 flex items-center",children:[v.jsx("span",{className:"mr-1",children:"✕"})," Remove"]})})]},R.id))})]})]})}function Bk({liveId:i,status:e}){const{user:n}=Nc(),[s,o]=O.useState(null),[l,h]=O.useState(!1);O.useEffect(()=>{if(!n||e!=="live")return;const g=bb(i,_=>{o(_?_.status:null)});return()=>g()},[i,n,e]);const f=async()=>{if(n){h(!0);try{console.log(`🔷 Sending join request to liveId: ${i}`),await vE(i,"pending"),console.log("✅ Request to join sent"),o("pending")}catch(g){console.error("❌ Failed to send join request:",g)}finally{h(!1)}}},p=async()=>{if(n){h(!0);try{console.log(`🔷 Cancelling join request for liveId: ${i}`),await vE(i,"cancelled"),console.log("✅ Request cancelled"),o(null)}catch(g){console.error("❌ Failed to cancel request:",g)}finally{h(!1)}}};return e!=="live"||!n?null:s==="pending"?v.jsx("button",{onClick:p,disabled:l,className:"px-3 py-1 bg-yellow-600 text-white rounded-md text-sm flex items-center",children:l?"Cancelling...":"Cancel Request"}):s==="approved"?v.jsx("div",{className:"px-3 py-1 bg-green-600 text-white rounded-md text-sm flex items-center",children:"Live Now"}):s==="rejected"?v.jsx("div",{className:"px-3 py-1 bg-red-600 text-white rounded-md text-sm flex items-center",children:"Request Rejected"}):v.jsx("button",{onClick:f,disabled:l,className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm flex items-center",children:l?"Sending...":"Request to Join"})}function zk({cohosts:i,onRemove:e,onToggleMute:n}){const[s,o]=O.useState(null),l=async f=>{o(f);try{await e(f)}catch(p){console.error("❌ Failed to remove co-host:",p)}finally{o(null)}},h=async(f,p)=>{o(f);try{await n(f,!p)}catch(g){console.error("❌ Failed to toggle mute:",g)}finally{o(null)}};return i.length===0?v.jsxs("div",{className:"mt-4 p-4 bg-[var(--panel)] rounded-md shadow-md border border-gray-200 transition-all duration-300",children:[v.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[v.jsx("span",{className:"text-blue-500 mr-2",children:"👥"})," Co-hosts"]}),v.jsx("p",{className:"text-sm text-[var(--muted)] mt-2 p-3 bg-gray-50 rounded-md",children:"No active co-hosts."})]}):v.jsxs("div",{className:"mt-4 p-4 bg-[var(--panel)] rounded-md shadow-md border border-blue-200 transition-all duration-300",children:[v.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[v.jsx("span",{className:"text-blue-500 mr-2",children:"👥"})," Co-hosts",v.jsxs("span",{className:"ml-2 px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-md",children:[i.length," Active"]})]}),v.jsx("div",{className:"space-y-4 mt-3",children:i.map(f=>v.jsxs("div",{className:"p-4 bg-[var(--background)] rounded-md border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"font-medium text-gray-800",children:[f.displayName||f.uid.substring(0,6),"..."]}),v.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${f.isMuted?"bg-yellow-600":"bg-green-600"} text-white`,children:f.isMuted?"Muted":"Live"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsxs("button",{onClick:()=>h(f.uid,f.isMuted),disabled:s===f.uid,className:`px-3 py-1 ${f.isMuted?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"} text-white rounded-md text-sm font-medium transition-colors duration-200 flex items-center`,children:[v.jsx("span",{className:"mr-1",children:f.isMuted?"🔇":"🔊"}),f.isMuted?"Unmute":"Mute"]}),v.jsxs("button",{onClick:()=>l(f.uid),disabled:s===f.uid,className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md text-sm font-medium transition-colors duration-200 flex items-center",children:[v.jsx("span",{className:"mr-1",children:"✕"})," Remove"]})]})]}),v.jsxs("div",{className:"aspect-video w-full bg-black rounded-md overflow-hidden relative shadow-md border border-gray-800",children:[f.stream?v.jsx("video",{autoPlay:!0,playsInline:!0,muted:f.isMuted,className:"w-full h-full object-contain",style:{objectFit:"contain"},ref:p=>{p&&f.stream&&(console.log(`✅ Setting video element for co-host ${f.uid} in controller`,{streamTracks:f.stream.getTracks().map(g=>({kind:g.kind,enabled:g.enabled,id:g.id}))}),p.srcObject=f.stream,p.play().catch(g=>{console.warn("⚠️ Could not autoplay co-host video in controller:",g),setTimeout(()=>{p.play().catch(_=>{console.warn("⚠️ Still could not autoplay co-host video after delay:",_)})},1e3)}),p.onplaying=()=>{console.log(`▶️ Co-host ${f.uid} video is now playing in controller`)},p.onloadedmetadata=()=>{console.log(`📊 Co-host ${f.uid} video metadata loaded:`,{width:p.videoWidth,height:p.videoHeight})})}}):v.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:v.jsx("p",{className:"text-white",children:"No video stream available"})}),v.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full shadow-md",children:f.stream?"LIVE":"NO STREAM"}),f.isMuted&&f.stream&&v.jsxs("div",{className:"absolute bottom-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full shadow-md flex items-center",children:[v.jsx("span",{className:"mr-1",children:"🔇"})," MUTED"]})]})]},f.uid))})]})}function qk({liveId:i,onEnded:e}){const[n,s]=O.useState(!1),o=async()=>{if(window.confirm("Are you sure you want to end this live stream?")){s(!0);try{await ph(i),console.log("✅ Live stream ended"),e?.()}catch(l){console.error("❌ Failed to end live stream:",l)}finally{s(!1)}}};return v.jsx("button",{onClick:o,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-md flex items-center hover:bg-red-700",children:n?"Ending...":"End Live Stream"})}function Fk({onLeave:i}){const[e,n]=O.useState(!1),s=async()=>{if(window.confirm("Are you sure you want to leave this live stream?")){n(!0);try{i(),console.log("✅ Left live stream")}catch(o){console.error("❌ Failed to leave live stream:",o)}finally{n(!1)}}};return v.jsx("button",{onClick:s,disabled:e,className:"px-4 py-2 bg-orange-600 text-white rounded-md flex items-center hover:bg-orange-700",children:e?"Leaving...":"Leave Stream"})}function Hk({hostVideoRef:i,cohosts:e}){const n=e.length>0,[s,o]=O.useState(n?"dual":"single");return O.useEffect(()=>{const l=setTimeout(()=>{o(n?"dual":"single")},200);return()=>clearTimeout(l)},[n]),v.jsxs("div",{className:"mb-6",children:[v.jsxs("h3",{className:"text-xl font-bold mb-3 text-gray-800 flex items-center",children:[v.jsx("span",{className:"text-blue-500 mr-2",children:"📺"})," Live Broadcast",n&&v.jsx("span",{className:"ml-3 px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-sm animate-pulse",children:"Co-host Active"})]}),v.jsxs("div",{className:`grid gap-4 mb-4 transition-all duration-500 ease-in-out ${s==="dual"?"grid-cols-2 max-w-[1200px]":"grid-cols-1 max-w-[600px]"} w-full`,style:{boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.1)":"none",padding:n?"16px":"0",background:n?"linear-gradient(to right, rgba(239, 246, 255, 0.6), rgba(236, 253, 245, 0.6))":"transparent",borderRadius:"8px",border:n?"1px solid rgba(147, 197, 253, 0.3)":"none"},children:[v.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-lg bg-black border-2 border-blue-300 transition-all duration-300 transform hover:scale-[1.01]",children:[v.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-blue-600 to-blue-400 text-white text-xs font-bold px-3 py-1 rounded-full z-10 shadow-md",children:"HOST"}),v.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,controls:!0,muted:!0,className:"w-full h-full object-contain min-h-[400px]",style:{objectFit:"contain"},onLoadedMetadata:l=>{console.log("📊 Host video metadata loaded in LiveGrid:",{width:l.currentTarget.videoWidth,height:l.currentTarget.videoHeight})},onPlay:()=>{console.log("▶️ Host video is now playing in LiveGrid")}})]}),n&&v.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-lg bg-black border-2 border-green-300 transition-all duration-300 transform hover:scale-[1.01]",children:[v.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-green-600 to-green-400 text-white text-xs font-bold px-3 py-1 rounded-full z-10 shadow-md",children:"CO-HOST"}),v.jsx("video",{autoPlay:!0,playsInline:!0,controls:!0,muted:e[0].isMuted,className:"w-full h-full object-contain min-h-[400px]",style:{objectFit:"contain"},ref:l=>{l&&e[0].stream&&(console.log("✅ Setting co-host video in LiveGrid component",{uid:e[0].uid,hasStream:!!e[0].stream,trackCount:e[0].stream?.getTracks().length}),l.srcObject=null,l.srcObject=e[0].stream,l.play().catch(h=>{console.warn("⚠️ Could not autoplay co-host video:",h),setTimeout(()=>{l.play().catch(f=>{console.warn("⚠️ Still could not autoplay co-host video after delay:",f)})},1e3)}),l.onplaying=()=>{console.log("▶️ Co-host video is now playing in LiveGrid")},l.onloadedmetadata=()=>{console.log("📊 Co-host video metadata loaded in LiveGrid:",{width:l.videoWidth,height:l.videoHeight})})}},e[0].uid),e[0].isMuted&&v.jsxs("div",{className:"absolute bottom-2 right-2 bg-gradient-to-r from-red-600 to-red-400 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md flex items-center",children:[v.jsx("span",{className:"mr-1",children:"🔇"})," MUTED"]})]})]}),n&&v.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-md mb-4 shadow-sm border border-blue-100 transition-all duration-300",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full mr-3 flex items-center justify-center text-white text-xs font-bold shadow-sm",children:e[0].displayName?.substring(0,1).toUpperCase()||e[0].uid.substring(0,1).toUpperCase()}),v.jsxs("div",{children:[v.jsxs("span",{className:"font-medium text-gray-800",children:[e[0].displayName||e[0].uid.substring(0,6),"..."]}),v.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[v.jsx("span",{className:"mr-1",children:"👤"})," Co-hosting your stream"]})]})]}),v.jsxs("div",{className:"flex items-center bg-white px-3 py-1 rounded-full shadow-sm border border-gray-200",children:[v.jsx("div",{className:`w-3 h-3 ${e[0].stream?"bg-green-500":"bg-red-500"} rounded-full mr-2 ${e[0].stream?"animate-pulse":""}`}),v.jsx("span",{className:"text-sm font-medium",children:e[0].stream?"Live":"No stream"})]})]})})]})}function Gk({isVisible:i,cohosts:e,streamId:n}){const[s,o]=O.useState(!1);return i?v.jsxs("div",{className:"mt-4 p-3 bg-black text-green-400 rounded-md shadow-md font-mono text-xs",children:[v.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>o(!s),children:[v.jsxs("h4",{className:"font-bold",children:["🛠️ Debug Panel ",s?"▼":"▶"]}),v.jsxs("span",{children:[e.length," co-hosts"]})]}),s&&v.jsxs("div",{className:"mt-2 space-y-2",children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Stream ID:"})," ",n||"none"]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Co-hosts:"}),e.length===0&&v.jsx("div",{className:"pl-2 mt-1",children:"None"}),e.map((l,h)=>v.jsxs("div",{className:"pl-2 mt-1 border-l-2 border-green-800",children:[v.jsxs("div",{children:[v.jsxs("strong",{children:["#",h+1," UID:"]})," ",l.uid]}),v.jsxs("div",{children:[v.jsx("strong",{children:"Has Stream:"})," ",l.stream?"Yes":"No"]}),l.stream&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Tracks:"})," ",l.stream.getTracks().length]}),v.jsx("div",{className:"pl-2",children:l.stream.getTracks().map((f,p)=>v.jsxs("div",{className:"text-green-200",children:[f.kind,": ",f.enabled?"enabled":"disabled",", ",f.muted?"muted":"unmuted"]},p))}),v.jsxs("div",{children:[v.jsx("strong",{children:"Muted:"})," ",l.isMuted?"Yes":"No"]})]})]},l.uid))]}),v.jsx("div",{className:"text-yellow-300 mt-2",children:"If co-host video is not visible, try refreshing the page"})]})]}):null}function $k({streamId:i,localStream:e,pendingCohostId:n}){const s=O.useRef(null),[o,l]=O.useState("idle"),[h,f]=O.useState(!0),p=O.useRef(null),g=O.useRef(!1);return O.useEffect(()=>{if(s.current){s.current.autoplay=!0,s.current.playsInline=!0,s.current.muted=!0;try{s.current.removeAttribute("controls")}catch{}s.current.style.objectFit="contain",s.current.style.width="100%"}},[]),O.useEffect(()=>{s.current&&(s.current.muted=h)},[h]),O.useEffect(()=>{let _=!1;return(async()=>{if(!n||!e)return;const S=s.current;if(!S)return;const R=`${i}:${n}`;if(p.current?.key!==R&&!g.current){g.current=!0,S.autoplay=!0,S.playsInline=!0,S.muted=!0;try{S.removeAttribute("controls")}catch{}try{S.style.width||(S.style.width="360px"),S.style.objectFit="contain"}catch{}try{l("connecting");const{pc:I,cleanup:F}=await Vk(i,e,S,n);if(_){try{F?.()}catch{}try{I.close()}catch{}return}p.current={key:R,cleanup:F},l("connected")}catch(I){console.error("hostAcceptCoHost failed:",I),l("error")}finally{g.current=!1}}})(),()=>{_=!0;const S=`${i}:${n}`;if(p.current?.key===S){try{p.current.cleanup?.()}catch{}p.current=null}}},[n,e,i]),v.jsxs("div",{className:"host-cohost-panel p-3 rounded-md border border-blue-200 bg-white",children:[v.jsx("h3",{className:"font-semibold mb-2",children:"Co-Host Panel"}),v.jsx("div",{className:"video-tile mb-2",children:v.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",borderRadius:12,objectFit:"contain"}})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Status: ",o]}),v.jsx("button",{type:"button",onClick:()=>f(_=>!_),className:"ml-auto px-3 py-1 rounded-md text-sm border border-gray-300 hover:bg-gray-50",children:h?"Unmute co-host":"Mute co-host"})]})]})}function Kk({hostStream:i,enabled:e=!1}){const[n,s]=O.useState(null),[o,l]=O.useState(new Map),h=O.useRef(null),f=O.useRef(null);O.useEffect(()=>{if(e){try{h.current=new AudioContext,f.current=h.current.createGain(),f.current.connect(h.current.destination)}catch(_){console.error("Failed to initialize audio mixer:",_)}return()=>{h.current?.close()}}},[e]);const p=(_,w)=>{if(e&&(l(S=>{const R=new Map(S);return R.set(_,w),R}),h.current&&f.current))try{w.getAudioTracks().length>0&&h.current.createMediaStreamSource(w).connect(f.current)}catch(S){console.error("Failed to connect co-host audio:",S)}},g=_=>{e&&l(w=>{const S=new Map(w);return S.delete(_),S})};return O.useEffect(()=>{if(!(!e||!i))try{const _=new MediaStream;i.getTracks().forEach(w=>{_.addTrack(w)}),s(_)}catch(_){console.error("Failed to mix streams:",_)}},[i,o,e]),{mixedStream:e?n:i,addCoHostStream:p,removeCoHostStream:g,coHostCount:o.size}}const wE=!1;function Yk(){const i=O.useRef(null),[e,n]=O.useState(!1),[s,o]=O.useState(null),[l,h]=O.useState([]),[f,p]=O.useState(new Map),[g,_]=O.useState(null),[w,S]=O.useState(null),R=O.useRef(null),I=!0,{removeCoHostStream:F}=Kk({hostStream:R.current?.stream||null,enabled:wE});O.useEffect(()=>{if(!s)return;(async()=>{try{const K=await dk(s);console.log("🎯 Live doc fetched:",K),console.log("⚠️ DEBUG: Setting liveDoc - This confirms we have stream data")}catch(K){console.error("❌ Failed to fetch live doc:",K)}})()},[s]);const N=async()=>{try{console.log("🎥 Requesting camera + mic...");const G=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});if(!G)throw new Error("No MediaStream received from getUserMedia");i.current&&(i.current.srcObject=G),S(G);const K=await uk("My Live Stream");o(K),console.log("📡 Creating Broadcaster PC with stream:",G);const oe=await Mk(G,K);R.current={...oe,stream:G},n(!0)}catch(G){console.error("❌ Failed to start broadcast:",G),alert("לא ניתן להפעיל מצלמה/מיקרופון או להתחיל שידור")}},U=async()=>{if(s){console.log("🛑 Ending live:",s);try{R.current?.stream?.getTracks().forEach(K=>{try{K.stop()}catch{}});try{R.current?.unsubAnswer?.()}catch{}try{R.current?.unsubViewerICE?.()}catch{}try{R.current?.pc?.close()}catch{}R.current=null,l.forEach(K=>{P(K.uid)}),await ph(s)}catch(G){console.warn("⚠️ Failed to end live cleanly:",G)}finally{n(!1)}}},P=G=>{const K=f.get(G);if(K)try{K.cleanup(),p(oe=>{const C=new Map(oe);return C.delete(G),C}),h(oe=>oe.filter(C=>C.uid!==G)),console.log(`👋 Removed co-host: ${G}`)}catch(oe){console.error(`❌ Failed to remove co-host ${G}:`,oe)}},z=(G,K)=>{h(C=>C.map(x=>x.uid===G?{...x,isMuted:K}:x));const oe=l.find(C=>C.uid===G);oe&&oe.stream&&oe.stream.getAudioTracks().forEach(C=>{C.enabled=!K})};return O.useEffect(()=>{let G=null;e&&s&&(console.log("🔄 Starting heartbeat for stream:",s),console.log("💓 Sending immediate initial heartbeat..."),ah(s).then(()=>console.log("✅ Initial heartbeat sent successfully")).catch(C=>console.error("❌ Initial heartbeat failed:",C)),G=window.setInterval(()=>{console.log("💓 Sending heartbeat..."),ah(s).then(()=>console.log("✅ Heartbeat sent successfully")).catch(C=>{console.error("❌ Heartbeat failed:",C),setTimeout(()=>{console.log("🔄 Attempting recovery heartbeat..."),ah(s).catch(x=>console.error("❌ Recovery heartbeat also failed:",x))},1e3)})},5e3));const K=()=>{if(e&&s){try{navigator.sendBeacon&&navigator.sendBeacon("/noop")}catch{}ph(s).catch(()=>{})}},oe=()=>{document.hidden?console.log("📱 Tab hidden, stream continuing in background"):(console.log("👁️ Tab visible again"),e&&s&&ah(s).catch(()=>{}))};return window.addEventListener("beforeunload",K),document.addEventListener("visibilitychange",oe),()=>{if(G){console.log("🛑 Stopping heartbeat interval");try{window.clearInterval(G)}catch{}}if(window.removeEventListener("beforeunload",K),document.removeEventListener("visibilitychange",oe),e){s&&(console.log("🧹 Cleanup: Ending stream on component unmount"),ph(s).catch(()=>{})),R.current?.stream?.getTracks().forEach(x=>{try{x.stop()}catch{}});try{R.current?.pc?.close()}catch{}l.forEach(x=>{try{const D=f.get(x.uid);D&&D.cleanup()}catch{}})}}},[e,s,l,f]),O.useEffect(()=>{e&&s&&(console.log("🚨 DEBUG LiveStream Component State:"),console.log("- isLive:",e),console.log("- streamId:",s),console.log("- isHost:",I),console.log("- cohosts count:",l.length),l.length>0&&l.forEach((G,K)=>{console.log(`Co-host ${K+1}:`,{uid:G.uid,hasStream:!!G.stream,streamTracks:G.stream?.getTracks().map(oe=>({kind:oe.kind,enabled:oe.enabled,muted:oe.muted}))||[],isMuted:G.isMuted})}))},[e,s,I,l]),v.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen bg-white text-gray-800 p-4 ${l.length>0?"w-full max-w-full":""}`,children:[v.jsx("h1",{className:"text-2xl font-bold mb-6",children:"🎥 Live Stream"}),v.jsx("div",{className:`${l.length>0?"w-[1200px]":"w-[600px]"} max-w-full transition-all duration-300`,children:v.jsx(Hk,{hostVideoRef:i,cohosts:l})}),e?v.jsxs("div",{className:"mt-6 flex flex-col w-full max-w-[600px]",children:[v.jsx(qk,{liveId:s,onEnded:U}),e&&s&&I&&v.jsxs("div",{className:"mt-6 p-4 border-2 border-blue-300 bg-white rounded-lg shadow-lg",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Host Controls"}),v.jsx("div",{className:"px-3 py-1 bg-blue-500 text-white rounded-full text-sm",children:"Host Mode"})]}),v.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg shadow-lg",children:[v.jsxs("p",{className:"text-blue-700 font-bold text-lg flex items-center",children:[v.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," לתשומת לבך: פאנל אישור הצטרפות לשידור"]}),v.jsx("p",{className:"text-gray-700 mt-2",children:"כאן תוכל לראות בקשות הצטרפות לשידור ולאשר אותן"}),v.jsxs("p",{className:"text-blue-500 text-sm mt-2 font-mono",children:["Stream ID: ",s]})]}),v.jsx(Uk,{liveId:s,onApproved:G=>_(G),hasActiveCohost:l.length>0}),g&&w&&v.jsx("div",{className:"mt-4",children:v.jsx($k,{streamId:s,localStream:w,pendingCohostId:g})}),l.length>0&&v.jsx(zk,{cohosts:l,onRemove:P,onToggleMute:z}),v.jsx(Gk,{isVisible:!0,cohosts:l,streamId:s})]})]}):v.jsx("button",{onClick:N,className:"mt-6 px-6 py-3 bg-blue-500 text-white rounded-lg text-lg hover:bg-blue-600 shadow-md transition-colors",children:"Start Live"}),s&&v.jsxs("div",{className:"mt-4 text-sm text-gray-600 font-mono bg-gray-100 px-3 py-1 rounded-md",children:["Stream ID: ",s]})]})}function Qk(){const{user:i,loading:e}=pg(),n=vr();return O.useEffect(()=>{!e&&!i&&n("/login")},[e,i,n]),e?v.jsx("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:"Checking auth..."}):i?v.jsx(Yk,{}):null}function Xk(){const{user:i,loading:e}=pg(),n=vr();function s(){if(!i){n("/login");return}n("/live/go")}return v.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[v.jsx("h2",{className:"text-2xl font-semibold",children:"Live"}),v.jsx("p",{className:"mt-2 text-[var(--muted)]",children:"Watch broadcasts or start your own live stream."}),v.jsxs("div",{className:"mt-6 flex gap-3",children:[v.jsx(sn,{to:"/live/watch",className:"px-4 py-2 rounded bg-[var(--panel)] text-white",children:"Watch Live"}),v.jsx("button",{onClick:s,disabled:e,className:"px-4 py-2 rounded bg-[var(--primary)] text-white disabled:opacity-60",children:"Go Live"})]})]})}function Wk(){const[i,e]=O.useState([]),[n,s]=O.useState(!0);return O.useEffect(()=>{let o=!0;return s(!0),hk().then(l=>{o&&(e(l||[]),s(!1))}).catch(l=>{console.error("Error fetching streams:",l),o&&(e([]),s(!1))}),()=>{o=!1}},[]),v.jsxs("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:[v.jsxs("div",{className:"flex items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-semibold",children:"Live Streams"}),v.jsxs("div",{className:"ml-3 flex items-center",children:[v.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-2"}),v.jsx("span",{className:"text-sm font-medium text-red-500",children:"LIVE NOW"})]})]}),n?v.jsxs("div",{className:"flex justify-center items-center p-8",children:[v.jsx("div",{className:"w-6 h-6 border-2 border-blue-400 border-t-transparent rounded-full animate-spin mr-2"}),v.jsx("span",{className:"text-blue-500",children:"Loading streams..."})]}):v.jsx("div",{className:"mt-4 grid gap-4",children:i.length===0?v.jsxs("div",{className:"p-8 text-center bg-gray-50 rounded-lg border border-gray-200",children:[v.jsx("p",{className:"text-gray-600 text-lg",children:"No active streams right now."}),v.jsx("p",{className:"mt-2 text-gray-500",children:"Check back later or start your own stream!"})]}):i.map(o=>v.jsxs(sn,{to:`/watch/${o.id}`,className:"p-5 rounded-lg bg-white border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300 flex items-center",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-bold text-lg text-gray-800",children:o.title||"Untitled stream"}),v.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Hosted by: ",o.displayName||"Unknown"]}),o.cohosts&&Object.keys(o.cohosts).length>0&&v.jsxs("div",{className:"mt-2 flex items-center",children:[v.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs rounded-full mr-2",children:"Co-hosts"}),v.jsxs("span",{className:"text-xs text-gray-500",children:[Object.keys(o.cohosts).length," active co-host",Object.keys(o.cohosts).length!==1?"s":""]})]})]}),v.jsxs("div",{className:"flex flex-col items-end ml-4",children:[v.jsxs("span",{className:"px-3 py-1 rounded-full bg-gradient-to-r from-red-600 to-red-500 text-white text-sm font-bold shadow-sm flex items-center",children:[v.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse mr-2"}),"LIVE"]}),v.jsxs("span",{className:"text-xs text-gray-500 mt-2",children:[o.viewerCount||0," ",o.viewerCount===1?"viewer":"viewers"]})]})]},o.id))})]})}function Ab(){const i=O.useRef(null),[e,n]=O.useState(null),[s,o]=O.useState(!1),[l,h]=O.useState(null),f=O.useRef(null),p=O.useCallback(async()=>{if(h(null),f.current)return console.log("🎥 Using existing media stream"),f.current;try{console.log("🎥 Requesting camera and microphone permissions...");let _;try{_=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!0}),console.log("✅ Got access to both camera and microphone")}catch(R){console.warn("⚠️ Failed to get both camera and microphone, trying with just camera:",R);try{_=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1}),console.log("✅ Got access to camera only")}catch(I){console.warn("⚠️ Failed to get camera, trying with just audio:",I);try{_=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),console.log("✅ Got access to microphone only")}catch(F){throw console.error("❌ Failed to access any media devices:",F),new Error("Could not access camera or microphone. Please check your permissions.")}}}const w=_.getVideoTracks(),S=_.getAudioTracks();if(console.log(`✅ Media access granted with ${w.length} video tracks and ${S.length} audio tracks`),_.getTracks().forEach(R=>{R.enabled=!0,console.log(`✅ Enabled track: ${R.kind} (${R.label||R.id})`)}),w.length>0){const R=w[0];R.enabled=!0,console.log("📹 Video track:",{label:R.label,enabled:R.enabled,muted:R.muted,readyState:R.readyState,settings:R.getSettings()})}if(S.length>0){const R=S[0];R.enabled=!0,console.log("🎤 Audio track:",{label:R.label,enabled:R.enabled,muted:R.muted,readyState:R.readyState})}if(f.current=_,n(_),i.current){i.current.srcObject=_;try{await i.current.play(),console.log("▶️ Local video preview playing")}catch(R){console.warn("⚠️ Could not autoplay local video preview:",R)}}return o(!0),_}catch(_){const w=_ instanceof Error?_.message:"Failed to access media devices";throw console.error("❌ Media access error:",w),h(w),o(!1),_}},[]),g=O.useCallback(()=>{e&&(console.log(`🛑 Stopping ${e.getTracks().length} media tracks`),e.getTracks().forEach(_=>{console.log(`🛑 Stopping ${_.kind} track: ${_.label||_.id}`),_.stop()})),i.current&&(console.log("🧹 Clearing video srcObject"),i.current.srcObject=null),f.current=null,n(null),o(!1),console.log("✅ Local media completely stopped")},[e]);return O.useEffect(()=>()=>{f.current&&(console.log("🧹 Auto-cleaning media on unmount"),g())},[g]),{videoRef:i,start:p,stop:g,isActive:s,error:l,stream:e}}function Zk(){const{id:i}=fp(),[e,n]=O.useState(null),s=O.useRef(null),{start:o}=Ab(),l=async h=>{const f=i;if(!f)return n("Missing stream id");try{await o(),await Lk(f,s.current)}catch(p){n(p?.message??String(p))}};return v.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[v.jsx("h2",{className:"text-2xl font-semibold",children:"Viewer"}),v.jsx("p",{className:"text-[var(--muted)]",children:"Join a live stream"}),v.jsx("div",{className:"mt-4",children:v.jsx("button",{onClick:()=>l(),className:"px-4 py-2 bg-[var(--panel)] rounded",children:"Join"})}),v.jsx("div",{className:"mt-6",children:v.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,className:"w-full rounded bg-black"})}),e&&v.jsx("div",{className:"mt-4 text-red-400",children:e})]})}function Jk(){const{id:i}=fp(),e=O.useRef(null),n=O.useRef(null),[s,o]=O.useState(!1),[l,h]=O.useState(null),[f,p]=O.useState(!0),[g,_]=O.useState(null),[w,S]=O.useState(!1),[R,I]=O.useState("Waiting for stream..."),F=O.useRef(null),N=O.useRef(!1),[U,P]=O.useState(null),[z,G]=O.useState(!1),[K,oe]=O.useState(null),{stream:C,start:x,stop:D}=Ab(),[k,B]=O.useState(!1);O.useEffect(()=>{if(!i||!l||l.status!=="live")return;const Q=bb(i,ce=>{P(ce),ce?.status==="approved"&&!z&&q(),(ce?.status==="rejected"||ce?.status==="cancelled")&&z&&V()});return()=>Q()},[i,l,z]),O.useEffect(()=>{(async()=>{try{const{getAuth:Q}=await Wl(async()=>{const{getAuth:he}=await Promise.resolve().then(()=>zT);return{getAuth:he}},void 0),pe=Q().currentUser?.uid,j=l?.uid,ie=!!(pe&&j&&pe===j);ie!==k&&B(ie)}catch{}})()},[l?.uid]),O.useEffect(()=>{if(k&&e.current&&C)try{const Q=e.current;Q.srcObject!==C&&(Q.srcObject=C),Q.autoplay=!0,Q.playsInline=!0,Q.controls=!0,Q.muted=!0,Q.paused&&Q.play().catch(()=>{})}catch{}},[k,C]);const q=async()=>{if(!(!i||!l||l.status!=="live"))try{I("Starting co-host connection...");let Q=C;if(!Q){console.log("🎥 Starting local media for co-host connection...");try{Q=await x(),console.log("✅ Local media started successfully"),await new Promise(ye=>setTimeout(ye,1e3))}catch(ye){console.error("❌ Failed to get camera/microphone access:",ye),I(`Failed to access camera/microphone: ${ye.message||"Permission denied"}`);return}}let ce=0;const pe=5;for(;!Q&&ce<pe;)console.log(`⏳ Waiting for local stream to be ready... (attempt ${ce+1}/${pe})`),Q=C,await new Promise(ye=>setTimeout(ye,1e3)),ce++;if(!Q)throw console.error("❌ Local stream is still null after waiting"),new Error("Failed to get local media for co-host - stream is null");const j=Q.getTracks().map(ye=>({kind:ye.kind,enabled:ye.enabled,muted:ye.muted,readyState:ye.readyState,id:ye.id}));if(console.log("🎥 Local media ready with tracks:",j),j.length===0)throw console.error("❌ No tracks in local stream"),new Error("No camera/microphone tracks available");I("Connecting to host as co-host...");const ie=new Promise((ye,Xt)=>{setTimeout(()=>Xt(new Error("Connection timeout - taking too long to connect")),6e4)});if(!e.current)throw console.error("❌ Video element is not available for co-host connection"),new Error("Video element not ready");console.log("📡 Attempting to connect as co-host with stream tracks:",Q.getTracks().map(ye=>`${ye.kind} (${ye.readyState})`).join(", "));const he=jk(i,Q,e.current);Q.getAudioTracks().forEach(ye=>{ye.enabled=!0}),Q.getVideoTracks().forEach(ye=>{ye.enabled=!0});try{const{getFirestoreInstance:ye}=await Wl(async()=>{const{getFirestoreInstance:ii}=await Promise.resolve().then(()=>lD);return{getFirestoreInstance:ii}},void 0),{doc:Xt,getDoc:ei,updateDoc:Fn}=await Wl(async()=>{const{doc:ii,getDoc:dn,updateDoc:Io}=await Promise.resolve().then(()=>db);return{doc:ii,getDoc:dn,updateDoc:Io}},void 0),Oi=ye(),ti=Xt(Oi,"liveStreams",i),ni=await ei(ti);if(!ni.exists())throw new Error("Stream not found");const Er=ni.data();if(Er.status!=="live"){console.warn(`⚠️ Stream status is ${Er.status}, attempting to fix...`);try{await Fn(ti,{status:"live",lastSeen:new Date,reconnectedAt:new Date().toISOString()}),console.log("✅ Fixed stream status back to live")}catch(ii){console.error("❌ Could not update stream status:",ii)}}}catch(ye){console.warn("⚠️ Error checking stream status:",ye)}const{pc:ee,unsubAnswer:fe,unsubHostICE:Ie}=await Promise.race([he,ie]);console.log("✅ Successfully connected as co-host!");const we=()=>{try{fe()}catch{}try{Ie()}catch{}try{ee.close()}catch{}try{D()}catch{}};if(oe(()=>we),G(!0),I("Co-hosting live!"),e.current){e.current.muted=!1;const ye=document.getElementById("hostVideo");ye&&(console.log("🔄 Ensuring host video continues to play"),ye.muted=!1,ye.paused&&ye.play().catch(Xt=>console.warn("⚠️ Host video play error:",Xt)),ye.style.display="block",ye.style.opacity="1")}const ut=document.getElementById("localVideo");ut&&Q&&(console.log("🔄 Ensuring local video is displayed"),ut.srcObject=Q,ut.play().catch(ye=>console.warn("⚠️ Local video play error:",ye))),ee.onconnectionstatechange=()=>{console.log(`🔄 Co-host connection state changed: ${ee.connectionState}`),ee.connectionState==="connected"?I("Connected to host - Live!"):(ee.connectionState==="disconnected"||ee.connectionState==="failed")&&I(`Connection ${ee.connectionState}. Try refreshing.`)}}catch(Q){console.error("Failed to connect as co-host:",Q);let ce="Failed to connect as co-host";Q.message?.includes("Timeout waiting for host answer")?ce="Host did not respond to your join request. They may be busy or offline.":Q.message?.includes("access")?ce="Camera/microphone access denied. Check your browser permissions.":Q.message?.includes("Connection timeout")&&(ce="Connection timed out. The host may be offline or having network issues."),I(ce),V()}},V=()=>{K&&(K(),oe(null)),G(!1)},mt=Q=>{e.current=Q,Q&&!s&&o(!0)};O.useEffect(()=>{if(!e.current)return;const Q=e.current;Q.autoplay=!0,Q.playsInline=!0,Q.controls=!0,Q.muted=!0,Q.onloadedmetadata=()=>{console.log("🎥 loadedmetadata",{w:Q.videoWidth,h:Q.videoHeight,duration:Q.duration})},Q.oncanplay=()=>console.log("🎥 canplay"),Q.onplay=()=>console.log("🎥 playing"),Q.onerror=ce=>console.error("🎥 video error",ce)},[]),O.useEffect(()=>{z&&[100,500,1e3,2e3,5e3].forEach(ce=>{setTimeout(()=>{const pe=document.getElementById("hostVideo");pe&&(console.log(`🔊 Setting up host video for co-host mode (${ce}ms check)`),pe.muted=!1,pe.style.opacity="1",pe.style.display="block",!pe.srcObject&&Ge.current&&(console.log("🔄 Restoring host video stream from saved reference"),pe.srcObject=Ge.current),(pe.paused||pe.readyState<3)&&pe.play().catch(ie=>{console.warn(`⚠️ Could not play host video in co-host mode (${ce}ms check):`,ie)}));const j=document.getElementById("localVideo");j&&C&&(console.log(`🔊 Setting up local video for co-host mode (${ce}ms check)`),j.srcObject=C,j.play().catch(ie=>{console.warn(`⚠️ Could not play local video in co-host mode (${ce}ms check):`,ie)}))},ce)})},[z,C]),O.useEffect(()=>{if(!i)return;const Q=Tt(),ce=_e(Q,"liveStreams",i);console.log("👁️ Starting to watch stream:",i);const pe=vn(ce,async j=>{if(!j.exists()){console.log("❌ Stream not found"),_("Stream not found"),I("Stream not found"),p(!1);return}const ie=j.data();if(console.log("📡 Stream data updated:",ie),h(ie),ie.status==="ended"&&w){console.log("⏹️ Stream ended, disconnecting…"),S(!1),I("Stream has ended"),F.current&&(F.current(),F.current=null),p(!1);return}ie.status==="live"&&!w&&(console.log("🔍 DEBUG connect conditions:",{status:ie.status,isConnected:w,hasVideoRef:!!e.current}),e.current||I("Preparing video element…")),p(!1)},j=>{console.error("❌ Error listening to stream:",j),_("Failed to load stream"),I("Failed to load stream"),p(!1)});return()=>{console.log("🧹 Cleaning up stream listener"),pe(),F.current&&F.current(),K&&K();try{D()}catch{}}},[i]);const Ge=O.useRef(null);O.useEffect(()=>{if(!i||w||k||!e.current||!s||l?.status!=="live"||N.current)return;const Q=e.current;N.current=!0,I("Connecting to stream…"),Q&&(Q.autoplay=!0,Q.playsInline=!0),Eg(i,Q).then(ce=>{console.log("✅ Connection successful:",ce),S(!0),I("Connected to stream"),F.current=ce.cleanup,Q&&Q.srcObject instanceof MediaStream&&(Ge.current=Q.srcObject,console.log("💾 Saved original host stream for later restoration if needed")),Q&&Q.paused&&(console.log("▶️ Forcing host video playback"),Q.play().catch(pe=>{console.warn("⚠️ Could not force play host video:",pe)}))}).catch(ce=>{console.error("❌ Failed to connect:",ce),_(ce.message||"Failed to connect to stream"),I("Connection failed")}).finally(()=>{N.current=!1})},[i,s,l?.status,w,k]),O.useEffect(()=>{if(z&&Ge.current&&e.current){const Q=()=>{const pe=document.getElementById("hostVideo");pe&&(!pe.srcObject||pe.srcObject instanceof MediaStream&&pe.srcObject.getTracks().length===0)&&(console.log("🔄 Host video stream lost after co-host connection - restoring from saved stream"),pe.srcObject=Ge.current,pe.muted=!1,pe.play().catch(j=>console.warn("⚠️ Error playing restored host video:",j)))};Q();const ce=setTimeout(Q,2e3);return()=>clearTimeout(ce)}},[z]);const te=()=>{const Q=n.current||e.current;if(!Q)return;const ce=document;document.fullscreenElement?ce.exitFullscreen?.()||ce.webkitExitFullscreen?.():Q.requestFullscreen?.()||Q.webkitRequestFullscreen?.()};return f?v.jsx("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:v.jsx("div",{className:"flex items-center justify-center h-64",children:v.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})})}):g||!l?v.jsx("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Stream Not Found"}),v.jsx("p",{className:"text-[var(--muted)] mb-6",children:g||"This stream could not be loaded."}),v.jsx(sn,{to:"/",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:"Back to Home"})]})}):v.jsxs("div",{className:"watch-stream",children:[v.jsxs("div",{className:"watch-stream__header",children:[v.jsx(Co,{photoURL:l.photoURL,displayName:l.displayName,email:l.displayName,size:48}),v.jsxs("div",{className:"watch-stream__title",children:[v.jsx("h1",{children:l.title}),v.jsx("p",{className:"watch-stream__host-name",children:l.displayName})]}),v.jsxs("div",{className:"watch-stream__actions",children:[v.jsxs("div",{className:"watch-stream__live-indicator",children:[v.jsx("span",{className:"watch-stream__live-dot"}),v.jsx("span",{className:"watch-stream__live-text",children:"LIVE"})]}),!z&&v.jsx(Bk,{liveId:i,status:l.status}),z&&v.jsx("div",{children:v.jsx(Fk,{onLeave:V})})]})]}),v.jsx("div",{className:"text-center mb-4",children:v.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm ${w?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:R})}),v.jsx("div",{className:"watch-stream__video-container",children:v.jsxs("div",{className:`video-grid ${z?"":"justify-center"}`,children:[v.jsx("div",{ref:n,className:`video-grid__item ${z?"":"max-w-3xl"}`,children:v.jsxs("div",{className:"video-wrapper",children:[v.jsx("video",{id:"hostVideo",ref:mt,autoPlay:!0,playsInline:!0,controls:!0,muted:!z,className:"watch-stream__video",onLoadedMetadata:Q=>{console.log("📊 Host video metadata loaded:",{width:Q.currentTarget.videoWidth,height:Q.currentTarget.videoHeight})},onPlay:()=>{console.log("▶️ Host video is now playing")}}),v.jsx("button",{type:"button",onClick:te,className:"absolute top-2 right-2 z-10 px-2 py-1 text-xs rounded bg-black/60 text-white hover:bg-black/80","aria-label":"Toggle fullscreen",children:"Fullscreen"}),v.jsx("div",{className:"absolute top-2 left-2 z-10 px-3 py-1 text-xs rounded-full bg-gradient-to-r from-blue-600 to-blue-400 text-white font-bold shadow-sm",children:"Host"})]})}),z&&v.jsx("div",{className:"video-grid__item",children:v.jsxs("div",{className:"video-wrapper border-2 border-green-300",children:[v.jsx("video",{id:"localVideo",autoPlay:!0,playsInline:!0,controls:!0,className:"watch-stream__video",ref:Q=>{Q&&C&&(console.log("📹 Setting local stream to video element"),Q.srcObject=null,Q.srcObject=C,Q.play().catch(ce=>{console.warn("⚠️ Could not autoplay local video:",ce),setTimeout(()=>{Q.srcObject&&Q.play().catch(pe=>{console.warn("⚠️ Still could not autoplay local video after delay:",pe)})},1e3)}),Q.onplaying=()=>{console.log("▶️ Local video is now playing")},Q.onloadedmetadata=()=>{console.log("📊 Local video metadata loaded:",{width:Q.videoWidth,height:Q.videoHeight})})}}),v.jsx("div",{className:"absolute top-2 left-2 z-10 px-3 py-1 text-xs rounded-full bg-gradient-to-r from-green-600 to-green-400 text-white font-bold shadow-sm",children:"You (Co-host)"})]})})]})}),z&&v.jsxs("div",{className:"mt-4 mb-6 p-3 bg-green-600/20 border border-green-600 rounded-md text-center",children:[v.jsx("p",{className:"text-white font-medium",children:"You're live with the host!"}),v.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Your camera and microphone are being shared."})]}),U&&U.status==="pending"&&v.jsxs("div",{className:"mt-4 mb-6 p-3 bg-yellow-600/20 border border-yellow-600 rounded-md text-center",children:[v.jsx("p",{className:"text-white font-medium",children:"Your request to join is pending"}),v.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Waiting for the host to approve your request..."})]}),U&&U.status==="rejected"&&v.jsxs("div",{className:"mt-4 mb-6 p-3 bg-red-600/20 border border-red-600 rounded-md text-center",children:[v.jsx("p",{className:"text-white font-medium",children:"Your request to join was declined"}),v.jsx("p",{className:"text-sm text-[var(--muted)]",children:"The host has declined your request to join."})]}),v.jsxs("div",{className:"mt-6 p-3 bg-gray-800 rounded text-xs text-gray-300",children:[v.jsxs("div",{children:["Stream ID: ",i]}),v.jsxs("div",{children:["Status: ",l.status]}),v.jsxs("div",{children:["Connected: ",w?"Yes":"No"]}),v.jsxs("div",{children:["Connection Status: ",R]}),v.jsxs("div",{children:["Co-host: ",z?"Yes":"No"]}),v.jsxs("div",{children:["Join Request: ",U?.status||"None"]}),v.jsxs("div",{children:["Video Element: ",e.current?"Ready":"Not Ready"]}),v.jsxs("div",{children:["Video srcObject: ",e.current?.srcObject?"Set":"Not Set"]}),v.jsxs("div",{children:["Video Tracks:"," ",e.current?.srcObject&&e.current.srcObject?.getTracks().length||0]}),v.jsxs("div",{children:["Local Camera: ",C?`Active (${C.getTracks().length} tracks)`:"Not active"]})]})]})}function eO(){const[i,e]=O.useState(()=>{try{const o=localStorage.getItem("theme");if(o)return o==="dark"}catch{}return!1}),[n,s]=O.useState(()=>{try{const o=localStorage.getItem("rtl");if(o)return o==="1"}catch{}return!1});return O.useEffect(()=>{try{document.documentElement.setAttribute("data-theme",i?"dark":"light"),localStorage.setItem("theme",i?"dark":"light")}catch{}},[i]),O.useEffect(()=>{try{document.documentElement.dir=n?"rtl":"ltr",localStorage.setItem("rtl",n?"1":"0")}catch{}},[n]),{dark:i,setDark:e,rtl:n,setRtl:s}}function tO(){const{dark:i,setDark:e,rtl:n,setRtl:s}=eO();return v.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[v.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),v.jsx("div",{className:"mt-4",children:v.jsxs("label",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",checked:i,onChange:()=>e(!i)}),"Dark mode"]})}),v.jsx("div",{className:"mt-2",children:v.jsxs("label",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",checked:n,onChange:()=>s(o=>!o)}),"RTL / Language direction"]})})]})}function nO(){return v.jsxs("div",{className:"not-found",children:[v.jsx("h2",{className:"not-found__title",children:"Page not found"}),v.jsx("p",{className:"not-found__message",children:"The page you're looking for doesn't exist."}),v.jsx(sn,{to:"/",className:"button button--secondary not-found__button",children:"Go home"})]})}function iO(){const i=vr(),e=xo(),n=Tt(),[s,o]=O.useState(""),[l,h]=O.useState(""),[f,p]=O.useState(""),[g,_]=O.useState(null),[w,S]=O.useState(!1);async function R(F){F.preventDefault(),_(null),S(!0);try{const U=(await bT(e,l,f)).user;await ot(_e(n,"users",U.uid),{uid:U.uid,name:s||U.displayName||"",email:U.email||l,role:"user",createdAt:In()}),i("/")}catch(N){const U=N instanceof Error?N.message:String(N);_(U)}finally{S(!1)}}async function I(){_(null),S(!0);try{const N=(await Cp(e,mg)).user,U=N.displayName??(N.email?N.email.split("@")[0]:"");await ot(_e(n,"users",N.uid),{uid:N.uid,name:U,email:N.email,role:"user",createdAt:In()},{merge:!0}),i("/")}catch(F){const N=F instanceof Error?F.message:String(F);_(N)}finally{S(!1)}}return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:v.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg bg-[var(--panel)] shadow-md",children:[v.jsx("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Create account"}),v.jsxs("form",{onSubmit:R,className:"space-y-3",children:[v.jsx("input",{value:s,onChange:F=>o(F.target.value),placeholder:"Full name",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),v.jsx("input",{value:l,onChange:F=>h(F.target.value),placeholder:"Email",type:"email",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),v.jsx("input",{value:f,onChange:F=>p(F.target.value),placeholder:"Password",type:"password",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),g&&v.jsx("div",{className:"text-red-400 text-sm",children:g}),v.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[color:var(--primary)] text-black font-semibold py-2 rounded-md",children:w?"Creating...":"Create account"})]}),v.jsx("div",{className:"my-3 border-t border-white/10"}),v.jsxs("button",{onClick:I,className:"w-full flex items-center justify-center gap-2 border border-white/10 rounded-md py-2 text-white",children:[v.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{d:"M21.35 11.1H12v2.8h5.35c-.23 1.34-1.01 2.49-2.16 3.27v2.7h3.49C20.66 19.1 22 15.4 22 12c0-.67-.07-1.32-.2-1.9z",fill:"#4285F4"}),v.jsx("path",{d:"M12 22c2.7 0 4.97-.9 6.63-2.43l-3.49-2.7c-.97.66-2.21 1.06-3.14 1.06-2.41 0-4.45-1.63-5.18-3.82H3.14v2.4C4.8 19.8 8.12 22 12 22z",fill:"#34A853"}),v.jsx("path",{d:"M6.82 13.11A6.99 6.99 0 016 12c0-.66.11-1.3.32-1.9V7.7H3.14A9.99 6.99 0 002 12c0 1.6.36 3.12 1.02 4.44l3.8-3.33z",fill:"#FBBC05"}),v.jsx("path",{d:"M12 6.5c1.47 0 2.8.5 3.85 1.47l2.88-2.88C16.96 3.73 14.7 3 12 3 8.12 3 4.8 5.2 3.14 8.3l3.18 2.2C7.55 8.13 9.59 6.5 12 6.5z",fill:"#EA4335"})]}),"Sign up with Google"]}),v.jsxs("p",{className:"text-sm text-white/80 mt-3",children:["Already have an account? ",v.jsx(sn,{to:"/login",className:"text-[color:var(--primary)]",children:"Login"})]})]})})}function rO(){const i=xo(),e=Tt(),n=vr(),[s,o]=O.useState(""),[l,h]=O.useState(""),[f,p]=O.useState(null),[g,_]=O.useState(!1);async function w(R){R.preventDefault(),p(null),_(!0);try{await ST(i,s,l),n("/")}catch(I){const F=I instanceof Error?I.message:String(I);p(F)}finally{_(!1)}}async function S(){p(null),_(!0);try{const I=(await Cp(i,mg)).user;await ot(_e(e,"users",I.uid),{uid:I.uid,name:I.displayName??(I.email?I.email.split("@")[0]:""),email:I.email,role:"user",createdAt:In()},{merge:!0}),n("/")}catch(R){const I=R instanceof Error?R.message:String(R);p(I)}finally{_(!1)}}return v.jsx("div",{className:"login",children:v.jsxs("div",{className:"login__card",children:[v.jsx("h2",{className:"login__title",children:"Sign in"}),v.jsxs("form",{onSubmit:w,className:"login__form",children:[v.jsx("div",{className:"form-field",children:v.jsx("input",{placeholder:"Email",type:"email",value:s,onChange:R=>o(R.target.value),className:"form-field__input",required:!0})}),v.jsx("div",{className:"form-field",children:v.jsx("input",{placeholder:"Password",type:"password",value:l,onChange:R=>h(R.target.value),className:"form-field__input",required:!0})}),f&&v.jsx("div",{className:"login__error",children:f}),v.jsx("button",{type:"submit",disabled:g,className:"button button--primary button--full",children:g?"Signing in...":"Sign in"})]}),v.jsx("div",{className:"login__divider"}),v.jsxs("button",{onClick:S,className:"button button--outline button--full",children:[v.jsxs("svg",{className:"button__icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{d:"M21.35 11.1H12v2.8h5.35c-.23 1.34-1.01 2.49-2.16 3.27v2.7h3.49C20.66 19.1 22 15.4 22 12c0-.67-.07-1.32-.2-1.9z",fill:"#4285F4"}),v.jsx("path",{d:"M12 22c2.7 0 4.97-.9 6.63-2.43l-3.49-2.7c-.97.66-2.21 1.06-3.14 1.06-2.41 0-4.45-1.63-5.18-3.82H3.14v2.4C4.8 19.8 8.12 22 12 22z",fill:"#34A853"}),v.jsx("path",{d:"M6.82 13.11A6.99 6.99 0 016 12c0-.66.11-1.3.32-1.9V7.7H3.14A9.99 9.99 0 002 12c0 1.6.36 3.12 1.02 4.44l3.8-3.33z",fill:"#FBBC05"}),v.jsx("path",{d:"M12 6.5c1.47 0 2.8.5 3.85 1.47l2.88-2.88C16.96 3.73 14.7 3 12 3 8.12 3 4.8 5.2 3.14 8.3l3.18 2.2C7.55 8.13 9.59 6.5 12 6.5z",fill:"#EA4335"})]}),"Sign in with Google"]}),v.jsxs("p",{className:"login__signup-prompt",children:["Don't have an account? ",v.jsx(sn,{to:"/signup",className:"login__signup-link",children:"Sign up"})]})]})})}function sO(){const i=O.useRef(null),[e,n]=O.useState(""),[s,o]=O.useState(!1),l=async()=>{try{if(!e){alert("נא להזין Stream ID");return}if(!i.current){alert("Video element missing!");return}await Eg(e,i.current),o(!0)}catch(h){console.error("❌ Failed to join stream:",h),alert("שגיאה בהתחברות לשידור")}};return v.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6",children:"👀 Watch Live Stream"}),v.jsx("input",{type:"text",placeholder:"Enter Stream ID",value:e,onChange:h=>n(h.target.value),className:"mb-4 px-4 py-2 rounded text-black w-80"}),v.jsx("button",{onClick:l,className:"px-6 py-3 bg-green-600 rounded-lg text-lg hover:bg-green-700",children:"Watch"}),v.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,controls:!0,className:"w-[600px] max-w-full rounded-lg shadow-lg bg-black mt-6"}),s&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Watching stream: ",e]})]})}function aO(){return v.jsx(cD,{children:v.jsx(l1,{children:v.jsxs(t1,{children:[v.jsxs(tn,{path:"/",element:v.jsx(ck,{}),children:[v.jsx(tn,{index:!0,element:v.jsx(vk,{})}),v.jsx(tn,{path:"following",element:v.jsx(Ks,{children:v.jsx(Rk,{})})}),v.jsx(tn,{path:"explore",element:v.jsx(Ck,{})}),v.jsx(tn,{path:"profile/:handle",element:v.jsx(Ks,{children:v.jsx(Nk,{})})}),v.jsx(tn,{path:"live",element:v.jsx(Ks,{children:v.jsx(Xk,{})})}),v.jsx(tn,{path:"live/watch",element:v.jsx(Ks,{children:v.jsx(Wk,{})})}),v.jsx(tn,{path:"live/go",element:v.jsx(Ks,{children:v.jsx(Qk,{})})}),v.jsx(tn,{path:"live/watch/:id",element:v.jsx(Ks,{children:v.jsx(Zk,{})})}),v.jsx(tn,{path:"settings",element:v.jsx(Ks,{children:v.jsx(tO,{})})}),v.jsx(tn,{path:"signup",element:v.jsx(gE,{children:v.jsx(iO,{})})}),v.jsx(tn,{path:"login",element:v.jsx(gE,{children:v.jsx(rO,{})})}),v.jsx(tn,{path:"*",element:v.jsx(nO,{})})]}),v.jsx(tn,{path:"/watch/:id",element:v.jsx(Jk,{})}),v.jsx(tn,{path:"/viewer",element:v.jsx(sO,{})})," "]})})})}oA.createRoot(document.getElementById("root")).render(v.jsx(SE.StrictMode,{children:v.jsx(aO,{})}));
