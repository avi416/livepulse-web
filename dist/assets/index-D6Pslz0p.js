function AS(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function cE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var im={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function RS(){if(T_)return Vl;T_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var w_;function IS(){return w_||(w_=1,im.exports=RS()),im.exports}var T=IS(),rm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function xS(){if(b_)return Re;b_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function R(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,z={};function M(P,ie,ue){this.props=P,this.context=ie,this.refs=z,this.updater=ue||C}M.prototype.isReactComponent={},M.prototype.setState=function(P,ie){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ie,"setState")},M.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=M.prototype;function X(P,ie,ue){this.props=P,this.context=ie,this.refs=z,this.updater=ue||C}var Z=X.prototype=new Y;Z.constructor=X,V(Z,M.prototype),Z.isPureReactComponent=!0;var ne=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function O(P,ie,ue,ae,ye,xe){return ue=xe.ref,{$$typeof:r,type:P,key:ie,ref:ue!==void 0?ue:null,props:xe}}function A(P,ie){return O(P.type,ie,void 0,void 0,void 0,P.props)}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function I(P){var ie={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return ie[ue]})}var k=/\/+/g;function j(P,ie){return typeof P=="object"&&P!==null&&P.key!=null?I(""+P.key):ie.toString(36)}function N(){}function ze(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(ie){P.status==="pending"&&(P.status="fulfilled",P.value=ie)},function(ie){P.status==="pending"&&(P.status="rejected",P.reason=ie)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function lt(P,ie,ue,ae,ye){var xe=typeof P;(xe==="undefined"||xe==="boolean")&&(P=null);var we=!1;if(P===null)we=!0;else switch(xe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(P.$$typeof){case r:case e:we=!0;break;case _:return we=P._init,lt(we(P._payload),ie,ue,ae,ye)}}if(we)return ye=ye(P),we=ae===""?"."+j(P,0):ae,ne(ye)?(ue="",we!=null&&(ue=we.replace(k,"$&/")+"/"),lt(ye,ie,ue,"",function(Wn){return Wn})):ye!=null&&(x(ye)&&(ye=A(ye,ue+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+we)),ie.push(ye)),1;we=0;var Nt=ae===""?".":ae+":";if(ne(P))for(var et=0;et<P.length;et++)ae=P[et],xe=Nt+j(ae,et),we+=lt(ae,ie,ue,xe,ye);else if(et=R(P),typeof et=="function")for(P=et.call(P),et=0;!(ae=P.next()).done;)ae=ae.value,xe=Nt+j(ae,et++),we+=lt(ae,ie,ue,xe,ye);else if(xe==="object"){if(typeof P.then=="function")return lt(ze(P),ie,ue,ae,ye);throw ie=String(P),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function $(P,ie,ue){if(P==null)return P;var ae=[],ye=0;return lt(P,ae,"","",function(xe){return ie.call(ue,xe,ye++)}),ae}function le(P){if(P._status===-1){var ie=P._result;ie=ie(),ie.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=ie)}if(P._status===1)return P._result.default;throw P._result}var pe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function qe(){}return Re.Children={map:$,forEach:function(P,ie,ue){$(P,function(){ie.apply(this,arguments)},ue)},count:function(P){var ie=0;return $(P,function(){ie++}),ie},toArray:function(P){return $(P,function(ie){return ie})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Re.Component=M,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=X,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return se.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cloneElement=function(P,ie,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ae=V({},P.props),ye=P.key,xe=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(xe=void 0),ie.key!==void 0&&(ye=""+ie.key),ie)!he.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(ae[we]=ie[we]);var we=arguments.length-2;if(we===1)ae.children=ue;else if(1<we){for(var Nt=Array(we),et=0;et<we;et++)Nt[et]=arguments[et+2];ae.children=Nt}return O(P.type,ye,void 0,void 0,xe,ae)},Re.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Re.createElement=function(P,ie,ue){var ae,ye={},xe=null;if(ie!=null)for(ae in ie.key!==void 0&&(xe=""+ie.key),ie)he.call(ie,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ye[ae]=ie[ae]);var we=arguments.length-2;if(we===1)ye.children=ue;else if(1<we){for(var Nt=Array(we),et=0;et<we;et++)Nt[et]=arguments[et+2];ye.children=Nt}if(P&&P.defaultProps)for(ae in we=P.defaultProps,we)ye[ae]===void 0&&(ye[ae]=we[ae]);return O(P,xe,void 0,void 0,null,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:m,render:P}},Re.isValidElement=x,Re.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:le}},Re.memo=function(P,ie){return{$$typeof:g,type:P,compare:ie===void 0?null:ie}},Re.startTransition=function(P){var ie=se.T,ue={};se.T=ue;try{var ae=P(),ye=se.S;ye!==null&&ye(ue,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(qe,pe)}catch(xe){pe(xe)}finally{se.T=ie}},Re.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Re.use=function(P){return se.H.use(P)},Re.useActionState=function(P,ie,ue){return se.H.useActionState(P,ie,ue)},Re.useCallback=function(P,ie){return se.H.useCallback(P,ie)},Re.useContext=function(P){return se.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,ie){return se.H.useDeferredValue(P,ie)},Re.useEffect=function(P,ie,ue){var ae=se.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(P,ie)},Re.useId=function(){return se.H.useId()},Re.useImperativeHandle=function(P,ie,ue){return se.H.useImperativeHandle(P,ie,ue)},Re.useInsertionEffect=function(P,ie){return se.H.useInsertionEffect(P,ie)},Re.useLayoutEffect=function(P,ie){return se.H.useLayoutEffect(P,ie)},Re.useMemo=function(P,ie){return se.H.useMemo(P,ie)},Re.useOptimistic=function(P,ie){return se.H.useOptimistic(P,ie)},Re.useReducer=function(P,ie,ue){return se.H.useReducer(P,ie,ue)},Re.useRef=function(P){return se.H.useRef(P)},Re.useState=function(P){return se.H.useState(P)},Re.useSyncExternalStore=function(P,ie,ue){return se.H.useSyncExternalStore(P,ie,ue)},Re.useTransition=function(){return se.H.useTransition()},Re.version="19.1.1",Re}var S_;function np(){return S_||(S_=1,rm.exports=xS()),rm.exports}var U=np();const hE=cE(U),CS=AS({__proto__:null,default:hE},[U]);var sm={exports:{}},Pl={},am={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function NS(){return A_||(A_=1,(function(r){function e($,le){var pe=$.length;$.push(le);e:for(;0<pe;){var qe=pe-1>>>1,P=$[qe];if(0<o(P,le))$[qe]=le,$[pe]=P,pe=qe;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var le=$[0],pe=$.pop();if(pe!==le){$[0]=pe;e:for(var qe=0,P=$.length,ie=P>>>1;qe<ie;){var ue=2*(qe+1)-1,ae=$[ue],ye=ue+1,xe=$[ye];if(0>o(ae,pe))ye<P&&0>o(xe,ae)?($[qe]=xe,$[ye]=pe,qe=ye):($[qe]=ae,$[ue]=pe,qe=ue);else if(ye<P&&0>o(xe,pe))$[qe]=xe,$[ye]=pe,qe=ye;else break e}}return le}function o($,le){var pe=$.sortIndex-le.sortIndex;return pe!==0?pe:$.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],_=1,w=null,R=3,C=!1,V=!1,z=!1,M=!1,Y=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ne($){for(var le=n(g);le!==null;){if(le.callback===null)s(g);else if(le.startTime<=$)s(g),le.sortIndex=le.expirationTime,e(p,le);else break;le=n(g)}}function se($){if(z=!1,ne($),!V)if(n(p)!==null)V=!0,he||(he=!0,j());else{var le=n(g);le!==null&&lt(se,le.startTime-$)}}var he=!1,O=-1,A=5,x=-1;function I(){return M?!0:!(r.unstable_now()-x<A)}function k(){if(M=!1,he){var $=r.unstable_now();x=$;var le=!0;try{e:{V=!1,z&&(z=!1,X(O),O=-1),C=!0;var pe=R;try{t:{for(ne($),w=n(p);w!==null&&!(w.expirationTime>$&&I());){var qe=w.callback;if(typeof qe=="function"){w.callback=null,R=w.priorityLevel;var P=qe(w.expirationTime<=$);if($=r.unstable_now(),typeof P=="function"){w.callback=P,ne($),le=!0;break t}w===n(p)&&s(p),ne($)}else s(p);w=n(p)}if(w!==null)le=!0;else{var ie=n(g);ie!==null&&lt(se,ie.startTime-$),le=!1}}break e}finally{w=null,R=pe,C=!1}le=void 0}}finally{le?j():he=!1}}}var j;if(typeof Z=="function")j=function(){Z(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ze=N.port2;N.port1.onmessage=k,j=function(){ze.postMessage(null)}}else j=function(){Y(k,0)};function lt($,le){O=Y(function(){$(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function($){switch(R){case 1:case 2:case 3:var le=3;break;default:le=R}var pe=R;R=le;try{return $()}finally{R=pe}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=R;R=$;try{return le()}finally{R=pe}},r.unstable_scheduleCallback=function($,le,pe){var qe=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?qe+pe:qe):pe=qe,$){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=pe+P,$={id:_++,callback:le,priorityLevel:$,startTime:pe,expirationTime:P,sortIndex:-1},pe>qe?($.sortIndex=pe,e(g,$),n(p)===null&&$===n(g)&&(z?(X(O),O=-1):z=!0,lt(se,pe-qe))):($.sortIndex=P,e(p,$),V||C||(V=!0,he||(he=!0,j()))),$},r.unstable_shouldYield=I,r.unstable_wrapCallback=function($){var le=R;return function(){var pe=R;R=le;try{return $.apply(this,arguments)}finally{R=pe}}}})(om)),om}var R_;function DS(){return R_||(R_=1,am.exports=NS()),am.exports}var lm={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function OS(){if(I_)return Yt;I_=1;var r=np();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:_}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Yt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},Yt.flushSync=function(p){var g=h.T,_=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=_,s.d.f()}},Yt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Yt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Yt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,w=m(_,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:C}):_==="script"&&s.d.X(p,{crossOrigin:w,integrity:R,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Yt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Yt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=m(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Yt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Yt.requestFormReset=function(p){s.d.r(p)},Yt.unstable_batchedUpdates=function(p,g){return p(g)},Yt.useFormState=function(p,g,_){return h.H.useFormState(p,g,_)},Yt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Yt.version="19.1.1",Yt}var x_;function fE(){if(x_)return lm.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=OS(),lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function MS(){if(C_)return Pl;C_=1;var r=DS(),e=np(),n=fE();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),t;if(d===l)return m(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var E=!1,b=f.child;b;){if(b===a){E=!0,a=f,l=d;break}if(b===l){E=!0,l=f,a=d;break}b=b.sibling}if(!E){for(b=d.child;b;){if(b===a){E=!0,a=d,l=f;break}if(b===l){E=!0,l=d,a=f;break}b=b.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case M:return"Profiler";case z:return"StrictMode";case se:return"Suspense";case he:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case Z:return(t.displayName||"Context")+".Provider";case X:return(t._context.displayName||"Context")+".Consumer";case ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:ze(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return ze(t(i))}catch{}}return null}var lt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},qe=[],P=-1;function ie(t){return{current:t}}function ue(t){0>P||(t.current=qe[P],qe[P]=null,P--)}function ae(t,i){P++,qe[P]=t.current,t.current=i}var ye=ie(null),xe=ie(null),we=ie(null),Nt=ie(null);function et(t,i){switch(ae(we,i),ae(xe,t),ae(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Xv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Xv(i),t=$v(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ye),ae(ye,t)}function Wn(){ue(ye),ue(xe),ue(we)}function cr(t){t.memoizedState!==null&&ae(Nt,t);var i=ye.current,a=$v(i,t.type);i!==a&&(ae(xe,t),ae(ye,a))}function Ai(t){xe.current===t&&(ue(ye),ue(xe)),Nt.current===t&&(ue(Nt),Nl._currentValue=pe)}var rs=Object.prototype.hasOwnProperty,ss=r.unstable_scheduleCallback,as=r.unstable_cancelCallback,Io=r.unstable_shouldYield,vu=r.unstable_requestPaint,Rn=r.unstable_now,nf=r.unstable_getCurrentPriorityLevel,xo=r.unstable_ImmediatePriority,sa=r.unstable_UserBlockingPriority,os=r.unstable_NormalPriority,rf=r.unstable_LowPriority,aa=r.unstable_IdlePriority,Co=r.log,_u=r.unstable_setDisableYieldValue,ut=null,Ge=null;function dn(t){if(typeof Co=="function"&&_u(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ut,t)}catch{}}var Kt=Math.clz32?Math.clz32:ls,Eu=Math.log,sf=Math.LN2;function ls(t){return t>>>=0,t===0?32:31-(Eu(t)/sf|0)|0}var us=256,cs=4194304;function zn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function oa(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=zn(l):(E&=b,E!==0?f=zn(E):a||(a=b&~t,a!==0&&(f=zn(a))))):(b=l&~d,b!==0?f=zn(b):E!==0?f=zn(E):a||(a=l&~t,a!==0&&(f=zn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function hs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function No(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Do(){var t=us;return us<<=1,(us&4194048)===0&&(us=256),t}function Oo(){var t=cs;return cs<<=1,(cs&62914560)===0&&(cs=4194304),t}function Ri(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ii(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mo(t,i,a,l,f,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=E&~a;0<a;){var W=31-Kt(a),ee=1<<W;b[W]=0,D[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&Zn(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~i))}function Zn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Kt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ko(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Kt(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function hr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function la(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fr(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:p_(t.type))}function Tu(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var it=Math.random().toString(36).slice(2),St="__reactFiber$"+it,yt="__reactProps$"+it,In="__reactContainer$"+it,Vo="__reactEvents$"+it,af="__reactListeners$"+it,dr="__reactHandles$"+it,wu="__reactResources$"+it,fs="__reactMarker$"+it;function mr(t){delete t[St],delete t[yt],delete t[Vo],delete t[af],delete t[dr]}function xi(t){var i=t[St];if(i)return i;for(var a=t.parentNode;a;){if(i=a[In]||a[St]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=e_(t);t!==null;){if(a=t[St])return a;t=e_(t)}return i}t=a,a=t.parentNode}return null}function Jn(t){if(t=t[St]||t[In]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ei(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function tn(t){var i=t[wu];return i||(i=t[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function dt(t){t[fs]=!0}var Po=new Set,ua={};function qn(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for(ua[t]=i,t=0;t<i.length;t++)Po.add(i[t])}var bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},ds={};function Au(t){return rs.call(ds,t)?!0:rs.call(Su,t)?!1:bu.test(t)?ds[t]=!0:(Su[t]=!0,!1)}function pr(t,i,a){if(Au(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ti(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Lt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var ms,Ru;function Ni(t){if(ms===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ms=i&&i[1]||"",Ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ms+t+Ru}var ca=!1;function ha(t,i){if(!t||ca)return"";ca=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){G=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],b=d[1];if(E&&b){var D=E.split(`
`),F=b.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===F.length)for(l=D.length-1,f=F.length-1;1<=l&&0<=f&&D[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==F[f]){var W=`
`+D[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=f);break}}}finally{ca=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ni(a):""}function Lo(t){switch(t.tag){case 26:case 27:case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ha(t.type,!1);case 11:return ha(t.type.render,!1);case 1:return ha(t.type,!0);case 31:return Ni("Activity");default:return""}}function fa(t){try{var i="";do i+=Lo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function of(t){var i=Uo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function da(t){t._valueTracker||(t._valueTracker=of(t))}function jo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ps(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lf=/[\n"\\]/g;function vt(t){return t.replace(lf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(t,i,a,l,f,d,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+nn(i)):t.value!==""+nn(i)&&(t.value=""+nn(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?gr(t,E,nn(i)):a!=null?gr(t,E,nn(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+nn(b):t.removeAttribute("name")}function gs(t,i,a,l,f,d,E,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function gr(t,i,a){i==="number"&&ps(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Di(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Xe(t,i,a){if(i!=null&&(i=""+nn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+nn(a):""}function ys(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(lt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=nn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function xn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||vs.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Bo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Iu(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Iu(t,d,i[d])}function zo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ma(t){return cf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Oi=null;function Cn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mi=null,ki=null;function qo(t){var i=Jn(t);if(i&&(t=i.stateNode)){var a=t[yt]||null;e:switch(t=i.stateNode,i.type){case"input":if(mn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[yt]||null;if(!f)throw Error(s(90));mn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&jo(l)}break e;case"textarea":Xe(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Di(t,!!a.multiple,i,!1)}}}var ni=!1;function xu(t,i,a){if(ni)return t(i,a);ni=!0;try{var l=t(i);return l}finally{if(ni=!1,(Mi!==null||ki!==null)&&(Tc(),Mi&&(i=Mi,t=ki,ki=Mi=null,qo(i),t)))for(i=0;i<t.length;i++)qo(t[i])}}function _s(t,i){var a=t.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(Hn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Nn=!1}var ii=null,yr=null,Vi=null;function Ho(){if(Vi)return Vi;var t,i=yr,a=i.length,l,f="value"in ii?ii.value:ii.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===f[d-l];l++);return Vi=f.slice(t,1<l?1-l:void 0)}function ri(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function si(){return!0}function Fo(){return!1}function Dt(t){function i(a,l,f,d,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?si:Fo,this.isPropagationStopped=Fo,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),i}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=Dt(Fe),Ts=_({},Fe,{view:0,detail:0}),Cu=Dt(Ts),ga,ya,ai,ws=_({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&t.type==="mousemove"?(ga=t.screenX-ai.screenX,ya=t.screenY-ai.screenY):ya=ga=0,ai=t),ga)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),Dn=Dt(ws),Nu=_({},ws,{dataTransfer:0}),hf=Dt(Nu),bs=_({},Ts,{relatedTarget:0}),va=Dt(bs),Go=_({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),_a=Dt(Go),Du=_({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ea=Dt(Du),ff=_({},Fe,{data:0}),Ko=Dt(ff),Ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Mu[t])?!!i[t]:!1}function As(){return Qo}var ku=_({},Ts,{key:function(t){if(t.key){var i=Ss[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ou[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(t){return t.type==="keypress"?ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ta=Dt(ku),Vu=_({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=Dt(Vu),Pi=_({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),Pu=Dt(Pi),Lu=_({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uu=Dt(Lu),ju=_({},ws,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wa=Dt(ju),rn=_({},Fe,{newState:0,oldState:0}),Bu=Dt(rn),zu=[9,13,27,32],oi=Hn&&"CompositionEvent"in window,c=null;Hn&&"documentMode"in document&&(c=document.documentMode);var y=Hn&&"TextEvent"in window&&!c,v=Hn&&(!oi||c&&8<c&&11>=c),S=" ",q=!1;function Q(t,i){switch(t){case"keyup":return zu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ke=!1;function At(t,i){switch(t){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(q=!0,S);case"textInput":return t=i.data,t===S&&q?null:t;default:return null}}function Ve(t,i){if(ke)return t==="compositionend"||!oi&&Q(t,i)?(t=Ho(),Vi=yr=ii=null,ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ot[t.type]:i==="textarea"}function Li(t,i,a,l){Mi?ki?ki.push(l):ki=[l]:Mi=l,i=Ic(i,"onChange"),0<i.length&&(a=new pa("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Ut=null,li=null;function Xo(t){Fv(t,0)}function qu(t){var i=ei(t);if(jo(i))return t}function hg(t,i){if(t==="change")return i}var fg=!1;if(Hn){var df;if(Hn){var mf="oninput"in document;if(!mf){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),mf=typeof dg.oninput=="function"}df=mf}else df=!1;fg=df&&(!document.documentMode||9<document.documentMode)}function mg(){Ut&&(Ut.detachEvent("onpropertychange",pg),li=Ut=null)}function pg(t){if(t.propertyName==="value"&&qu(li)){var i=[];Li(i,li,t,Cn(t)),xu(Xo,i)}}function tb(t,i,a){t==="focusin"?(mg(),Ut=i,li=a,Ut.attachEvent("onpropertychange",pg)):t==="focusout"&&mg()}function nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(li)}function ib(t,i){if(t==="click")return qu(i)}function rb(t,i){if(t==="input"||t==="change")return qu(i)}function sb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var pn=typeof Object.is=="function"?Object.is:sb;function $o(t,i){if(pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!rs.call(i,f)||!pn(t[f],i[f]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yg(t,i){var a=gg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gg(a)}}function vg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?vg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function _g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ps(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ps(t.document)}return i}function pf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var ab=Hn&&"documentMode"in document&&11>=document.documentMode,ba=null,gf=null,Wo=null,yf=!1;function Eg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yf||ba==null||ba!==ps(l)||(l=ba,"selectionStart"in l&&pf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wo&&$o(Wo,l)||(Wo=l,l=Ic(gf,"onSelect"),0<l.length&&(i=new pa("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ba)))}function Rs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Sa={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},vf={},Tg={};Hn&&(Tg=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Is(t){if(vf[t])return vf[t];if(!Sa[t])return t;var i=Sa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Tg)return vf[t]=i[a];return t}var wg=Is("animationend"),bg=Is("animationiteration"),Sg=Is("animationstart"),ob=Is("transitionrun"),lb=Is("transitionstart"),ub=Is("transitioncancel"),Ag=Is("transitionend"),Rg=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Fn(t,i){Rg.set(t,i),qn(i,[t])}var Ig=new WeakMap;function On(t,i){if(typeof t=="object"&&t!==null){var a=Ig.get(t);return a!==void 0?a:(i={value:t,source:i,stack:fa(i)},Ig.set(t,i),i)}return{value:t,source:i,stack:fa(i)}}var Mn=[],Aa=0,Ef=0;function Hu(){for(var t=Aa,i=Ef=Aa=0;i<t;){var a=Mn[i];Mn[i++]=null;var l=Mn[i];Mn[i++]=null;var f=Mn[i];Mn[i++]=null;var d=Mn[i];if(Mn[i++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&xg(a,f,d)}}function Fu(t,i,a,l){Mn[Aa++]=t,Mn[Aa++]=i,Mn[Aa++]=a,Mn[Aa++]=l,Ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Tf(t,i,a,l){return Fu(t,i,a,l),Gu(t)}function Ra(t,i){return Fu(t,null,null,i),Gu(t)}function xg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-Kt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Gu(t){if(50<wl)throw wl=0,Id=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ia={};function cb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,l){return new cb(t,i,a,l)}function wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ui(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Cg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ku(t,i,a,l,f,d){var E=0;if(l=t,typeof t=="function")wf(t)&&(E=1);else if(typeof t=="string")E=fS(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=gn(31,a,i,f),t.elementType=x,t.lanes=d,t;case V:return xs(a.children,f,d,i);case z:E=8,f|=24;break;case M:return t=gn(12,a,i,f|2),t.elementType=M,t.lanes=d,t;case se:return t=gn(13,a,i,f),t.elementType=se,t.lanes=d,t;case he:return t=gn(19,a,i,f),t.elementType=he,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case Z:E=10;break e;case X:E=9;break e;case ne:E=11;break e;case O:E=14;break e;case A:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=gn(E,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function xs(t,i,a,l){return t=gn(7,t,l,i),t.lanes=a,t}function bf(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function Sf(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var xa=[],Ca=0,Qu=null,Yu=0,kn=[],Vn=0,Cs=null,ji=1,Bi="";function Ns(t,i){xa[Ca++]=Yu,xa[Ca++]=Qu,Qu=t,Yu=i}function Ng(t,i,a){kn[Vn++]=ji,kn[Vn++]=Bi,kn[Vn++]=Cs,Cs=t;var l=ji;t=Bi;var f=32-Kt(l)-1;l&=~(1<<f),a+=1;var d=32-Kt(i)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,ji=1<<32-Kt(i)+f|a<<f|l,Bi=d+t}else ji=1<<d|a<<f|l,Bi=t}function Af(t){t.return!==null&&(Ns(t,1),Ng(t,1,0))}function Rf(t){for(;t===Qu;)Qu=xa[--Ca],xa[Ca]=null,Yu=xa[--Ca],xa[Ca]=null;for(;t===Cs;)Cs=kn[--Vn],kn[Vn]=null,Bi=kn[--Vn],kn[Vn]=null,ji=kn[--Vn],kn[Vn]=null}var sn=null,ct=null,He=!1,Ds=null,ui=!1,If=Error(s(519));function Os(t){var i=Error(s(418,""));throw el(On(i,t)),If}function Dg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[St]=t,i[yt]=l,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<Sl.length;a++)De(Sl[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),gs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),da(i);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),ys(i,l.value,l.defaultValue,l.children),da(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Yv(i.textContent,a)?(l.popover!=null&&(De("beforetoggle",i),De("toggle",i)),l.onScroll!=null&&De("scroll",i),l.onScrollEnd!=null&&De("scrollend",i),l.onClick!=null&&(i.onclick=xc),i=!0):i=!1,i||Os(t)}function Og(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:sn=sn.return}}function Zo(t){if(t!==sn)return!1;if(!He)return Og(t),He=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Hd(t.type,t.memoizedProps)),a=!a),a&&ct&&Os(t),Og(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ct=Kn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ct=null}}else i===27?(i=ct,Mr(t.type)?(t=Qd,Qd=null,ct=t):ct=i):ct=sn?Kn(t.stateNode.nextSibling):null;return!0}function Jo(){ct=sn=null,He=!1}function Mg(){var t=Ds;return t!==null&&(un===null?un=t:un.push.apply(un,t),Ds=null),t}function el(t){Ds===null?Ds=[t]:Ds.push(t)}var xf=ie(null),Ms=null,zi=null;function vr(t,i,a){ae(xf,i._currentValue),i._currentValue=a}function qi(t){t._currentValue=xf.current,ue(xf)}function Cf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Nf(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var D=0;D<i.length;D++)if(b.context===i[D]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Cf(d.return,a,t),l||(E=null);break e}d=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Cf(E,a,t),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===t){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function tl(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var b=f.type;pn(f.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(f===Nt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}f=f.return}t!==null&&Nf(i,t,a,l),i.flags|=262144}function Xu(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){Ms=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return kg(Ms,t)}function $u(t,i){return Ms===null&&ks(t),kg(t,i)}function kg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(s(308));zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else zi=zi.next=i;return a}var hb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},fb=r.unstable_scheduleCallback,db=r.unstable_NormalPriority,It={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new hb,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&fb(db,function(){t.controller.abort()})}var il=null,Of=0,Na=0,Da=null;function mb(t,i){if(il===null){var a=il=[];Of=0,Na=kd(),Da={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Of++,i.then(Vg,Vg),i}function Vg(){if(--Of===0&&il!==null){Da!==null&&(Da.status="fulfilled");var t=il;il=null,Na=0,Da=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function pb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Pg=$.S;$.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mb(t,i),Pg!==null&&Pg(t,i)};var Vs=ie(null);function Mf(){var t=Vs.current;return t!==null?t:tt.pooledCache}function Wu(t,i){i===null?ae(Vs,Vs.current):ae(Vs,i.pool)}function Lg(){var t=Mf();return t===null?null:{parent:It._currentValue,pool:t}}var rl=Error(s(460)),Ug=Error(s(474)),Zu=Error(s(542)),kf={then:function(){}};function jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ju(){}function Bg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ju,Ju),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,qg(t),t;default:if(typeof i.status=="string")i.then(Ju,Ju);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,qg(t),t}throw sl=i,rl}}var sl=null;function zg(){if(sl===null)throw Error(s(459));var t=sl;return sl=null,t}function qg(t){if(t===rl||t===Zu)throw Error(s(483))}var _r=!1;function Vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Er(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Tr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Gu(t),xg(t,null,a),i}return Fu(t,l,i,a),Gu(t)}function al(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ko(t,a)}}function Lf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Uf=!1;function ol(){if(Uf){var t=Da;if(t!==null)throw t}}function ll(t,i,a,l){Uf=!1;var f=t.updateQueue;_r=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,F=D.next;D.next=null,E===null?d=F:E.next=F,E=D;var W=t.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==E&&(b===null?W.firstBaseUpdate=F:b.next=F,W.lastBaseUpdate=D))}if(d!==null){var ee=f.baseState;E=0,W=F=D=null,b=d;do{var G=b.lane&-536870913,K=G!==b.lane;if(K?(Pe&G)===G:(l&G)===G){G!==0&&G===Na&&(Uf=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ee=t,ve=b;G=i;var Ze=a;switch(ve.tag){case 1:if(Ee=ve.payload,typeof Ee=="function"){ee=Ee.call(Ze,ee,G);break e}ee=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=ve.payload,G=typeof Ee=="function"?Ee.call(Ze,ee,G):Ee,G==null)break e;ee=_({},ee,G);break e;case 2:_r=!0}}G=b.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(F=W=K,D=ee):W=W.next=K,E|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);W===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),Cr|=E,t.lanes=E,t.memoizedState=ee}}function Hg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Fg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Hg(a[t],i)}var Oa=ie(null),ec=ie(0);function Gg(t,i){t=Xi,ae(ec,t),ae(Oa,i),Xi=t|i.baseLanes}function jf(){ae(ec,Xi),ae(Oa,Oa.current)}function Bf(){Xi=ec.current,ue(Oa),ue(ec)}var wr=0,Ie=null,$e=null,_t=null,tc=!1,Ma=!1,Ps=!1,nc=0,ul=0,ka=null,gb=0;function mt(){throw Error(s(321))}function zf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!pn(t[a],i[a]))return!1;return!0}function qf(t,i,a,l,f,d){return wr=d,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?xy:Cy,Ps=!1,d=a(l,f),Ps=!1,Ma&&(d=Qg(i,a,l,f)),Kg(t),d}function Kg(t){$.H=lc;var i=$e!==null&&$e.next!==null;if(wr=0,_t=$e=Ie=null,tc=!1,ul=0,ka=null,i)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&Xu(t)&&(Mt=!0))}function Qg(t,i,a,l){Ie=t;var f=0;do{if(Ma&&(ka=null),ul=0,Ma=!1,25<=f)throw Error(s(301));if(f+=1,_t=$e=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}$.H=bb,d=i(a,l)}while(Ma);return d}function yb(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?cl(i):i,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ie.flags|=1024),i}function Hf(){var t=nc!==0;return nc=0,t}function Ff(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Gf(t){if(tc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}tc=!1}wr=0,_t=$e=Ie=null,Ma=!1,ul=nc=0,ka=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ie.memoizedState=_t=t:_t=_t.next=t,_t}function Et(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var i=_t===null?Ie.memoizedState:_t.next;if(i!==null)_t=i,$e=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},_t===null?Ie.memoizedState=_t=t:_t=_t.next=t}return _t}function Kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(t){var i=ul;return ul+=1,ka===null&&(ka=[]),t=Bg(ka,t,i),i=Ie,(_t===null?i.memoizedState:_t.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?xy:Cy),t}function ic(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cl(t);if(t.$$typeof===Z)return Qt(t)}throw Error(s(438,String(t)))}function Qf(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Kf(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=I;return i.index++,a}function Hi(t,i){return typeof i=="function"?i(t):i}function rc(t){var i=Et();return Yf(i,$e,t)}function Yf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var b=E=null,D=null,F=i,W=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Pe&ee)===ee:(wr&ee)===ee){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Na&&(W=!0);else if((wr&G)===G){F=F.next,G===Na&&(W=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=ee,E=d):D=D.next=ee,Ie.lanes|=G,Cr|=G;ee=F.action,Ps&&a(d,ee),d=F.hasEagerState?F.eagerState:a(d,ee)}else G={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=G,E=d):D=D.next=G,Ie.lanes|=ee,Cr|=ee;F=F.next}while(F!==null&&F!==i);if(D===null?E=d:D.next=b,!pn(d,t.memoizedState)&&(Mt=!0,W&&(a=Da,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xf(t){var i=Et(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do d=t(d,E.action),E=E.next;while(E!==f);pn(d,i.memoizedState)||(Mt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Yg(t,i,a){var l=Ie,f=Et(),d=He;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!pn(($e||f).memoizedState,a);E&&(f.memoizedState=a,Mt=!0),f=f.queue;var b=Wg.bind(null,l,f,t);if(hl(2048,8,b,[t]),f.getSnapshot!==i||E||_t!==null&&_t.memoizedState.tag&1){if(l.flags|=2048,Va(9,sc(),$g.bind(null,l,f,a,i),null),tt===null)throw Error(s(349));d||(wr&124)!==0||Xg(l,i,a)}return a}function Xg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Kf(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function $g(t,i,a,l){i.value=a,i.getSnapshot=l,Zg(i)&&Jg(t)}function Wg(t,i,a){return a(function(){Zg(i)&&Jg(t)})}function Zg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!pn(t,a)}catch{return!0}}function Jg(t){var i=Ra(t,2);i!==null&&Tn(i,t,2)}function $f(t){var i=on();if(typeof t=="function"){var a=t;if(t=a(),Ps){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},i}function ey(t,i,a,l){return t.baseState=a,Yf(t,$e,typeof l=="function"?l:Hi)}function vb(t,i,a,l,f){if(oc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};$.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ty(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ty(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=$.T,E={};$.T=E;try{var b=a(f,l),D=$.S;D!==null&&D(E,b),ny(t,i,b)}catch(F){Wf(t,i,F)}finally{$.T=d}}else try{d=a(f,l),ny(t,i,d)}catch(F){Wf(t,i,F)}}function ny(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){iy(t,i,l)},function(l){return Wf(t,i,l)}):iy(t,i,a)}function iy(t,i,a){i.status="fulfilled",i.value=a,ry(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ty(t,a)))}function Wf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ry(i),i=i.next;while(i!==l)}t.action=null}function ry(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function sy(t,i){return i}function ay(t,i){if(He){var a=tt.formState;if(a!==null){e:{var l=Ie;if(He){if(ct){t:{for(var f=ct,d=ui;f.nodeType!==8;){if(!d){f=null;break t}if(f=Kn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ct=Kn(f.nextSibling),l=f.data==="F!";break e}}Os(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:i},a.queue=l,a=Ay.bind(null,Ie,l),l.dispatch=a,l=$f(!1),d=nd.bind(null,Ie,!1,l.queue),l=on(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=vb.bind(null,Ie,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function oy(t){var i=Et();return ly(i,$e,t)}function ly(t,i,a){if(i=Yf(t,i,sy)[0],t=rc(Hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=cl(i)}catch(E){throw E===rl?Zu:E}else l=i;i=Et();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Va(9,sc(),_b.bind(null,f,a),null)),[l,d,t]}function _b(t,i){t.action=i}function uy(t){var i=Et(),a=$e;if(a!==null)return ly(i,a,t);Et(),i=i.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Va(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Kf(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function sc(){return{destroy:void 0,resource:void 0}}function cy(){return Et().memoizedState}function ac(t,i,a,l){var f=on();l=l===void 0?null:l,Ie.flags|=t,f.memoizedState=Va(1|i,sc(),a,l)}function hl(t,i,a,l){var f=Et();l=l===void 0?null:l;var d=f.memoizedState.inst;$e!==null&&l!==null&&zf(l,$e.memoizedState.deps)?f.memoizedState=Va(i,d,a,l):(Ie.flags|=t,f.memoizedState=Va(1|i,d,a,l))}function hy(t,i){ac(8390656,8,t,i)}function fy(t,i){hl(2048,8,t,i)}function dy(t,i){return hl(4,2,t,i)}function my(t,i){return hl(4,4,t,i)}function py(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function gy(t,i,a){a=a!=null?a.concat([t]):null,hl(4,4,py.bind(null,i,t),a)}function Zf(){}function yy(t,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&zf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function vy(t,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&zf(i,l[1]))return l[0];if(l=t(),Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,i],l}function Jf(t,i,a){return a===void 0||(wr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Tv(),Ie.lanes|=t,Cr|=t,a)}function _y(t,i,a,l){return pn(a,i)?a:Oa.current!==null?(t=Jf(t,a,l),pn(t,i)||(Mt=!0),t):(wr&42)===0?(Mt=!0,t.memoizedState=a):(t=Tv(),Ie.lanes|=t,Cr|=t,i)}function Ey(t,i,a,l,f){var d=le.p;le.p=d!==0&&8>d?d:8;var E=$.T,b={};$.T=b,nd(t,!1,i,a);try{var D=f(),F=$.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=pb(D,l);fl(t,i,W,En(t))}else fl(t,i,l,En(t))}catch(ee){fl(t,i,{then:function(){},status:"rejected",reason:ee},En())}finally{le.p=d,$.T=E}}function Eb(){}function ed(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=Ty(t).queue;Ey(t,f,i,pe,a===null?Eb:function(){return wy(t),a(l)})}function Ty(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function wy(t){var i=Ty(t).next.queue;fl(t,i,{},En())}function td(){return Qt(Nl)}function by(){return Et().memoizedState}function Sy(){return Et().memoizedState}function Tb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();t=Er(a);var l=Tr(i,t,a);l!==null&&(Tn(l,i,a),al(l,i,a)),i={cache:Df()},t.payload=i;return}i=i.return}}function wb(t,i,a){var l=En();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?Ry(i,a):(a=Tf(t,i,a,l),a!==null&&(Tn(a,t,l),Iy(a,i,l)))}function Ay(t,i,a){var l=En();fl(t,i,a,l)}function fl(t,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))Ry(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var E=i.lastRenderedState,b=d(E,a);if(f.hasEagerState=!0,f.eagerState=b,pn(b,E))return Fu(t,i,f,0),tt===null&&Hu(),!1}catch{}finally{}if(a=Tf(t,i,f,l),a!==null)return Tn(a,t,l),Iy(a,i,l),!0}return!1}function nd(t,i,a,l){if(l={lane:2,revertLane:kd(),action:l,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(s(479))}else i=Tf(t,a,l,2),i!==null&&Tn(i,t,2)}function oc(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function Ry(t,i){Ma=tc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Iy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ko(t,a)}}var lc={readContext:Qt,use:ic,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},xy={readContext:Qt,use:ic,useCallback:function(t,i){return on().memoizedState=[t,i===void 0?null:i],t},useContext:Qt,useEffect:hy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ac(4194308,4,py.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ac(4194308,4,t,i)},useInsertionEffect:function(t,i){ac(4,2,t,i)},useMemo:function(t,i){var a=on();i=i===void 0?null:i;var l=t();if(Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=on();if(a!==void 0){var f=a(i);if(Ps){dn(!0);try{a(i)}finally{dn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=wb.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=on();return t={current:t},i.memoizedState=t},useState:function(t){t=$f(t);var i=t.queue,a=Ay.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Zf,useDeferredValue:function(t,i){var a=on();return Jf(a,t,i)},useTransition:function(){var t=$f(!1);return t=Ey.bind(null,Ie,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,f=on();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),tt===null)throw Error(s(349));(Pe&124)!==0||Xg(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,hy(Wg.bind(null,l,d,t),[t]),l.flags|=2048,Va(9,sc(),$g.bind(null,l,d,a,i),null),a},useId:function(){var t=on(),i=tt.identifierPrefix;if(He){var a=Bi,l=ji;a=(l&~(1<<32-Kt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=nc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=gb++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:td,useFormState:ay,useActionState:ay,useOptimistic:function(t){var i=on();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=nd.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:Qf,useCacheRefresh:function(){return on().memoizedState=Tb.bind(null,Ie)}},Cy={readContext:Qt,use:ic,useCallback:yy,useContext:Qt,useEffect:fy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:my,useMemo:vy,useReducer:rc,useRef:cy,useState:function(){return rc(Hi)},useDebugValue:Zf,useDeferredValue:function(t,i){var a=Et();return _y(a,$e.memoizedState,t,i)},useTransition:function(){var t=rc(Hi)[0],i=Et().memoizedState;return[typeof t=="boolean"?t:cl(t),i]},useSyncExternalStore:Yg,useId:by,useHostTransitionStatus:td,useFormState:oy,useActionState:oy,useOptimistic:function(t,i){var a=Et();return ey(a,$e,t,i)},useMemoCache:Qf,useCacheRefresh:Sy},bb={readContext:Qt,use:ic,useCallback:yy,useContext:Qt,useEffect:fy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:my,useMemo:vy,useReducer:Xf,useRef:cy,useState:function(){return Xf(Hi)},useDebugValue:Zf,useDeferredValue:function(t,i){var a=Et();return $e===null?Jf(a,t,i):_y(a,$e.memoizedState,t,i)},useTransition:function(){var t=Xf(Hi)[0],i=Et().memoizedState;return[typeof t=="boolean"?t:cl(t),i]},useSyncExternalStore:Yg,useId:by,useHostTransitionStatus:td,useFormState:uy,useActionState:uy,useOptimistic:function(t,i){var a=Et();return $e!==null?ey(a,$e,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:Sy},Pa=null,dl=0;function uc(t){var i=dl;return dl+=1,Pa===null&&(Pa=[]),Bg(Pa,t,i)}function ml(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function cc(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ny(t){var i=t._init;return i(t._payload)}function Dy(t){function i(B,L){if(t){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!t)return null;for(;L!==null;)i(B,L),L=L.sibling;return null}function l(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function f(B,L){return B=Ui(B,L),B.index=0,B.sibling=null,B}function d(B,L,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function E(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function b(B,L,H,J){return L===null||L.tag!==6?(L=bf(H,B.mode,J),L.return=B,L):(L=f(L,H),L.return=B,L)}function D(B,L,H,J){var fe=H.type;return fe===V?W(B,L,H.props.children,J,H.key):L!==null&&(L.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===A&&Ny(fe)===L.type)?(L=f(L,H.props),ml(L,H),L.return=B,L):(L=Ku(H.type,H.key,H.props,null,B.mode,J),ml(L,H),L.return=B,L)}function F(B,L,H,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Sf(H,B.mode,J),L.return=B,L):(L=f(L,H.children||[]),L.return=B,L)}function W(B,L,H,J,fe){return L===null||L.tag!==7?(L=xs(H,B.mode,J,fe),L.return=B,L):(L=f(L,H),L.return=B,L)}function ee(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=bf(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return H=Ku(L.type,L.key,L.props,null,B.mode,H),ml(H,L),H.return=B,H;case C:return L=Sf(L,B.mode,H),L.return=B,L;case A:var J=L._init;return L=J(L._payload),ee(B,L,H)}if(lt(L)||j(L))return L=xs(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ee(B,uc(L),H);if(L.$$typeof===Z)return ee(B,$u(B,L),H);cc(B,L)}return null}function G(B,L,H,J){var fe=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return fe!==null?null:b(B,L,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===fe?D(B,L,H,J):null;case C:return H.key===fe?F(B,L,H,J):null;case A:return fe=H._init,H=fe(H._payload),G(B,L,H,J)}if(lt(H)||j(H))return fe!==null?null:W(B,L,H,J,null);if(typeof H.then=="function")return G(B,L,uc(H),J);if(H.$$typeof===Z)return G(B,L,$u(B,H),J);cc(B,H)}return null}function K(B,L,H,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return B=B.get(H)||null,b(L,B,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return B=B.get(J.key===null?H:J.key)||null,D(L,B,J,fe);case C:return B=B.get(J.key===null?H:J.key)||null,F(L,B,J,fe);case A:var Ce=J._init;return J=Ce(J._payload),K(B,L,H,J,fe)}if(lt(J)||j(J))return B=B.get(H)||null,W(L,B,J,fe,null);if(typeof J.then=="function")return K(B,L,H,uc(J),fe);if(J.$$typeof===Z)return K(B,L,H,$u(L,J),fe);cc(L,J)}return null}function Ee(B,L,H,J){for(var fe=null,Ce=null,me=L,_e=L=0,Vt=null;me!==null&&_e<H.length;_e++){me.index>_e?(Vt=me,me=null):Vt=me.sibling;var je=G(B,me,H[_e],J);if(je===null){me===null&&(me=Vt);break}t&&me&&je.alternate===null&&i(B,me),L=d(je,L,_e),Ce===null?fe=je:Ce.sibling=je,Ce=je,me=Vt}if(_e===H.length)return a(B,me),He&&Ns(B,_e),fe;if(me===null){for(;_e<H.length;_e++)me=ee(B,H[_e],J),me!==null&&(L=d(me,L,_e),Ce===null?fe=me:Ce.sibling=me,Ce=me);return He&&Ns(B,_e),fe}for(me=l(me);_e<H.length;_e++)Vt=K(me,B,_e,H[_e],J),Vt!==null&&(t&&Vt.alternate!==null&&me.delete(Vt.key===null?_e:Vt.key),L=d(Vt,L,_e),Ce===null?fe=Vt:Ce.sibling=Vt,Ce=Vt);return t&&me.forEach(function(Ur){return i(B,Ur)}),He&&Ns(B,_e),fe}function ve(B,L,H,J){if(H==null)throw Error(s(151));for(var fe=null,Ce=null,me=L,_e=L=0,Vt=null,je=H.next();me!==null&&!je.done;_e++,je=H.next()){me.index>_e?(Vt=me,me=null):Vt=me.sibling;var Ur=G(B,me,je.value,J);if(Ur===null){me===null&&(me=Vt);break}t&&me&&Ur.alternate===null&&i(B,me),L=d(Ur,L,_e),Ce===null?fe=Ur:Ce.sibling=Ur,Ce=Ur,me=Vt}if(je.done)return a(B,me),He&&Ns(B,_e),fe;if(me===null){for(;!je.done;_e++,je=H.next())je=ee(B,je.value,J),je!==null&&(L=d(je,L,_e),Ce===null?fe=je:Ce.sibling=je,Ce=je);return He&&Ns(B,_e),fe}for(me=l(me);!je.done;_e++,je=H.next())je=K(me,B,_e,je.value,J),je!==null&&(t&&je.alternate!==null&&me.delete(je.key===null?_e:je.key),L=d(je,L,_e),Ce===null?fe=je:Ce.sibling=je,Ce=je);return t&&me.forEach(function(SS){return i(B,SS)}),He&&Ns(B,_e),fe}function Ze(B,L,H,J){if(typeof H=="object"&&H!==null&&H.type===V&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var fe=H.key;L!==null;){if(L.key===fe){if(fe=H.type,fe===V){if(L.tag===7){a(B,L.sibling),J=f(L,H.props.children),J.return=B,B=J;break e}}else if(L.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===A&&Ny(fe)===L.type){a(B,L.sibling),J=f(L,H.props),ml(J,H),J.return=B,B=J;break e}a(B,L);break}else i(B,L);L=L.sibling}H.type===V?(J=xs(H.props.children,B.mode,J,H.key),J.return=B,B=J):(J=Ku(H.type,H.key,H.props,null,B.mode,J),ml(J,H),J.return=B,B=J)}return E(B);case C:e:{for(fe=H.key;L!==null;){if(L.key===fe)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),J=f(L,H.children||[]),J.return=B,B=J;break e}else{a(B,L);break}else i(B,L);L=L.sibling}J=Sf(H,B.mode,J),J.return=B,B=J}return E(B);case A:return fe=H._init,H=fe(H._payload),Ze(B,L,H,J)}if(lt(H))return Ee(B,L,H,J);if(j(H)){if(fe=j(H),typeof fe!="function")throw Error(s(150));return H=fe.call(H),ve(B,L,H,J)}if(typeof H.then=="function")return Ze(B,L,uc(H),J);if(H.$$typeof===Z)return Ze(B,L,$u(B,H),J);cc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),J=f(L,H),J.return=B,B=J):(a(B,L),J=bf(H,B.mode,J),J.return=B,B=J),E(B)):a(B,L)}return function(B,L,H,J){try{dl=0;var fe=Ze(B,L,H,J);return Pa=null,fe}catch(me){if(me===rl||me===Zu)throw me;var Ce=gn(29,me,null,B.mode);return Ce.lanes=J,Ce.return=B,Ce}finally{}}}var La=Dy(!0),Oy=Dy(!1),Pn=ie(null),ci=null;function br(t){var i=t.alternate;ae(xt,xt.current&1),ae(Pn,t),ci===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(ci=t)}function My(t){if(t.tag===22){if(ae(xt,xt.current),ae(Pn,t),ci===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ci=t)}}else Sr()}function Sr(){ae(xt,xt.current),ae(Pn,Pn.current)}function Fi(t){ue(Pn),ci===t&&(ci=null),ue(xt)}var xt=ie(0);function hc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Kd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function id(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:_({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var rd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=En(),f=Er(l);f.payload=i,a!=null&&(f.callback=a),i=Tr(t,f,l),i!==null&&(Tn(i,t,l),al(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=En(),f=Er(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Tr(t,f,l),i!==null&&(Tn(i,t,l),al(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=En(),l=Er(a);l.tag=2,i!=null&&(l.callback=i),i=Tr(t,l,a),i!==null&&(Tn(i,t,a),al(i,t,a))}};function ky(t,i,a,l,f,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):i.prototype&&i.prototype.isPureReactComponent?!$o(a,l)||!$o(f,d):!0}function Vy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&rd.enqueueReplaceState(i,i.state,null)}function Ls(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=_({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var fc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Py(t){fc(t)}function Ly(t){console.error(t)}function Uy(t){fc(t)}function dc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function jy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function sd(t,i,a){return a=Er(a),a.tag=3,a.payload={element:null},a.callback=function(){dc(t,i)},a}function By(t){return t=Er(t),t.tag=3,t}function zy(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){jy(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){jy(i,a,l),typeof f!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Sb(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&tl(i,a,f,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return ci===null?Cd():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===kf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Dd(t,l,f)),!1;case 22:return a.flags|=65536,l===kf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Dd(t,l,f)),!1}throw Error(s(435,a.tag))}return Dd(t,l,f),Cd(),!1}if(He)return i=Pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==If&&(t=Error(s(422),{cause:l}),el(On(t,a)))):(l!==If&&(i=Error(s(423),{cause:l}),el(On(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=On(l,a),f=sd(t.stateNode,l,f),Lf(t,f),ht!==4&&(ht=2)),!1;var d=Error(s(520),{cause:l});if(d=On(d,a),Tl===null?Tl=[d]:Tl.push(d),ht!==4&&(ht=2),i===null)return!0;l=On(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=sd(a.stateNode,l,t),Lf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Nr===null||!Nr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=By(f),zy(f,t,a,l),Lf(a,f),!1}a=a.return}while(a!==null);return!1}var qy=Error(s(461)),Mt=!1;function jt(t,i,a,l){i.child=t===null?Oy(i,null,a,l):La(i,t.child,a,l)}function Hy(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return ks(i),l=qf(t,i,a,E,d,f),b=Hf(),t!==null&&!Mt?(Ff(t,i,f),Gi(t,i,f)):(He&&b&&Af(i),i.flags|=1,jt(t,i,l,f),i.child)}function Fy(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!wf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Gy(t,i,d,l,f)):(t=Ku(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!dd(t,f)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:$o,a(E,l)&&t.ref===i.ref)return Gi(t,i,f)}return i.flags|=1,t=Ui(d,l),t.ref=i.ref,t.return=i,i.child=t}function Gy(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if($o(d,l)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=l=d,dd(t,f))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,Gi(t,i,f)}return ad(t,i,a,l,f)}function Ky(t,i,a){var l=i.pendingProps,f=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(f=i.child=t.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Qy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wu(i,d!==null?d.cachePool:null),d!==null?Gg(i,d):jf(),My(i);else return i.lanes=i.childLanes=536870912,Qy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Wu(i,d.cachePool),Gg(i,d),Sr(),i.memoizedState=null):(t!==null&&Wu(i,null),jf(),Sr());return jt(t,i,f,a),i.child}function Qy(t,i,a,l){var f=Mf();return f=f===null?null:{parent:It._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Wu(i,null),jf(),My(i),t!==null&&tl(t,i,l,!0),null}function mc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function ad(t,i,a,l,f){return ks(i),a=qf(t,i,a,l,void 0,f),l=Hf(),t!==null&&!Mt?(Ff(t,i,f),Gi(t,i,f)):(He&&l&&Af(i),i.flags|=1,jt(t,i,a,f),i.child)}function Yy(t,i,a,l,f,d){return ks(i),i.updateQueue=null,a=Qg(i,l,a,f),Kg(t),l=Hf(),t!==null&&!Mt?(Ff(t,i,d),Gi(t,i,d)):(He&&l&&Af(i),i.flags|=1,jt(t,i,a,d),i.child)}function Xy(t,i,a,l,f){if(ks(i),i.stateNode===null){var d=Ia,E=a.contextType;typeof E=="object"&&E!==null&&(d=Qt(E)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=rd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Vf(i),E=a.contextType,d.context=typeof E=="object"&&E!==null?Qt(E):Ia,d.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(id(i,a,E,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&rd.enqueueReplaceState(d,d.state,null),ll(i,l,d,f),ol(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,D=Ls(a,b);d.props=D;var F=d.context,W=a.contextType;E=Ia,typeof W=="object"&&W!==null&&(E=Qt(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||F!==E)&&Vy(i,d,l,E),_r=!1;var G=i.memoizedState;d.state=G,ll(i,l,d,f),ol(),F=i.memoizedState,b||G!==F||_r?(typeof ee=="function"&&(id(i,a,ee,l),F=i.memoizedState),(D=_r||ky(i,a,D,l,G,F,E))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=E,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Pf(t,i),E=i.memoizedProps,W=Ls(a,E),d.props=W,ee=i.pendingProps,G=d.context,F=a.contextType,D=Ia,typeof F=="object"&&F!==null&&(D=Qt(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ee||G!==D)&&Vy(i,d,l,D),_r=!1,G=i.memoizedState,d.state=G,ll(i,l,d,f),ol();var K=i.memoizedState;E!==ee||G!==K||_r||t!==null&&t.dependencies!==null&&Xu(t.dependencies)?(typeof b=="function"&&(id(i,a,b,l),K=i.memoizedState),(W=_r||ky(i,a,W,l,G,K,D)||t!==null&&t.dependencies!==null&&Xu(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=D,l=W):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,mc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=La(i,t.child,null,f),i.child=La(i,null,a,f)):jt(t,i,a,f),i.memoizedState=d.state,t=i.child):t=Gi(t,i,f),t}function $y(t,i,a,l){return Jo(),i.flags|=256,jt(t,i,a,l),i.child}var od={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(t){return{baseLanes:t,cachePool:Lg()}}function ud(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Ln),t}function Wy(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(He){if(f?br(i):Sr(),He){var b=ct,D;if(D=b){e:{for(D=b,b=ui;D.nodeType!==8;){if(!b){b=null;break e}if(D=Kn(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(i.memoizedState={dehydrated:b,treeContext:Cs!==null?{id:ji,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},D=gn(18,null,null,0),D.stateNode=b,D.return=i,i.child=D,sn=i,ct=null,D=!0):D=!1}D||Os(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Kd(b)?i.lanes=32:i.lanes=536870912,null;Fi(i)}return b=l.children,l=l.fallback,f?(Sr(),f=i.mode,b=pc({mode:"hidden",children:b},f),l=xs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,f=i.child,f.memoizedState=ld(a),f.childLanes=ud(t,E,a),i.memoizedState=od,l):(br(i),cd(i,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(d)i.flags&256?(br(i),i.flags&=-257,i=hd(t,i,a)):i.memoizedState!==null?(Sr(),i.child=t.child,i.flags|=128,i=null):(Sr(),f=l.fallback,b=i.mode,l=pc({mode:"visible",children:l.children},b),f=xs(f,b,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,La(i,t.child,null,a),l=i.child,l.memoizedState=ld(a),l.childLanes=ud(t,E,a),i.memoizedState=od,i=f);else if(br(i),Kd(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(s(419)),l.stack="",l.digest=E,el({value:l,source:null,stack:null}),i=hd(t,i,a)}else if(Mt||tl(t,i,a,!1),E=(a&t.childLanes)!==0,Mt||E){if(E=tt,E!==null&&(l=a&-a,l=(l&42)!==0?1:hr(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,Ra(t,l),Tn(E,t,l),qy;b.data==="$?"||Cd(),i=hd(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,ct=Kn(b.nextSibling),sn=i,He=!0,Ds=null,ui=!1,t!==null&&(kn[Vn++]=ji,kn[Vn++]=Bi,kn[Vn++]=Cs,ji=t.id,Bi=t.overflow,Cs=i),i=cd(i,l.children),i.flags|=4096);return i}return f?(Sr(),f=l.fallback,b=i.mode,D=t.child,F=D.sibling,l=Ui(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?f=Ui(F,f):(f=xs(f,b,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,b=t.child.memoizedState,b===null?b=ld(a):(D=b.cachePool,D!==null?(F=It._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=Lg(),b={baseLanes:b.baseLanes|a,cachePool:D}),f.memoizedState=b,f.childLanes=ud(t,E,a),i.memoizedState=od,l):(br(i),a=t.child,t=a.sibling,a=Ui(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function cd(t,i){return i=pc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function pc(t,i){return t=gn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function hd(t,i,a){return La(i,t.child,null,a),t=cd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Zy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Cf(t.return,i,a)}function fd(t,i,a,l,f){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function Jy(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(jt(t,i,l.children,a),l=xt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,a,i);else if(t.tag===19)Zy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ae(xt,l),f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&hc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),fd(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&hc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}fd(i,!0,a,null,d);break;case"together":fd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Gi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Cr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(tl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ui(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ui(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function dd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Xu(t)))}function Ab(t,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),vr(i,It,t.memoizedState.cache),Jo();break;case 27:case 5:cr(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:vr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(br(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Wy(t,i,a):(br(i),t=Gi(t,i,a),t!==null?t.sibling:null);br(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(tl(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Jy(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(xt,xt.current),l)break;return null;case 22:case 23:return i.lanes=0,Ky(t,i,a);case 24:vr(i,It,t.memoizedState.cache)}return Gi(t,i,a)}function ev(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!dd(t,a)&&(i.flags&128)===0)return Mt=!1,Ab(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,He&&(i.flags&1048576)!==0&&Ng(i,Yu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")wf(l)?(t=Ls(l,t),i.tag=1,i=Xy(null,i,l,t,a)):(i.tag=0,i=ad(null,i,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===ne){i.tag=11,i=Hy(null,i,l,t,a);break e}else if(f===O){i.tag=14,i=Fy(null,i,l,t,a);break e}}throw i=ze(l)||l,Error(s(306,i,""))}}return i;case 0:return ad(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ls(l,i.pendingProps),Xy(t,i,l,f,a);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Pf(t,i),ll(i,l,null,a);var E=i.memoizedState;if(l=E.cache,vr(i,It,l),l!==d.cache&&Nf(i,[It],a,!0),ol(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=$y(t,i,l,a);break e}else if(l!==f){f=On(Error(s(424)),i),el(f),i=$y(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ct=Kn(t.firstChild),sn=i,He=!0,Ds=null,ui=!0,a=Oy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Jo(),l===f){i=Gi(t,i,a);break e}jt(t,i,l,a)}i=i.child}return i;case 26:return mc(t,i),t===null?(a=r_(i.type,null,i.pendingProps,null))?i.memoizedState=a:He||(a=i.type,t=i.pendingProps,l=Cc(we.current).createElement(a),l[St]=i,l[yt]=t,zt(l,a,t),dt(l),i.stateNode=l):i.memoizedState=r_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return cr(i),t===null&&He&&(l=i.stateNode=t_(i.type,i.pendingProps,we.current),sn=i,ui=!0,f=ct,Mr(i.type)?(Qd=f,ct=Kn(l.firstChild)):ct=f),jt(t,i,i.pendingProps.children,a),mc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&He&&((f=l=ct)&&(l=Jb(l,i.type,i.pendingProps,ui),l!==null?(i.stateNode=l,sn=i,ct=Kn(l.firstChild),ui=!1,f=!0):f=!1),f||Os(i)),cr(i),f=i.type,d=i.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,Hd(f,d)?l=null:E!==null&&Hd(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=qf(t,i,yb,null,null,a),Nl._currentValue=f),mc(t,i),jt(t,i,l,a),i.child;case 6:return t===null&&He&&((t=a=ct)&&(a=eS(a,i.pendingProps,ui),a!==null?(i.stateNode=a,sn=i,ct=null,t=!0):t=!1),t||Os(i)),null;case 13:return Wy(t,i,a);case 4:return et(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=La(i,null,l,a):jt(t,i,l,a),i.child;case 11:return Hy(t,i,i.type,i.pendingProps,a);case 7:return jt(t,i,i.pendingProps,a),i.child;case 8:return jt(t,i,i.pendingProps.children,a),i.child;case 12:return jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,vr(i,i.type,l.value),jt(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,ks(i),f=Qt(f),l=l(f),i.flags|=1,jt(t,i,l,a),i.child;case 14:return Fy(t,i,i.type,i.pendingProps,a);case 15:return Gy(t,i,i.type,i.pendingProps,a);case 19:return Jy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=pc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ui(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ky(t,i,a);case 24:return ks(i),l=Qt(It),t===null?(f=Mf(),f===null&&(f=tt,d=Df(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Vf(i),vr(i,It,f)):((t.lanes&a)!==0&&(Pf(t,i),ll(i,null,null,a),ol()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),vr(i,It,l)):(l=d.cache,vr(i,It,l),l!==f.cache&&Nf(i,[It],a,!0))),jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ki(t){t.flags|=4}function tv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!u_(i)){if(i=Pn.current,i!==null&&((Pe&4194048)===Pe?ci!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||i!==ci))throw sl=kf,Ug;t.flags|=8192}}function gc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Oo():536870912,t.lanes|=i,za|=i)}function pl(t,i){if(!He)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function st(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function Rb(t,i,a){var l=i.pendingProps;switch(Rf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qi(It),Wn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Zo(i)?Ki(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mg())),st(i),null;case 26:return a=i.memoizedState,t===null?(Ki(i),a!==null?(st(i),tv(i,a)):(st(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Ki(i),st(i),tv(i,a)):(st(i),i.flags&=-16777217):(t.memoizedProps!==l&&Ki(i),st(i),i.flags&=-16777217),null;case 27:Ai(i),a=we.current;var f=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return st(i),null}t=ye.current,Zo(i)?Dg(i):(t=t_(f,l,a),i.stateNode=t,Ki(i))}return st(i),null;case 5:if(Ai(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return st(i),null}if(t=ye.current,Zo(i))Dg(i);else{switch(f=Cc(we.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[St]=i,t[yt]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=t;e:switch(zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ki(i)}}return st(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=we.current,Zo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=sn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[St]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yv(t.nodeValue,a)),t||Os(i)}else t=Cc(t).createTextNode(l),t[St]=i,i.stateNode=t}return st(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Zo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[St]=i}else Jo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),f=!1}else f=Mg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Fi(i),i):(Fi(i),null)}if(Fi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),gc(i,i.updateQueue),st(i),null;case 4:return Wn(),t===null&&Ud(i.stateNode.containerInfo),st(i),null;case 10:return qi(i.type),st(i),null;case 19:if(ue(xt),f=i.memoizedState,f===null)return st(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)pl(f,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=hc(t),d!==null){for(i.flags|=128,pl(f,!1),t=d.updateQueue,i.updateQueue=t,gc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Cg(a,t),a=a.sibling;return ae(xt,xt.current&1|2),i.child}t=t.sibling}f.tail!==null&&Rn()>_c&&(i.flags|=128,l=!0,pl(f,!1),i.lanes=4194304)}else{if(!l)if(t=hc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,gc(i,t),pl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!He)return st(i),null}else 2*Rn()-f.renderingStartTime>_c&&a!==536870912&&(i.flags|=128,l=!0,pl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(t=f.last,t!==null?t.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Rn(),i.sibling=null,t=xt.current,ae(xt,l?t&1|2:t&1),i):(st(i),null);case 22:case 23:return Fi(i),Bf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&gc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ue(Vs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),qi(It),st(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Ib(t,i){switch(Rf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return qi(It),Wn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 13:if(Fi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Jo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(xt),null;case 4:return Wn(),null;case 10:return qi(i.type),null;case 22:case 23:return Fi(i),Bf(),t!==null&&ue(Vs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return qi(It),null;case 25:return null;default:return null}}function nv(t,i){switch(Rf(i),i.tag){case 3:qi(It),Wn();break;case 26:case 27:case 5:Ai(i);break;case 4:Wn();break;case 13:Fi(i);break;case 19:ue(xt);break;case 10:qi(i.type);break;case 22:case 23:Fi(i),Bf(),t!==null&&ue(Vs);break;case 24:qi(It)}}function gl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==f)}}catch(b){Je(i,i.return,b)}}function Ar(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=i;var D=a,F=b;try{F()}catch(W){Je(f,D,W)}}}l=l.next}while(l!==d)}}catch(W){Je(i,i.return,W)}}function iv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Fg(i,a)}catch(l){Je(t,t.return,l)}}}function rv(t,i,a){a.props=Ls(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Je(t,i,l)}}function yl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Je(t,i,f)}}function hi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(t,i,f)}else a.current=null}function sv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(t,t.return,f)}}function md(t,i,a){try{var l=t.stateNode;Yb(l,t.type,a,i),l[yt]=i}catch(f){Je(t,t.return,f)}}function av(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Mr(t.type)||t.tag===4}function pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=xc));else if(l!==4&&(l===27&&Mr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(gd(t,i,a),t=t.sibling;t!==null;)gd(t,i,a),t=t.sibling}function yc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Mr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yc(t,i,a),t=t.sibling;t!==null;)yc(t,i,a),t=t.sibling}function ov(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);zt(i,l,a),i[St]=t,i[yt]=a}catch(d){Je(t,t.return,d)}}var Qi=!1,pt=!1,yd=!1,lv=typeof WeakSet=="function"?WeakSet:Set,kt=null;function xb(t,i){if(t=t.containerInfo,zd=Vc,t=_g(t),pf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,b=-1,D=-1,F=0,W=0,ee=t,G=null;t:for(;;){for(var K;ee!==a||f!==0&&ee.nodeType!==3||(b=E+f),ee!==d||l!==0&&ee.nodeType!==3||(D=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===t)break t;if(G===a&&++F===f&&(b=E),G===d&&++W===l&&(D=E),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(qd={focusedElem:t,selectionRange:a},Vc=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ee=Ls(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ee,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){Je(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Gd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function uv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(t,a),l&4&&gl(5,a);break;case 1:if(Rr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){Je(a,a.return,E)}else{var f=Ls(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){Je(a,a.return,E)}}l&64&&iv(a),l&512&&yl(a,a.return);break;case 3:if(Rr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Fg(t,i)}catch(E){Je(a,a.return,E)}}break;case 27:i===null&&l&4&&ov(a);case 26:case 5:Rr(t,a),i===null&&l&4&&sv(a),l&512&&yl(a,a.return);break;case 12:Rr(t,a);break;case 13:Rr(t,a),l&4&&fv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Lb.bind(null,a),tS(t,a))));break;case 22:if(l=a.memoizedState!==null||Qi,!l){i=i!==null&&i.memoizedState!==null||pt,f=Qi;var d=pt;Qi=l,(pt=i)&&!d?Ir(t,a,(a.subtreeFlags&8772)!==0):Rr(t,a),Qi=f,pt=d}break;case 30:break;default:Rr(t,a)}}function cv(t){var i=t.alternate;i!==null&&(t.alternate=null,cv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&mr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var rt=null,ln=!1;function Yi(t,i,a){for(a=a.child;a!==null;)hv(t,i,a),a=a.sibling}function hv(t,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:pt||hi(a,i),Yi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pt||hi(a,i);var l=rt,f=ln;Mr(a.type)&&(rt=a.stateNode,ln=!1),Yi(t,i,a),Rl(a.stateNode),rt=l,ln=f;break;case 5:pt||hi(a,i);case 6:if(l=rt,f=ln,rt=null,Yi(t,i,a),rt=l,ln=f,rt!==null)if(ln)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{rt.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:rt!==null&&(ln?(t=rt,Jv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),kl(t)):Jv(rt,a.stateNode));break;case 4:l=rt,f=ln,rt=a.stateNode.containerInfo,ln=!0,Yi(t,i,a),rt=l,ln=f;break;case 0:case 11:case 14:case 15:pt||Ar(2,a,i),pt||Ar(4,a,i),Yi(t,i,a);break;case 1:pt||(hi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&rv(a,i,l)),Yi(t,i,a);break;case 21:Yi(t,i,a);break;case 22:pt=(l=pt)||a.memoizedState!==null,Yi(t,i,a),pt=l;break;default:Yi(t,i,a)}}function fv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(a){Je(i,i.return,a)}}function Cb(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new lv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new lv),i;default:throw Error(s(435,t.tag))}}function vd(t,i){var a=Cb(t);i.forEach(function(l){var f=Ub.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function yn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,E=i,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(Mr(b.type)){rt=b.stateNode,ln=!1;break e}break;case 5:rt=b.stateNode,ln=!1;break e;case 3:case 4:rt=b.stateNode.containerInfo,ln=!0;break e}b=b.return}if(rt===null)throw Error(s(160));hv(d,E,f),rt=null,ln=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dv(i,t),i=i.sibling}var Gn=null;function dv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yn(i,t),vn(t),l&4&&(Ar(3,t,t.return),gl(3,t),Ar(5,t,t.return));break;case 1:yn(i,t),vn(t),l&512&&(pt||a===null||hi(a,a.return)),l&64&&Qi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Gn;if(yn(i,t),vn(t),l&512&&(pt||a===null||hi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[fs]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),zt(d,l,a),d[St]=t,dt(d),l=d;break e;case"link":var E=o_("link","href",f).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(d=E[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}d=f.createElement(l),zt(d,l,a),f.head.appendChild(d);break;case"meta":if(E=o_("meta","content",f).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(d=E[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}d=f.createElement(l),zt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[St]=t,dt(d),l=d}t.stateNode=l}else l_(f,t.type,t.stateNode);else t.stateNode=a_(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?l_(f,t.type,t.stateNode):a_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&md(t,t.memoizedProps,a.memoizedProps)}break;case 27:yn(i,t),vn(t),l&512&&(pt||a===null||hi(a,a.return)),a!==null&&l&4&&md(t,t.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,t),vn(t),l&512&&(pt||a===null||hi(a,a.return)),t.flags&32){f=t.stateNode;try{xn(f,"")}catch(K){Je(t,t.return,K)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,md(t,f,a!==null?a.memoizedProps:f)),l&1024&&(yd=!0);break;case 6:if(yn(i,t),vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){Je(t,t.return,K)}}break;case 3:if(Oc=null,f=Gn,Gn=Nc(i.containerInfo),yn(i,t),Gn=f,vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{kl(i.containerInfo)}catch(K){Je(t,t.return,K)}yd&&(yd=!1,mv(t));break;case 4:l=Gn,Gn=Nc(t.stateNode.containerInfo),yn(i,t),vn(t),Gn=l;break;case 12:yn(i,t),vn(t);break;case 13:yn(i,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sd=Rn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vd(t,l)));break;case 22:f=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=Qi,W=pt;if(Qi=F||f,pt=W||D,yn(i,t),pt=W,Qi=F,vn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||Qi||pt||Us(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){Je(D,D.return,K)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(K){Je(D,D.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vd(t,a))));break;case 19:yn(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vd(t,l)));break;case 30:break;case 21:break;default:yn(i,t),vn(t)}}function vn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(av(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=pd(t);yc(t,d,f);break;case 5:var E=a.stateNode;a.flags&32&&(xn(E,""),a.flags&=-33);var b=pd(t);yc(t,b,E);break;case 3:case 4:var D=a.stateNode.containerInfo,F=pd(t);gd(t,F,D);break;default:throw Error(s(161))}}catch(W){Je(t,t.return,W)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function mv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;mv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Rr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)uv(t,i.alternate,i),i=i.sibling}function Us(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ar(4,i,i.return),Us(i);break;case 1:hi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&rv(i,i.return,a),Us(i);break;case 27:Rl(i.stateNode);case 26:case 5:hi(i,i.return),Us(i);break;case 22:i.memoizedState===null&&Us(i);break;case 30:Us(i);break;default:Us(i)}t=t.sibling}}function Ir(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,E=d.flags;switch(d.tag){case 0:case 11:case 15:Ir(f,d,a),gl(4,d);break;case 1:if(Ir(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Je(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Hg(D[f],b)}catch(F){Je(l,l.return,F)}}a&&E&64&&iv(d),yl(d,d.return);break;case 27:ov(d);case 26:case 5:Ir(f,d,a),a&&l===null&&E&4&&sv(d),yl(d,d.return);break;case 12:Ir(f,d,a);break;case 13:Ir(f,d,a),a&&E&4&&fv(f,d);break;case 22:d.memoizedState===null&&Ir(f,d,a),yl(d,d.return);break;case 30:break;default:Ir(f,d,a)}i=i.sibling}}function _d(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&nl(a))}function Ed(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t))}function fi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pv(t,i,a,l),i=i.sibling}function pv(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:fi(t,i,a,l),f&2048&&gl(9,i);break;case 1:fi(t,i,a,l);break;case 3:fi(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t)));break;case 12:if(f&2048){fi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,E=d.id,b=d.onPostCommit;typeof b=="function"&&b(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Je(i,i.return,D)}}else fi(t,i,a,l);break;case 13:fi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,E=i.alternate,i.memoizedState!==null?d._visibility&2?fi(t,i,a,l):vl(t,i):d._visibility&2?fi(t,i,a,l):(d._visibility|=2,Ua(t,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&_d(E,i);break;case 24:fi(t,i,a,l),f&2048&&Ed(i.alternate,i);break;default:fi(t,i,a,l)}}function Ua(t,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,E=i,b=a,D=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:Ua(d,E,b,D,f),gl(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?Ua(d,E,b,D,f):vl(d,E):(W._visibility|=2,Ua(d,E,b,D,f)),f&&F&2048&&_d(E.alternate,E);break;case 24:Ua(d,E,b,D,f),f&&F&2048&&Ed(E.alternate,E);break;default:Ua(d,E,b,D,f)}i=i.sibling}}function vl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:vl(a,l),f&2048&&_d(l.alternate,l);break;case 24:vl(a,l),f&2048&&Ed(l.alternate,l);break;default:vl(a,l)}i=i.sibling}}var _l=8192;function ja(t){if(t.subtreeFlags&_l)for(t=t.child;t!==null;)gv(t),t=t.sibling}function gv(t){switch(t.tag){case 26:ja(t),t.flags&_l&&t.memoizedState!==null&&mS(Gn,t.memoizedState,t.memoizedProps);break;case 5:ja(t);break;case 3:case 4:var i=Gn;Gn=Nc(t.stateNode.containerInfo),ja(t),Gn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=_l,_l=16777216,ja(t),_l=i):ja(t));break;default:ja(t)}}function yv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function El(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,_v(l,t)}yv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vv(t),t=t.sibling}function vv(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&Ar(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,vc(t)):El(t);break;default:El(t)}}function vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,_v(l,t)}yv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ar(8,i,i.return),vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,vc(i));break;default:vc(i)}t=t.sibling}}function _v(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:Ar(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var f=l.sibling,d=l.return;if(cv(l),l===a){kt=null;break e}if(f!==null){f.return=d,kt=f;break e}kt=d}}}var Nb={getCacheForType:function(t){var i=Qt(It),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Db=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,Ne=null,Pe=0,Qe=0,_n=null,xr=!1,Ba=!1,Td=!1,Xi=0,ht=0,Cr=0,js=0,wd=0,Ln=0,za=0,Tl=null,un=null,bd=!1,Sd=0,_c=1/0,Ec=null,Nr=null,Bt=0,Dr=null,qa=null,Ha=0,Ad=0,Rd=null,Ev=null,wl=0,Id=null;function En(){if((Ke&2)!==0&&Pe!==0)return Pe&-Pe;if($.T!==null){var t=Na;return t!==0?t:kd()}return fr()}function Tv(){Ln===0&&(Ln=(Pe&536870912)===0||He?Do():536870912);var t=Pn.current;return t!==null&&(t.flags|=32),Ln}function Tn(t,i,a){(t===tt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Fa(t,0),Or(t,Pe,Ln,!1)),Ii(t,a),((Ke&2)===0||t!==tt)&&(t===tt&&((Ke&2)===0&&(js|=a),ht===4&&Or(t,Pe,Ln,!1)),di(t))}function wv(t,i,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||hs(t,i),f=l?kb(t,i):Nd(t,i,!0),d=l;do{if(f===0){Ba&&!l&&Or(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Ob(a)){f=Nd(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var b=t;f=Tl;var D=b.current.memoizedState.isDehydrated;if(D&&(Fa(b,E).flags|=256),E=Nd(b,E,!1),E!==2){if(Td&&!D){b.errorRecoveryDisabledLanes|=d,js|=d,f=4;break e}d=un,un=f,d!==null&&(un===null?un=d:un.push.apply(un,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){Fa(t,0),Or(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Or(l,i,Ln,!xr);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Sd+300-Rn(),10<f)){if(Or(l,i,Ln,!xr),oa(l,0,!0)!==0)break e;l.timeoutHandle=Wv(bv.bind(null,l,a,un,Ec,bd,i,Ln,js,za,xr,d,2,-0,0),f);break e}bv(l,a,un,Ec,bd,i,Ln,js,za,xr,d,0,-0,0)}}break}while(!0);di(t)}function bv(t,i,a,l,f,d,E,b,D,F,W,ee,G,K){if(t.timeoutHandle=-1,ee=i.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Cl={stylesheets:null,count:0,unsuspend:dS},gv(i),ee=pS(),ee!==null)){t.cancelPendingCommit=ee(Nv.bind(null,t,i,d,a,l,f,E,b,D,W,1,G,K)),Or(t,d,E,!F);return}Nv(t,i,d,a,l,f,E,b,D)}function Ob(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!pn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Or(t,i,a,l){i&=~wd,i&=~js,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-Kt(f),E=1<<d;l[d]=-1,f&=~E}a!==0&&Zn(t,a,i)}function Tc(){return(Ke&6)===0?(bl(0),!1):!0}function xd(){if(Ne!==null){if(Qe===0)var t=Ne.return;else t=Ne,zi=Ms=null,Gf(t),Pa=null,dl=0,t=Ne;for(;t!==null;)nv(t.alternate,t),t=t.return;Ne=null}}function Fa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,$b(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),xd(),tt=t,Ne=a=Ui(t.current,null),Pe=i,Qe=0,_n=null,xr=!1,Ba=hs(t,i),Td=!1,za=Ln=wd=js=Cr=ht=0,un=Tl=null,bd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Kt(l),d=1<<f;i|=t[f],l&=~d}return Xi=i,Hu(),a}function Sv(t,i){Ie=null,$.H=lc,i===rl||i===Zu?(i=zg(),Qe=3):i===Ug?(i=zg(),Qe=4):Qe=i===qy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_n=i,Ne===null&&(ht=1,dc(t,On(i,t.current)))}function Av(){var t=$.H;return $.H=lc,t===null?lc:t}function Rv(){var t=$.A;return $.A=Nb,t}function Cd(){ht=4,xr||(Pe&4194048)!==Pe&&Pn.current!==null||(Ba=!0),(Cr&134217727)===0&&(js&134217727)===0||tt===null||Or(tt,Pe,Ln,!1)}function Nd(t,i,a){var l=Ke;Ke|=2;var f=Av(),d=Rv();(tt!==t||Pe!==i)&&(Ec=null,Fa(t,i)),i=!1;var E=ht;e:do try{if(Qe!==0&&Ne!==null){var b=Ne,D=_n;switch(Qe){case 8:xd(),E=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(i=!0);var F=Qe;if(Qe=0,_n=null,Ga(t,b,D,F),a&&Ba){E=0;break e}break;default:F=Qe,Qe=0,_n=null,Ga(t,b,D,F)}}Mb(),E=ht;break}catch(W){Sv(t,W)}while(!0);return i&&t.shellSuspendCounter++,zi=Ms=null,Ke=l,$.H=f,$.A=d,Ne===null&&(tt=null,Pe=0,Hu()),E}function Mb(){for(;Ne!==null;)Iv(Ne)}function kb(t,i){var a=Ke;Ke|=2;var l=Av(),f=Rv();tt!==t||Pe!==i?(Ec=null,_c=Rn()+500,Fa(t,i)):Ba=hs(t,i);e:do try{if(Qe!==0&&Ne!==null){i=Ne;var d=_n;t:switch(Qe){case 1:Qe=0,_n=null,Ga(t,i,d,1);break;case 2:case 9:if(jg(d)){Qe=0,_n=null,xv(i);break}i=function(){Qe!==2&&Qe!==9||tt!==t||(Qe=7),di(t)},d.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:jg(d)?(Qe=0,_n=null,xv(i)):(Qe=0,_n=null,Ga(t,i,d,7));break;case 5:var E=null;switch(Ne.tag){case 26:E=Ne.memoizedState;case 5:case 27:var b=Ne;if(!E||u_(E)){Qe=0,_n=null;var D=b.sibling;if(D!==null)Ne=D;else{var F=b.return;F!==null?(Ne=F,wc(F)):Ne=null}break t}}Qe=0,_n=null,Ga(t,i,d,5);break;case 6:Qe=0,_n=null,Ga(t,i,d,6);break;case 8:xd(),ht=6;break e;default:throw Error(s(462))}}Vb();break}catch(W){Sv(t,W)}while(!0);return zi=Ms=null,$.H=l,$.A=f,Ke=a,Ne!==null?0:(tt=null,Pe=0,Hu(),ht)}function Vb(){for(;Ne!==null&&!Io();)Iv(Ne)}function Iv(t){var i=ev(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,i===null?wc(t):Ne=i}function xv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,Pe);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,Pe);break;case 5:Gf(i);default:nv(a,i),i=Ne=Cg(i,Xi),i=ev(a,i,Xi)}t.memoizedProps=t.pendingProps,i===null?wc(t):Ne=i}function Ga(t,i,a,l){zi=Ms=null,Gf(i),Pa=null,dl=0;var f=i.return;try{if(Sb(t,f,i,a,Pe)){ht=1,dc(t,On(a,t.current)),Ne=null;return}}catch(d){if(f!==null)throw Ne=f,d;ht=1,dc(t,On(a,t.current)),Ne=null;return}i.flags&32768?(He||l===1?t=!0:Ba||(Pe&536870912)!==0?t=!1:(xr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cv(i,t)):wc(i)}function wc(t){var i=t;do{if((i.flags&32768)!==0){Cv(i,xr);return}t=i.return;var a=Rb(i.alternate,i,Xi);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);ht===0&&(ht=5)}function Cv(t,i){do{var a=Ib(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ht=6,Ne=null}function Nv(t,i,a,l,f,d,E,b,D){t.cancelPendingCommit=null;do bc();while(Bt!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Ef,Mo(t,a,d,E,b,D),t===tt&&(Ne=tt=null,Pe=0),qa=i,Dr=t,Ha=a,Ad=d,Rd=f,Ev=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,jb(os,function(){return Vv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=le.p,le.p=2,E=Ke,Ke|=4;try{xb(t,i,a)}finally{Ke=E,le.p=f,$.T=l}}Bt=1,Dv(),Ov(),Mv()}}function Dv(){if(Bt===1){Bt=0;var t=Dr,i=qa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=le.p;le.p=2;var f=Ke;Ke|=4;try{dv(i,t);var d=qd,E=_g(t.containerInfo),b=d.focusedElem,D=d.selectionRange;if(E!==b&&b&&b.ownerDocument&&vg(b.ownerDocument.documentElement,b)){if(D!==null&&pf(b)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(W,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),Ee=b.textContent.length,ve=Math.min(D.start,Ee),Ze=D.end===void 0?ve:Math.min(D.end,Ee);!K.extend&&ve>Ze&&(E=Ze,Ze=ve,ve=E);var B=yg(b,ve),L=yg(b,Ze);if(B&&L&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ee.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),ve>Ze?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ee=[],K=b;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var J=ee[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Vc=!!zd,qd=zd=null}finally{Ke=f,le.p=l,$.T=a}}t.current=i,Bt=2}}function Ov(){if(Bt===2){Bt=0;var t=Dr,i=qa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=le.p;le.p=2;var f=Ke;Ke|=4;try{uv(t,i.alternate,i)}finally{Ke=f,le.p=l,$.T=a}}Bt=3}}function Mv(){if(Bt===4||Bt===3){Bt=0,vu();var t=Dr,i=qa,a=Ha,l=Ev;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,qa=Dr=null,kv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Nr=null),la(a),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,f=le.p,le.p=2,$.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];d(b.value,{componentStack:b.stack})}}finally{$.T=i,le.p=f}}(Ha&3)!==0&&bc(),di(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===Id?wl++:(wl=0,Id=t):wl=0,bl(0)}}function kv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,nl(i)))}function bc(t){return Dv(),Ov(),Mv(),Vv()}function Vv(){if(Bt!==5)return!1;var t=Dr,i=Ad;Ad=0;var a=la(Ha),l=$.T,f=le.p;try{le.p=32>a?32:a,$.T=null,a=Rd,Rd=null;var d=Dr,E=Ha;if(Bt=0,qa=Dr=null,Ha=0,(Ke&6)!==0)throw Error(s(331));var b=Ke;if(Ke|=4,vv(d.current),pv(d,d.current,E,a),Ke=b,bl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ut,d)}catch{}return!0}finally{le.p=f,$.T=l,kv(t,i)}}function Pv(t,i,a){i=On(a,i),i=sd(t.stateNode,i,2),t=Tr(t,i,2),t!==null&&(Ii(t,2),di(t))}function Je(t,i,a){if(t.tag===3)Pv(t,t,a);else for(;i!==null;){if(i.tag===3){Pv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nr===null||!Nr.has(l))){t=On(a,t),a=By(2),l=Tr(i,a,2),l!==null&&(zy(a,l,i,t),Ii(l,2),di(l));break}}i=i.return}}function Dd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Db;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Td=!0,f.add(a),t=Pb.bind(null,t,i,a),i.then(t,t))}function Pb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Pe&a)===a&&(ht===4||ht===3&&(Pe&62914560)===Pe&&300>Rn()-Sd?(Ke&2)===0&&Fa(t,0):wd|=a,za===Pe&&(za=0)),di(t)}function Lv(t,i){i===0&&(i=Oo()),t=Ra(t,i),t!==null&&(Ii(t,i),di(t))}function Lb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Lv(t,a)}function Ub(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Lv(t,a)}function jb(t,i){return ss(t,i)}var Sc=null,Ka=null,Od=!1,Ac=!1,Md=!1,Bs=0;function di(t){t!==Ka&&t.next===null&&(Ka===null?Sc=Ka=t:Ka=Ka.next=t),Ac=!0,Od||(Od=!0,zb())}function bl(t,i){if(!Md&&Ac){Md=!0;do for(var a=!1,l=Sc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Kt(42|t)+1)-1,d&=f&~(E&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,zv(l,d))}else d=Pe,d=oa(l,l===tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||hs(l,d)||(a=!0,zv(l,d));l=l.next}while(a);Md=!1}}function Bb(){Uv()}function Uv(){Ac=Od=!1;var t=0;Bs!==0&&(Xb()&&(t=Bs),Bs=0);for(var i=Rn(),a=null,l=Sc;l!==null;){var f=l.next,d=jv(l,i);d===0?(l.next=null,a===null?Sc=f:a.next=f,f===null&&(Ka=a)):(a=l,(t!==0||(d&3)!==0)&&(Ac=!0)),l=f}bl(t)}function jv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Kt(d),b=1<<E,D=f[E];D===-1?((b&a)===0||(b&l)!==0)&&(f[E]=No(b,i)):D<=i&&(t.expiredLanes|=b),d&=~b}if(i=tt,a=Pe,a=oa(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&as(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||hs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&as(l),la(a)){case 2:case 8:a=sa;break;case 32:a=os;break;case 268435456:a=aa;break;default:a=os}return l=Bv.bind(null,t),a=ss(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&as(l),t.callbackPriority=2,t.callbackNode=null,2}function Bv(t,i){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(bc()&&t.callbackNode!==a)return null;var l=Pe;return l=oa(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wv(t,l,i),jv(t,Rn()),t.callbackNode!=null&&t.callbackNode===a?Bv.bind(null,t):null)}function zv(t,i){if(bc())return null;wv(t,i,!0)}function zb(){Wb(function(){(Ke&6)!==0?ss(xo,Bb):Uv()})}function kd(){return Bs===0&&(Bs=Do()),Bs}function qv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ma(""+t)}function Hv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function qb(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=qv((f[yt]||null).action),E=l.submitter;E&&(i=(i=E[yt]||null)?qv(i.formAction):E.getAttribute("formAction"),i!==null&&(d=i,E=null));var b=new pa("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Bs!==0){var D=E?Hv(f,E):new FormData(f);ed(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=E?Hv(f,E):new FormData(f),ed(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var Vd=0;Vd<_f.length;Vd++){var Pd=_f[Vd],Hb=Pd.toLowerCase(),Fb=Pd[0].toUpperCase()+Pd.slice(1);Fn(Hb,"on"+Fb)}Fn(wg,"onAnimationEnd"),Fn(bg,"onAnimationIteration"),Fn(Sg,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(ob,"onTransitionRun"),Fn(lb,"onTransitionStart"),Fn(ub,"onTransitionCancel"),Fn(Ag,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Fv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var E=l.length-1;0<=E;E--){var b=l[E],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(W){fc(W)}f.currentTarget=null,d=D}else for(E=0;E<l.length;E++){if(b=l[E],D=b.instance,F=b.currentTarget,b=b.listener,D!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(W){fc(W)}f.currentTarget=null,d=D}}}}function De(t,i){var a=i[Vo];a===void 0&&(a=i[Vo]=new Set);var l=t+"__bubble";a.has(l)||(Gv(i,t,2,!1),a.add(l))}function Ld(t,i,a){var l=0;i&&(l|=4),Gv(a,t,l,i)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Ud(t){if(!t[Rc]){t[Rc]=!0,Po.forEach(function(a){a!=="selectionchange"&&(Gb.has(a)||Ld(a,!1,t),Ld(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Rc]||(i[Rc]=!0,Ld("selectionchange",!1,i))}}function Gv(t,i,a,l){switch(p_(i)){case 2:var f=vS;break;case 8:f=_S;break;default:f=Zd}a=f.bind(null,i,a,t),f=void 0,!Nn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function jd(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=xi(b),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=d=E;continue e}b=b.parentNode}}l=l.return}xu(function(){var F=d,W=Cn(a),ee=[];e:{var G=Rg.get(t);if(G!==void 0){var K=pa,Ee=t;switch(t){case"keypress":if(ri(a)===0)break e;case"keydown":case"keyup":K=Ta;break;case"focusin":Ee="focus",K=va;break;case"focusout":Ee="blur",K=va;break;case"beforeblur":case"afterblur":K=va;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Pu;break;case wg:case bg:case Sg:K=_a;break;case Ag:K=Uu;break;case"scroll":case"scrollend":K=Cu;break;case"wheel":K=wa;break;case"copy":case"cut":case"paste":K=Ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Yo;break;case"toggle":case"beforetoggle":K=Bu}var ve=(i&4)!==0,Ze=!ve&&(t==="scroll"||t==="scrollend"),B=ve?G!==null?G+"Capture":null:G;ve=[];for(var L=F,H;L!==null;){var J=L;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||B===null||(J=_s(L,B),J!=null&&ve.push(Al(L,J,H))),Ze)break;L=L.return}0<ve.length&&(G=new K(G,Ee,null,a,W),ee.push({event:G,listeners:ve}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Oi&&(Ee=a.relatedTarget||a.fromElement)&&(xi(Ee)||Ee[In]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(Ee=a.relatedTarget||a.toElement,K=F,Ee=Ee?xi(Ee):null,Ee!==null&&(Ze=u(Ee),ve=Ee.tag,Ee!==Ze||ve!==5&&ve!==27&&ve!==6)&&(Ee=null)):(K=null,Ee=F),K!==Ee)){if(ve=Dn,J="onMouseLeave",B="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Yo,J="onPointerLeave",B="onPointerEnter",L="pointer"),Ze=K==null?G:ei(K),H=Ee==null?G:ei(Ee),G=new ve(J,L+"leave",K,a,W),G.target=Ze,G.relatedTarget=H,J=null,xi(W)===F&&(ve=new ve(B,L+"enter",Ee,a,W),ve.target=H,ve.relatedTarget=Ze,J=ve),Ze=J,K&&Ee)t:{for(ve=K,B=Ee,L=0,H=ve;H;H=Qa(H))L++;for(H=0,J=B;J;J=Qa(J))H++;for(;0<L-H;)ve=Qa(ve),L--;for(;0<H-L;)B=Qa(B),H--;for(;L--;){if(ve===B||B!==null&&ve===B.alternate)break t;ve=Qa(ve),B=Qa(B)}ve=null}else ve=null;K!==null&&Kv(ee,G,K,ve,!1),Ee!==null&&Ze!==null&&Kv(ee,Ze,Ee,ve,!0)}}e:{if(G=F?ei(F):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var fe=hg;else if(Rt(G))if(fg)fe=rb;else{fe=nb;var Ce=tb}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&zo(F.elementType)&&(fe=hg):fe=ib;if(fe&&(fe=fe(t,F))){Li(ee,fe,a,W);break e}Ce&&Ce(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&gr(G,"number",G.value)}switch(Ce=F?ei(F):window,t){case"focusin":(Rt(Ce)||Ce.contentEditable==="true")&&(ba=Ce,gf=F,Wo=null);break;case"focusout":Wo=gf=ba=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Eg(ee,a,W);break;case"selectionchange":if(ab)break;case"keydown":case"keyup":Eg(ee,a,W)}var me;if(oi)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ke?Q(t,a)&&(_e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(v&&a.locale!=="ko"&&(ke||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ke&&(me=Ho()):(ii=W,yr="value"in ii?ii.value:ii.textContent,ke=!0)),Ce=Ic(F,_e),0<Ce.length&&(_e=new Ko(_e,t,null,a,W),ee.push({event:_e,listeners:Ce}),me?_e.data=me:(me=oe(a),me!==null&&(_e.data=me)))),(me=y?At(t,a):Ve(t,a))&&(_e=Ic(F,"onBeforeInput"),0<_e.length&&(Ce=new Ko("onBeforeInput","beforeinput",null,a,W),ee.push({event:Ce,listeners:_e}),Ce.data=me)),qb(ee,t,F,a,W)}Fv(ee,i)})}function Al(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ic(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=_s(t,a),f!=null&&l.unshift(Al(t,f,d)),f=_s(t,i),f!=null&&l.push(Al(t,f,d))),t.tag===3)return l;t=t.return}return[]}function Qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Kv(t,i,a,l,f){for(var d=i._reactName,E=[];a!==null&&a!==l;){var b=a,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||F===null||(D=F,f?(F=_s(a,d),F!=null&&E.unshift(Al(a,F,D))):f||(F=_s(a,d),F!=null&&E.push(Al(a,F,D)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var Kb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function Qv(t){return(typeof t=="string"?t:""+t).replace(Kb,`
`).replace(Qb,"")}function Yv(t,i){return i=Qv(i),Qv(t)===i}function xc(){}function We(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||xn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&xn(t,""+l);break;case"className":ti(t,"class",l);break;case"tabIndex":ti(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(t,a,l);break;case"style":Bo(t,l,d);break;case"data":if(i!=="object"){ti(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ma(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&We(t,i,"name",f.name,f,null),We(t,i,"formEncType",f.formEncType,f,null),We(t,i,"formMethod",f.formMethod,f,null),We(t,i,"formTarget",f.formTarget,f,null)):(We(t,i,"encType",f.encType,f,null),We(t,i,"method",f.method,f,null),We(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ma(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=xc);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ma(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),pr(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":pr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uf.get(a)||a,pr(t,a,l))}}function Bd(t,i,a,l,f,d){switch(a){case"style":Bo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?xn(t,l):(typeof l=="number"||typeof l=="bigint")&&xn(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[yt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):pr(t,a,l)}}}function zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:We(t,i,d,E,a,null)}}f&&We(t,i,"srcSet",a.srcSet,a,null),l&&We(t,i,"src",a.src,a,null);return;case"input":De("invalid",t);var b=d=E=f=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":E=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:We(t,i,l,W,a,null)}}gs(t,d,b,D,F,E,f,!1),da(t);return;case"select":De("invalid",t),l=E=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:We(t,i,f,b,a,null)}i=d,a=E,t.multiple=!!l,i!=null?Di(t,!!l,i,!1):a!=null&&Di(t,!!l,a,!0);return;case"textarea":De("invalid",t),d=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:We(t,i,E,b,a,null)}ys(t,l,f,d),da(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:We(t,i,D,l,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<Sl.length;l++)De(Sl[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:We(t,i,F,l,a,null)}return;default:if(zo(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Bd(t,i,W,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&We(t,i,b,l,a,null))}function Yb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,b=null,D=null,F=null,W=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(K)||We(t,i,K,null,l,ee)}}for(var G in l){var K=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":d=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":W=K;break;case"value":E=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==ee&&We(t,i,G,K,l,ee)}}mn(t,E,b,D,F,W,d,f);return;case"select":K=E=b=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(d)||We(t,i,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":E=d;default:d!==D&&We(t,i,f,d,l,D)}i=b,a=E,l=K,G!=null?Di(t,!!a,G,!1):!!l!=!!a&&(i!=null?Di(t,!!a,i,!0):Di(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:We(t,i,b,null,l,f)}for(E in l)if(f=l[E],d=a[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&We(t,i,E,f,l,d)}Xe(t,G,K);return;case"option":for(var Ee in a)if(G=a[Ee],a.hasOwnProperty(Ee)&&G!=null&&!l.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:We(t,i,Ee,null,l,G)}for(D in l)if(G=l[D],K=a[D],l.hasOwnProperty(D)&&G!==K&&(G!=null||K!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:We(t,i,D,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)G=a[ve],a.hasOwnProperty(ve)&&G!=null&&!l.hasOwnProperty(ve)&&We(t,i,ve,null,l,G);for(F in l)if(G=l[F],K=a[F],l.hasOwnProperty(F)&&G!==K&&(G!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:We(t,i,F,G,l,K)}return;default:if(zo(i)){for(var Ze in a)G=a[Ze],a.hasOwnProperty(Ze)&&G!==void 0&&!l.hasOwnProperty(Ze)&&Bd(t,i,Ze,void 0,l,G);for(W in l)G=l[W],K=a[W],!l.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||Bd(t,i,W,G,l,K);return}}for(var B in a)G=a[B],a.hasOwnProperty(B)&&G!=null&&!l.hasOwnProperty(B)&&We(t,i,B,null,l,G);for(ee in l)G=l[ee],K=a[ee],!l.hasOwnProperty(ee)||G===K||G==null&&K==null||We(t,i,ee,G,l,K)}var zd=null,qd=null;function Cc(t){return t.nodeType===9?t:t.ownerDocument}function Xv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $v(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Hd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Fd=null;function Xb(){var t=window.event;return t&&t.type==="popstate"?t===Fd?!1:(Fd=t,!0):(Fd=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,$b=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(t){return Zv.resolve(null).then(t).catch(Zb)}:Wv;function Zb(t){setTimeout(function(){throw t})}function Mr(t){return t==="head"}function Jv(t,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Rl(E.documentElement),a&2&&Rl(E.body),a&4)for(a=E.head,Rl(a),E=a.firstChild;E;){var b=E.nextSibling,D=E.nodeName;E[fs]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(f===0){t.removeChild(d),kl(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);kl(i)}function Gd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gd(a),mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Jb(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[fs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Kn(t.nextSibling),t===null)break}return null}function eS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Kn(t.nextSibling),t===null))return null;return t}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function tS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Kn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Qd=null;function e_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function t_(t,i,a){switch(i=Cc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Rl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);mr(t)}var Un=new Map,n_=new Set;function Nc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=le.d;le.d={f:nS,r:iS,D:rS,C:sS,L:aS,m:oS,X:uS,S:lS,M:cS};function nS(){var t=$i.f(),i=Tc();return t||i}function iS(t){var i=Jn(t);i!==null&&i.tag===5&&i.type==="form"?wy(i):$i.r(t)}var Ya=typeof document>"u"?null:document;function i_(t,i,a){var l=Ya;if(l&&typeof i=="string"&&i){var f=vt(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),n_.has(f)||(n_.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),zt(i,"link",t),dt(i),l.head.appendChild(i)))}}function rS(t){$i.D(t),i_("dns-prefetch",t,null)}function sS(t,i){$i.C(t,i),i_("preconnect",t,i)}function aS(t,i,a){$i.L(t,i,a);var l=Ya;if(l&&t&&i){var f='link[rel="preload"][as="'+vt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+vt(a.imageSizes)+'"]')):f+='[href="'+vt(t)+'"]';var d=f;switch(i){case"style":d=Xa(t);break;case"script":d=$a(t)}Un.has(d)||(t=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Un.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Il(d))||i==="script"&&l.querySelector(xl(d))||(i=l.createElement("link"),zt(i,"link",t),dt(i),l.head.appendChild(i)))}}function oS(t,i){$i.m(t,i);var a=Ya;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+vt(l)+'"][href="'+vt(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=$a(t)}if(!Un.has(d)&&(t=_({rel:"modulepreload",href:t},i),Un.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xl(d)))return}l=a.createElement("link"),zt(l,"link",t),dt(l),a.head.appendChild(l)}}}function lS(t,i,a){$i.S(t,i,a);var l=Ya;if(l&&t){var f=tn(l).hoistableStyles,d=Xa(t);i=i||"default";var E=f.get(d);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(Il(d)))b.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Un.get(d))&&Yd(t,a);var D=E=l.createElement("link");dt(D),zt(D,"link",t),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Dc(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(d,E)}}}function uS(t,i){$i.X(t,i);var a=Ya;if(a&&t){var l=tn(a).hoistableScripts,f=$a(t),d=l.get(f);d||(d=a.querySelector(xl(f)),d||(t=_({src:t,async:!0},i),(i=Un.get(f))&&Xd(t,i),d=a.createElement("script"),dt(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function cS(t,i){$i.M(t,i);var a=Ya;if(a&&t){var l=tn(a).hoistableScripts,f=$a(t),d=l.get(f);d||(d=a.querySelector(xl(f)),d||(t=_({src:t,async:!0,type:"module"},i),(i=Un.get(f))&&Xd(t,i),d=a.createElement("script"),dt(d),zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function r_(t,i,a,l){var f=(f=we.current)?Nc(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Xa(a.href),a=tn(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xa(a.href);var d=tn(f).hoistableStyles,E=d.get(t);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=f.querySelector(Il(t)))&&!d._p&&(E.instance=d,E.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||hS(f,t,a,E.state))),i&&l===null)throw Error(s(528,""));return E}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$a(a),a=tn(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Xa(t){return'href="'+vt(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function s_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function hS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),zt(i,"link",a),dt(i),t.head.appendChild(i))}function $a(t){return'[src="'+vt(t)+'"]'}function xl(t){return"script[async]"+t}function a_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+vt(a.href)+'"]');if(l)return i.instance=l,dt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),dt(l),zt(l,"style",f),Dc(l,a.precedence,t),i.instance=l;case"stylesheet":f=Xa(a.href);var d=t.querySelector(Il(f));if(d)return i.state.loading|=4,i.instance=d,dt(d),d;l=s_(a),(f=Un.get(f))&&Yd(l,f),d=(t.ownerDocument||t).createElement("link"),dt(d);var E=d;return E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),zt(d,"link",l),i.state.loading|=4,Dc(d,a.precedence,t),i.instance=d;case"script":return d=$a(a.src),(f=t.querySelector(xl(d)))?(i.instance=f,dt(f),f):(l=a,(f=Un.get(d))&&(l=_({},a),Xd(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),dt(f),zt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Dc(l,a.precedence,t));return i.instance}function Dc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Yd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Xd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Oc=null;function o_(t,i,a){if(Oc===null){var l=new Map,f=Oc=new Map;f.set(a,l)}else f=Oc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[fs]||d[St]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(i)||"";E=t+E;var b=l.get(E);b?b.push(d):l.set(E,[d])}}return l}function l_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function fS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function u_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Cl=null;function dS(){}function mS(t,i,a){if(Cl===null)throw Error(s(475));var l=Cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Xa(a.href),d=t.querySelector(Il(f));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Mc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,dt(d);return}d=t.ownerDocument||t,a=s_(a),(f=Un.get(f))&&Yd(a,f),d=d.createElement("link"),dt(d);var E=d;E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),zt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Mc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function pS(){if(Cl===null)throw Error(s(475));var t=Cl;return t.stylesheets&&t.count===0&&$d(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&$d(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Mc(){if(this.count--,this.count===0){if(this.stylesheets)$d(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function $d(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,i.forEach(gS,t),kc=null,Mc.call(t))}function gS(t,i){if(!(i.state.loading&4)){var a=kc.get(t);if(a)var l=a.get(null);else{a=new Map,kc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=i.instance,E=f.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,f),a.set(E,f),this.count++,l=Mc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var Nl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function yS(t,i,a,l,f,d,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function c_(t,i,a,l,f,d,E,b,D,F,W,ee){return t=new yS(t,i,a,E,b,D,F,ee),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),t.current=d,d.stateNode=t,i=Df(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Vf(d),t}function h_(t){return t?(t=Ia,t):Ia}function f_(t,i,a,l,f,d){f=h_(f),l.context===null?l.context=f:l.pendingContext=f,l=Er(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Tr(t,l,i),a!==null&&(Tn(a,t,i),al(a,t,i))}function d_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Wd(t,i){d_(t,i),(t=t.alternate)&&d_(t,i)}function m_(t){if(t.tag===13){var i=Ra(t,67108864);i!==null&&Tn(i,t,67108864),Wd(t,67108864)}}var Vc=!0;function vS(t,i,a,l){var f=$.T;$.T=null;var d=le.p;try{le.p=2,Zd(t,i,a,l)}finally{le.p=d,$.T=f}}function _S(t,i,a,l){var f=$.T;$.T=null;var d=le.p;try{le.p=8,Zd(t,i,a,l)}finally{le.p=d,$.T=f}}function Zd(t,i,a,l){if(Vc){var f=Jd(l);if(f===null)jd(t,i,l,Pc,a),g_(t,l);else if(TS(f,t,i,a,l))l.stopPropagation();else if(g_(t,l),i&4&&-1<ES.indexOf(t)){for(;f!==null;){var d=Jn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=zn(d.pendingLanes);if(E!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var D=1<<31-Kt(E);b.entanglements[1]|=D,E&=~D}di(d),(Ke&6)===0&&(_c=Rn()+500,bl(0))}}break;case 13:b=Ra(d,2),b!==null&&Tn(b,d,2),Tc(),Wd(d,2)}if(d=Jd(l),d===null&&jd(t,i,l,Pc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else jd(t,i,l,null,a)}}function Jd(t){return t=Cn(t),em(t)}var Pc=null;function em(t){if(Pc=null,t=xi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Pc=t,null}function p_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nf()){case xo:return 2;case sa:return 8;case os:case rf:return 32;case aa:return 268435456;default:return 32}default:return 32}}var tm=!1,kr=null,Vr=null,Pr=null,Dl=new Map,Ol=new Map,Lr=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g_(t,i){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(i.pointerId)}}function Ml(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Jn(i),i!==null&&m_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function TS(t,i,a,l,f){switch(i){case"focusin":return kr=Ml(kr,t,i,a,l,f),!0;case"dragenter":return Vr=Ml(Vr,t,i,a,l,f),!0;case"mouseover":return Pr=Ml(Pr,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Dl.set(d,Ml(Dl.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Ol.set(d,Ml(Ol.get(d)||null,t,i,a,l,f)),!0}return!1}function y_(t){var i=xi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,Tu(t.priority,function(){if(a.tag===13){var l=En();l=hr(l);var f=Ra(a,l);f!==null&&Tn(f,a,l),Wd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Jd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Oi=l,a.target.dispatchEvent(l),Oi=null}else return i=Jn(a),i!==null&&m_(i),t.blockedOn=a,!1;i.shift()}return!0}function v_(t,i,a){Lc(t)&&a.delete(i)}function wS(){tm=!1,kr!==null&&Lc(kr)&&(kr=null),Vr!==null&&Lc(Vr)&&(Vr=null),Pr!==null&&Lc(Pr)&&(Pr=null),Dl.forEach(v_),Ol.forEach(v_)}function Uc(t,i){t.blockedOn===i&&(t.blockedOn=null,tm||(tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wS)))}var jc=null;function __(t){jc!==t&&(jc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jc===t&&(jc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var d=Jn(a);d!==null&&(t.splice(i,3),i-=3,ed(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function kl(t){function i(D){return Uc(D,t)}kr!==null&&Uc(kr,t),Vr!==null&&Uc(Vr,t),Pr!==null&&Uc(Pr,t),Dl.forEach(i),Ol.forEach(i);for(var a=0;a<Lr.length;a++){var l=Lr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)y_(a),a.blockedOn===null&&Lr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],E=f[yt]||null;if(typeof d=="function")E||__(a);else if(E){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[yt]||null)b=E.formAction;else if(em(f)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),__(a)}}}function nm(t){this._internalRoot=t}Bc.prototype.render=nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=En();f_(a,l,t,i,null,null)},Bc.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;f_(t.current,2,null,t,null,null),Tc(),i[In]=null}};function Bc(t){this._internalRoot=t}Bc.prototype.unstable_scheduleHydration=function(t){if(t){var i=fr();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Lr.length&&i!==0&&i<Lr[a].priority;a++);Lr.splice(a,0,t),a===0&&y_(t)}};var E_=e.version;if(E_!=="19.1.1")throw Error(s(527,E_,"19.1.1"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var bS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{ut=zc.inject(bS),Ge=zc}catch{}}return Pl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=Py,d=Ly,E=Uy,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=c_(t,1,!1,null,null,a,l,f,d,E,b,null),t[In]=i.current,Ud(t),new nm(i)},Pl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=Py,E=Ly,b=Uy,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),i=c_(t,1,!0,i,a??null,l,f,d,E,b,D,F),i.context=h_(null),a=i.current,l=En(),l=hr(l),f=Er(l),f.callback=null,Tr(a,f,l),a=l,i.current.lanes=a,Ii(i,a),di(i),t[In]=i.current,Ud(t),new Bc(i)},Pl.version="19.1.1",Pl}var N_;function kS(){if(N_)return sm.exports;N_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sm.exports=MS(),sm.exports}var VS=kS();const PS=cE(VS);fE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Xl.apply(this,arguments)}var Hr;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Hr||(Hr={}));const D_="popstate";function LS(r){r===void 0&&(r={});function e(s,o){let{pathname:u,search:h,hash:m}=s.location;return Am("",{pathname:u,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:ah(o)}return jS(e,n,null,r)}function at(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function dE(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function US(){return Math.random().toString(36).substr(2,8)}function O_(r,e){return{usr:r.state,key:r.key,idx:e}}function Am(r,e,n,s){return n===void 0&&(n=null),Xl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?yo(e):e,{state:n,key:e&&e.key||s||US()})}function ah(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function yo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function jS(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m=Hr.Pop,p=null,g=_();g==null&&(g=0,h.replaceState(Xl({},h.state,{idx:g}),""));function _(){return(h.state||{idx:null}).idx}function w(){m=Hr.Pop;let M=_(),Y=M==null?null:M-g;g=M,p&&p({action:m,location:z.location,delta:Y})}function R(M,Y){m=Hr.Push;let X=Am(z.location,M,Y);g=_()+1;let Z=O_(X,g),ne=z.createHref(X);try{h.pushState(Z,"",ne)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(ne)}u&&p&&p({action:m,location:z.location,delta:1})}function C(M,Y){m=Hr.Replace;let X=Am(z.location,M,Y);g=_();let Z=O_(X,g),ne=z.createHref(X);h.replaceState(Z,"",ne),u&&p&&p({action:m,location:z.location,delta:0})}function V(M){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof M=="string"?M:ah(M);return X=X.replace(/ $/,"%20"),at(Y,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,Y)}let z={get action(){return m},get location(){return r(o,h)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(D_,w),p=M,()=>{o.removeEventListener(D_,w),p=null}},createHref(M){return e(o,M)},createURL:V,encodeLocation(M){let Y=V(M);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:R,replace:C,go(M){return h.go(M)}};return z}var M_;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(M_||(M_={}));function BS(r,e,n){return n===void 0&&(n="/"),zS(r,e,n)}function zS(r,e,n,s){let o=typeof e=="string"?yo(e):e,u=ro(o.pathname||"/",n);if(u==null)return null;let h=mE(r);qS(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=JS(u);m=WS(h[p],g)}return m}function mE(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(at(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=Gr([s,p.relativePath]),_=n.concat(p);u.children&&u.children.length>0&&(at(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),mE(u.children,e,_,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:XS(g,u.index),routesMeta:_})};return r.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,h);else for(let p of pE(u.path))o(u,h,p)}),e}function pE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=pE(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function qS(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:$S(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const HS=/^:[\w-]+$/,FS=3,GS=2,KS=1,QS=10,YS=-2,k_=r=>r==="*";function XS(r,e){let n=r.split("/"),s=n.length;return n.some(k_)&&(s+=YS),e&&(s+=GS),n.filter(o=>!k_(o)).reduce((o,u)=>o+(HS.test(u)?FS:u===""?KS:QS),s)}function $S(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function WS(r,e,n){let{routesMeta:s}=r,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",w=Rm({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),R=p.route;if(!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Gr([u,w.pathname]),pathnameBase:iA(Gr([u,w.pathnameBase])),route:R}),w.pathnameBase!=="/"&&(u=Gr([u,w.pathnameBase]))}return h}function Rm(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=ZS(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,_,w)=>{let{paramName:R,isOptional:C}=_;if(R==="*"){let z=m[w]||"";h=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const V=m[w];return C&&!V?g[R]=void 0:g[R]=(V||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function ZS(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dE(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function JS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dE(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function ro(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function eA(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?yo(r):r;return{pathname:n?n.startsWith("/")?n:tA(n,e):e,search:rA(s),hash:sA(o)}}function tA(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function um(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nA(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ip(r,e){let n=nA(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function rp(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=yo(r):(o=Xl({},r),at(!o.pathname||!o.pathname.includes("?"),um("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),um("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),um("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let w=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),w-=1;o.pathname=R.join("/")}m=w>=0?e[w]:"/"}let p=eA(o,m),g=h&&h!=="/"&&h.endsWith("/"),_=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}const Gr=r=>r.join("/").replace(/\/\/+/g,"/"),iA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),rA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,sA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function aA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const gE=["post","put","patch","delete"];new Set(gE);const oA=["get",...gE];new Set(oA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},$l.apply(this,arguments)}const Rh=U.createContext(null),yE=U.createContext(null),or=U.createContext(null),Ih=U.createContext(null),wi=U.createContext({outlet:null,matches:[],isDataRoute:!1}),vE=U.createContext(null);function lA(r,e){let{relative:n}=e===void 0?{}:e;vo()||at(!1);let{basename:s,navigator:o}=U.useContext(or),{hash:u,pathname:h,search:m}=xh(r,{relative:n}),p=h;return s!=="/"&&(p=h==="/"?s:Gr([s,h])),o.createHref({pathname:p,search:m,hash:u})}function vo(){return U.useContext(Ih)!=null}function _o(){return vo()||at(!1),U.useContext(Ih).location}function _E(r){U.useContext(or).static||U.useLayoutEffect(r)}function lr(){let{isDataRoute:r}=U.useContext(wi);return r?bA():uA()}function uA(){vo()||at(!1);let r=U.useContext(Rh),{basename:e,future:n,navigator:s}=U.useContext(or),{matches:o}=U.useContext(wi),{pathname:u}=_o(),h=JSON.stringify(ip(o,n.v7_relativeSplatPath)),m=U.useRef(!1);return _E(()=>{m.current=!0}),U.useCallback(function(g,_){if(_===void 0&&(_={}),!m.current)return;if(typeof g=="number"){s.go(g);return}let w=rp(g,JSON.parse(h),u,_.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Gr([e,w.pathname])),(_.replace?s.replace:s.push)(w,_.state,_)},[e,s,h,u,r])}const cA=U.createContext(null);function hA(r){let e=U.useContext(wi).outlet;return e&&U.createElement(cA.Provider,{value:r},e)}function sp(){let{matches:r}=U.useContext(wi),e=r[r.length-1];return e?e.params:{}}function xh(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=U.useContext(or),{matches:o}=U.useContext(wi),{pathname:u}=_o(),h=JSON.stringify(ip(o,s.v7_relativeSplatPath));return U.useMemo(()=>rp(r,JSON.parse(h),u,n==="path"),[r,h,u,n])}function fA(r,e){return dA(r,e)}function dA(r,e,n,s){vo()||at(!1);let{navigator:o}=U.useContext(or),{matches:u}=U.useContext(wi),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=_o(),_;if(e){var w;let M=typeof e=="string"?yo(e):e;p==="/"||(w=M.pathname)!=null&&w.startsWith(p)||at(!1),_=M}else _=g;let R=_.pathname||"/",C=R;if(p!=="/"){let M=p.replace(/^\//,"").split("/");C="/"+R.replace(/^\//,"").split("/").slice(M.length).join("/")}let V=BS(r,{pathname:C}),z=vA(V&&V.map(M=>Object.assign({},M,{params:Object.assign({},m,M.params),pathname:Gr([p,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:Gr([p,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),u,n,s);return e&&z?U.createElement(Ih.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Hr.Pop}},z):z}function mA(){let r=wA(),e=aA(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,null)}const pA=U.createElement(mA,null);class gA extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(wi.Provider,{value:this.props.routeContext},U.createElement(vE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yA(r){let{routeContext:e,match:n,children:s}=r,o=U.useContext(Rh);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(wi.Provider,{value:e},s)}function vA(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var u;if(!n)return null;if(n.errors)r=n.matches;else if((u=s)!=null&&u.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,m=(o=n)==null?void 0:o.errors;if(m!=null){let _=h.findIndex(w=>w.route.id&&m?.[w.route.id]!==void 0);_>=0||at(!1),h=h.slice(0,Math.min(h.length,_+1))}let p=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let _=0;_<h.length;_++){let w=h[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=_),w.route.id){let{loaderData:R,errors:C}=n,V=w.route.loader&&R[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||V){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((_,w,R)=>{let C,V=!1,z=null,M=null;n&&(C=m&&w.route.id?m[w.route.id]:void 0,z=w.route.errorElement||pA,p&&(g<0&&R===0?(SA("route-fallback"),V=!0,M=null):g===R&&(V=!0,M=w.route.hydrateFallbackElement||null)));let Y=e.concat(h.slice(0,R+1)),X=()=>{let Z;return C?Z=z:V?Z=M:w.route.Component?Z=U.createElement(w.route.Component,null):w.route.element?Z=w.route.element:Z=_,U.createElement(yA,{match:w,routeContext:{outlet:_,matches:Y,isDataRoute:n!=null},children:Z})};return n&&(w.route.ErrorBoundary||w.route.errorElement||R===0)?U.createElement(gA,{location:n.location,revalidation:n.revalidation,component:z,error:C,children:X(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):X()},null)}var EE=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(EE||{}),TE=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(TE||{});function _A(r){let e=U.useContext(Rh);return e||at(!1),e}function EA(r){let e=U.useContext(yE);return e||at(!1),e}function TA(r){let e=U.useContext(wi);return e||at(!1),e}function wE(r){let e=TA(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function wA(){var r;let e=U.useContext(vE),n=EA(),s=wE();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function bA(){let{router:r}=_A(EE.UseNavigateStable),e=wE(TE.UseNavigateStable),n=U.useRef(!1);return _E(()=>{n.current=!0}),U.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,$l({fromRouteId:e},u)))},[r,e])}const V_={};function SA(r,e,n){V_[r]||(V_[r]=!0)}function AA(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function bE(r){let{to:e,replace:n,state:s,relative:o}=r;vo()||at(!1);let{future:u,static:h}=U.useContext(or),{matches:m}=U.useContext(wi),{pathname:p}=_o(),g=lr(),_=rp(e,ip(m,u.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(_);return U.useEffect(()=>g(JSON.parse(w),{replace:n,state:s,relative:o}),[g,w,o,n,s]),null}function RA(r){return hA(r.context)}function $t(r){at(!1)}function IA(r){let{basename:e="/",children:n=null,location:s,navigationType:o=Hr.Pop,navigator:u,static:h=!1,future:m}=r;vo()&&at(!1);let p=e.replace(/^\/*/,"/"),g=U.useMemo(()=>({basename:p,navigator:u,static:h,future:$l({v7_relativeSplatPath:!1},m)}),[p,m,u,h]);typeof s=="string"&&(s=yo(s));let{pathname:_="/",search:w="",hash:R="",state:C=null,key:V="default"}=s,z=U.useMemo(()=>{let M=ro(_,p);return M==null?null:{location:{pathname:M,search:w,hash:R,state:C,key:V},navigationType:o}},[p,_,w,R,C,V,o]);return z==null?null:U.createElement(or.Provider,{value:g},U.createElement(Ih.Provider,{children:n,value:z}))}function xA(r){let{children:e,location:n}=r;return fA(Im(e),n)}new Promise(()=>{});function Im(r,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(r,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){n.push.apply(n,Im(s.props.children,u));return}s.type!==$t&&at(!1),!s.props.index||!s.props.children||at(!1);let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Im(s.props.children,u)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oh(){return oh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},oh.apply(this,arguments)}function SE(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,u;for(u=0;u<s.length;u++)o=s[u],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function CA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function NA(r,e){return r.button===0&&(!e||e==="_self")&&!CA(r)}const DA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],MA="6";try{window.__reactRouterVersion=MA}catch{}const kA=U.createContext({isTransitioning:!1}),VA="startTransition",P_=CS[VA];function PA(r){let{basename:e,children:n,future:s,window:o}=r,u=U.useRef();u.current==null&&(u.current=LS({window:o,v5Compat:!0}));let h=u.current,[m,p]=U.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},_=U.useCallback(w=>{g&&P_?P_(()=>p(w)):p(w)},[p,g]);return U.useLayoutEffect(()=>h.listen(_),[h,_]),U.useEffect(()=>AA(s),[s]),U.createElement(IA,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:h,future:s})}const LA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_i=U.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:_,viewTransition:w}=e,R=SE(e,DA),{basename:C}=U.useContext(or),V,z=!1;if(typeof g=="string"&&UA.test(g)&&(V=g,LA))try{let Z=new URL(window.location.href),ne=g.startsWith("//")?new URL(Z.protocol+g):new URL(g),se=ro(ne.pathname,C);ne.origin===Z.origin&&se!=null?g=se+ne.search+ne.hash:z=!0}catch{}let M=lA(g,{relative:o}),Y=BA(g,{replace:h,state:m,target:p,preventScrollReset:_,relative:o,viewTransition:w});function X(Z){s&&s(Z),Z.defaultPrevented||Y(Z)}return U.createElement("a",oh({},R,{href:V||M,onClick:z||u?s:X,ref:n,target:p}))}),L_=U.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:u="",end:h=!1,style:m,to:p,viewTransition:g,children:_}=e,w=SE(e,OA),R=xh(p,{relative:w.relative}),C=_o(),V=U.useContext(yE),{navigator:z,basename:M}=U.useContext(or),Y=V!=null&&zA(R)&&g===!0,X=z.encodeLocation?z.encodeLocation(R).pathname:R.pathname,Z=C.pathname,ne=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;o||(Z=Z.toLowerCase(),ne=ne?ne.toLowerCase():null,X=X.toLowerCase()),ne&&M&&(ne=ro(ne,M)||ne);const se=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let he=Z===X||!h&&Z.startsWith(X)&&Z.charAt(se)==="/",O=ne!=null&&(ne===X||!h&&ne.startsWith(X)&&ne.charAt(X.length)==="/"),A={isActive:he,isPending:O,isTransitioning:Y},x=he?s:void 0,I;typeof u=="function"?I=u(A):I=[u,he?"active":null,O?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let k=typeof m=="function"?m(A):m;return U.createElement(_i,oh({},w,{"aria-current":x,className:I,ref:n,style:k,to:p,viewTransition:g}),typeof _=="function"?_(A):_)});var xm;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var U_;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(U_||(U_={}));function jA(r){let e=U.useContext(Rh);return e||at(!1),e}function BA(r,e){let{target:n,replace:s,state:o,preventScrollReset:u,relative:h,viewTransition:m}=e===void 0?{}:e,p=lr(),g=_o(),_=xh(r,{relative:h});return U.useCallback(w=>{if(NA(w,n)){w.preventDefault();let R=s!==void 0?s:ah(g)===ah(_);p(r,{replace:R,state:o,preventScrollReset:u,relative:h,viewTransition:m})}},[g,p,_,s,o,n,r,u,h,m])}function zA(r,e){e===void 0&&(e={});let n=U.useContext(kA);n==null&&at(!1);let{basename:s}=jA(xm.useViewTransitionState),o=xh(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=ro(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=ro(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Rm(o.pathname,h)!=null||Rm(o.pathname,u)!=null}var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},qA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},RE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=u>>2,w=(u&3)<<4|m>>4;let R=(m&15)<<2|g>>6,C=g&63;p||(C=64,h||(R=64)),s.push(n[_],n[w],n[R],n[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(AE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new HA;const R=u<<2|m>>4;if(s.push(R),g!==64){const C=m<<4&240|g>>2;if(s.push(C),w!==64){const V=g<<6&192|w;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class HA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FA=function(r){const e=AE(r);return RE.encodeByteArray(e,!0)},lh=function(r){return FA(r).replace(/\./g,"")},IE=function(r){try{return RE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=()=>GA().__FIREBASE_DEFAULTS__,QA=()=>{if(typeof process>"u"||typeof j_>"u")return;const r=j_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&IE(r[1]);return e&&JSON.parse(e)},Ch=()=>{try{return KA()||QA()||YA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xE=r=>{var e,n;return(n=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},XA=r=>{const e=xE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},CE=()=>{var r;return(r=Ch())===null||r===void 0?void 0:r.config},NE=r=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[lh(JSON.stringify(n)),lh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function JA(){var r;const e=(r=Ch())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rR(){return!JA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class bi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=oR,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?lR(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new bi(o,m,s)}}function lR(r,e){return r.replace(uR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const uR=/\{\$([^}]+)}/g;function cR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function so(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(B_(u)&&B_(h)){if(!so(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function B_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ul(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function jl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function hR(r,e){const n=new fR(r,e);return n.subscribe.bind(n)}class fR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dR(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(r){return r&&r._delegate?r._delegate:r}class Xr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $A;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(r){return r===qs?void 0:r}function gR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const vR={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},_R=Me.INFO,ER={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},TR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ER[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=TR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const wR=(r,e)=>e.some(n=>r instanceof n);let z_,q_;function bR(){return z_||(z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SR(){return q_||(q_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DE=new WeakMap,Cm=new WeakMap,OE=new WeakMap,hm=new WeakMap,op=new WeakMap;function AR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(Kr(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&DE.set(n,r)}).catch(()=>{}),op.set(e,r),e}function RR(r){if(Cm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Cm.set(r,e)}let Nm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Cm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||OE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function IR(r){Nm=r(Nm)}function xR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(fm(this),e,...n);return OE.set(s,e.sort?e.sort():[e]),Kr(s)}:SR().includes(r)?function(...e){return r.apply(fm(this),e),Kr(DE.get(this))}:function(...e){return Kr(r.apply(fm(this),e))}}function CR(r){return typeof r=="function"?xR(r):(r instanceof IDBTransaction&&RR(r),wR(r,bR())?new Proxy(r,Nm):r)}function Kr(r){if(r instanceof IDBRequest)return AR(r);if(hm.has(r))return hm.get(r);const e=CR(r);return e!==r&&(hm.set(r,e),op.set(e,r)),e}const fm=r=>op.get(r);function NR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=Kr(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Kr(h.result),p.oldVersion,p.newVersion,Kr(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const DR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],dm=new Map;function H_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=OR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||DR.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return dm.set(e,u),u}IR(r=>({...r,get:(e,n,s)=>H_(e,n)||r.get(e,n,s),has:(e,n)=>!!H_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kR(r){const e=r.getComponent();return e?.type==="VERSION"}const Dm="@firebase/app",F_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new ap("@firebase/app"),VR="@firebase/app-compat",PR="@firebase/analytics-compat",LR="@firebase/analytics",UR="@firebase/app-check-compat",jR="@firebase/app-check",BR="@firebase/auth",zR="@firebase/auth-compat",qR="@firebase/database",HR="@firebase/data-connect",FR="@firebase/database-compat",GR="@firebase/functions",KR="@firebase/functions-compat",QR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",$R="@firebase/messaging-compat",WR="@firebase/performance",ZR="@firebase/performance-compat",JR="@firebase/remote-config",e1="@firebase/remote-config-compat",t1="@firebase/storage",n1="@firebase/storage-compat",i1="@firebase/firestore",r1="@firebase/vertexai-preview",s1="@firebase/firestore-compat",a1="firebase",o1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",l1={[Dm]:"fire-core",[VR]:"fire-core-compat",[LR]:"fire-analytics",[PR]:"fire-analytics-compat",[jR]:"fire-app-check",[UR]:"fire-app-check-compat",[BR]:"fire-auth",[zR]:"fire-auth-compat",[qR]:"fire-rtdb",[HR]:"fire-data-connect",[FR]:"fire-rtdb-compat",[GR]:"fire-fn",[KR]:"fire-fn-compat",[QR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[$R]:"fire-fcm-compat",[WR]:"fire-perf",[ZR]:"fire-perf-compat",[JR]:"fire-rc",[e1]:"fire-rc-compat",[t1]:"fire-gcs",[n1]:"fire-gcs-compat",[i1]:"fire-fst",[s1]:"fire-fst-compat",[r1]:"fire-vertex","fire-js":"fire-js",[a1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,u1=new Map,Mm=new Map;function G_(r,e){try{r.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ys(r){const e=r.name;if(Mm.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,r);for(const n of uh.values())G_(n,r);for(const n of u1.values())G_(n,r);return!0}function lp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new au("app","Firebase",c1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=o1;function ME(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Om,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Qr.create("bad-app-name",{appName:String(o)});if(n||(n=CE()),!n)throw Qr.create("no-options");const u=uh.get(o);if(u){if(so(n,u.options)&&so(s,u.config))return u;throw Qr.create("duplicate-app",{appName:o})}const h=new yR(o);for(const p of Mm.values())h.addComponent(p);const m=new h1(n,s,h);return uh.set(o,m),m}function kE(r=Om){const e=uh.get(r);if(!e&&r===Om&&CE())return ME();if(!e)throw Qr.create("no-app",{appName:r});return e}function mi(r,e,n){var s;let o=(s=l1[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(m.join(" "));return}Ys(new Xr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebase-heartbeat-database",d1=1,Wl="firebase-heartbeat-store";let mm=null;function VE(){return mm||(mm=NR(f1,d1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Qr.create("idb-open",{originalErrorMessage:r.message})})),mm}async function m1(r){try{const n=(await VE()).transaction(Wl),s=await n.objectStore(Wl).get(PE(r));return await n.done,s}catch(e){if(e instanceof bi)nr.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e?.message});nr.warn(n.message)}}}async function K_(r,e){try{const s=(await VE()).transaction(Wl,"readwrite");await s.objectStore(Wl).put(e,PE(r)),await s.done}catch(n){if(n instanceof bi)nr.warn(n.message);else{const s=Qr.create("idb-set",{originalErrorMessage:n?.message});nr.warn(s.message)}}}function PE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=1024,g1=720*60*60*1e3;class y1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Q_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=g1}),this._storage.overwrite(this._heartbeatsCache))}catch(s){nr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q_(),{heartbeatsToSend:s,unsentEntries:o}=v1(this._heartbeatsCache.heartbeats),u=lh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return nr.warn(n),""}}}function Q_(){return new Date().toISOString().substring(0,10)}function v1(r,e=p1){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Y_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Y_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sR()?aR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Y_(r){return lh(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){Ys(new Xr("platform-logger",e=>new MR(e),"PRIVATE")),Ys(new Xr("heartbeat",e=>new y1(e),"PRIVATE")),mi(Dm,F_,r),mi(Dm,F_,"esm2017"),mi("fire-js","")}E1("");function up(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T1=LE,UE=new au("auth","Firebase",LE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new ap("@firebase/auth");function w1(r,...e){ch.logLevel<=Me.WARN&&ch.warn(`Auth (${ea}): ${r}`,...e)}function $c(r,...e){ch.logLevel<=Me.ERROR&&ch.error(`Auth (${ea}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,...e){throw hp(r,...e)}function Yn(r,...e){return hp(r,...e)}function cp(r,e,n){const s=Object.assign(Object.assign({},T1()),{[e]:n});return new au("auth","Firebase",s).create(e,{appName:r.name})}function pi(r){return cp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jE(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Bn(r,"argument-error"),cp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return UE.create(r,...e)}function Te(r,e,...n){if(!r)throw hp(e,...n)}function Zi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $c(e),new Error(e)}function ir(r,e){r||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function b1(){return X_()==="http:"||X_()==="https:"}function X_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b1()||tR()||"connection"in navigator)?navigator.onLine:!0}function A1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||nR()}get(){return S1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(r,e){ir(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new lu(3e4,6e4);function es(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ts(r,e,n,s,o={}){return zE(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=ou(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return eR()||(g.referrerPolicy="no-referrer"),BE.fetch()(qE(r,r.config.apiHost,n,m),g)})}async function zE(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},R1),e);try{const o=new C1(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw qc(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw qc(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw qc(r,"user-disabled",h);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw cp(r,_,g);Bn(r,_)}}catch(o){if(o instanceof bi)throw o;Bn(r,"network-request-failed",{message:String(o)})}}async function uu(r,e,n,s,o={}){const u=await ts(r,e,n,s,o);return"mfaPendingCredential"in u&&Bn(r,"multi-factor-auth-required",{_serverResponse:u}),u}function qE(r,e,n,s){const o=`${e}${n}?${s}`;return r.config.emulator?fp(r.config,o):`${r.config.apiScheme}://${o}`}function x1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),I1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Yn(r,e,s);return o.customData._tokenResponse=n,o}function $_(r){return r!==void 0&&r.enterprise!==void 0}class N1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function D1(r,e){return ts(r,"GET","/v2/recaptchaConfig",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e){return ts(r,"POST","/v1/accounts:delete",e)}async function HE(r,e){return ts(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M1(r,e=!1){const n=bt(r),s=await n.getIdToken(e),o=dp(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Fl(pm(o.auth_time)),issuedAtTime:Fl(pm(o.iat)),expirationTime:Fl(pm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function pm(r){return Number(r)*1e3}function dp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=IE(n);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o?.toString()),null}}function W_(r){const e=dp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof bi&&k1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function k1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Zl(r,HE(n,{idToken:s}));Te(o?.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?FE(u.providerUserInfo):[],m=L1(r.providerData,h),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!m?.length,_=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Vm(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function P1(r){const e=bt(r);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function FE(r){return r.map(e=>{var{providerId:n}=e,s=up(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(r,e){const n=await zE(r,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=qE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",BE.fetch()(h,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j1(r,e){return ts(r,"POST","/v2/accounts:revokeToken",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=W_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await U1(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new eo;return s&&(Te(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ji{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Vm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M1(this,e)}reload(){return P1(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await Zl(this,O1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,h,m,p,g,_;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,R=(o=n.email)!==null&&o!==void 0?o:void 0,C=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,V=(h=n.photoURL)!==null&&h!==void 0?h:void 0,z=(m=n.tenantId)!==null&&m!==void 0?m:void 0,M=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,X=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:ne,isAnonymous:se,providerData:he,stsTokenManager:O}=n;Te(Z&&O,e,"internal-error");const A=eo.fromJSON(this.name,O);Te(typeof Z=="string",e,"internal-error"),jr(w,e.name),jr(R,e.name),Te(typeof ne=="boolean",e,"internal-error"),Te(typeof se=="boolean",e,"internal-error"),jr(C,e.name),jr(V,e.name),jr(z,e.name),jr(M,e.name),jr(Y,e.name),jr(X,e.name);const x=new Ji({uid:Z,auth:e,email:R,emailVerified:ne,displayName:w,isAnonymous:se,photoURL:V,phoneNumber:C,tenantId:z,stsTokenManager:A,createdAt:Y,lastLoginAt:X});return he&&Array.isArray(he)&&(x.providerData=he.map(I=>Object.assign({},I))),M&&(x._redirectEventId=M),x}static async _fromIdTokenResponse(e,n,s=!1){const o=new eo;o.updateFromServerResponse(n);const u=new Ji({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await hh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?FE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new eo;m.updateFromIdToken(s);const p=new Ji({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map;function er(r){ir(r instanceof Function,"Expected a class definition");let e=Z_.get(r);return e?(ir(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Z_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GE.type="NONE";const Pm=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(r,e,n){return`firebase:${r}:${e}:${n}`}class to{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Wc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Wc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ji._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new to(er(Pm),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||er(Pm);const h=Wc(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const _=await g._get(h);if(_){const w=Ji._fromJSON(e,_);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new to(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new to(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WE(e))return"Blackberry";if(ZE(e))return"Webos";if(QE(e))return"Safari";if((e.includes("chrome/")||YE(e))&&!e.includes("edge/"))return"Chrome";if($E(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function KE(r=en()){return/firefox\//i.test(r)}function QE(r=en()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YE(r=en()){return/crios\//i.test(r)}function XE(r=en()){return/iemobile/i.test(r)}function $E(r=en()){return/android/i.test(r)}function WE(r=en()){return/blackberry/i.test(r)}function ZE(r=en()){return/webos/i.test(r)}function mp(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function B1(r=en()){var e;return mp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function z1(){return iR()&&document.documentMode===10}function JE(r=en()){return mp(r)||$E(r)||ZE(r)||WE(r)||/windows phone/i.test(r)||XE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(r,e=[]){let n;switch(r){case"Browser":n=J_(en());break;case"Worker":n=`${J_(en())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r,e={}){return ts(r,"GET","/v2/passwordPolicy",es(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=6;class G1{constructor(e){var n,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:F1,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,h,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e0(this),this.idTokenSubscription=new e0(this),this.beforeStateQueue=new q1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await to.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await HE(this,{idToken:e}),s=await Ji._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&p?.user&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(pi(this));const n=e?bt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H1(this),n=new G1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await j1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&er(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&w1(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ur(r){return bt(r)}class e0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q1(r){Nh=r}function tT(r){return Nh.loadJS(r)}function Y1(){return Nh.recaptchaEnterpriseScript}function X1(){return Nh.gapiScript}function $1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const W1="recaptcha-enterprise",Z1="NO_RECAPTCHA";class J1{constructor(e){this.type=W1,this.auth=ur(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{D1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new N1(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;$_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(Z1)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&$_(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Y1();p.length!==0&&(p+=m),tT(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function t0(r,e,n,s=!1){const o=new J1(r);let u;try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h=Object.assign({},e);return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Lm(r,e,n,s){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await t0(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await t0(r,e,n,n==="getOobCode");return s(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(r,e){const n=lp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(so(u,e??{}))return o;Bn(o,"already-initialized")}return n.initialize({options:e})}function tI(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(er);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function nI(r,e,n){const s=ur(r);Te(s._canInitEmulator,s,"emulator-config-failed"),Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=nT(e),{host:h,port:m}=iI(e),p=m===null?"":`:${m}`;s.config.emulator={url:`${u}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),rI()}function nT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function iI(r){const e=nT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:n0(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:n0(h)}}}function n0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function rI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,n){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function sI(r,e){return ts(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(r,e){return uu(r,"POST","/v1/accounts:signInWithPassword",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(r,e){return uu(r,"POST","/v1/accounts:signInWithEmailLink",es(r,e))}async function lI(r,e){return uu(r,"POST","/v1/accounts:signInWithEmailLink",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends pp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Jl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,n,"signInWithPassword",aI);case"emailLink":return oI(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,s,"signUpPassword",sI);case"emailLink":return lI(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r,e){return uu(r,"POST","/v1/accounts:signInWithIdp",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="http://localhost";class Xs extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=up(n,["providerId","signInMethod"]);if(!s||!o)return null;const h=new Xs(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return no(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,no(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,no(e,n)}buildRequest(){const e={requestUri:uI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hI(r){const e=Ul(jl(r)).link,n=e?Ul(jl(e)).deep_link_id:null,s=Ul(jl(r)).deep_link_id;return(s?Ul(jl(s)).link:null)||s||n||e||r}class gp{constructor(e){var n,s,o,u,h,m;const p=Ul(jl(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,w=cI((o=p.mode)!==null&&o!==void 0?o:null);Te(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=hI(e);try{return new gp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=gp.parseLink(n);return Te(s,"argument-error"),Jl._fromEmailAndCode(e,s.code,s.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Dh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends cu{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Wi.credential(n,s)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends cu{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends cu{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return qr.credential(n,s)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r,e){return uu(r,"POST","/v1/accounts:signUp",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Ji._fromIdTokenResponse(e,s,o),h=i0(s);return new $s({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=i0(s);return new $s({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function i0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends bi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new fh(e,n,s,o)}}function iT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,u,e,s):u})}async function dI(r,e,n=!1){const s=await Zl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return $s._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(pi(s));const o="reauthenticate";try{const u=await Zl(r,iT(s,o,e,r),n);Te(u.idToken,s,"internal-error");const h=dp(u.idToken);Te(h,s,"internal-error");const{sub:m}=h;return Te(r.uid===m,s,"user-mismatch"),$s._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Bn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(r,e,n=!1){if(jn(r.app))return Promise.reject(pi(r));const s="signIn",o=await iT(r,s,e),u=await $s._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function pI(r,e){return rT(ur(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(r){const e=ur(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gI(r,e,n){if(jn(r.app))return Promise.reject(pi(r));const s=ur(r),h=await Lm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fI).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&sT(r),p}),m=await $s._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function yI(r,e,n){return jn(r.app)?Promise.reject(pi(r)):pI(bt(r),Eo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&sT(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(r,e){return bt(r).setPersistence(e)}function vI(r,e,n,s){return bt(r).onIdTokenChanged(e,n,s)}function _I(r,e,n){return bt(r).beforeAuthStateChanged(e,n)}function aT(r,e,n,s){return bt(r).onAuthStateChanged(e,n,s)}function oT(r){return bt(r).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=1e3,TI=10;class uT extends lT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);z1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},EI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uT.type="LOCAL";const cT=uT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends lT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hT.type="SESSION";const yp=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await wI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=vp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(w){const R=w;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function SI(r){gi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function AI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RI(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function II(){return fT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebaseLocalStorageDb",xI=1,mh="firebaseLocalStorage",mT="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(r,e){return r.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function CI(){const r=indexedDB.deleteDatabase(dT);return new hu(r).toPromise()}function Um(){const r=indexedDB.open(dT,xI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mh,{keyPath:mT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mh)?e(s):(s.close(),await CI(),e(await Um()))})})}async function r0(r,e,n){const s=Mh(r,!0).put({[mT]:e,value:n});return new hu(s).toPromise()}async function NI(r,e){const n=Mh(r,!1).get(e),s=await new hu(n).toPromise();return s===void 0?null:s.value}function s0(r,e){const n=Mh(r,!0).delete(e);return new hu(n).toPromise()}const DI=800,OI=3;class pT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>OI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(II()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AI(),!this.activeServiceWorker)return;this.sender=new bI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await r0(e,dh,"1"),await s0(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>r0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>NI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Mh(o,!1).getAll();return new hu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pT.type="LOCAL";const MI=pT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(r,e){return e?er(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,n){return no(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kI(r){return rT(r.auth,new Ep(r),r.bypassAuthState)}function VI(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),mI(n,new Ep(r),r.bypassAuthState)}async function PI(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),dI(n,new Ep(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kI;case"linkViaPopup":case"linkViaRedirect":return PI;case"reauthViaPopup":case"reauthViaRedirect":return VI;default:Bn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new lu(2e3,1e4);async function yT(r,e,n){if(jn(r.app))return Promise.reject(Yn(r,"operation-not-supported-in-this-environment"));const s=ur(r);jE(r,e,Dh);const o=_p(s,n);return new Fs(s,"signInViaPopup",e,o).executeNotNull()}class Fs extends gT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LI.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="pendingRedirect",Zc=new Map;class jI extends gT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const s=await BI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BI(r,e){const n=_T(e),s=vT(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}async function zI(r,e){return vT(r)._set(_T(e),"true")}function qI(r,e){Zc.set(r._key(),e)}function vT(r){return er(r._redirectPersistence)}function _T(r){return Wc(UI,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(r,e,n){return HI(r,e,n)}async function HI(r,e,n){if(jn(r.app))return Promise.reject(pi(r));const s=ur(r);jE(r,e,Dh),await s._initializationPromise;const o=_p(s,n);return await zI(o,s),o._openRedirect(s,e,"signInViaRedirect")}async function FI(r,e,n=!1){if(jn(r.app))return Promise.reject(pi(r));const s=ur(r),o=_p(s,e),h=await new jI(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=600*1e3;class KI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!TT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GI&&this.cachedEventUids.clear(),this.cachedEventUids.has(a0(e))}saveEventToCache(e){this.cachedEventUids.add(a0(e)),this.lastProcessedEventTime=Date.now()}}function a0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function TT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function QI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(r,e={}){return ts(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$I=/^https?/;async function WI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await YI(r);for(const n of e)try{if(ZI(n))return}catch{}Bn(r,"unauthorized-domain")}function ZI(r){const e=km(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!$I.test(n))return!1;if(XI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new lu(3e4,6e4);function o0(){const r=gi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function ex(r){return new Promise((e,n)=>{var s,o,u;function h(){o0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o0(),n(Yn(r,"network-request-failed"))},timeout:JI.get()})}if(!((o=(s=gi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=gi().gapi)===null||u===void 0)&&u.load)h();else{const m=$1("iframefcb");return gi()[m]=()=>{gapi.load?h():n(Yn(r,"network-request-failed"))},tT(`${X1()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function tx(r){return Jc=Jc||ex(r),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new lu(5e3,15e3),ix="__/auth/iframe",rx="emulator/auth/iframe",sx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ox(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?fp(e,rx):`https://${r.config.authDomain}/${ix}`,s={apiKey:e.apiKey,appName:r.name,v:ea},o=ax.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function lx(r){const e=await tx(r),n=gi().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:ox(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Yn(r,"network-request-failed"),m=gi().setTimeout(()=>{u(h)},nx.get());function p(){gi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cx=500,hx=600,fx="_blank",dx="http://localhost";class l0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mx(r,e,n,s=cx,o=hx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},ux),{width:s.toString(),height:o.toString(),top:u,left:h}),g=en().toLowerCase();n&&(m=YE(g)?fx:n),KE(g)&&(e=e||dx,p.scrollbars="yes");const _=Object.entries(p).reduce((R,[C,V])=>`${R}${C}=${V},`,"");if(B1(g)&&m!=="_self")return px(e||"",m),new l0(null);const w=window.open(e||"",m,_);Te(w,r,"popup-blocked");try{w.focus()}catch{}return new l0(w)}function px(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="__/auth/handler",yx="emulator/auth/handler",vx=encodeURIComponent("fac");async function u0(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ea,eventId:o};if(e instanceof Dh){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",cR(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof cu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const p=await r._getAppCheckToken(),g=p?`#${vx}=${encodeURIComponent(p)}`:"";return`${_x(r)}?${ou(m).slice(1)}${g}`}function _x({config:r}){return r.emulator?fp(r,yx):`https://${r.authDomain}/${gx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class Ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yp,this._completeRedirectFn=FI,this._overrideRedirectResult=qI}async _openPopup(e,n,s,o){var u;ir((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await u0(e,n,s,km(),o);return mx(e,h,vp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await u0(e,n,s,km(),o);return SI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ir(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await lx(e),s=new KI(e);return n.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},o=>{var u;const h=(u=o?.[0])===null||u===void 0?void 0:u[ym];h!==void 0&&n(!!h),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JE()||QE()||mp()}}const Tx=Ex;var c0="@firebase/auth",h0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sx(r){Ys(new Xr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Te(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eT(r)},g=new K1(s,o,u,p);return tI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ys(new Xr("auth-internal",e=>{const n=ur(e.getProvider("auth").getImmediate());return(s=>new wx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(c0,h0,bx(r)),mi(c0,h0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=300,Rx=NE("authIdTokenMaxAge")||Ax;let f0=null;const Ix=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Rx)return;const o=n?.token;f0!==o&&(f0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Tp(r=kE()){const e=lp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=eI(r,{popupRedirectResolver:Tx,persistence:[MI,cT,yp]}),s=NE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=Ix(u.toString());_I(n,h,()=>h(n.currentUser)),vI(n,m=>h(m))}}const o=xE("auth");return o&&nI(n,`http://${o}`),n}function xx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Q1({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Yn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",xx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sx("Browser");var Cx="firebase",Nx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(Cx,Nx,"app");var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,wT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,A){function x(){}x.prototype=A.prototype,O.D=A.prototype,O.prototype=new x,O.prototype.constructor=O,O.C=function(I,k,j){for(var N=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)N[ze-2]=arguments[ze];return A.prototype[k].apply(I,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,A,x){x||(x=0);var I=Array(16);if(typeof A=="string")for(var k=0;16>k;++k)I[k]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(k=0;16>k;++k)I[k]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=O.g[0],x=O.g[1],k=O.g[2];var j=O.g[3],N=A+(j^x&(k^j))+I[0]+3614090360&4294967295;A=x+(N<<7&4294967295|N>>>25),N=j+(k^A&(x^k))+I[1]+3905402710&4294967295,j=A+(N<<12&4294967295|N>>>20),N=k+(x^j&(A^x))+I[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(A^k&(j^A))+I[3]+3250441966&4294967295,x=k+(N<<22&4294967295|N>>>10),N=A+(j^x&(k^j))+I[4]+4118548399&4294967295,A=x+(N<<7&4294967295|N>>>25),N=j+(k^A&(x^k))+I[5]+1200080426&4294967295,j=A+(N<<12&4294967295|N>>>20),N=k+(x^j&(A^x))+I[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(A^k&(j^A))+I[7]+4249261313&4294967295,x=k+(N<<22&4294967295|N>>>10),N=A+(j^x&(k^j))+I[8]+1770035416&4294967295,A=x+(N<<7&4294967295|N>>>25),N=j+(k^A&(x^k))+I[9]+2336552879&4294967295,j=A+(N<<12&4294967295|N>>>20),N=k+(x^j&(A^x))+I[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(A^k&(j^A))+I[11]+2304563134&4294967295,x=k+(N<<22&4294967295|N>>>10),N=A+(j^x&(k^j))+I[12]+1804603682&4294967295,A=x+(N<<7&4294967295|N>>>25),N=j+(k^A&(x^k))+I[13]+4254626195&4294967295,j=A+(N<<12&4294967295|N>>>20),N=k+(x^j&(A^x))+I[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(A^k&(j^A))+I[15]+1236535329&4294967295,x=k+(N<<22&4294967295|N>>>10),N=A+(k^j&(x^k))+I[1]+4129170786&4294967295,A=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(A^x))+I[6]+3225465664&4294967295,j=A+(N<<9&4294967295|N>>>23),N=k+(A^x&(j^A))+I[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^A&(k^j))+I[0]+3921069994&4294967295,x=k+(N<<20&4294967295|N>>>12),N=A+(k^j&(x^k))+I[5]+3593408605&4294967295,A=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(A^x))+I[10]+38016083&4294967295,j=A+(N<<9&4294967295|N>>>23),N=k+(A^x&(j^A))+I[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^A&(k^j))+I[4]+3889429448&4294967295,x=k+(N<<20&4294967295|N>>>12),N=A+(k^j&(x^k))+I[9]+568446438&4294967295,A=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(A^x))+I[14]+3275163606&4294967295,j=A+(N<<9&4294967295|N>>>23),N=k+(A^x&(j^A))+I[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^A&(k^j))+I[8]+1163531501&4294967295,x=k+(N<<20&4294967295|N>>>12),N=A+(k^j&(x^k))+I[13]+2850285829&4294967295,A=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(A^x))+I[2]+4243563512&4294967295,j=A+(N<<9&4294967295|N>>>23),N=k+(A^x&(j^A))+I[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^A&(k^j))+I[12]+2368359562&4294967295,x=k+(N<<20&4294967295|N>>>12),N=A+(x^k^j)+I[5]+4294588738&4294967295,A=x+(N<<4&4294967295|N>>>28),N=j+(A^x^k)+I[8]+2272392833&4294967295,j=A+(N<<11&4294967295|N>>>21),N=k+(j^A^x)+I[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^A)+I[14]+4259657740&4294967295,x=k+(N<<23&4294967295|N>>>9),N=A+(x^k^j)+I[1]+2763975236&4294967295,A=x+(N<<4&4294967295|N>>>28),N=j+(A^x^k)+I[4]+1272893353&4294967295,j=A+(N<<11&4294967295|N>>>21),N=k+(j^A^x)+I[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^A)+I[10]+3200236656&4294967295,x=k+(N<<23&4294967295|N>>>9),N=A+(x^k^j)+I[13]+681279174&4294967295,A=x+(N<<4&4294967295|N>>>28),N=j+(A^x^k)+I[0]+3936430074&4294967295,j=A+(N<<11&4294967295|N>>>21),N=k+(j^A^x)+I[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^A)+I[6]+76029189&4294967295,x=k+(N<<23&4294967295|N>>>9),N=A+(x^k^j)+I[9]+3654602809&4294967295,A=x+(N<<4&4294967295|N>>>28),N=j+(A^x^k)+I[12]+3873151461&4294967295,j=A+(N<<11&4294967295|N>>>21),N=k+(j^A^x)+I[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^A)+I[2]+3299628645&4294967295,x=k+(N<<23&4294967295|N>>>9),N=A+(k^(x|~j))+I[0]+4096336452&4294967295,A=x+(N<<6&4294967295|N>>>26),N=j+(x^(A|~k))+I[7]+1126891415&4294967295,j=A+(N<<10&4294967295|N>>>22),N=k+(A^(j|~x))+I[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~A))+I[5]+4237533241&4294967295,x=k+(N<<21&4294967295|N>>>11),N=A+(k^(x|~j))+I[12]+1700485571&4294967295,A=x+(N<<6&4294967295|N>>>26),N=j+(x^(A|~k))+I[3]+2399980690&4294967295,j=A+(N<<10&4294967295|N>>>22),N=k+(A^(j|~x))+I[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~A))+I[1]+2240044497&4294967295,x=k+(N<<21&4294967295|N>>>11),N=A+(k^(x|~j))+I[8]+1873313359&4294967295,A=x+(N<<6&4294967295|N>>>26),N=j+(x^(A|~k))+I[15]+4264355552&4294967295,j=A+(N<<10&4294967295|N>>>22),N=k+(A^(j|~x))+I[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~A))+I[13]+1309151649&4294967295,x=k+(N<<21&4294967295|N>>>11),N=A+(k^(x|~j))+I[4]+4149444226&4294967295,A=x+(N<<6&4294967295|N>>>26),N=j+(x^(A|~k))+I[11]+3174756917&4294967295,j=A+(N<<10&4294967295|N>>>22),N=k+(A^(j|~x))+I[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~A))+I[9]+3951481745&4294967295,O.g[0]=O.g[0]+A&4294967295,O.g[1]=O.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+j&4294967295}s.prototype.u=function(O,A){A===void 0&&(A=O.length);for(var x=A-this.blockSize,I=this.B,k=this.h,j=0;j<A;){if(k==0)for(;j<=x;)o(this,O,j),j+=this.blockSize;if(typeof O=="string"){for(;j<A;)if(I[k++]=O.charCodeAt(j++),k==this.blockSize){o(this,I),k=0;break}}else for(;j<A;)if(I[k++]=O[j++],k==this.blockSize){o(this,I),k=0;break}}this.h=k,this.o+=A},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var A=1;A<O.length-8;++A)O[A]=0;var x=8*this.o;for(A=O.length-8;A<O.length;++A)O[A]=x&255,x/=256;for(this.u(O),O=Array(16),A=x=0;4>A;++A)for(var I=0;32>I;I+=8)O[x++]=this.g[A]>>>I&255;return O};function u(O,A){var x=m;return Object.prototype.hasOwnProperty.call(x,O)?x[O]:x[O]=A(O)}function h(O,A){this.h=A;for(var x=[],I=!0,k=O.length-1;0<=k;k--){var j=O[k]|0;I&&j==A||(x[k]=j,I=!1)}this.g=x}var m={};function p(O){return-128<=O&&128>O?u(O,function(A){return new h([A|0],0>A?-1:0)}):new h([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return w;if(0>O)return M(g(-O));for(var A=[],x=1,I=0;O>=x;I++)A[I]=O/x|0,x*=4294967296;return new h(A,0)}function _(O,A){if(O.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(O.charAt(0)=="-")return M(_(O.substring(1),A));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(A,8)),I=w,k=0;k<O.length;k+=8){var j=Math.min(8,O.length-k),N=parseInt(O.substring(k,k+j),A);8>j?(j=g(Math.pow(A,j)),I=I.j(j).add(g(N))):(I=I.j(x),I=I.add(g(N)))}return I}var w=p(0),R=p(1),C=p(16777216);r=h.prototype,r.m=function(){if(z(this))return-M(this).m();for(var O=0,A=1,x=0;x<this.g.length;x++){var I=this.i(x);O+=(0<=I?I:4294967296+I)*A,A*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V(this))return"0";if(z(this))return"-"+M(this).toString(O);for(var A=g(Math.pow(O,6)),x=this,I="";;){var k=ne(x,A).g;x=Y(x,k.j(A));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(O);if(x=k,V(x))return j+I;for(;6>j.length;)j="0"+j;I=j+I}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function V(O){if(O.h!=0)return!1;for(var A=0;A<O.g.length;A++)if(O.g[A]!=0)return!1;return!0}function z(O){return O.h==-1}r.l=function(O){return O=Y(this,O),z(O)?-1:V(O)?0:1};function M(O){for(var A=O.g.length,x=[],I=0;I<A;I++)x[I]=~O.g[I];return new h(x,~O.h).add(R)}r.abs=function(){return z(this)?M(this):this},r.add=function(O){for(var A=Math.max(this.g.length,O.g.length),x=[],I=0,k=0;k<=A;k++){var j=I+(this.i(k)&65535)+(O.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);I=N>>>16,j&=65535,N&=65535,x[k]=N<<16|j}return new h(x,x[x.length-1]&-2147483648?-1:0)};function Y(O,A){return O.add(M(A))}r.j=function(O){if(V(this)||V(O))return w;if(z(this))return z(O)?M(this).j(M(O)):M(M(this).j(O));if(z(O))return M(this.j(M(O)));if(0>this.l(C)&&0>O.l(C))return g(this.m()*O.m());for(var A=this.g.length+O.g.length,x=[],I=0;I<2*A;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<O.g.length;k++){var j=this.i(I)>>>16,N=this.i(I)&65535,ze=O.i(k)>>>16,lt=O.i(k)&65535;x[2*I+2*k]+=N*lt,X(x,2*I+2*k),x[2*I+2*k+1]+=j*lt,X(x,2*I+2*k+1),x[2*I+2*k+1]+=N*ze,X(x,2*I+2*k+1),x[2*I+2*k+2]+=j*ze,X(x,2*I+2*k+2)}for(I=0;I<A;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=A;I<2*A;I++)x[I]=0;return new h(x,0)};function X(O,A){for(;(O[A]&65535)!=O[A];)O[A+1]+=O[A]>>>16,O[A]&=65535,A++}function Z(O,A){this.g=O,this.h=A}function ne(O,A){if(V(A))throw Error("division by zero");if(V(O))return new Z(w,w);if(z(O))return A=ne(M(O),A),new Z(M(A.g),M(A.h));if(z(A))return A=ne(O,M(A)),new Z(M(A.g),A.h);if(30<O.g.length){if(z(O)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var x=R,I=A;0>=I.l(O);)x=se(x),I=se(I);var k=he(x,1),j=he(I,1);for(I=he(I,2),x=he(x,2);!V(I);){var N=j.add(I);0>=N.l(O)&&(k=k.add(x),j=N),I=he(I,1),x=he(x,1)}return A=Y(O,k.j(A)),new Z(k,A)}for(k=w;0<=O.l(A);){for(x=Math.max(1,Math.floor(O.m()/A.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),j=g(x),N=j.j(A);z(N)||0<N.l(O);)x-=I,j=g(x),N=j.j(A);V(j)&&(j=R),k=k.add(j),O=Y(O,N)}return new Z(k,O)}r.A=function(O){return ne(this,O).h},r.and=function(O){for(var A=Math.max(this.g.length,O.g.length),x=[],I=0;I<A;I++)x[I]=this.i(I)&O.i(I);return new h(x,this.h&O.h)},r.or=function(O){for(var A=Math.max(this.g.length,O.g.length),x=[],I=0;I<A;I++)x[I]=this.i(I)|O.i(I);return new h(x,this.h|O.h)},r.xor=function(O){for(var A=Math.max(this.g.length,O.g.length),x=[],I=0;I<A;I++)x[I]=this.i(I)^O.i(I);return new h(x,this.h^O.h)};function se(O){for(var A=O.g.length+1,x=[],I=0;I<A;I++)x[I]=O.i(I)<<1|O.i(I-1)>>>31;return new h(x,O.h)}function he(O,A){var x=A>>5;A%=32;for(var I=O.g.length-x,k=[],j=0;j<I;j++)k[j]=0<A?O.i(j+x)>>>A|O.i(j+x+1)<<32-A:O.i(j+x);return new h(k,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,wT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,Qs=h}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bT,Bl,ST,eh,jm,AT,RT,IT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var q=c[S];if(!(q in v))break e;v=v[q]}c=c[c.length-1],S=v[c],y=y(S),y!=S&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,S=!1,q={next:function(){if(!S&&v<c.length){var Q=v++;return{value:y(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),c.apply(y,q)}}return function(){return c.apply(y,arguments)}}function R(c,y,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,R.apply(null,arguments)}function C(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function V(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,q,Q){for(var oe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)oe[ke-2]=arguments[ke];return y.prototype[q].apply(S,oe)}}function z(c){const y=c.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=c[S];return v}return[]}function M(c,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(p(S)){const q=c.length||0,Q=S.length||0;c.length=q+Q;for(let oe=0;oe<Q;oe++)c[q+oe]=S[oe]}else c.push(S)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var se=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function he(c,y,v){for(const S in c)y.call(v,c[S],S,c)}function O(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function A(c){const y={};for(const v in c)y[v]=c[v];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,y){let v,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(v in S)c[v]=S[v];for(let Q=0;Q<x.length;Q++)v=x[Q],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function k(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function j(c){m.setTimeout(()=>{throw c},0)}function N(){var c=qe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ze{constructor(){this.h=this.g=null}add(y,v){const S=lt.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var lt=new Y(()=>new $,c=>c.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,pe=!1,qe=new ze,P=()=>{const c=m.Promise.resolve(void 0);le=()=>{c.then(ie)}};var ie=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(v){j(v)}var y=lt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}pe=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c})();function xe(c,y){if(ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(se){e:{try{ne(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}V(xe,ae);var we={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),et=0;function Wn(c,y,v,S,q){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=q,this.key=++et,this.da=this.fa=!1}function cr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ai(c){this.src=c,this.g={},this.h=0}Ai.prototype.add=function(c,y,v,S,q){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var oe=ss(c,y,S,q);return-1<oe?(y=c[oe],v||(y.fa=!1)):(y=new Wn(y,this.src,Q,!!S,q),y.fa=v,c.push(y)),y};function rs(c,y){var v=y.type;if(v in c.g){var S=c.g[v],q=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(S,q,1),Q&&(cr(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ss(c,y,v,S){for(var q=0;q<c.length;++q){var Q=c[q];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==S)return q}return-1}var as="closure_lm_"+(1e6*Math.random()|0),Io={};function vu(c,y,v,S,q){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)vu(c,y[Q],v,S,q);return null}return v=_u(v),c&&c[Nt]?c.K(y,v,g(S)?!!S.capture:!1,q):Rn(c,y,v,!1,S,q)}function Rn(c,y,v,S,q,Q){if(!y)throw Error("Invalid event type");var oe=g(q)?!!q.capture:!!q,ke=aa(c);if(ke||(c[as]=ke=new Ai(c)),v=ke.add(y,v,S,oe,Q),v.proxy)return v;if(S=nf(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)ye||(q=oe),q===void 0&&(q=!1),c.addEventListener(y.toString(),S,q);else if(c.attachEvent)c.attachEvent(os(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function nf(){function c(v){return y.call(c.src,c.listener,v)}const y=rf;return c}function xo(c,y,v,S,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)xo(c,y[Q],v,S,q);else S=g(S)?!!S.capture:!!S,v=_u(v),c&&c[Nt]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],v=ss(Q,v,S,q),-1<v&&(cr(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=aa(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ss(y,v,S,q)),(v=-1<c?y[c]:null)&&sa(v))}function sa(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Nt])rs(y.i,c);else{var v=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(v,S,c.capture):y.detachEvent?y.detachEvent(os(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=aa(y))?(rs(v,c),v.h==0&&(v.src=null,y[as]=null)):cr(c)}}}function os(c){return c in Io?Io[c]:Io[c]="on"+c}function rf(c,y){if(c.da)c=!0;else{y=new xe(y,this);var v=c.listener,S=c.ha||c.src;c.fa&&sa(c),c=v.call(S,y)}return c}function aa(c){return c=c[as],c instanceof Ai?c:null}var Co="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(c){return typeof c=="function"?c:(c[Co]||(c[Co]=function(y){return c.handleEvent(y)}),c[Co])}function ut(){ue.call(this),this.i=new Ai(this),this.M=this,this.F=null}V(ut,ue),ut.prototype[Nt]=!0,ut.prototype.removeEventListener=function(c,y,v,S){xo(this,c,y,v,S)};function Ge(c,y){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new ae(y,c);else if(y instanceof ae)y.target=y.target||c;else{var q=y;y=new ae(S,c),I(y,q)}if(q=!0,v)for(var Q=v.length-1;0<=Q;Q--){var oe=y.g=v[Q];q=dn(oe,S,!0,y)&&q}if(oe=y.g=c,q=dn(oe,S,!0,y)&&q,q=dn(oe,S,!1,y)&&q,v)for(Q=0;Q<v.length;Q++)oe=y.g=v[Q],q=dn(oe,S,!1,y)&&q}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],S=0;S<v.length;S++)cr(v[S]);delete c.g[y],c.h--}}this.F=null},ut.prototype.K=function(c,y,v,S){return this.i.add(String(c),y,!1,v,S)},ut.prototype.L=function(c,y,v,S){return this.i.add(String(c),y,!0,v,S)};function dn(c,y,v,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Q=0;Q<y.length;++Q){var oe=y[Q];if(oe&&!oe.da&&oe.capture==v){var ke=oe.listener,At=oe.ha||oe.src;oe.fa&&rs(c.i,oe),q=ke.call(At,S)!==!1&&q}}return q&&!S.defaultPrevented}function Kt(c,y,v){if(typeof c=="function")v&&(c=R(c,v));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Eu(c){c.g=Kt(()=>{c.g=null,c.i&&(c.i=!1,Eu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class sf extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Eu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(c){ue.call(this),this.h=c,this.g={}}V(ls,ue);var us=[];function cs(c){he(c.g,function(y,v){this.g.hasOwnProperty(v)&&sa(y)},c),c.g={}}ls.prototype.N=function(){ls.aa.N.call(this),cs(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=m.JSON.stringify,oa=m.JSON.parse,hs=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function No(){}No.prototype.h=null;function Do(c){return c.h||(c.h=c.i())}function Oo(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){ae.call(this,"d")}V(Ii,ae);function Mo(){ae.call(this,"c")}V(Mo,ae);var Zn={},ko=null;function hr(){return ko=ko||new ut}Zn.La="serverreachability";function la(c){ae.call(this,Zn.La,c)}V(la,ae);function fr(c){const y=hr();Ge(y,new la(y))}Zn.STAT_EVENT="statevent";function Tu(c,y){ae.call(this,Zn.STAT_EVENT,c),this.stat=y}V(Tu,ae);function it(c){const y=hr();Ge(y,new Tu(y,c))}Zn.Ma="timingevent";function St(c,y){ae.call(this,Zn.Ma,c),this.size=y}V(St,ae);function yt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function Vo(c,y,v,S,q,Q){c.info(function(){if(c.g)if(Q)for(var oe="",ke=Q.split("&"),At=0;At<ke.length;At++){var Ve=ke[At].split("=");if(1<Ve.length){var Ot=Ve[0];Ve=Ve[1];var Rt=Ot.split("_");oe=2<=Rt.length&&Rt[1]=="type"?oe+(Ot+"="+Ve+"&"):oe+(Ot+"=redacted&")}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+v+`
`+oe})}function af(c,y,v,S,q,Q,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+v+`
`+Q+" "+oe})}function dr(c,y,v,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+fs(c,v)+(S?" "+S:"")})}function wu(c,y){c.info(function(){return"TIMEOUT: "+y})}In.prototype.info=function(){};function fs(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var oe=1;oe<q.length;oe++)q[oe]=""}}}}return zn(v)}catch{return y}}var mr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function ei(){}V(ei,No),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},Jn=new ei;function tn(c,y,v,S){this.j=c,this.i=y,this.l=v,this.R=S||1,this.U=new ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var Po={},ua={};function qn(c,y,v){c.L=1,c.v=ys(mn(y)),c.m=v,c.P=!0,Ci(c,null)}function Ci(c,y){c.F=Date.now(),ds(c),c.A=mn(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),qo(v.i,"t",S),c.C=0,v=c.j.J,c.h=new dt,c.g=Uu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new sf(R(c.Y,c,c.g),c.O)),y=c.U,v=c.g,S=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(us[0]=q.toString()),q=us);for(var Q=0;Q<q.length;Q++){var oe=vu(v,q[Q],S||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),fr(),Vo(c.i,c.u,c.A,c.l,c.R,c.m)}tn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Dn(c)==3?y.j():this.Y(c)},tn.prototype.Y=function(c){try{if(c==this.g)e:{const Rt=Dn(this.g);var y=this.g.Ba();const Li=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=Li?fr(3):fr(2)),pr(this);var v=this.g.Z();this.X=v;t:if(bu(this)){var S=Nu(this.g);c="";var q=S.length,Q=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),ti(this);var oe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(Q&&y==q-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,af(this.i,this.u,this.A,this.l,this.R,Rt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,At=this.g;if((ke=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(ke)){var Ve=ke;break t}}Ve=null}if(v=Ve)dr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,v);else{this.o=!1,this.s=3,it(12),Lt(this),ti(this);break e}}if(this.P){v=!0;let Ut;for(;!this.J&&this.C<oe.length;)if(Ut=Su(this,oe),Ut==ua){Rt==4&&(this.s=4,it(14),v=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Po){this.s=4,it(15),dr(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else dr(this.i,this.l,Ut,null),ms(this,Ut);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||oe.length!=0||this.h.h||(this.s=1,it(16),v=!1),this.o=this.o&&v,!v)dr(this.i,this.l,oe,"[Invalid Chunked Response]"),Lt(this),ti(this);else if(0<oe.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),As(Ot),Ot.M=!0,it(11))}}else dr(this.i,this.l,oe,null),ms(this,oe);Rt==4&&Lt(this),this.o&&!this.J&&(Rt==4?Vu(this.j,this):(this.o=!1,ds(this)))}else hf(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Lt(this),ti(this)}}}catch{}finally{}};function bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Su(c,y){var v=c.C,S=y.indexOf(`
`,v);return S==-1?ua:(v=Number(y.substring(v,S)),isNaN(v)?Po:(S+=1,S+v>y.length?ua:(y=y.slice(S,S+v),c.C=S+v,y)))}tn.prototype.cancel=function(){this.J=!0,Lt(this)};function ds(c){c.S=Date.now()+c.I,Au(c,c.I)}function Au(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yt(R(c.ba,c),y)}function pr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}tn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(wu(this.i,this.A),this.L!=2&&(fr(),it(17)),Lt(this),this.s=2,ti(this)):Au(this,this.S-c)};function ti(c){c.j.G==0||c.J||Vu(c.j,c)}function Lt(c){pr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,cs(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function ms(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Lo(v.h,c))){if(!c.K&&Lo(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ta(v),_a(v);else break e;Qo(v),it(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=yt(R(v.Za,v),6e3));if(1>=ha(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Pi(v,11)}else if((c.K||v.g==c)&&Ta(v),!X(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let Ve=q[y];if(v.T=Ve[0],Ve=Ve[1],v.G==2)if(Ve[0]=="c"){v.K=Ve[1],v.ia=Ve[2];const Ot=Ve[3];Ot!=null&&(v.la=Ot,v.j.info("VER="+v.la));const Rt=Ve[4];Rt!=null&&(v.Aa=Rt,v.j.info("SVER="+v.Aa));const Li=Ve[5];Li!=null&&typeof Li=="number"&&0<Li&&(S=1.5*Li,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Ut=c.g;if(Ut){const li=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(li){var Q=S.h;Q.g||li.indexOf("spdy")==-1&&li.indexOf("quic")==-1&&li.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(fa(Q,Q.h),Q.h=null))}if(S.D){const Xo=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(S.ya=Xo,Xe(S.I,S.D,Xo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var oe=c;if(S.qa=Lu(S,S.J?S.ia:null,S.W),oe.K){nn(S.h,oe);var ke=oe,At=S.L;At&&(ke.I=At),ke.B&&(pr(ke),ds(ke)),S.g=oe}else Mu(S);0<v.i.length&&Ea(v)}else Ve[0]!="stop"&&Ve[0]!="close"||Pi(v,7);else v.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Pi(v,7):Go(v):Ve[0]!="noop"&&v.l&&v.l.ta(Ve),v.v=0)}}fr(4)}catch{}}var Ru=class{constructor(c,y){this.g=c,this.map=y}};function Ni(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ha(c){return c.h?1:c.g?c.g.size:0}function Lo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function fa(c,y){c.g?c.g.add(y):c.h=y}function nn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ni.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return z(c.i)}function of(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,S=0;S<v;S++)y.push(c[S]);return y}y=[],v=0;for(S in c)y[v++]=c[S];return y}function da(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const S in c)y[v++]=S;return y}}}function jo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=da(c),S=of(c),q=S.length,Q=0;Q<q;Q++)y.call(void 0,S[Q],v&&v[Q],c)}var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),q=null;if(0<=S){var Q=c[v].substring(0,S);q=c[v].substring(S+1)}else Q=c[v];y(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function vt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vt){this.h=c.h,gs(this,c.j),this.o=c.o,this.g=c.g,gr(this,c.s),this.l=c.l;var y=c.i,v=new Oi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Di(this,v),this.m=c.m}else c&&(y=String(c).match(ps))?(this.h=!1,gs(this,y[1]||"",!0),this.o=xn(y[2]||""),this.g=xn(y[3]||"",!0),gr(this,y[4]),this.l=xn(y[5]||"",!0),Di(this,y[6]||"",!0),this.m=xn(y[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}vt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(vs(y,Bo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(vs(y,Bo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(vs(v,v.charAt(0)=="/"?uf:zo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",vs(v,ma)),c.join("")};function mn(c){return new vt(c)}function gs(c,y,v){c.j=v?xn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function gr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Di(c,y,v){y instanceof Oi?(c.i=y,xu(c.i,c.h)):(v||(y=vs(y,cf)),c.i=new Oi(y,c.h))}function Xe(c,y,v){c.i.set(y,v)}function ys(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Iu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Iu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bo=/[#\/\?@]/g,zo=/[#\?:]/g,uf=/[#\?]/g,cf=/[#\?@]/g,ma=/#/g;function Oi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Cn(c){c.g||(c.g=new Map,c.h=0,c.i&&lf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Oi.prototype,r.add=function(c,y){Cn(this),this.i=null,c=ni(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Mi(c,y){Cn(c),y=ni(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ki(c,y){return Cn(c),y=ni(c,y),c.g.has(y)}r.forEach=function(c,y){Cn(this),this.g.forEach(function(v,S){v.forEach(function(q){c.call(y,q,S,this)},this)},this)},r.na=function(){Cn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const q=c[S];for(let Q=0;Q<q.length;Q++)v.push(y[S])}return v},r.V=function(c){Cn(this);let y=[];if(typeof c=="string")ki(this,c)&&(y=y.concat(this.g.get(ni(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},r.set=function(c,y){return Cn(this),this.i=null,c=ni(this,c),ki(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function qo(c,y,v){Mi(c,y),0<v.length&&(c.i=null,c.g.set(ni(c,y),z(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Q=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var q=Q;oe[S]!==""&&(q+="="+encodeURIComponent(String(oe[S]))),c.push(q)}}return this.i=c.join("&")};function ni(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function xu(c,y){y&&!c.j&&(Cn(c),c.i=null,c.g.forEach(function(v,S){var q=S.toLowerCase();S!=q&&(Mi(this,S),qo(this,q,v))},c)),c.j=y}function _s(c,y){const v=new In;if(m.Image){const S=new Image;S.onload=C(Nn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=C(Nn,v,"TestLoadImage: error",!1,y,S),S.onabort=C(Nn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=C(Nn,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Hn(c,y){const v=new In,S=new AbortController,q=setTimeout(()=>{S.abort(),Nn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(q),Q.ok?Nn(v,"TestPingServer: ok",!0,y):Nn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Nn(v,"TestPingServer: error",!1,y)})}function Nn(c,y,v,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(v)}catch{}}function Es(){this.g=new hs}function ii(c,y,v){const S=v||"";try{jo(c,function(q,Q){let oe=q;g(q)&&(oe=zn(q)),y.push(S+Q+"="+encodeURIComponent(oe))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function yr(c){this.l=c.Ub||null,this.j=c.eb||!1}V(yr,No),yr.prototype.g=function(){return new Vi(this.l,this.j)},yr.prototype.i=(function(c){return function(){return c}})({});function Vi(c,y){ut.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Vi,ut),r=Vi.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,si(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ho(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ho(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?ri(this):si(this),this.readyState==3&&Ho(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ri(this))},r.Qa=function(c){this.g&&(this.response=c,ri(this))},r.ga=function(){this.g&&ri(this)};function ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,si(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function si(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fo(c){let y="";return he(c,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Dt(c,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Fo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Xe(c,y,v))}function Fe(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Fe,ut);var pa=/^https?$/i,Ts=["POST","PUT"];r=Fe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?Do(this.o):Do(Jn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){Cu(this,Q);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)v.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())v.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ts,y,void 0))||S||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of v)this.g.setRequestHeader(Q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ws(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){Cu(this,Q)}};function Cu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ga(c),ai(c)}function ga(c){c.A||(c.A=!0,Ge(c,"complete"),Ge(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ge(this,"complete"),Ge(this,"abort"),ai(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Fe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},r.bb=function(){ya(this)};function ya(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Dn(c)!=4||c.Z()!=2)){if(c.u&&Dn(c)==4)Kt(c.Ea,0,c);else if(Ge(c,"readystatechange"),Dn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=oe===0){var q=String(c.D).match(ps)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),S=!pa.test(q?q.toLowerCase():"")}v=S}if(v)Ge(c,"complete"),Ge(c,"success");else{c.m=6;try{var Q=2<Dn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",ga(c)}}finally{ai(c)}}}}function ai(c,y){if(c.g){ws(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ge(c,"ready");try{v.onreadystatechange=S}catch{}}}function ws(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Dn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),oa(y)}};function Nu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function hf(c){const y={};c=(c.g&&2<=Dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(X(c[S]))continue;var v=k(c[S]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[q]||[];y[q]=Q,Q.push(v)}O(y,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function va(c){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,c),this.cb=bs("retryDelaySeedMs",1e4,c),this.Wa=bs("forwardChannelMaxRetries",2,c),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(c&&c.concurrentRequestLimit),this.Da=new Es,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=va.prototype,r.la=8,r.G=1,r.connect=function(c,y,v,S){it(0),this.W=c,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Lu(this,null,this.W),Ea(this)};function Go(c){if(Du(c),c.G==3){var y=c.U++,v=mn(c.I);if(Xe(v,"SID",c.K),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Ss(c,v),y=new tn(c,c.j,y),y.L=2,y.v=ys(mn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Uu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ds(y)}Pu(c)}function _a(c){c.g&&(As(c),c.g.cancel(),c.g=null)}function Du(c){_a(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ta(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ea(c){if(!ca(c.h)&&!c.s){c.s=!0;var y=c.Ga;le||P(),pe||(le(),pe=!0),qe.add(y,c),c.B=0}}function ff(c,y){return ha(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yt(R(c.Ga,c,y),Yo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new tn(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=A(Q),I(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Ou(this,q,y),v=mn(this.I),Xe(v,"RID",c),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),Ss(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String(Fo(Q)))+"&"+y:this.m&&Dt(v,this.m,Q)),fa(this.h,q),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",y),Xe(v,"SID","null"),q.T=!0,qn(q,v,null)):qn(q,v,y),this.G=2}}else this.G==3&&(c?Ko(this,c):this.i.length==0||ca(this.h)||Ko(this))};function Ko(c,y){var v;y?v=y.l:v=c.U++;const S=mn(c.I);Xe(S,"SID",c.K),Xe(S,"RID",v),Xe(S,"AID",c.T),Ss(c,S),c.m&&c.o&&Dt(S,c.m,c.o),v=new tn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Ou(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fa(c.h,v),qn(v,S,y)}function Ss(c,y){c.H&&he(c.H,function(v,S){Xe(y,S,v)}),c.l&&jo({},function(v,S){Xe(y,S,v)})}function Ou(c,y,v){v=Math.min(c.i.length,v);var S=c.l?R(c.l.Na,c.l,c):null;e:{var q=c.i;let Q=-1;for(;;){const oe=["count="+v];Q==-1?0<v?(Q=q[0].g,oe.push("ofs="+Q)):Q=0:oe.push("ofs="+Q);let ke=!0;for(let At=0;At<v;At++){let Ve=q[At].g;const Ot=q[At].map;if(Ve-=Q,0>Ve)Q=Math.max(0,q[At].g-100),ke=!1;else try{ii(Ot,oe,"req"+Ve+"_")}catch{S&&S(Ot)}}if(ke){S=oe.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,S}function Mu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;le||P(),pe||(le(),pe=!0),qe.add(y,c),c.v=0}}function Qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yt(R(c.Fa,c),Yo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yt(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),_a(this),ku(this))};function As(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ku(c){c.g=new tn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=mn(c.qa);Xe(y,"RID","rpc"),Xe(y,"SID",c.K),Xe(y,"AID",c.T),Xe(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(y,"TO",c.ja),Xe(y,"TYPE","xmlhttp"),Ss(c,y),c.m&&c.o&&Dt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ys(mn(y)),v.m=null,v.P=!0,Ci(v,c)}r.Za=function(){this.C!=null&&(this.C=null,_a(this),Qo(this),it(19))};function Ta(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Vu(c,y){var v=null;if(c.g==y){Ta(c),As(c),c.g=null;var S=2}else if(Lo(c.h,y))v=y.D,nn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=c.B;S=hr(),Ge(S,new St(S,v)),Ea(c)}else Mu(c);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&ff(c,y)||S==2&&Qo(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),q){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function Yo(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Pi(c,y){if(c.j.info("Error code "+y),y==2){var v=R(c.fb,c),S=c.Xa;const q=!S;S=new vt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||gs(S,"https"),ys(S),q?_s(S.toString(),v):Hn(S.toString(),v)}else it(2);c.G=0,c.l&&c.l.sa(y),Pu(c),Du(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Pu(c){if(c.G=0,c.ka=[],c.l){const y=Uo(c.h);(y.length!=0||c.i.length!=0)&&(M(c.ka,y),M(c.ka,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.ra()}}function Lu(c,y,v){var S=v instanceof vt?mn(v):new vt(v);if(S.g!="")y&&(S.g=y+"."+S.g),gr(S,S.s);else{var q=m.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Q=new vt(null);S&&gs(Q,S),y&&(Q.g=y),q&&gr(Q,q),v&&(Q.l=v),S=Q}return v=c.D,y=c.ya,v&&y&&Xe(S,v,y),Xe(S,"VER",c.la),Ss(c,S),S}function Uu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Fe(new yr({eb:v})):new Fe(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}r=ju.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function wa(){}wa.prototype.g=function(c,y){return new rn(c,y)};function rn(c,y){ut.call(this),this.g=new va(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!X(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!X(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new oi(this)}V(rn,ut),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Go(this.g)},rn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=zn(c),c=v);y.i.push(new Ru(y.Ya++,c)),y.G==3&&Ea(y)},rn.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,rn.aa.N.call(this)};function Bu(c){Ii.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}V(Bu,Ii);function zu(){Mo.call(this),this.status=1}V(zu,Mo);function oi(c){this.g=c}V(oi,ju),oi.prototype.ua=function(){Ge(this.g,"a")},oi.prototype.ta=function(c){Ge(this.g,new Bu(c))},oi.prototype.sa=function(c){Ge(this.g,new zu)},oi.prototype.ra=function(){Ge(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,IT=function(){return new wa},RT=function(){return hr()},AT=Zn,jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mr.NO_ERROR=0,mr.TIMEOUT=8,mr.HTTP_ERROR=6,eh=mr,xi.COMPLETE="complete",ST=xi,Oo.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Bl=Oo,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,bT=Fe}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new ap("@firebase/firestore");function Ll(){return Ws.logLevel}function de(r,...e){if(Ws.logLevel<=Me.DEBUG){const n=e.map(wp);Ws.debug(`Firestore (${To}): ${r}`,...n)}}function rr(r,...e){if(Ws.logLevel<=Me.ERROR){const n=e.map(wp);Ws.error(`Firestore (${To}): ${r}`,...n)}}function ao(r,...e){if(Ws.logLevel<=Me.WARN){const n=e.map(wp);Ws.warn(`Firestore (${To}): ${r}`,...n)}}function wp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+r;throw rr(e),new Error(e)}function Ye(r,e){r||be()}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class Ox{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Mx{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new tr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new tr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string"),new xT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new Wt(e)}}class kx{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vx{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new kx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ye(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string"),this.R=n.token,new Px(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=Ux(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%e.length))}return s}}function Be(r,e){return r<e?-1:r>e?1:0}function oo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ct(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ct(0,0))}static max(){return new Se(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,s){n===void 0?n=0:n>e.length&&be(),s===void 0?s=e.length-n:s>e.length-n&&be(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return eu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof eu?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=e.get(o),h=n.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class nt extends eu{construct(e,n,s){return new nt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new nt(n)}static emptyPath(){return new nt([])}}const jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends eu{construct(e,n,s){return new Ht(e,n,s)}static isValidIdentifier(e){return jx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new ce(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(nt.fromString(e))}static fromName(e){return new ge(nt.fromString(e).popFirst(5))}static empty(){return new ge(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new nt(e.slice()))}}function Bx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Ct(n+1,0):new Ct(n,s));return new $r(o,ge.empty(),e)}function zx(r){return new $r(r.readTime,r.key,-1)}class $r{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new $r(Se.min(),ge.empty(),-1)}static max(){return new $r(Se.max(),ge.empty(),-1)}}function qx(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(r.documentKey,e.documentKey),n!==0?n:Be(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==Hx)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(p=>s(p)))})),h=!0,u===o&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((o=>o?re.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((_=>{h[g]=_,++m,m===u&&s(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new re(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function Gx(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function du(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bp.oe=-1;function kh(r){return r==null}function ph(r){return r===0&&1/r==-1/0}function Kx(r){return typeof r=="number"&&Number.isInteger(r)&&!ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ta(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function NT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??qt.RED,this.left=o??qt.EMPTY,this.right=u??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new qt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,s,o,u){return this}insert(e,n,s){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g0(this.data.getIterator())}getIteratorFrom(e){return new g0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class g0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Ft(Ht.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new DT("Invalid base64 string: "+u):u}})(e);return new Gt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const Qx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(r){if(Ye(!!r),typeof r=="string"){let e=0;const n=Qx.exec(r);if(Ye(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gt(r.seconds),nanos:gt(r.nanos)}}function gt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Zs(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(r){var e,n;return((n=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ap(r){const e=r.mapValue.fields.__previous_value__;return Sp(e)?Ap(e):e}function tu(r){const e=Wr(r.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,s,o,u,h,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}class nu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc={mapValue:{}};function Js(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Sp(r)?4:$x(r)?9007199254740991:Xx(r)?10:11:be()}function Ei(r,e){if(r===e)return!0;const n=Js(r);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tu(r).isEqual(tu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Wr(o.timestampValue),m=Wr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Zs(o.bytesValue).isEqual(Zs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return gt(o.geoPointValue.latitude)===gt(u.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return gt(o.integerValue)===gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=gt(o.doubleValue),m=gt(u.doubleValue);return h===m?ph(h)===ph(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return oo(r.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(p0(h)!==p0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Ei(h[p],m[p])))return!1;return!0})(r,e);default:return be()}}function iu(r,e){return(r.values||[]).find((n=>Ei(n,e)))!==void 0}function lo(r,e){if(r===e)return 0;const n=Js(r),s=Js(e);if(n!==s)return Be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=gt(u.integerValue||u.doubleValue),p=gt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return y0(r.timestampValue,e.timestampValue);case 4:return y0(tu(r),tu(e));case 5:return Be(r.stringValue,e.stringValue);case 6:return(function(u,h){const m=Zs(u),p=Zs(h);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const _=Be(m[g],p[g]);if(_!==0)return _}return Be(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Be(gt(u.latitude),gt(h.latitude));return m!==0?m:Be(gt(u.longitude),gt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return v0(r.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,p,g,_;const w=u.fields||{},R=h.fields||{},C=(m=w.value)===null||m===void 0?void 0:m.arrayValue,V=(p=R.value)===null||p===void 0?void 0:p.arrayValue,z=Be(((g=C?.values)===null||g===void 0?void 0:g.length)||0,((_=V?.values)===null||_===void 0?void 0:_.length)||0);return z!==0?z:v0(C,V)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Gc.mapValue&&h===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(h===Gc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const R=Be(p[w],_[w]);if(R!==0)return R;const C=lo(m[p[w]],g[_[w]]);if(C!==0)return C}return Be(p.length,_.length)})(r.mapValue,e.mapValue);default:throw be()}}function y0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const n=Wr(r),s=Wr(e),o=Be(n.seconds,s.seconds);return o!==0?o:Be(n.nanos,s.nanos)}function v0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=lo(n[o],s[o]);if(u)return u}return Be(n.length,s.length)}function uo(r){return Bm(r)}function Bm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Wr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Zs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ge.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Bm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Bm(n.fields[h])}`;return o+"}"})(r.mapValue):be()}function _0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zm(r){return!!r&&"integerValue"in r}function Rp(r){return!!r&&"arrayValue"in r}function E0(r){return!!r&&"nullValue"in r}function T0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function th(r){return!!r&&"mapValue"in r}function Xx(r){var e,n;return((n=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Gl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ta(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Gl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function $x(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Ht.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=Gl(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ta(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new cn(Gl(this.value))}}function OT(r){const e=[];return ta(r.fields,((n,s)=>{const o=new Ht([n]);if(th(s)){const u=OT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Zt(e,0,Se.min(),Se.min(),Se.min(),cn.empty(),0)}static newFoundDocument(e,n,s,o){return new Zt(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new Zt(e,2,n,Se.min(),Se.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Se.min(),Se.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.position=e,this.inclusive=n}}function w0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=ge.comparator(ge.fromName(h.referenceValue),n.key):s=lo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function b0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ei(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n="asc"){this.field=e,this.dir=n}}function Wx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class wt extends MT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Jx(e,n,s):n==="array-contains"?new n2(e,s):n==="in"?new i2(e,s):n==="not-in"?new r2(e,s):n==="array-contains-any"?new s2(e,s):new wt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new e2(e,s):new t2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return kT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kT(r){return r.op==="and"}function VT(r){return Zx(r)&&kT(r)}function Zx(r){for(const e of r.filters)if(e instanceof $n)return!1;return!0}function qm(r){if(r instanceof wt)return r.field.canonicalString()+r.op.toString()+uo(r.value);if(VT(r))return r.filters.map((e=>qm(e))).join(",");{const e=r.filters.map((n=>qm(n))).join(",");return`${r.op}(${e})`}}function PT(r,e){return r instanceof wt?(function(s,o){return o instanceof wt&&s.op===o.op&&s.field.isEqual(o.field)&&Ei(s.value,o.value)})(r,e):r instanceof $n?(function(s,o){return o instanceof $n&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&PT(h,o.filters[m])),!0):!1})(r,e):void be()}function LT(r){return r instanceof wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(r):r instanceof $n?(function(n){return n.op.toString()+" {"+n.getFilters().map(LT).join(" ,")+"}"})(r):"Filter"}class Jx extends wt{constructor(e,n,s){super(e,n,s),this.key=ge.fromName(s.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class e2 extends wt{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class t2 extends wt{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function UT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>ge.fromName(s.referenceValue)))}class n2 extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&iu(n.arrayValue,this.value)}}class i2 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&iu(this.value.arrayValue,n)}}class r2 extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!iu(this.value.arrayValue,n)}}class s2 extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>iu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function S0(r,e=null,n=[],s=[],o=null,u=null,h=null){return new a2(r,e,n,s,o,u,h)}function Ip(r){const e=Ae(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>qm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>uo(s))).join(",")),e.ue=n}return e.ue}function xp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Wx(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!PT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!b0(r.startAt,e.startAt)&&b0(r.endAt,e.endAt)}function Hm(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o2(r,e,n,s,o,u,h,m){return new wo(r,e,n,s,o,u,h,m)}function Vh(r){return new wo(r)}function A0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function jT(r){return r.collectionGroup!==null}function Kl(r){const e=Ae(r);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ft(Ht.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new ru(u,s))})),n.has(Ht.keyField().canonicalString())||e.ce.push(new ru(Ht.keyField(),s))}return e.ce}function yi(r){const e=Ae(r);return e.le||(e.le=l2(e,Kl(r))),e.le}function l2(r,e){if(r.limitType==="F")return S0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ru(o.field,u)}));const n=r.endAt?new gh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new gh(r.startAt.position,r.startAt.inclusive):null;return S0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Fm(r,e){const n=r.filters.concat([e]);return new wo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Gm(r,e,n){return new wo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Ph(r,e){return xp(yi(r),yi(e))&&r.limitType===e.limitType}function BT(r){return`${Ip(yi(r))}|lt:${r.limitType}`}function Wa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>LT(o))).join(", ")}]`),kh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>uo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(yi(r))}; limitType=${r.limitType})`}function Lh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ge.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Kl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,p){const g=w0(h,m,p);return h.inclusive?g<=0:g<0})(s.startAt,Kl(s),o)||s.endAt&&!(function(h,m,p){const g=w0(h,m,p);return h.inclusive?g>=0:g>0})(s.endAt,Kl(s),o))})(r,e)}function u2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function zT(r){return(e,n)=>{let s=!1;for(const o of Kl(r)){const u=c2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function c2(r,e,n){const s=r.field.isKeyField()?ge.comparator(e.key,n.key):(function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?lo(p,g):be()})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new ot(ge.comparator);function sr(){return h2}const qT=new ot(ge.comparator);function zl(...r){let e=qT;for(const n of r)e=e.insert(n.key,n);return e}function HT(r){let e=qT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Gs(){return Ql()}function FT(){return Ql()}function Ql(){return new bo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const f2=new ot(ge.comparator),d2=new Ft(ge.comparator);function Oe(...r){let e=d2;for(const n of r)e=e.add(n);return e}const m2=new Ft(Be);function p2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function GT(r){return{integerValue:""+r}}function g2(r,e){return Kx(e)?GT(e):Cp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function y2(r,e,n){return r instanceof su?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Sp(u)&&(u=Ap(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(n,e):r instanceof co?QT(r,e):r instanceof ho?YT(r,e):(function(o,u){const h=KT(o,u),m=R0(h)+R0(o.Pe);return zm(h)&&zm(o.Pe)?GT(m):Cp(o.serializer,m)})(r,e)}function v2(r,e,n){return r instanceof co?QT(r,e):r instanceof ho?YT(r,e):n}function KT(r,e){return r instanceof yh?(function(s){return zm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class su extends Uh{}class co extends Uh{constructor(e){super(),this.elements=e}}function QT(r,e){const n=XT(e);for(const s of r.elements)n.some((o=>Ei(o,s)))||n.push(s);return{arrayValue:{values:n}}}class ho extends Uh{constructor(e){super(),this.elements=e}}function YT(r,e){let n=XT(e);for(const s of r.elements)n=n.filter((o=>!Ei(o,s)));return{arrayValue:{values:n}}}class yh extends Uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function R0(r){return gt(r.integerValue||r.doubleValue)}function XT(r){return Rp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.field=e,this.transform=n}}function _2(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof co&&o instanceof co||s instanceof ho&&o instanceof ho?oo(s.elements,o.elements,Ei):s instanceof yh&&o instanceof yh?Ei(s.Pe,o.Pe):s instanceof su&&o instanceof su})(r.transform,e.transform)}class E2{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jh{}function $T(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ZT(r.key,Xn.none()):new mu(r.key,r.data,Xn.none());{const n=r.data,s=cn.empty();let o=new Ft(Ht.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ns(r.key,s,new wn(o.toArray()),Xn.none())}}function T2(r,e,n){r instanceof mu?(function(o,u,h){const m=o.value.clone(),p=x0(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,n):r instanceof ns?(function(o,u,h){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=x0(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(WT(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Yl(r,e,n,s){return r instanceof mu?(function(u,h,m,p){if(!nh(u.precondition,h))return m;const g=u.value.clone(),_=C0(u.fieldTransforms,p,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof ns?(function(u,h,m,p){if(!nh(u.precondition,h))return m;const g=C0(u.fieldTransforms,p,h),_=h.data;return _.setAll(WT(u)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(r,e,n,s):(function(u,h,m){return nh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,n)}function w2(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=KT(s.transform,o||null);u!=null&&(n===null&&(n=cn.empty()),n.set(s.field,u))}return n||null}function I0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&oo(s,o,((u,h)=>_2(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class mu extends jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ns extends jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function WT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function x0(r,e,n){const s=new Map;Ye(r.length===n.length);for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,v2(h,m,n[o]))}return s}function C0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,y2(u,h,e))}return s}class ZT extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b2 extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&T2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=FT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=$T(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,((n,s)=>I0(n,s)))&&oo(this.baseMutations,e.baseMutations,((n,s)=>I0(n,s)))}}class Dp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ye(e.mutations.length===s.length);let o=(function(){return f2})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Dp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Le;function I2(r){switch(r){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function JT(r){if(r===void 0)return rr("GRPC error has no .code"),te.UNKNOWN;switch(r){case Tt.OK:return te.OK;case Tt.CANCELLED:return te.CANCELLED;case Tt.UNKNOWN:return te.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return te.INTERNAL;case Tt.UNAVAILABLE:return te.UNAVAILABLE;case Tt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Tt.NOT_FOUND:return te.NOT_FOUND;case Tt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Tt.ABORTED:return te.ABORTED;case Tt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Tt.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(Le=Tt||(Tt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Qs([4294967295,4294967295],0);function N0(r){const e=x2().encode(r),n=new wT;return n.update(e),new Uint8Array(n.digest())}function D0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Qs([n,s],0),new Qs([o,u],0)]}class Op{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(s<0)throw new ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qs.fromNumber(this.Ie)}Ee(e,n,s){let o=e.add(n.multiply(Qs.fromNumber(s)));return o.compare(C2)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=N0(e),[s,o]=D0(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);if(!this.de(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Op(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.Ie===0)return;const n=N0(e),[s,o]=D0(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Bh(Se.min(),o,new ot(Be),sr(),Oe())}}class pu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new pu(s,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,s,o){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=o}}class ew{constructor(e,n){this.targetId=e,this.me=n}}class tw{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class O0{constructor(){this.fe=0,this.ge=k0(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),n=Oe(),s=Oe();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:be()}})),new pu(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=k0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N2{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=M0(),this.Qe=new ot(Be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:be()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((s,o)=>{this.ze(o)&&n(o)}))}He(e){const n=e.targetId,s=e.me.count,o=this.Je(n);if(o){const u=o.target;if(Hm(u))if(s===0){const h=new ge(u.path);this.Ue(n,h,Zt.newNoDocument(h,Se.min()))}else Ye(s===1);else{const h=this.Ye(n);if(h!==s){const m=this.Ze(e),p=m?this.Xe(m,e,h):1;if(p!==0){this.je(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=Zs(s).toUint8Array()}catch(p){if(p instanceof DT)return ao("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Op(h,o,u)}catch(p){return ao(p instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ie===0?null:m}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,u,null),o++)})),o}rt(e){const n=new Map;this.Be.forEach(((u,h)=>{const m=this.Je(h);if(m){if(u.current&&Hm(m.target)){const p=new ge(m.target.path);this.ke.get(p)!==null||this.it(h,p)||this.Ue(h,p,Zt.newNoDocument(p,e))}u.be&&(n.set(h,u.ve()),u.Ce())}}));let s=Oe();this.qe.forEach(((u,h)=>{let m=!0;h.forEachWhile((p=>{const g=this.Je(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new Bh(e,n,this.Qe,this.ke,s);return this.ke=sr(),this.qe=M0(),this.Qe=new ot(Be),o}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new O0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ft(Be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new O0),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function M0(){return new ot(ge.comparator)}function k0(){return new ot(ge.comparator)}const D2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M2={and:"AND",or:"OR"};class k2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Km(r,e){return r.useProto3Json||kh(e)?e:{value:e}}function vh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function V2(r,e){return vh(r,e.toTimestamp())}function vi(r){return Ye(!!r),Se.fromTimestamp((function(n){const s=Wr(n);return new Ct(s.seconds,s.nanos)})(r))}function Mp(r,e){return Qm(r,e).canonicalString()}function Qm(r,e){const n=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function iw(r){const e=nt.fromString(r);return Ye(lw(e)),e}function Ym(r,e){return Mp(r.databaseId,e.path)}function vm(r,e){const n=iw(e);if(n.get(1)!==r.databaseId.projectId)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ge(sw(n))}function rw(r,e){return Mp(r.databaseId,e)}function P2(r){const e=iw(r);return e.length===4?nt.emptyPath():sw(e)}function Xm(r){return new nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function sw(r){return Ye(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function V0(r,e,n){return{name:Ym(r,e),fields:n.value.mapValue.fields}}function L2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,_){return g.useProto3Json?(Ye(_===void 0||typeof _=="string"),Gt.fromBase64String(_||"")):(Ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Gt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(g){const _=g.code===void 0?te.UNKNOWN:JT(g.code);return new ce(_,g.message||"")})(h);n=new tw(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=vm(r,s.document.name),u=vi(s.document.updateTime),h=s.document.createTime?vi(s.document.createTime):Se.min(),m=new cn({mapValue:{fields:s.document.fields}}),p=Zt.newFoundDocument(o,u,h,m),g=s.targetIds||[],_=s.removedTargetIds||[];n=new ih(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=vm(r,s.document),u=s.readTime?vi(s.readTime):Se.min(),h=Zt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ih([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=vm(r,s.document),u=s.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return be();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new R2(o,u),m=s.targetId;n=new ew(m,h)}}return n}function U2(r,e){let n;if(e instanceof mu)n={update:V0(r,e.key,e.value)};else if(e instanceof ZT)n={delete:Ym(r,e.key)};else if(e instanceof ns)n={update:V0(r,e.key,e.data),updateMask:Q2(e.fieldMask)};else{if(!(e instanceof b2))return be();n={verify:Ym(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof su)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof co)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ho)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof yh)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw be()})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:V2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be()})(r,e.precondition)),n}function j2(r,e){return r&&r.length>0?(Ye(e!==void 0),r.map((n=>(function(o,u){let h=o.updateTime?vi(o.updateTime):vi(u);return h.isEqual(Se.min())&&(h=vi(u)),new E2(h,o.transformResults||[])})(n,e)))):[]}function B2(r,e){return{documents:[rw(r,e.path)]}}function z2(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=rw(r,o);const u=(function(g){if(g.length!==0)return ow($n.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((_=>(function(R){return{field:Za(R.field),direction:F2(R.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Km(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{_t:n,parent:o}}function q2(r){let e=P2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ye(s===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(w){const R=aw(w);return R instanceof $n&&VT(R)?R.getFilters():[R]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((R=>(function(V){return new ru(Ja(V.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(w){let R;return R=typeof w=="object"?w.value:w,kh(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(w){const R=!!w.before,C=w.values||[];return new gh(C,R)})(n.startAt));let g=null;return n.endAt&&(g=(function(w){const R=!w.before,C=w.values||[];return new gh(C,R)})(n.endAt)),o2(e,o,h,u,m,"F",p,g)}function H2(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aw(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ja(n.unaryFilter.field);return wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(n.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(n.unaryFilter.field);return wt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ja(n.unaryFilter.field);return wt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return be()}})(r):r.fieldFilter!==void 0?(function(n){return wt.create(Ja(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return $n.create(n.compositeFilter.filters.map((s=>aw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be()}})(n.compositeFilter.op))})(r):be()}function F2(r){return D2[r]}function G2(r){return O2[r]}function K2(r){return M2[r]}function Za(r){return{fieldPath:r.canonicalString()}}function Ja(r){return Ht.fromServerFormat(r.fieldPath)}function ow(r){return r instanceof wt?(function(n){if(n.op==="=="){if(T0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NAN"}};if(E0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NAN"}};if(E0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(n.field),op:G2(n.op),value:n.value}}})(r):r instanceof $n?(function(n){const s=n.getFilters().map((o=>ow(o)));return s.length===1?s[0]:{compositeFilter:{op:K2(n.op),filters:s}}})(r):be()}function Q2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function lw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,s,o,u=Se.min(),h=Se.min(),m=Gt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.ct=e}}function X2(r){const e=q2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.un=new W2}addToCollectionParentIndex(e,n){return this.un.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve($r.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class W2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ft(nt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.changes=new bo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Yl(s.mutation,o,wn.empty(),Ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Oe()){const o=Gs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=zl();return u.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Gs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Oe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,s,o){let u=sr();const h=Ql(),m=(function(){return Ql()})();return n.forEach(((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof ns)?u=u.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),Yl(_.mutation,g,_.mutation.getFieldMask(),Ct.now())):h.set(g.key,wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,_)=>h.set(g,_))),n.forEach(((g,_)=>{var w;return m.set(g,new J2(_,(w=h.get(g))!==null&&w!==void 0?w:null))})),m)))}recalculateAndSaveOverlays(e,n){const s=Ql();let o=new ot(((h,m)=>h-m)),u=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let _=s.get(p)||wn.empty();_=m.applyToLocalView(g,_),s.set(p,_);const w=(o.get(m.batchId)||Oe()).add(p);o=o.insert(m.batchId,w)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,_=p.value,w=FT();_.forEach((R=>{if(!u.has(R)){const C=$T(n.get(R),s.get(R));C!==null&&w.set(R,C),u=u.add(R)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,w))}return re.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(Gs());let m=-1,p=u;return h.next((g=>re.forEach(g,((_,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((R=>{p=p.insert(_,R)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Oe()))).next((_=>({batchId:m,changes:HT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next((s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=zl();return this.indexManager.getCollectionParents(e,u).next((m=>re.forEach(m,(p=>{const g=(function(w,R){return new wo(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((w,R)=>{h=h.insert(w,R)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((p,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,Zt.newInvalidDocument(_)))}));let m=zl();return h.forEach(((p,g)=>{const _=u.get(p);_!==void 0&&Yl(_.mutation,g,wn.empty(),Ct.now()),Lh(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return re.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:vi(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(o){return{name:o.name,query:X2(o.bundledQuery),readTime:vi(o.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.overlays=new ot(ge.comparator),this.Ir=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gs();return re.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.ht(e,n,u)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Gs(),u=n.length+1,h=new ge(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ot(((g,_)=>g-_));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=u.get(g.largestBatchId);_===null&&(_=Gs(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=Gs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>m.set(g,_))),!(m.size()>=o)););return re.resolve(m)}ht(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new A2(n,s));let u=this.Ir.get(n);u===void 0&&(u=Oe(),this.Ir.set(n,u)),this.Ir.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Tr=new Ft(Pt.Er),this.dr=new Ft(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Pt(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Vr(new Pt(e,n))}mr(e,n){e.forEach((s=>this.removeReference(s,n)))}gr(e){const n=new ge(new nt([])),s=new Pt(n,e),o=new Pt(n,e+1),u=[];return this.dr.forEachInRange([s,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new nt([])),s=new Pt(n,e),o=new Pt(n,e+1);let u=Oe();return this.dr.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Pt(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Be(e.wr,n.wr)}static Ar(e,n){return Be(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ft(Pt.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new S2(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new Pt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.vr(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Pt(n,0),o=new Pt(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([s,o],(h=>{const m=this.Dr(h.wr);u.push(m)})),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ft(Be);return n.forEach((o=>{const u=new Pt(o,0),h=new Pt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(m=>{s=s.add(m.wr)}))})),re.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ge.isDocumentKey(u)||(u=u.child(""));const h=new Pt(new ge(u),0);let m=new Ft(Be);return this.br.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.wr)),!0)}),h),re.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return re.forEach(n.mutations,(o=>{const u=new Pt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,n){const s=new Pt(n,0),o=this.br.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.Mr=e,this.docs=(function(){return new ot(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let s=sr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Zt.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=sr();const h=n.path,m=new ge(h.child("")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||qx(zx(_),s)<=0||(o.has(_.key)||Lh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){be()}Or(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new aC(this)}getSize(e){return re.resolve(this.size)}}class aC extends Z2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.persistence=e,this.Nr=new bo((n=>Ip(n)),xp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kp,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,n){return this.Nr.forEach(((s,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),re.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Kn(n),re.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Nr.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(u).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bp(0),this.Kr=!1,this.Kr=!0,this.$r=new iC,this.referenceDelegate=e(this),this.Ur=new oC(this),this.indexManager=new $2,this.remoteDocumentCache=(function(o){return new sC(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new Y2(n),this.Gr=new tC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new rC(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new uC(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,n){return re.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,n))))}}class uC extends Fx{constructor(e){super(),this.currentSequenceNumber=e}}class Vp{constructor(e){this.persistence=e,this.Jr=new kp,this.Yr=null}static Zr(e){return new Vp(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),re.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,(s=>{const o=ge.fromPath(s);return this.ei(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return re.or([()=>re.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=o}static Wi(e,n){let s=Oe(),o=Oe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return rR()?8:Gx(en())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.Yi(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new cC;return this.Xi(e,n,h).next((m=>{if(u.result=m,this.zi)return this.es(e,n,h,m.size)}))})).next((()=>u.result))}es(e,n,s,o){return s.documentReadCount<this.ji?(Ll()<=Me.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Ll()<=Me.DEBUG&&de("QueryEngine","Query:",Wa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Ll()<=Me.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):re.resolve())}Yi(e,n){if(A0(n))return re.resolve(null);let s=yi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Gm(n,null,"F"),s=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Oe(...u);return this.Ji.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.ts(n,m);return this.ns(n,g,h,p.readTime)?this.Yi(e,Gm(n,null,"F")):this.rs(e,g,n,p)}))))})))))}Zi(e,n,s,o){return A0(n)||o.isEqual(Se.min())?re.resolve(null):this.Ji.getDocuments(e,s).next((u=>{const h=this.ts(n,u);return this.ns(n,h,s,o)?re.resolve(null):(Ll()<=Me.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(n)),this.rs(e,h,n,Bx(o,-1)).next((m=>m)))}))}ts(e,n){let s=new Ft(zT(e));return n.forEach(((o,u)=>{Lh(e,u)&&(s=s.add(u))})),s}ns(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,n,s){return Ll()<=Me.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.Ji.getDocumentsMatchingQuery(e,n,$r.min(),s)}rs(e,n,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,s,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new ot(Be),this._s=new bo((u=>Ip(u)),xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function dC(r,e,n,s){return new fC(r,e,n,s)}async function uw(r,e){const n=Ae(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.ls(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let p=Oe();for(const g of o){h.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(s,p).next((g=>({hs:g,removedBatchIds:h,addedBatchIds:m})))}))}))}function mC(r,e){const n=Ae(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,_){const w=g.batch,R=w.keys();let C=re.resolve();return R.forEach((V=>{C=C.next((()=>_.getEntry(p,V))).next((z=>{const M=g.docVersions.get(V);Ye(M!==null),z.version.compareTo(M)<0&&(w.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),_.addEntry(z)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(p,w)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Oe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function cw(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function pC(r,e){const n=Ae(r),s=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const m=[];e.targetChanges.forEach(((_,w)=>{const R=o.get(w);if(!R)return;m.push(n.Ur.removeMatchingKeys(u,_.removedDocuments,w).next((()=>n.Ur.addMatchingKeys(u,_.addedDocuments,w))));let C=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,s)),o=o.insert(w,C),(function(z,M,Y){return z.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(R,C,_)&&m.push(n.Ur.updateTargetData(u,C))}));let p=sr(),g=Oe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),m.push(gC(u,h,e.documentUpdates).next((_=>{p=_.Ps,g=_.Is}))),!s.isEqual(Se.min())){const _=n.Ur.getLastRemoteSnapshotVersion(u).next((w=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(_)}return re.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.os=o,u)))}function gC(r,e,n){let s=Oe(),o=Oe();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let h=sr();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):de("LocalStore","Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Ps:h,Is:o}}))}function yC(r,e){const n=Ae(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vC(r,e){const n=Ae(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Ur.getTargetData(s,e).next((u=>u?(o=u,re.resolve(o)):n.Ur.allocateTargetId(s).next((h=>(o=new Fr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s}))}async function $m(r,e,n){const s=Ae(r),o=s.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!du(h))throw h;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function P0(r,e,n){const s=Ae(r);let o=Se.min(),u=Oe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,g,_){const w=Ae(p),R=w._s.get(_);return R!==void 0?re.resolve(w.os.get(R)):w.Ur.getTargetData(g,_)})(s,h,yi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(h,m.targetId).next((p=>{u=p}))})).next((()=>s.ss.getDocumentsMatchingQuery(h,e,n?o:Se.min(),n?u:Oe()))).next((m=>(_C(s,u2(e),m),{documents:m,Ts:u})))))}function _C(r,e,n){let s=r.us.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.us.set(e,s)}class L0{constructor(){this.activeTargetIds=p2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EC{constructor(){this.so=new L0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function _m(){return Kc===null?Kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class SC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,s,o,u,h){const m=_m(),p=this.xo(n,s.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${m}:`,p,o);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,u,h),this.No(n,p,g,o).then((_=>(de("RestConnection",`Received RPC '${n}' ${m}: `,_),_)),(_=>{throw ao("RestConnection",`RPC '${n}' ${m} failed with error: `,_,"url: ",p,"request:",o),_}))}Lo(n,s,o,u,h,m){return this.Mo(n,s,o,u,h)}Oo(n,s,o){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+To})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((u,h)=>n[h]=u)),o&&o.headers.forEach(((u,h)=>n[h]=u))}xo(n,s){const o=wC[n];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,o){const u=_m();return new Promise(((h,m)=>{const p=new bT;p.setWithCredentials(!0),p.listenOnce(ST.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case eh.NO_ERROR:const _=p.getResponseJson();de(Xt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case eh.TIMEOUT:de(Xt,`RPC '${e}' ${u} timed out`),m(new ce(te.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const w=p.getStatus();if(de(Xt,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const C=R?.error;if(C&&C.status&&C.message){const V=(function(M){const Y=M.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Y)>=0?Y:te.UNKNOWN})(C.status);m(new ce(V,C.message))}else m(new ce(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ce(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{de(Xt,`RPC '${e}' ${u} completed.`)}}));const g=JSON.stringify(o);de(Xt,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)}))}Bo(e,n,s){const o=_m(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=IT(),m=RT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=u.join("");de(Xt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=h.createWebChannel(_,p);let R=!1,C=!1;const V=new bC({Io:M=>{C?de(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(R||(de(Xt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),R=!0),de(Xt,`RPC '${e}' stream ${o} sending:`,M),w.send(M))},To:()=>w.close()}),z=(M,Y,X)=>{M.listen(Y,(Z=>{try{X(Z)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return z(w,Bl.EventType.OPEN,(()=>{C||(de(Xt,`RPC '${e}' stream ${o} transport opened.`),V.yo())})),z(w,Bl.EventType.CLOSE,(()=>{C||(C=!0,de(Xt,`RPC '${e}' stream ${o} transport closed`),V.So())})),z(w,Bl.EventType.ERROR,(M=>{C||(C=!0,ao(Xt,`RPC '${e}' stream ${o} transport errored:`,M),V.So(new ce(te.UNAVAILABLE,"The operation could not be completed")))})),z(w,Bl.EventType.MESSAGE,(M=>{var Y;if(!C){const X=M.data[0];Ye(!!X);const Z=X,ne=Z.error||((Y=Z[0])===null||Y===void 0?void 0:Y.error);if(ne){de(Xt,`RPC '${e}' stream ${o} received error:`,ne);const se=ne.status;let he=(function(x){const I=Tt[x];if(I!==void 0)return JT(I)})(se),O=ne.message;he===void 0&&(he=te.INTERNAL,O="Unknown error status: "+se+" with message "+ne.message),C=!0,V.So(new ce(he,O)),w.close()}else de(Xt,`RPC '${e}' stream ${o} received:`,X),V.bo(X)}})),z(m,AT.STAT_EVENT,(M=>{M.stat===jm.PROXY?de(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===jm.NOPROXY&&de(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(r){return new k2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,s=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,s,o,u,h,m,p){this.ui=e,this.Ho=s,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===n&&this.P_(s,o)}),(s=>{e((()=>{const o=new ce(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AC extends fw{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=L2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?vi(h.readTime):Se.min()})(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(u,h){let m;const p=h.target;if(m=Hm(p)?{documents:B2(u,p)}:{query:z2(u,p)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=nw(u,h.resumeToken);const g=Km(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Se.min())>0){m.readTime=vh(u,h.snapshotVersion.toTimestamp());const g=Km(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=H2(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.a_(n)}}class RC extends fw{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=j2(e.writeResults,e.commitTime),s=vi(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Xm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>U2(this.serializer,s)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC extends class{}{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,Qm(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(te.UNKNOWN,u.toString())}))}Lo(e,n,s,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Lo(e,Qm(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(te.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class xC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rr(n),this.D_=!1):de("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{s.enqueueAndForget((async()=>{na(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const g=Ae(p);g.L_.add(4),await gu(g),g.q_.set("Unknown"),g.L_.delete(4),await qh(g)})(this))}))})),this.q_=new xC(s,o)}}async function qh(r){if(na(r))for(const e of r.B_)await e(!0)}async function gu(r){for(const e of r.B_)await e(!1)}function dw(r,e){const n=Ae(r);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bp(n)?jp(n):So(n).r_()&&Up(n,e))}function Lp(r,e){const n=Ae(r),s=So(n);n.N_.delete(e),s.r_()&&mw(n,e),n.N_.size===0&&(s.r_()?s.o_():na(n)&&n.q_.set("Unknown"))}function Up(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(r).A_(e)}function mw(r,e){r.Q_.xe(e),So(r).R_(e)}function jp(r){r.Q_=new N2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),So(r).start(),r.q_.v_()}function Bp(r){return na(r)&&!So(r).n_()&&r.N_.size>0}function na(r){return Ae(r).L_.size===0}function pw(r){r.Q_=void 0}async function NC(r){r.q_.set("Online")}async function DC(r){r.N_.forEach(((e,n)=>{Up(r,e)}))}async function OC(r,e){pw(r),Bp(r)?(r.q_.M_(e),jp(r)):r.q_.set("Unknown")}async function MC(r,e,n){if(r.q_.set("Online"),e instanceof tw&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))})(r,e)}catch(s){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _h(r,s)}else if(e instanceof ih?r.Q_.Ke(e):e instanceof ew?r.Q_.He(e):r.Q_.We(e),!n.isEqual(Se.min()))try{const s=await cw(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.N_.get(g);_&&u.N_.set(g,_.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,g)=>{const _=u.N_.get(p);if(!_)return;u.N_.set(p,_.withResumeToken(Gt.EMPTY_BYTE_STRING,_.snapshotVersion)),mw(u,p);const w=new Fr(_.target,p,g,_.sequenceNumber);Up(u,w)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){de("RemoteStore","Failed to raise snapshot:",s),await _h(r,s)}}async function _h(r,e,n){if(!du(e))throw e;r.L_.add(1),await gu(r),r.q_.set("Offline"),n||(n=()=>cw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),r.L_.delete(1),await qh(r)}))}function gw(r,e){return e().catch((n=>_h(r,n,e)))}async function Hh(r){const e=Ae(r),n=Zr(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kC(e);)try{const o=await yC(e.localStore,s);if(o===null){e.O_.length===0&&n.o_();break}s=o.batchId,VC(e,o)}catch(o){await _h(e,o)}yw(e)&&vw(e)}function kC(r){return na(r)&&r.O_.length<10}function VC(r,e){r.O_.push(e);const n=Zr(r);n.r_()&&n.V_&&n.m_(e.mutations)}function yw(r){return na(r)&&!Zr(r).n_()&&r.O_.length>0}function vw(r){Zr(r).start()}async function PC(r){Zr(r).p_()}async function LC(r){const e=Zr(r);for(const n of r.O_)e.m_(n.mutations)}async function UC(r,e,n){const s=r.O_.shift(),o=Dp.from(s,e,n);await gw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Hh(r)}async function jC(r,e){e&&Zr(r).V_&&await(async function(s,o){if((function(h){return I2(h)&&h!==te.ABORTED})(o.code)){const u=s.O_.shift();Zr(s).s_(),await gw(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hh(s)}})(r,e),yw(r)&&vw(r)}async function j0(r,e){const n=Ae(r);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const s=na(n);n.L_.add(3),await gu(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qh(n)}async function BC(r,e){const n=Ae(r);e?(n.L_.delete(2),await qh(n)):e||(n.L_.add(2),await gu(n),n.q_.set("Unknown"))}function So(r){return r.K_||(r.K_=(function(n,s,o){const u=Ae(n);return u.w_(),new AC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:NC.bind(null,r),Ro:DC.bind(null,r),mo:OC.bind(null,r),d_:MC.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Bp(r)?jp(r):r.q_.set("Unknown")):(await r.K_.stop(),pw(r))}))),r.K_}function Zr(r){return r.U_||(r.U_=(function(n,s,o){const u=Ae(n);return u.w_(),new RC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PC.bind(null,r),mo:jC.bind(null,r),f_:LC.bind(null,r),g_:UC.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Hh(r)):(await r.U_.stop(),r.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new zp(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qp(r,e){if(rr("AsyncQueue",`${e}: ${r}`),du(r))return new ce(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.comparator=e?(n,s)=>e(n,s)||ge.comparator(n.key,s.key):(n,s)=>ge.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.W_=new ot(ge.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,s)=>{e.push(s)})),e}}class mo{constructor(e,n,s,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new mo(e,n,io.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class qC{constructor(){this.queries=z0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=z0(),u.forEach(((h,m)=>{for(const p of m.j_)p.onError(s)}))})(this,new ce(te.ABORTED,"Firestore shutting down"))}}function z0(){return new bo((r=>BT(r)),Ph)}async function Hp(r,e){const n=Ae(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.H_()&&e.J_()&&(s=2):(u=new zC,s=e.J_()?0:1);try{switch(s){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=qp(h,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&Gp(n)}async function Fp(r,e){const n=Ae(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function HC(r,e){const n=Ae(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(s=!0);h.z_=o}}s&&Gp(n)}function FC(r,e,n){const s=Ae(r),o=s.queries.get(e);if(o)for(const u of o.j_)u.onError(n);s.queries.delete(e)}function Gp(r){r.Y_.forEach((e=>{e.next()}))}var Wm,q0;(q0=Wm||(Wm={})).ea="default",q0.Cache="cache";class Kp{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class Ew{constructor(e){this.key=e}}class GC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=zT(e),this.Ra=new io(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new B0,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const R=o.get(_),C=Lh(this.query,w)?w:null,V=!!R&&this.mutatedKeys.has(R.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;R&&C?R.data.isEqual(C.data)?V!==z&&(s.track({type:3,doc:C}),M=!0):this.ga(R,C)||(s.track({type:2,doc:C}),M=!0,(p&&this.Aa(C,p)>0||g&&this.Aa(C,g)<0)&&(m=!0)):!R&&C?(s.track({type:0,doc:C}),M=!0):R&&!C&&(s.track({type:1,doc:R}),M=!0,(p||g)&&(m=!0)),M&&(C?(h=h.add(C),u=z?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{Ra:h,fa:s,ns:m,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((_,w)=>(function(C,V){const z=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return z(C)-z(V)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(s),o=o!=null&&o;const m=n&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,g=p!==this.Ea;return this.Ea=p,h.length!==0||g?{snapshot:new mo(this.query,e.Ra,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new B0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const n=[];return e.forEach((s=>{this.da.has(s)||n.push(new Ew(s))})),this.da.forEach((s=>{e.has(s)||n.push(new _w(s))})),n}ba(e){this.Ta=e.Ts,this.da=Oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class QC{constructor(e){this.key=e,this.va=!1}}class YC{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new bo((m=>BT(m)),Ph),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ge.comparator),this.Na=new Map,this.La=new kp,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XC(r,e,n=!0){const s=Rw(r);let o;const u=s.Fa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await Tw(s,e,n,!0),o}async function $C(r,e){const n=Rw(r);await Tw(n,e,!0,!1)}async function Tw(r,e,n,s){const o=await vC(r.localStore,yi(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await WC(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&dw(r.remoteStore,o),m}async function WC(r,e,n,s,o){r.Ka=(w,R,C)=>(async function(z,M,Y,X){let Z=M.view.ma(Y);Z.ns&&(Z=await P0(z.localStore,M.query,!1).then((({documents:O})=>M.view.ma(O,Z))));const ne=X&&X.targetChanges.get(M.targetId),se=X&&X.targetMismatches.get(M.targetId)!=null,he=M.view.applyChanges(Z,z.isPrimaryClient,ne,se);return F0(z,M.targetId,he.wa),he.snapshot})(r,w,R,C);const u=await P0(r.localStore,e,!0),h=new GC(e,u.Ts),m=h.ma(u.documents),p=pu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=h.applyChanges(m,r.isPrimaryClient,p);F0(r,n,g.wa);const _=new KC(e,n,h);return r.Fa.set(e,_),r.Ma.has(n)?r.Ma.get(n).push(e):r.Ma.set(n,[e]),g.snapshot}async function ZC(r,e,n){const s=Ae(r),o=s.Fa.get(e),u=s.Ma.get(o.targetId);if(u.length>1)return s.Ma.set(o.targetId,u.filter((h=>!Ph(h,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await $m(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Lp(s.remoteStore,o.targetId),Zm(s,o.targetId)})).catch(fu)):(Zm(s,o.targetId),await $m(s.localStore,o.targetId,!0))}async function JC(r,e){const n=Ae(r),s=n.Fa.get(e),o=n.Ma.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Lp(n.remoteStore,s.targetId))}async function eN(r,e,n){const s=oN(r);try{const o=await(function(h,m){const p=Ae(h),g=Ct.now(),_=m.reduce(((C,V)=>C.add(V.key)),Oe());let w,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let V=sr(),z=Oe();return p.cs.getEntries(C,_).next((M=>{V=M,V.forEach(((Y,X)=>{X.isValidDocument()||(z=z.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,V))).next((M=>{w=M;const Y=[];for(const X of m){const Z=w2(X,w.get(X.key).overlayedDocument);Z!=null&&Y.push(new ns(X.key,Z,OT(Z.value.mapValue),Xn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,Y,m)})).next((M=>{R=M;const Y=M.applyToLocalDocumentSet(w,z);return p.documentOverlayCache.saveOverlays(C,M.batchId,Y)}))})).then((()=>({batchId:R.batchId,changes:HT(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let g=h.Ba[h.currentUser.toKey()];g||(g=new ot(Be)),g=g.insert(m,p),h.Ba[h.currentUser.toKey()]=g})(s,o.batchId,n),await yu(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=qp(o,"Failed to persist write");n.reject(u)}}async function ww(r,e){const n=Ae(r);try{const s=await pC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Na.get(u);h&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Ye(h.va):o.removedDocuments.size>0&&(Ye(h.va),h.va=!1))})),await yu(n,s,e)}catch(s){await fu(s)}}function H0(r,e,n){const s=Ae(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Fa.forEach(((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Ae(h);p.onlineState=m;let g=!1;p.queries.forEach(((_,w)=>{for(const R of w.j_)R.Z_(m)&&(g=!0)})),g&&Gp(p)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tN(r,e,n){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Na.get(e),u=o&&o.key;if(u){let h=new ot(ge.comparator);h=h.insert(u,Zt.newNoDocument(u,Se.min()));const m=Oe().add(u),p=new Bh(Se.min(),new Map,new ot(Be),h,m);await ww(s,p),s.Oa=s.Oa.remove(u),s.Na.delete(e),Qp(s)}else await $m(s.localStore,e,!1).then((()=>Zm(s,e,n))).catch(fu)}async function nN(r,e){const n=Ae(r),s=e.batch.batchId;try{const o=await mC(n.localStore,e);Sw(n,s,null),bw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await yu(n,o)}catch(o){await fu(o)}}async function iN(r,e,n){const s=Ae(r);try{const o=await(function(h,m){const p=Ae(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,m).next((w=>(Ye(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);Sw(s,e,n),bw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await yu(s,o)}catch(o){await fu(o)}}function bw(r,e){(r.ka.get(e)||[]).forEach((n=>{n.resolve()})),r.ka.delete(e)}function Sw(r,e,n){const s=Ae(r);let o=s.Ba[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function Zm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Ma.get(e))r.Fa.delete(s),n&&r.Ca.$a(s,n);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((s=>{r.La.containsKey(s)||Aw(r,s)}))}function Aw(r,e){r.xa.delete(e.path.canonicalString());const n=r.Oa.get(e);n!==null&&(Lp(r.remoteStore,n),r.Oa=r.Oa.remove(e),r.Na.delete(n),Qp(r))}function F0(r,e,n){for(const s of n)s instanceof _w?(r.La.addReference(s.key,e),rN(r,s)):s instanceof Ew?(de("SyncEngine","Document no longer in limbo: "+s.key),r.La.removeReference(s.key,e),r.La.containsKey(s.key)||Aw(r,s.key)):be()}function rN(r,e){const n=e.key,s=n.path.canonicalString();r.Oa.get(n)||r.xa.has(s)||(de("SyncEngine","New document in limbo: "+n),r.xa.add(s),Qp(r))}function Qp(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const n=new ge(nt.fromString(e)),s=r.qa.next();r.Na.set(s,new QC(n)),r.Oa=r.Oa.insert(n,s),dw(r.remoteStore,new Fr(yi(Vh(n.path)),s,"TargetPurposeLimboResolution",bp.oe))}}async function yu(r,e,n){const s=Ae(r),o=[],u=[],h=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,p)=>{h.push(s.Ka(p,e,n).then((g=>{var _;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(_=n?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Pp.Wi(p.targetId,g);u.push(w)}})))})),await Promise.all(h),s.Ca.d_(o),await(async function(p,g){const _=Ae(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>re.forEach(g,(R=>re.forEach(R.$i,(C=>_.persistence.referenceDelegate.addReference(w,R.targetId,C))).next((()=>re.forEach(R.Ui,(C=>_.persistence.referenceDelegate.removeReference(w,R.targetId,C)))))))))}catch(w){if(!du(w))throw w;de("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const R=w.targetId;if(!w.fromCache){const C=_.os.get(R),V=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(V);_.os=_.os.insert(R,z)}}})(s.localStore,u))}async function sN(r,e){const n=Ae(r);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const s=await uw(n.localStore,e);n.currentUser=e,(function(u,h){u.ka.forEach((m=>{m.forEach((p=>{p.reject(new ce(te.CANCELLED,h))}))})),u.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yu(n,s.hs)}}function aN(r,e){const n=Ae(r),s=n.Na.get(e);if(s&&s.va)return Oe().add(s.key);{let o=Oe();const u=n.Ma.get(e);if(!u)return o;for(const h of u){const m=n.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function Rw(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.Ca.d_=HC.bind(null,e.eventManager),e.Ca.$a=FC.bind(null,e.eventManager),e}function oN(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iN.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return dC(this.persistence,new hC,e.initialUser,this.serializer)}Ga(e){return new lC(Vp.Zr,this.serializer)}Wa(e){return new EC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>H0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await BC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qC})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),s=(function(u){return new SC(u)})(e.databaseInfo);return(function(u,h,m,p){return new IC(u,h,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,m){return new CC(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>H0(this.syncEngine,n,0)),(function(){return U0.D()?new U0:new TC})())}createSyncEngine(e,n){return(function(o,u,h,m,p,g,_){const w=new YC(o,u,h,m,p,g);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ae(o);de("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await gu(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=CT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{de("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(de("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=qp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Tm(r,e){r.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await uw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function G0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await uN(r);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>j0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>j0(e.remoteStore,o))),r._onlineComponents=e}async function uN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await Tm(r,new Eh)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await Tm(r,new Eh);return r._offlineComponents}async function Iw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await G0(r,r._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await G0(r,new Jm))),r._onlineComponents}function cN(r){return Iw(r).then((e=>e.syncEngine))}async function Th(r){const e=await Iw(r),n=e.eventManager;return n.onListen=XC.bind(null,e.syncEngine),n.onUnlisten=ZC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$C.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JC.bind(null,e.syncEngine),n}function hN(r,e,n={}){const s=new tr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,g){const _=new Yp({next:R=>{_.Za(),h.enqueueAndForget((()=>Fp(u,w)));const C=R.docs.has(m);!C&&R.fromCache?g.reject(new ce(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&R.fromCache&&p&&p.source==="server"?g.reject(new ce(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),w=new Kp(Vh(m.path),_,{includeMetadataChanges:!0,_a:!0});return Hp(u,w)})(await Th(r),r.asyncQueue,e,n,s))),s.promise}function fN(r,e,n={}){const s=new tr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,g){const _=new Yp({next:R=>{_.Za(),h.enqueueAndForget((()=>Fp(u,w))),R.fromCache&&p.source==="server"?g.reject(new ce(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),w=new Kp(m,_,{includeMetadataChanges:!0,_a:!0});return Hp(u,w)})(await Th(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r,e,n){if(!n)throw new ce(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function dN(r,e,n,s){if(e===!0&&s===!0)throw new ce(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Q0(r){if(!ge.isDocumentKey(r))throw new ce(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Y0(r){if(ge.isDocumentKey(r))throw new ce(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be()}function bn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(r);throw new ce(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X0(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Dx;switch(s.type){case"firstParty":return new Vx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=K0.get(n);s&&(de("ComponentProvider","Removing Datastore"),K0.delete(n),s.terminate())})(this),Promise.resolve()}}function mN(r,e,n,s={}){var o;const u=(r=bn(r,Gh))._getSettings(),h=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Wt.MOCK_USER;else{m=WA(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new ce(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Wt(g)}r._authCredentials=new Ox(new xT(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Jt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Yr extends is{constructor(e,n,s){super(e,n,Vh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ge(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function hn(r,e,...n){if(r=bt(r),Cw("collection","path",e),r instanceof Gh){const s=nt.fromString(e,...n);return Y0(s),new Yr(r,null,s)}{if(!(r instanceof Jt||r instanceof Yr))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return Y0(s),new Yr(r.firestore,null,s)}}function Ue(r,e,...n){if(r=bt(r),arguments.length===1&&(e=CT.newId()),Cw("doc","path",e),r instanceof Gh){const s=nt.fromString(e,...n);return Q0(s),new Jt(r,null,new ge(s))}{if(!(r instanceof Jt||r instanceof Yr))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return Q0(s),new Jt(r.firestore,r instanceof Yr?r.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hw(this,"async_queue_retry"),this.Vu=()=>{const s=Em();s&&de("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=Em();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Em();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new tr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!du(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m})(s);throw rr("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=zp.createAndSchedule(this,e,n,s,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function W0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Jr extends Gh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new $0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $0(e),this._firestoreClient=void 0,await e}}}function pN(r,e){const n=typeof r=="object"?r:kE(),s=typeof r=="string"?r:"(default)",o=lp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=XA("firestore");u&&mN(o,...u)}return o}function Kh(r){if(r._terminated)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gN(r),r._firestoreClient}function gN(r){var e,n,s;const o=r._freezeSettings(),u=(function(m,p,g,_){return new Yx(m,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,xw(_.experimentalLongPollingOptions),_.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new lN(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&(function(m){const p=m?._online.build();return{_offline:m?._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(Gt.fromBase64String(e))}catch(n){throw new ce(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class vN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class Nw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Yh{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Dw(this.Cu)&&yN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _N{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||zh(e)}Qu(e,n,s,o=!1){return new Yh({Cu:e,methodName:n,qu:s,path:Ht.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(r){const e=r._freezeSettings(),n=zh(r._databaseId);return new _N(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ow(r,e,n,s,o,u={}){const h=r.Qu(u.merge||u.mergeFields?2:0,e,n,o);eg("Data must be an object, but it was:",h,s);const m=kw(s,h);let p,g;if(u.merge)p=new wn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const R=ep(e,w,n);if(!h.contains(R))throw new ce(te.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Pw(_,R)||_.push(R)}p=new wn(_),g=h.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,g=h.fieldTransforms;return new vN(new cn(m),p,g)}class $h extends Ao{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function Mw(r,e,n){return new Yh({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wp extends Ao{_toFieldTransform(e){return new Np(e.path,new su)}isEqual(e){return e instanceof Wp}}class Zp extends Ao{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Mw(this,e,!0),s=this.Ku.map((u=>ia(u,n))),o=new co(s);return new Np(e.path,o)}isEqual(e){return e instanceof Zp&&so(this.Ku,e.Ku)}}class Jp extends Ao{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Mw(this,e,!0),s=this.Ku.map((u=>ia(u,n))),o=new ho(s);return new Np(e.path,o)}isEqual(e){return e instanceof Jp&&so(this.Ku,e.Ku)}}function EN(r,e,n,s){const o=r.Qu(1,e,n);eg("Data must be an object, but it was:",o,s);const u=[],h=cn.empty();ta(s,((p,g)=>{const _=tg(e,p,n);g=bt(g);const w=o.Nu(_);if(g instanceof $h)u.push(_);else{const R=ia(g,w);R!=null&&(u.push(_),h.set(_,R))}}));const m=new wn(u);return new Nw(h,m,o.fieldTransforms)}function TN(r,e,n,s,o,u){const h=r.Qu(1,e,n),m=[ep(e,s,n)],p=[o];if(u.length%2!=0)throw new ce(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(ep(e,u[R])),p.push(u[R+1]);const g=[],_=cn.empty();for(let R=m.length-1;R>=0;--R)if(!Pw(g,m[R])){const C=m[R];let V=p[R];V=bt(V);const z=h.Nu(C);if(V instanceof $h)g.push(C);else{const M=ia(V,z);M!=null&&(g.push(C),_.set(C,M))}}const w=new wn(g);return new Nw(_,w,h.fieldTransforms)}function wN(r,e,n,s=!1){return ia(n,r.Qu(s?4:3,e))}function ia(r,e){if(Vw(r=bt(r)))return eg("Unsupported field value:",e,r),kw(r,e);if(r instanceof Ao)return(function(s,o){if(!Dw(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let p=ia(m,o.Lu(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return g2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ct.fromDate(s);return{timestampValue:vh(o.serializer,u)}}if(s instanceof Ct){const u=new Ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vh(o.serializer,u)}}if(s instanceof Xp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof po)return{bytesValue:nw(o.serializer,s._byteString)};if(s instanceof Jt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof $p)return(function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw m.Bu("VectorValues must only contain numeric values.");return Cp(m.serializer,p)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${Fh(s)}`)})(r,e)}function kw(r,e){const n={};return NT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(r,((s,o)=>{const u=ia(o,e.Mu(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Vw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ct||r instanceof Xp||r instanceof po||r instanceof Jt||r instanceof Ao||r instanceof $p)}function eg(r,e,n){if(!Vw(n)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(n)){const s=Fh(n);throw s==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+s)}}function ep(r,e,n){if((e=bt(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return tg(r,e);throw wh("Field path arguments must be of type string or ",r,!1,void 0,n)}const bN=new RegExp("[~\\*/\\[\\]]");function tg(r,e,n){if(e.search(bN)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Qh(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function wh(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new ce(te.INVALID_ARGUMENT,m+r+p)}function Pw(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SN extends Lw{data(){return super.data()}}function Wh(r,e){return typeof e=="string"?tg(r,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ng{}class jw extends ng{}function go(r,e,...n){let s=[];e instanceof ng&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((p=>p instanceof ig)).length,m=u.filter((p=>p instanceof Zh)).length;if(h>1||h>0&&m>0)throw new ce(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Zh extends jw{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Zh(e,n,s)}_apply(e){const n=this._parse(e);return Bw(e._query,n),new is(e.firestore,e.converter,Fm(e._query,n))}_parse(e){const n=Xh(e.firestore);return(function(u,h,m,p,g,_,w){let R;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){J0(w,_);const C=[];for(const V of w)C.push(Z0(p,u,V));R={arrayValue:{values:C}}}else R=Z0(p,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||J0(w,_),R=wN(m,h,w,_==="in"||_==="not-in");return wt.create(g,_,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ks(r,e,n){const s=e,o=Wh("where",r);return Zh._create(o,s,n)}class ig extends ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ig(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)Bw(h,p),h=Fm(h,p)})(e._query,n),new is(e.firestore,e.converter,Fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rg extends jw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ru(u,h)})(e._query,this._field,this._direction);return new is(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new wo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function sg(r,e="asc"){const n=e,s=Wh("orderBy",r);return rg._create(s,n)}function Z0(r,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new ce(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&n.indexOf("/")!==-1)throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(nt.fromString(n));if(!ge.isDocumentKey(s))throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _0(r,new ge(s))}if(n instanceof Jt)return _0(r,n._key);throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function J0(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bw(r,e){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ta(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((h=>gt(h.doubleValue)));return new $p(u)}convertGeoPoint(e){return new Xp(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ap(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nt.fromString(e);Ye(lw(s));const o=new nu(s.get(1),s.get(3)),u=new ge(s.popFirst(5));return o.isEqual(n)||rr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qw extends Lw{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Wh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class rh extends qw{data(e={}){return super.data(e)}}class Hw{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new Hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:RN(m.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(r){r=bn(r,Jt);const e=bn(r.firestore,Jr);return hN(Kh(e),r._key).then((n=>Fw(e,r,n)))}class ag extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function tp(r){r=bn(r,is);const e=bn(r.firestore,Jr),n=Kh(e),s=new ag(e);return Uw(r._query),fN(n,r._query).then((o=>new Hw(e,s,r,o)))}function Sn(r,e,n){r=bn(r,Jt);const s=bn(r.firestore,Jr),o=zw(r.converter,e,n);return og(s,[Ow(Xh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Xn.none())])}function ar(r,e,n,...s){r=bn(r,Jt);const o=bn(r.firestore,Jr),u=Xh(o);let h;return h=typeof(e=bt(e))=="string"||e instanceof Qh?TN(u,"updateDoc",r._key,e,n,s):EN(u,"updateDoc",r._key,e),og(o,[h.toMutation(r._key,Xn.exists(!0))])}function Jh(r,e){const n=bn(r.firestore,Jr),s=Ue(r),o=zw(r.converter,e);return og(n,[Ow(Xh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Xn.exists(!1))]).then((()=>s))}function fn(r,...e){var n,s,o;r=bt(r);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||W0(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(W0(e[h])){const w=e[h];e[h]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[h+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[h+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,_;if(r instanceof Jt)g=bn(r.firestore,Jr),_=Vh(r._key.path),p={next:w=>{e[h]&&e[h](Fw(g,r,w))},error:e[h+1],complete:e[h+2]};else{const w=bn(r,is);g=bn(w.firestore,Jr),_=w._query;const R=new ag(g);p={next:C=>{e[h]&&e[h](new Hw(g,R,w,C))},error:e[h+1],complete:e[h+2]},Uw(r._query)}return(function(R,C,V,z){const M=new Yp(z),Y=new Kp(C,M,V);return R.asyncQueue.enqueueAndForget((async()=>Hp(await Th(R),Y))),()=>{M.Za(),R.asyncQueue.enqueueAndForget((async()=>Fp(await Th(R),Y)))}})(Kh(g),_,m,p)}function og(r,e){return(function(s,o){const u=new tr;return s.asyncQueue.enqueueAndForget((async()=>eN(await cN(s),o,u))),u.promise})(Kh(r),e)}function Fw(r,e,n){const s=n.docs.get(e._key),o=new ag(r);return new qw(r,o,e._key,s,new Hl(n.hasPendingWrites,n.fromCache),e.converter)}function an(){return new Wp("serverTimestamp")}function IN(...r){return new Zp("arrayUnion",r)}function xN(...r){return new Jp("arrayRemove",r)}(function(e,n=!0){(function(o){To=o})(ea),Ys(new Xr("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Jr(new Mx(s.getProvider("auth-internal")),new Lx(s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(g.options.projectId,_)})(h,o),h);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),mi(m0,"4.7.3",e),mi(m0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="firebasestorage.googleapis.com",CN="storageBucket",NN=120*1e3,DN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends bi{constructor(e,n,s=0){super(wm(e),`Firebase Storage: ${n} (${wm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Si.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ti;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ti||(Ti={}));function wm(r){return"storage/"+r}function ON(){const r="An unknown error occurred, please check the error payload for server response.";return new Si(Ti.UNKNOWN,r)}function MN(){return new Si(Ti.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kN(){return new Si(Ti.CANCELED,"User canceled the upload/download.")}function VN(r){return new Si(Ti.INVALID_URL,"Invalid URL '"+r+"'.")}function PN(r){return new Si(Ti.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function eE(r){return new Si(Ti.INVALID_ARGUMENT,r)}function Kw(){return new Si(Ti.APP_DELETED,"The Firebase app was deleted.")}function LN(r){return new Si(Ti.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Qn.makeFromUrl(e,n)}catch{return new Qn(e,"")}if(s.path==="")return s;throw PN(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(ne){ne.path_=decodeURIComponent(ne.path)}const _="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${_}/b/${o}/o${R}`,"i"),V={bucket:1,path:3},z=n===Gw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",Y=new RegExp(`^https?://${z}/${o}/${M}`,"i"),Z=[{regex:m,indices:p,postModify:u},{regex:C,indices:V,postModify:g},{regex:Y,indices:{bucket:1,path:2},postModify:g}];for(let ne=0;ne<Z.length;ne++){const se=Z[ne],he=se.regex.exec(e);if(he){const O=he[se.indices.bucket];let A=he[se.indices.path];A||(A=""),s=new Qn(O,A),se.postModify(s);break}}if(s==null)throw VN(e);return s}}class UN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r,e,n){let s=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let g=!1;function _(...M){g||(g=!0,e.apply(null,M))}function w(M){o=setTimeout(()=>{o=null,r(C,p())},M)}function R(){u&&clearTimeout(u)}function C(M,...Y){if(g){R();return}if(M){R(),_.call(null,M,...Y);return}if(p()||h){R(),_.call(null,M,...Y);return}s<64&&(s*=2);let Z;m===1?(m=2,Z=0):Z=(s+Math.random())*1e3,w(Z)}let V=!1;function z(M){V||(V=!0,R(),!g&&(o!==null?(M||(m=2),clearTimeout(o),w(0)):M||(m=1)))}return w(0),u=setTimeout(()=>{h=!0,z(!0)},n),z}function BN(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(r){return r!==void 0}function tE(r,e,n,s){if(s<e)throw eE(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw eE(`Invalid value for '${r}'. Expected ${n} or less.`)}function qN(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var bh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(bh||(bh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,s,o,u,h,m,p,g,_,w,R=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,V)=>{this.resolve_=C,this.reject_=V,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Qc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===bh.NO_ERROR,p=u.getStatus();if(!m||HN(p,this.additionalRetryCodes_)&&this.retry){const _=u.getErrorCode()===bh.ABORT;s(!1,new Qc(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new Qc(g,u))})},n=(s,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());zN(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=ON();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?Kw():kN();h(p)}else{const p=MN();h(p)}};this.canceled_?n(!1,new Qc(!1,null,!0)):this.backoffId_=jN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function GN(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function KN(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QN(r,e){e&&(r["X-Firebase-GMPID"]=e)}function YN(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function XN(r,e,n,s,o,u,h=!0){const m=qN(r.urlParams),p=r.url+m,g=Object.assign({},r.headers);return QN(g,e),GN(g,n),KN(g,u),YN(g,s),new FN(p,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function WN(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this._service=e,n instanceof Qn?this._location=n:this._location=Qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sh(e,n)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WN(this._location.path)}get storage(){return this._service}get parent(){const e=$N(this._location.path);if(e===null)return null;const n=new Qn(this._location.bucket,e);return new Sh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LN(e)}}function nE(r,e){const n=e?.[CN];return n==null?null:Qn.makeFromBucketSpec(n,r)}class ZN{constructor(e,n,s,o,u){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=Gw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NN,this._maxUploadRetryTime=DN,this._requests=new Set,o!=null?this._bucket=Qn.makeFromBucketSpec(o,this._host):this._bucket=nE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=nE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sh(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new UN(Kw());{const h=XN(e,this._appId,s,o,n,this._firebaseVersion,u);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const iE="@firebase/storage",rE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="storage";function eD(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new ZN(n,s,o,e,ea)}function tD(){Ys(new Xr(JN,eD,"PUBLIC").setMultipleInstances(!0)),mi(iE,rE,""),mi(iE,rE,"esm2017")}tD();const Hs={apiKey:"AIzaSyBz72fyTht-OZNaTkpMqYMpwcw1MpcBHmA",authDomain:"live-stream-app-139f1.firebaseapp.com",projectId:"live-stream-app-139f1",storageBucket:"live-stream-app-139f1.appspot.com",messagingSenderId:"311177662154",appId:"1:311177662154:web:3b8aa122d7515bc23f6e33"},nD={apiKey:"VITE_FIREBASE_API_KEY",authDomain:"VITE_FIREBASE_AUTH_DOMAIN",projectId:"VITE_FIREBASE_PROJECT_ID",storageBucket:"VITE_FIREBASE_STORAGE_BUCKET",messagingSenderId:"VITE_FIREBASE_MESSAGING_SENDER_ID",appId:"VITE_FIREBASE_APP_ID"};Object.entries(Hs).forEach(([r,e])=>{const n=nD[r];e||console.warn(`Missing ${n} in environment (.env)`)});const sE={apiKey:Hs.apiKey,authDomain:Hs.authDomain,projectId:Hs.projectId,storageBucket:Hs.storageBucket,messagingSenderId:Hs.messagingSenderId,appId:Hs.appId,measurementId:"G-CQTDYNBBBW"};let bm=null,Yc=null,Sm=null;const Ah=new Wi;function Qw(){if(!bm){if(!sE.apiKey)throw new Error("Missing VITE_FIREBASE_API_KEY in environment. Add .env and restart dev server.");bm=ME(sE)}return bm}function ra(){return Yc||(Yc=Tp(Qw()),iD(Yc).catch(()=>{})),Yc}function ft(){return Sm||(Sm=pN(Qw())),Sm}async function iD(r){try{await gm(r,cT);return}catch{}try{await gm(r,yp);return}catch{}try{await gm(r,Pm)}catch{}}function Ro(){const[r,e]=U.useState(null),[n,s]=U.useState(!0);return U.useEffect(()=>{const o=ra(),u=aT(o,h=>{e(h?{uid:h.uid,displayName:h.displayName??null,email:h.email??null,photoURL:h.photoURL??null}:null),s(!1)});return()=>u()},[]),{user:r,loading:n}}const Yw=U.createContext(void 0);function rD({children:r}){const e=Ro();return T.jsx(Yw.Provider,{value:e,children:r})}function ef(){const r=U.useContext(Yw);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function zs({children:r}){const{user:e,loading:n}=ef();return n?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:T.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?T.jsx(T.Fragment,{children:r}):T.jsx(bE,{to:"/login",replace:!0})}function aE({children:r}){const{user:e,loading:n}=ef();return n?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:T.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?T.jsx(bE,{to:"/",replace:!0}):T.jsx(T.Fragment,{children:r})}function Xw({value:r,onChange:e,onSubmit:n}){const[s,o]=U.useState(r??"");U.useEffect(()=>{typeof r=="string"&&o(r)},[r]);function u(h){h.preventDefault(),n?.(s.trim())}return T.jsx("form",{onSubmit:u,className:"search",children:T.jsx("input",{value:s,onChange:h=>{o(h.target.value),e?.(h.target.value)},className:"w-full px-3 py-2 rounded-full bg-transparent text-inherit placeholder:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",placeholder:"Search","aria-label":"Search"})})}function lg({photoURL:r,displayName:e,email:n,size:s=36,className:o=""}){const u=(e??n??"")[0]?.toUpperCase()??"?";return r?T.jsx("img",{src:r,alt:e??"avatar",width:s,height:s,className:`rounded-full object-cover ${o}`}):T.jsx("div",{className:`flex items-center justify-center bg-primary text-white rounded-full font-medium ${o}`,style:{width:s,height:s},"aria-hidden":!0,children:u})}function sD(){const{user:r,loading:e}=ef(),[n,s]=U.useState(!1),o=U.useRef(null),u=lr();U.useEffect(()=>{function p(g){o.current&&!o.current.contains(g.target)&&s(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=async()=>{try{const p=ra();await oT(p),s(!1),u("/login")}catch(p){console.error("Error signing out:",p)}},m=()=>{s(!1),u("/profile/me")};return T.jsx("header",{className:"fixed top-0 left-0 w-full bg-white/90 h-14 z-20 backdrop-blur border-b",children:T.jsxs("div",{className:"max-w-5xl mx-auto h-full px-4 flex items-center justify-between",children:[T.jsx("div",{className:"flex items-center gap-4",children:T.jsx(_i,{to:"/",className:"font-extrabold text-blue-600 text-lg",children:"LivePulse"})}),T.jsx("div",{className:"flex-1 px-4",children:T.jsx(Xw,{})}),T.jsx("div",{className:"flex items-center gap-3",children:e?T.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-200 animate-pulse"}):r?T.jsxs("div",{className:"relative",ref:o,children:[T.jsx("button",{onClick:()=>s(!n),className:"w-9 h-9 rounded-full overflow-hidden hover:ring-2 hover:ring-blue-200 transition-all","aria-label":"User menu",children:T.jsx(lg,{photoURL:r.photoURL,displayName:r.displayName,email:r.email,size:36})}),n&&T.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[T.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile"}),T.jsx("button",{onClick:h,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Logout"})]})]}):T.jsx(_i,{to:"/login",className:"w-9 h-9 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors","aria-label":"Sign in",children:T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})})]})})}/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oD=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),oE=r=>{const e=oD(r);return e.charAt(0).toUpperCase()+e.slice(1)},$w=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),lD=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=U.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},p)=>U.createElement("svg",{ref:p,...uD,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:$w("lucide",o),...!u&&!lD(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,_])=>U.createElement(g,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=(r,e)=>{const n=U.forwardRef(({className:s,...o},u)=>U.createElement(cD,{ref:u,iconNode:e,className:$w(`lucide-${aD(oE(r))}`,`lucide-${r}`,s),...o}));return n.displayName=oE(r),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],fD=An("bookmark",hD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mD=An("compass",dD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],gD=An("ellipsis",pD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],vD=An("heart",yD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ED=An("house",_D);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wD=An("log-out",TD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],SD=An("message-square",bD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],RD=An("search",AD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],xD=An("share-2",ID);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ND=An("square-plus",CD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],OD=An("tv",DD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kD=An("user",MD);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PD=An("users",VD),LD=[{to:"/",label:"For You",icon:ED},{to:"/explore",label:"Explore",icon:mD},{to:"/following",label:"Following",icon:PD},{to:"/upload",label:"Upload",icon:ND},{to:"/live",label:"LIVE",icon:OD},{to:"/profile/me",label:"Profile",icon:kD},{to:"/more",label:"More",icon:gD}];function UD(){const{user:r,loading:e}=ef(),n=lr(),s=async()=>{try{const o=ra();await oT(o),n("/login")}catch(o){console.error("Error signing out:",o)}};return T.jsxs("aside",{className:"sidebar px-3",children:[T.jsx("div",{className:"mb-4",children:T.jsxs("div",{className:"flex items-center gap-2 px-2 py-2 rounded-md bg-[var(--panel)] shadow-sm",children:[T.jsx(RD,{className:"w-5 h-5 text-[var(--muted)]"}),T.jsx("input",{placeholder:"Search","aria-label":"Search",className:"bg-transparent outline-none w-full text-sm text-[var(--muted)]"})]})}),T.jsx("nav",{className:"nav",children:LD.map(o=>{const u=o.icon;return T.jsx(L_,{to:o.to,children:({isActive:h})=>T.jsxs("div",{className:`relative flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--panel)]/60 transition-colors ${h?"font-semibold text-[var(--primary)] bg-[var(--primary)]/10":"text-[var(--muted)]"}`,children:[T.jsx("span",{className:"flex items-center justify-center w-8 h-8",children:T.jsx(u,{className:"w-5 h-5"})}),T.jsx("span",{className:"truncate",children:o.label}),h&&T.jsx("span",{className:"absolute left-0 top-0 h-full w-1 rounded-r bg-[var(--primary)]"})]})},o.to)})}),T.jsx("div",{className:"mt-6",children:e?T.jsx("div",{className:"w-full px-4 py-2 rounded-md bg-gray-200 animate-pulse h-10"}):r?T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-md bg-[var(--panel)]",children:[T.jsx(lg,{photoURL:r.photoURL,displayName:r.displayName,email:r.email,size:32}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("div",{className:"text-sm font-medium text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),T.jsx("div",{className:"text-xs text-[var(--muted)] truncate",children:r.email})]})]}),T.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white font-medium transition-colors",children:[T.jsx(wD,{className:"w-4 h-4"}),"Logout"]})]}):T.jsx(L_,{to:"/login",children:T.jsx("button",{className:"w-full px-4 py-2 rounded-md bg-[var(--primary)] text-white font-medium hover:bg-[var(--primary)]/90 transition-colors",children:"Log in"})})})]})}function jD(){return T.jsx("aside",{className:"h-[calc(100vh-4rem)] sticky top-14 overflow-auto pr-2",children:T.jsx("div",{className:"p-3",children:T.jsx(UD,{})})})}function Xc({icon:r,label:e,count:n}){return T.jsxs("div",{className:"flex flex-col items-center gap-1",children:[T.jsx("button",{"aria-label":e,className:"w-12 h-12 rounded-full bg-[var(--panel)] flex items-center justify-center shadow-md",children:r}),typeof n=="number"&&T.jsx("span",{className:"text-sm text-[var(--muted)]",children:n})]})}function BD(){return T.jsxs("div",{className:"p-3 sticky top-40 flex flex-col items-center gap-4",children:[T.jsx(Xc,{icon:T.jsx(vD,{className:"w-5 h-5 text-[var(--primary)]"}),label:"Like",count:124}),T.jsx(Xc,{icon:T.jsx(SD,{className:"w-5 h-5 text-[var(--primary)]"}),label:"Comment",count:32}),T.jsx(Xc,{icon:T.jsx(xD,{className:"w-5 h-5 text-[var(--primary)]"}),label:"Share"}),T.jsx(Xc,{icon:T.jsx(fD,{className:"w-5 h-5 text-[var(--primary)]"}),label:"Save"})]})}function zD(){return U.useEffect(()=>{document.documentElement.setAttribute("data-theme","dark")},[]),T.jsxs("div",{className:"appShell min-h-screen bg-[var(--bg)] text-white",children:[T.jsx(sD,{}),T.jsx("div",{className:"pt-18",children:T.jsx("div",{className:"mx-auto max-w-[1300px] px-2 md:px-4 lg:px-6",children:T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[200px_minmax(560px,600px)_200px] xl:grid-cols-[240px_minmax(560px,600px)_260px] gap-4",children:[T.jsx("div",{className:"lg:block",children:T.jsx(jD,{})}),T.jsx("main",{className:"min-h-[calc(100vh-2rem)]",children:T.jsx(RA,{})}),T.jsx("div",{className:"lg:block",children:T.jsx(BD,{})})]})})})]})}const qD="userId";function Ww(r){const e=ft(),n=go(hn(e,"liveStreams"),Ks("status","==","live"),sg("startedAt","desc")),s=m=>{const p=m.lastSeen||m.startedAt;try{return typeof p?.toMillis=="function"?p.toMillis():typeof p=="number"?p:0}catch{return 0}},o=m=>{const p=new Map;for(const g of m){const _=g.uid||"unknown",w=p.get(_);if(!w){p.set(_,g);continue}s(g)>s(w)&&p.set(_,g)}return Array.from(p.values()).sort((g,_)=>s(_)-s(g))},u=m=>{const p=m.map(g=>g.data());return o(p)};let h=()=>{};return h=fn(n,m=>{r(u(m.docs))},m=>{console.warn("[live] orderBy index missing or query failed, falling back:",m?.message||m);try{h()}catch{}const p=go(hn(e,"liveStreams"),Ks("status","==","live"));h=fn(p,g=>{const w=g.docs.map(R=>R.data()).sort((R,C)=>{const V=z=>{try{return typeof z?.toMillis=="function"?z.toMillis():typeof z=="number"?z:0}catch{return 0}};return V(C.startedAt)-V(R.startedAt)});r(o(w))})}),()=>{try{h()}catch{}}}function HD(){const[r,e]=U.useState([]),[n,s]=U.useState(!0),[o,u]=U.useState(null);return U.useEffect(()=>{s(!0),u(null);const h=Ww(m=>{const p=m.map(g=>({id:g.id,title:g.title,streamer:g.displayName||"Unknown",videoUrl:"",viewers:0,isLive:g.status==="live",thumbnail:g.photoURL||""}));e(p),s(!1)});return()=>{try{h()}catch{}}},[]),{streams:r,loading:n,error:o}}function FD(){const{streams:r,loading:e,error:n}=HD();return T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Live Now"}),e&&T.jsx("div",{className:"text-sm text-[var(--muted)]",children:"Loading…"}),!e&&n&&T.jsx("div",{className:"text-sm text-red-400",children:n}),!e&&!n&&r.length===0&&T.jsx("div",{className:"text-sm text-[var(--muted)]",children:"No one is live right now."}),!e&&!n&&r.length>0&&T.jsx("div",{className:"grid gap-3",children:r.filter(s=>s.isLive).map(s=>T.jsxs(_i,{to:`/watch/${s.id}`,className:"flex items-center gap-3 p-3 rounded-md bg-[var(--panel)] hover:bg-[var(--panel)]/70 transition-colors",children:[s.thumbnail?T.jsx("img",{src:s.thumbnail,alt:s.streamer,className:"w-12 h-12 rounded-full object-cover"}):T.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary text-white",children:(s.streamer||"U")[0].toUpperCase()}),T.jsxs("div",{className:"min-w-0",children:[T.jsx("div",{className:"text-white font-medium truncate",children:s.streamer}),T.jsx("div",{className:"text-sm text-[var(--muted)] truncate",children:s.title})]}),T.jsx("span",{className:"ml-auto text-xs px-2 py-1 rounded bg-red-600 text-white",children:"LIVE"})]},s.id))})]})}function GD({live:r}){return T.jsxs("div",{className:"meta",children:[T.jsxs("div",{className:"handle",children:["@",r.userHandle," · ",r.viewers," viewers"]}),T.jsx("div",{className:"title",children:r.title}),T.jsx("div",{className:"tags",children:r.tags.slice(0,3).map(e=>T.jsxs("span",{className:"tag",children:["#",e]},e))})]})}function lE({compact:r}){return T.jsxs("div",{className:r?"actions compact":"actions",role:"toolbar","aria-label":"live actions",children:[T.jsx("button",{"aria-label":"like",children:"❤"}),T.jsx("button",{"aria-label":"comment",children:"💬"}),T.jsx("button",{"aria-label":"share",children:"↗"})]})}function KD({live:r}){return T.jsxs("article",{className:"relative w-full h-full",children:[r.thumbnail?T.jsx("img",{src:r.thumbnail,alt:r.title,className:"absolute inset-0 w-full h-full object-cover"}):T.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl text-white/30",children:"🎬"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[var(--primary)]/40 to-transparent"}),T.jsx("div",{className:"absolute left-4 bottom-6 z-10",children:T.jsx(GD,{live:r})}),T.jsx("div",{className:"absolute right-4 bottom-20 z-10 hidden md:flex flex-col items-center gap-4",children:T.jsx(lE,{liveId:r.id})}),T.jsx("div",{className:"absolute right-4 bottom-6 z-10 md:hidden",children:T.jsx(lE,{liveId:r.id,compact:!0})})]})}function QD(r){return(r||"user").toString().trim().toLowerCase().replace(/\s+/g,"")}function YD(){const[r,e]=U.useState([]),[n,s]=U.useState(!0);return U.useEffect(()=>{s(!0);const u=Ww(h=>{e(h),s(!1)});return()=>{try{u()}catch{}}},[]),{items:U.useMemo(()=>r.filter(u=>u.status==="live").map(u=>({id:u.id,userHandle:QD(u.displayName||""),userName:u.displayName||"",title:u.title,viewers:0,tags:[],thumbnail:u.photoURL||void 0,isLive:!0,startedAt:void 0,isFollowed:!1})),[r]),loading:n}}function XD(){const r=U.useRef(null),[e,n]=U.useState(0),s=U.useCallback(h=>{const m=r.current;if(!m)return;const p=Array.from(m.querySelectorAll(".snap-start")),g=Math.max(0,Math.min(p.length-1,h)),_=p[g];_&&(_.scrollIntoView({behavior:"smooth"}),n(g))},[]),o=U.useCallback(()=>s(e+1),[e,s]),u=U.useCallback(()=>s(e-1),[e,s]);return U.useEffect(()=>{const h=r.current;if(!h)return;const m=()=>{const p=Array.from(h.querySelectorAll(".snap-start"));if(!p.length)return;const g=h.scrollTop;let _=0,w=1/0;p.forEach((R,C)=>{const V=Math.abs(R.offsetTop-g);V<w&&(w=V,_=C)}),n(_)};return h.addEventListener("scroll",m,{passive:!0}),m(),()=>h.removeEventListener("scroll",m)},[r]),{containerRef:r,activeIndex:e,next:o,prev:u}}function $D({onUp:r,onDown:e,onMuteToggle:n}){U.useEffect(()=>{const s=o=>{o.key==="ArrowDown"?(o.preventDefault(),e?.()):o.key==="ArrowUp"?(o.preventDefault(),r?.()):o.key.toLowerCase()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r,e,n])}function WD({filterFollowed:r=!1}){const{items:e}=YD(),{containerRef:n,next:s,prev:o}=XD();$D({onDown:s,onUp:o,onMuteToggle:()=>{}});const u=r?e.filter(h=>!!h.isFollowed):e;return U.useEffect(()=>{},[n]),T.jsxs("div",{ref:n,className:"feedContainer h-[calc(100vh-4rem)] snap-y snap-mandatory overflow-auto","aria-label":"feed",children:[u.map(h=>T.jsx("div",{className:"snap-start h-full flex items-center justify-center",children:T.jsx("div",{className:"w-full flex items-center justify-center",children:T.jsx("div",{className:"max-w-[600px] w-full px-2",children:T.jsx("div",{className:"h-[calc(100vh-4rem)] flex items-center justify-center",children:T.jsx("div",{className:"relative mx-auto aspect-[9/16] w-full max-w-[600px] rounded-2xl overflow-hidden shadow-lg bg-black",children:T.jsx(KD,{live:h})})})})})},h.id)),T.jsx("div",{id:"feed-end",className:"h-24"})]})}function ZD(){return T.jsx("div",{className:"pt-12 max-w-5xl mx-auto",children:T.jsx(WD,{})})}const JD=["music","gaming","chat","cooking","art","fitness","tech","travel"];function eO(){return T.jsxs("div",{className:"pt-12 max-w-5xl mx-auto p-4",children:[T.jsx("div",{className:"mb-4",children:T.jsx(Xw,{})}),T.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:JD.map(r=>T.jsxs("div",{className:"p-6 bg-gray-800 rounded text-center",children:["#",r]},r))})]})}function tO(r){const[e,n]=U.useState(null),[s,o]=U.useState(!0),[u,h]=U.useState(null);return U.useEffect(()=>{let m,p=!1;async function g(_){try{const w=ft(),R=Ue(w,"users",_),C=await sh(R);if(!C.exists())h("not-found"),n(null);else{const V=C.data(),z={uid:V.uid||void 0,handle:V.uid||"",name:V.name||V.displayName||"",avatarUrl:V.avatarUrl||void 0,role:V.role||"user",email:V.email||void 0,createdAt:V.createdAt||void 0};n(z)}}catch(w){h(w?.message??String(w)),n(null)}finally{p||o(!1)}}if(o(!0),h(null),n(null),r==="me"){const _=ra();m=aT(_,w=>{const R=w;R&&typeof R.uid=="string"?g(R.uid):(o(!1),h("not-authenticated"))})}else g(r);return()=>{p=!0,m&&m()}},[r]),{user:e,loading:s,error:u}}function nO(){const{handle:r}=sp(),e=lr(),n=r||"me",{user:s,loading:o,error:u}=tO(n);if(U.useEffect(()=>{u==="not-authenticated"&&e("/login")},[u,e]),o)return T.jsx("div",{className:"pt-12 p-4 text-center",children:"Loading profile..."});if(u)return T.jsxs("div",{className:"pt-12 p-4 text-center text-red-400",children:["Error: ",u]});if(!s)return T.jsx("div",{className:"pt-12 p-4 text-center",children:"Profile not found"});let h;const m=s.createdAt;return typeof m=="number"?h=new Date(m):m&&typeof m=="object"&&"seconds"in m&&typeof m.seconds=="number"?h=new Date(m.seconds*1e3):h=void 0,T.jsx("div",{className:"pt-12 min-h-screen flex items-start justify-center",children:T.jsxs("div",{className:"mt-8 w-full max-w-lg bg-gray-900 text-white rounded-lg p-6 shadow-lg",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-20 h-20 bg-blue-300 rounded-full flex items-center justify-center text-xl font-bold text-white",children:s.name?.charAt(0)??"?"}),T.jsxs("div",{children:[T.jsx("div",{className:"text-2xl font-semibold",children:s.name}),T.jsx("div",{className:"text-sm text-gray-300",children:s.email})]})]}),T.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm text-gray-300",children:[T.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:["Role: ",T.jsx("span",{className:"font-medium text-white",children:s.role})]}),T.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:["Joined: ",T.jsx("span",{className:"font-medium text-white",children:h?h.toLocaleDateString():"—"})]})]})]})})}const Zw={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyBz72fyTht-OZNaTkpMqYMpwcw1MpcBHmA",VITE_FIREBASE_APP_ID:"1:311177662154:web:3b8aa122d7515bc23f6e33",VITE_FIREBASE_AUTH_DOMAIN:"live-stream-app-139f1.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-CQTDYNBBBW",VITE_FIREBASE_MESSAGING_SENDER_ID:"311177662154",VITE_FIREBASE_PROJECT_ID:"live-stream-app-139f1",VITE_FIREBASE_STORAGE_BUCKET:"live-stream-app-139f1.appspot.com",VITE_FORCE_RELAY_FOR_BROADCASTER:"false",VITE_FORCE_RELAY_FOR_VIEWER:"true",VITE_PREFER_H264:"true",VITE_TURN_CREDENTIAL:"",VITE_TURN_URL:"",VITE_TURN_USERNAME:""};function iO(){return[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]}function tf(r){const e=Zw||{},n=(e.VITE_FORCE_RELAY_FOR_VIEWER||"false")==="true",s=(e.VITE_FORCE_RELAY_FOR_BROADCASTER||"false")==="true",o={iceServers:iO(),iceCandidatePoolSize:2};try{const u=(o.iceServers||[]).some(h=>Array.isArray(h.urls)?h.urls.some(m=>m.startsWith("turn:")||m.startsWith("turns:")):typeof h.urls=="string"&&h.urls.startsWith("turn"));(r==="viewer"&&n||r==="broadcaster"&&s)&&(u?o.iceTransportPolicy="relay":console.warn(`[RTC] ${r}: FORCE_RELAY requested but no TURN configured; falling back to default policy.`)),console.log(`[RTC] ${r} config:`,{hasTurn:u,forceRelayViewer:n,forceRelayBroadcaster:s,policy:o.iceTransportPolicy||"all"})}catch{}return o}function Jw(r){try{if(!(((Zw||{}).VITE_PREFER_H264||"false")==="true"))return;const s=RTCRtpSender.getCapabilities?.(r.sender.track?.kind||"video");if(!s||!s.codecs)return;const u=s.codecs.slice().sort((h,m)=>{const p=g=>String(g.mimeType||"").toLowerCase().includes("h264")?0:1;return p(h)-p(m)});r.setCodecPreferences?.(u),console.log("🎛️ Applied codec preference (H264 first)")}catch{}}async function rO(r,e,n){if(!r||!(r instanceof MediaStream))throw console.error("⚠️ createBroadcasterPC called without valid MediaStream!",r),new Error("❌ Broadcaster must be started with a valid MediaStream");console.log("🎥 Creating broadcaster PC for stream:",e),console.log("📹 Local tracks:",r.getTracks().map(C=>({kind:C.kind,id:C.id,enabled:C.enabled,muted:C.muted,readyState:C.readyState})));const s=new RTCPeerConnection(tf("broadcaster")),o=r.getVideoTracks()[0]||null,u=r.getAudioTracks()[0]||null;if(!o&&!u&&console.warn("⚠️ No local tracks found on stream"),o){try{o.enabled=!0}catch{}console.log("➕ Adding VIDEO track:",o.id,{enabled:o.enabled,muted:o.muted,readyState:o.readyState});const C=s.addTrack(o,r);try{const V=s.getTransceivers?.()?.find(z=>z.sender===C);V&&Jw(V)}catch{}}else console.warn("⚠️ No local VIDEO track found");if(u){try{u.enabled=!0}catch{}console.log("➕ Adding AUDIO track:",u.id,{enabled:u.enabled,muted:u.muted,readyState:u.readyState}),s.addTrack(u,r)}else console.warn("⚠️ No local AUDIO track found");try{const C=s.getSenders();console.log("📤 Broadcaster senders:",C.map(V=>({kind:V.track?.kind,state:V.track?.readyState,enabled:V.track?.enabled})))}catch{}try{const C=s.getTransceivers?.()||[];console.log("📡 Broadcaster transceivers:",C.map(V=>({dir:V.direction,current:V.currentDirection,kind:V.sender?.track?.kind,enabled:V.sender?.track?.enabled})))}catch{}s.ontrack=C=>{console.log("📡 Broadcaster got remote track (loopback?):",C.track.kind,{readyState:C.track.readyState,muted:C.track.muted})};const h=ft(),m=e;s.onicecandidate=async C=>{if(C.candidate)try{console.log("🧊 Broadcaster ICE candidate:",C.candidate.candidate),await Jh(hn(h,"liveStreams",m,"candidates_broadcaster"),C.candidate.toJSON())}catch(V){console.error("❌ Failed to add broadcaster ICE candidate:",V)}},console.log("📝 Creating broadcaster offer…");const p=await s.createOffer();await s.setLocalDescription(p);try{const C=p?.sdp||"";/\nm=video /.test(C)||console.warn("⚠️ Offer SDP has no m=video line; viewer may get audio-only")}catch{}try{await Sn(Ue(h,"liveStreams",m,"sdp","offer"),p),console.log("✅ Broadcaster offer saved")}catch(C){throw console.error("❌ Failed to save offer:",C),C}const g=fn(Ue(h,"liveStreams",m,"sdp","answer"),async C=>{if(!C.exists())return;const V=C.data();try{const z=s.remoteDescription?.sdp||"",M=V?.sdp||"";!z||z!==M?(await s.setRemoteDescription(new RTCSessionDescription(V)),console.log("✅ Remote description set from viewer answer")):console.log("ℹ️ Answer SDP unchanged — skipping reapply")}catch(z){console.error("❌ Failed to set remote description:",z)}}),_=fn(hn(h,"liveStreams",m,"candidates_viewers"),C=>{C.docChanges().forEach(V=>{if(V.type==="added"){const z=V.doc.data();console.log("🧊 Adding viewer ICE candidate (plural):",z.candidate),s.addIceCandidate(new RTCIceCandidate(z)).catch(M=>{console.error("❌ Failed to add viewer ICE candidate:",M)})}})});s.onconnectionstatechange=()=>{console.log("host pc:",s.connectionState)},s.oniceconnectionstatechange=()=>{console.log("host ice:",s.iceConnectionState)},s.onnegotiationneeded=async()=>{try{console.log("🧩 Broadcaster negotiationneeded: creating new offer");const C=await s.createOffer();await s.setLocalDescription(C),await Sn(Ue(ft(),"liveStreams",m,"sdp","offer"),C)}catch(C){console.error("❌ negotiationneeded failed:",C)}};let w=!1;s.oniceconnectionstatechange=async()=>{if(console.log("🧊 Broadcaster ICE state:",s.iceConnectionState),(s.iceConnectionState==="failed"||s.iceConnectionState==="disconnected")&&!w){console.warn("⚠️ Broadcaster ICE issue, attempting ICE restart…");try{w=!0;const C=await s.createOffer({iceRestart:!0});await s.setLocalDescription(C),await Sn(Ue(ft(),"liveStreams",m,"sdp","offer"),C),console.log("🔁 Broadcaster ICE restart offer saved")}catch(C){console.error("❌ ICE restart failed:",C)}finally{setTimeout(()=>w=!1,3e3)}}};try{let C=0,V=0,z=!1;const M=setInterval(async()=>{try{const Y=s.getSenders().find(O=>O.track&&O.track.kind==="video");let X=0,Z=0,ne=0,se=0,he=!1;Y&&typeof Y.getStats=="function"?(await Y.getStats()).forEach(A=>{A.type==="outbound-rtp"&&(X=A.bytesSent||X,Z=A.framesEncoded||Z),A.type==="track"&&(ne=A.frameWidth||ne,se=A.frameHeight||se)}):(await s.getStats()).forEach(A=>{A.type==="outbound-rtp"&&(A.kind==="video"||A.mediaType==="video")&&(X=A.bytesSent||X,Z=A.framesEncoded||Z),A.type==="track"&&(A.kind==="video"||A.mediaType==="video")&&(ne=A.frameWidth||ne,se=A.frameHeight||se)}),he=X>V,V=X,he&&(z=!0),(s.iceConnectionState==="connected"||s.connectionState==="connected")&&(z||setTimeout(()=>{z=!0},3e3)),console.log("📈 host stats",{bytesSent:X,framesEncoded:Z,frameSize:`${ne}x${se}`,bytesIncreasing:he,isEncodingDetected:z,connectionState:s.connectionState,iceState:s.iceConnectionState}),Z===0&&X===0&&!z?(C+=1,C>=4&&(s.iceConnectionState!=="connected"&&s.connectionState!=="connected"&&console.warn("⚠️ Host not encoding yet (framesEncoded=0). Check camera/SDP m=video and sender binding."),C=0)):C=0}catch{}},3e3);s._statsTimer=M}catch{}return{pc:s,unsubAnswer:g,unsubViewerICE:()=>{try{_()}catch{}}}}async function ug(r,e){console.log("👁️ Connecting as viewer to stream:",r);const n=ft(),s=Ue(n,"liveStreams",r),o=await sh(s);if(!o.exists())throw new Error("Live not found");if(o.data().status!=="live")throw new Error("Live has ended");const h=Ue(n,"liveStreams",r,"sdp","offer");let m=await sh(h);if(m.exists()||(console.warn("ℹ️ Offer not found yet, waiting 500ms…"),await new Promise(M=>setTimeout(M,500)),m=await sh(h)),!m.exists())throw new Error("Offer not found");const p=m.data(),g=new RTCPeerConnection(tf("viewer"));try{const M=g.addTransceiver("video",{direction:"recvonly"});Jw(M)}catch{}try{g.addTransceiver("audio",{direction:"recvonly"})}catch{}g.ontrack=M=>{if(console.log("📡 Viewer received track:",M.track.kind,{muted:M.track.muted,readyState:M.track.readyState}),!M.streams||!M.streams[0]){console.error("❌ No streams in track event!");return}if(M.track.kind==="video")try{const Y=new MediaStream([M.track]);e.srcObject=Y,e.playsInline=!0,e.play().catch(()=>{const X=()=>e.play().catch(()=>{}),Z={once:!0};document.addEventListener("click",X,Z),document.addEventListener("touchstart",X,Z),document.addEventListener("keydown",X,Z)})}catch(Y){console.error("Failed to attach video track to element",Y)}else if(M.track.kind==="audio")try{const Y=`viewer-audio-${r}`;let X=document.getElementById(Y);X||(X=document.createElement("audio"),X.id=Y,X.style.cssText="position:fixed; left:-99999px; top:-99999px; width:1px; height:1px; opacity:0; pointer-events:none;",X.playsInline=!0,document.body.appendChild(X)),X.srcObject=new MediaStream([M.track]);try{X.muted=e.muted??!1}catch{}X.play().catch(()=>{})}catch(Y){console.error("Failed to attach audio track",Y)}},g.onicecandidate=async M=>{if(M.candidate)try{const Y=M.candidate.toJSON();await Jh(hn(n,"liveStreams",r,"candidates_viewers"),Y),console.log("🧊 Viewer ICE candidate sent (plural)")}catch(Y){console.error("❌ Failed to add viewer ICE candidate:",Y)}};const _=p&&p.type&&p.sdp?p:{type:"offer",sdp:p?.sdp};await g.setRemoteDescription(new RTCSessionDescription(_));const w=await g.createAnswer();await g.setLocalDescription(w);try{await Sn(Ue(n,"liveStreams",r,"sdp","answer"),{type:"answer",sdp:w.sdp}),console.log("✅ Viewer answer saved")}catch(M){throw console.error("❌ Failed to save answer:",M),M}const R=fn(Ue(n,"liveStreams",r,"sdp","offer"),async M=>{if(!M.exists())return;const Y=M.data();try{if(g.signalingState!=="stable"){console.log("Skipping offer update - not in stable state:",g.signalingState);return}const X=Y&&Y.type&&Y.sdp?Y:{type:"offer",sdp:Y?.sdp};await g.setRemoteDescription(new RTCSessionDescription(X));const Z=await g.createAnswer();await g.setLocalDescription(Z),await Sn(Ue(n,"liveStreams",r,"sdp","answer"),{type:"answer",sdp:Z.sdp}),console.log("🔁 Viewer updated answer after new offer")}catch(X){console.error("❌ Failed to handle updated offer:",X)}}),C=fn(hn(n,"liveStreams",r,"candidates_broadcaster"),M=>{M.docChanges().forEach(Y=>{if(Y.type==="added"){const X=Y.doc.data();console.log("🧊 Adding broadcaster ICE candidate:",X.candidate),g.addIceCandidate(new RTCIceCandidate(X)).catch(Z=>{console.error("❌ Failed to add broadcaster ICE candidate:",Z)})}})});g.onconnectionstatechange=()=>{console.log("🔗 Viewer connection state:",g.connectionState)},g.oniceconnectionstatechange=()=>{console.log("viewer ice:",g.iceConnectionState)},g.onicecandidateerror=M=>{console.error("🧊 Viewer ICE candidate error",M?.errorText||M)};const V=setInterval(async()=>{try{const M=await g.getStats();let Y=0,X=0,Z=0,ne=0;if(M.forEach(se=>{const he=se.kind==="video"||se.mediaType==="video";se.type==="inbound-rtp"&&he&&(Y=se.bytesReceived||Y,X=se.framesDecoded||X),se.type==="track"&&he&&(Z=se.frameWidth||Z,ne=se.frameHeight||ne)}),console.log("📈 viewer stats",{bytesReceived:Y,framesDecoded:X,frameSize:`${Z}x${ne}`,videoElSize:`${e.videoWidth}x${e.videoHeight}`,connectionState:g.connectionState,iceState:g.iceConnectionState}),X>0&&(e.videoWidth===0||e.videoHeight===0)){console.log("ℹ️ Frames decoded but video element size is 0x0 – waiting for metadata (no forced reload)");try{e.setAttribute("data-source","landscape")}catch{}}}catch(M){console.error("Stats error:",M)}},3e3);return{pc:g,cleanup:()=>{try{C()}catch{}try{R()}catch{}try{clearInterval(V)}catch{}try{g.close()}catch{}try{const M=`viewer-audio-${r}`,Y=document.getElementById(M);Y?.parentElement?.removeChild(Y)}catch{}}}}async function sO(r,e){return await ug(r,e)}async function aO(r,e){const n=ft(),o=ra().currentUser;if(!o)throw new Error("Not signed in");const u=o.uid,h=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});e&&(e.srcObject=h,e.muted=!0,e.playsInline=!0);const m=new RTCPeerConnection(tf("viewer"));for(const w of h.getTracks())m.addTrack(w,h);m.onicecandidate=async w=>{w.candidate&&await Jh(hn(n,"liveStreams",r,"cohosts",u,"candidates_in"),w.candidate.toJSON())};const p=await m.createOffer();await m.setLocalDescription(p),await Sn(Ue(n,"liveStreams",r,"cohosts",u,"sdp","offer"),p);const g=Ue(n,"liveStreams",r,"cohosts",u,"sdp","answer");await new Promise((w,R)=>{const C=fn(g,V=>{try{if(!V.exists())return;const z=V.data();if(!z?.type||z.type!=="answer")return;m.setRemoteDescription(new RTCSessionDescription(z)).then(()=>{try{C()}catch{}w()}).catch(M=>{try{C()}catch{}R(M)})}catch(z){try{C()}catch{}R(z)}})});const _=fn(hn(n,"liveStreams",r,"cohosts",u,"candidates_out"),w=>{w.docChanges().forEach(R=>{if(R.type!=="added")return;const C=R.doc.data();m.addIceCandidate(new RTCIceCandidate(C)).catch(V=>console.error("cohost addIceCandidate failed",V))})});return{pc:m,stream:h,cleanup:()=>{try{_()}catch{}try{m.close()}catch{}h.getTracks().forEach(w=>{try{w.stop()}catch{}})}}}function oO(r){const e=r.width??1280,n=r.height??720,s=r.fps??30,o=document.createElement("canvas");o.width=e,o.height=n;const u=o.getContext("2d"),h=document.createElement("video");h.muted=!0,h.playsInline=!0,h.autoplay=!0,h.style.cssText="position:fixed; left:-99999px; top:-99999px; width:1px; height:1px; opacity:0; pointer-events:none; z-index:-1;";const m=document.createElement("video");m.muted=!0,m.playsInline=!0,m.autoplay=!0,m.style.cssText="position:fixed; left:-99999px; top:-99999px; width:1px; height:1px; opacity:0; pointer-events:none; z-index:-1;",document.body.appendChild(h),document.body.appendChild(m);try{h.play().catch(()=>{})}catch{}try{m.play().catch(()=>{})}catch{}const p=new(window.AudioContext||window.webkitAudioContext),g=p.createMediaStreamDestination();let _=null,w=null;function R(ne){if(ne){h.srcObject=ne;try{_?.disconnect()}catch{}try{_=p.createMediaStreamSource(ne),_.connect(g)}catch{}}else{try{_?.disconnect()}catch{}_=null,h.srcObject=null}}function C(ne){if(ne){m.srcObject=ne;try{w?.disconnect()}catch{}try{w=p.createMediaStreamSource(ne),w.connect(g)}catch{}}else{try{w?.disconnect()}catch{}w=null,m.srcObject=null}}const V=()=>{u.fillStyle="black",u.fillRect(0,0,e,n);const ne=Math.floor(e/2);if(h.videoWidth&&h.videoHeight){const se=Math.min(ne/h.videoWidth,n/h.videoHeight),he=Math.floor(h.videoWidth*se),O=Math.floor(h.videoHeight*se),A=Math.floor((ne-he)/2),x=Math.floor((n-O)/2);u.drawImage(h,A,x,he,O)}if(m.videoWidth&&m.videoHeight){const se=Math.min(ne/m.videoWidth,n/m.videoHeight),he=Math.floor(m.videoWidth*se),O=Math.floor(m.videoHeight*se),A=ne+Math.floor((ne-he)/2),x=Math.floor((n-O)/2);u.drawImage(m,A,x,he,O)}};let z=null;const M=()=>{V(),z=requestAnimationFrame(M)};z=requestAnimationFrame(M);const Y=o.captureStream(s);g.stream.getAudioTracks().forEach(ne=>Y.addTrack(ne));const X=Y;function Z(){try{z&&cancelAnimationFrame(z)}catch{}try{p.close()}catch{}h.remove(),m.remove()}return{setStreamA:R,setStreamB:C,mixed:X,destroy:Z}}async function lO(r,e,n){const s=ft(),o=new RTCPeerConnection(tf("broadcaster"));o.ontrack=g=>{const _=g.streams&&g.streams[0]||new MediaStream([g.track]);n(_)},o.onicecandidate=async g=>{g.candidate&&await Jh(hn(s,"liveStreams",r,"cohosts",e,"candidates_out"),g.candidate.toJSON())};const u=Ue(s,"liveStreams",r,"cohosts",e,"sdp","offer"),h=await new Promise((g,_)=>{const w=fn(u,R=>{if(R.exists()){try{w()}catch{}g(R)}},_)});await o.setRemoteDescription(new RTCSessionDescription(h.data()));const m=await o.createAnswer();await o.setLocalDescription(m),await Sn(Ue(s,"liveStreams",r,"cohosts",e,"sdp","answer"),m);const p=fn(hn(s,"liveStreams",r,"cohosts",e,"candidates_in"),g=>{g.docChanges().forEach(_=>{if(_.type!=="added")return;const w=_.doc.data();o.addIceCandidate(new RTCIceCandidate(w)).catch(R=>console.error("host addIceCandidate failed",R))})});return{pc:o,cleanup:()=>{try{p()}catch{}try{o.close()}catch{}}}}async function uO(r){const e=ft(),n=`stream_${Date.now()}`,s=Ue(e,"liveStreams",n),u=Tp().currentUser;if(u?.uid)try{const h=go(hn(e,"liveStreams"),Ks("status","==","live"),Ks("uid","==",u.uid)),m=go(hn(e,"liveStreams"),Ks("status","==","live"),Ks("userId","==",u.uid)),[p,g]=await Promise.all([tp(h),tp(m)]),_=new Map;p.forEach(w=>_.set(w.id,w)),g.forEach(w=>_.set(w.id,w)),await Promise.all(Array.from(_.values()).map(async w=>{try{await ar(Ue(e,"liveStreams",w.id),{status:"ended",endedAt:an()})}catch{}}))}catch(h){console.warn("⚠️ Failed to end previous lives for user:",h)}return await Sn(s,{id:n,title:r,status:"live",startedAt:an(),lastSeen:an(),uid:u?u.uid:null,[qD]:u?u.uid:null,displayName:u?.displayName||"Anonymous",photoURL:u?.photoURL||null}),await Sn(Ue(e,"streams",n),{id:n,title:r,isLive:!0,startedAt:an(),lastSeen:an(),userId:u?u.uid:null,uid:u?u.uid:null,displayName:u?.displayName||"Anonymous",photoURL:u?.photoURL||null},{merge:!0}),n}async function cO(r){const e=ft();await ar(Ue(e,"liveStreams",r),{status:"ended",endedAt:an()});try{await ar(Ue(e,"streams",r),{isLive:!1,endedAt:an()})}catch{}}async function hO(){const r=ft(),e=go(hn(r,"liveStreams"),Ks("status","==","live"),sg("startedAt","desc")),s=(await tp(e)).docs.map(h=>h.data()),o=Date.now();return s.filter(h=>{const m=h.lastSeen||h.startedAt;try{const p=typeof m?.toMillis=="function"?m.toMillis():typeof m=="number"?m:0;return p&&o-p<=45e3}catch{return!1}})}async function uE(r){const e=ft();await ar(Ue(e,"liveStreams",r),{lastSeen:an(),status:"live"});try{await ar(Ue(e,"streams",r),{lastSeen:an(),isLive:!0})}catch{}}async function fO(r,e){const n=ft(),o=Tp().currentUser;await Sn(Ue(n,"liveStreams",r,"requests",e),{userId:e,status:"pending",createdAt:an(),displayName:o?.displayName??null,photoURL:o?.photoURL??null})}function cg(r,e){const n=ft(),s=go(hn(n,"liveStreams",r,"requests"),sg("createdAt","asc"));return fn(s,o=>{const u=o.docs.map(h=>({id:h.id,...h.data()}));e(u)})}function dO(r,e,n){const s=ft(),o=Ue(s,"liveStreams",r,"requests",e);return fn(o,u=>{if(!u.exists()){n(null);return}const h=u.data();n({id:u.id,...h})})}async function mO(r,e){const n=ft();await ar(Ue(n,"liveStreams",r,"requests",e),{status:"approved",approvedAt:an()}),await ar(Ue(n,"liveStreams",r),{participants:IN(e)})}async function pO(r,e){const n=ft();await ar(Ue(n,"liveStreams",r,"requests",e),{status:"rejected",rejectedAt:an()})}async function gO(r,e){const n=ft();await ar(Ue(n,"liveStreams",r),{participants:xN(e)})}function yO({liveId:r}){const[e,n]=U.useState([]);U.useEffect(()=>{const o=cg(r,n);return()=>o()},[r]);const s=e.filter(o=>o.status==="pending");return T.jsxs("div",{className:"requests-panel",children:[T.jsx("div",{className:"cohost-panel-title",children:"Join requests"}),s.length===0&&T.jsx("div",{className:"cohost-req-meta",children:"No pending requests"}),T.jsx("div",{children:s.map(o=>T.jsxs("div",{className:"cohost-req-row",children:[o.photoURL?T.jsx("img",{src:o.photoURL,alt:o.displayName||o.id,className:"cohost-avatar"}):T.jsx("div",{className:"cohost-avatar",children:(o.displayName||o.id||"U")[0].toUpperCase()}),T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:600},children:o.displayName||o.id}),T.jsx("div",{className:"cohost-req-meta",children:"wants to join your live"})]}),T.jsxs("div",{className:"cohost-req-actions",children:[T.jsx("button",{className:"btn-approve",onClick:()=>mO(r,o.id),children:"Approve"}),T.jsx("button",{className:"btn-reject",onClick:()=>pO(r,o.id),children:"Reject"})]})]},o.id))})]})}function vO({liveId:r}){const[e,n]=U.useState([]);U.useEffect(()=>{const o=cg(r,n);return()=>o()},[r]);const s=U.useMemo(()=>e.find(o=>o.status==="approved")?.id||"",[e]);return T.jsxs("div",{className:"cohost-panel",children:[T.jsx("div",{className:"cohost-panel-title",children:"Co-host status"}),T.jsx("div",{className:"cohost-req-meta",children:s?`Approved: ${s}`:"No approved co-host yet"})]})}function _O(r,e,n,s){const o=U.useRef(null),[u,h]=U.useState(!1),[m,p]=U.useState(null),[g,_]=U.useState(null);return U.useEffect(()=>{if(!n||!s)return;const w=oO({});w.setStreamA(n),o.current=w;const R=s.getSenders().find(Z=>Z.track&&Z.track.kind==="video"),C=s.getSenders().find(Z=>Z.track&&Z.track.kind==="audio"),V=w.mixed;_(V);const z=V.getVideoTracks()[0],M=V.getAudioTracks()[0];R&&z&&R.replaceTrack(z).catch(()=>{}),C&&M&&C.replaceTrack(M).catch(()=>{});let Y=null,X=null;return lO(r,e,Z=>{p(Z),w.setStreamB(Z),h(!0)}).then(Z=>{Y=Z.pc,X=Z.cleanup||null}).catch(()=>{}),()=>{try{X?.()}catch{}try{Y?.close()}catch{}w.destroy(),o.current=null,p(null),_(null)}},[r,e,n,s]),{connected:u,remote:m,mixed:g}}function EO({onStop:r}){const e=async()=>{window.confirm("Are you sure you want to stop the live?")&&await r()};return T.jsx("button",{className:"btn-stop",onClick:e,children:"Stop Live"})}function TO(r,e){if(!r||!e)return!1;const n=r.userId??r.uid??null;return!!(n&&n===e)}function wO(r,e,n){const s=U.useMemo(()=>TO(r,e),[r?.userId,r?.uid,e]);return!!(n||s)}function eb(r){const e=r.userId??r.uid??null;return{...r,userId:e}}function bO(){const r=U.useRef(null),[e,n]=U.useState(!1),[s,o]=U.useState(null),[u,h]=U.useState(!1),m=U.useRef(null),p=U.useRef(!1),[g,_]=U.useState(!1);U.useEffect(()=>{const O=A=>{(A.key==="d"||A.key==="D")&&_(x=>!x)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[]);const w=async()=>{if(p.current){console.log("⏭️ startLive ignored (already started)");return}p.current=!0;try{console.log("🎥 Requesting camera + mic...");const O=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});if(!O)throw new Error("No MediaStream received from getUserMedia");if(r.current){const I=r.current;I.srcObject=O,I.muted=!0,I.playsInline=!0,I.autoplay=!0;try{I.onloadedmetadata=()=>console.log("host video loadedmetadata"),I.oncanplay=()=>console.log("host video canplay"),I.onplay=()=>console.log("host video playing"),I.onerror=k=>console.error("host video error",k)}catch{}try{await I.play(),console.log("▶️ Host preview started")}catch(k){console.warn("⚠️ Host preview autoplay blocked, will start on user gesture:",k);const j=()=>{I.play().catch(ze=>console.warn("❌ Host preview still failed to play:",ze))},N={once:!0};document.addEventListener("click",j,N),document.addEventListener("touchstart",j,N),document.addEventListener("keydown",j,N)}}const A=await uO("My Live Stream");o(A),console.log("📡 Creating Broadcaster PC with stream:",O);const x=await rO(O,A);m.current={...x,stream:O},n(!0),h(!0)}catch(O){console.error("❌ Failed to start broadcast:",O),alert("לא ניתן להפעיל מצלמה/מיקרופון או להתחיל שידור"),p.current=!1}},R=async()=>{if(!R._ending&&(R._ending=!0,!!s)){console.log("🛑 Ending live:",s);try{m.current?.stream?.getTracks().forEach(A=>{try{A.stop()}catch{}});try{m.current?.unsubAnswer?.()}catch{}try{m.current?.unsubViewerICE?.()}catch{}try{m.current?.pc?.close()}catch{}m.current=null,await cO(s)}catch(O){console.warn("⚠️ Failed to end live cleanly:",O)}finally{n(!1),R._ending=!1}}};U.useEffect(()=>{let O=null;e&&s&&(uE(s).catch(()=>{}),O=window.setInterval(()=>uE(s).catch(()=>{}),15e3));const A=()=>{try{navigator.sendBeacon?.("/noop")}catch{}};return window.addEventListener("beforeunload",A),()=>{if(O)try{window.clearInterval(O)}catch{}window.removeEventListener("beforeunload",A)}},[e,s]);const C=m.current?.stream||null,V=m.current?.pc||null,[z,M]=U.useState([]);U.useEffect(()=>{if(!s)return;const O=cg(s,M);return()=>{try{O()}catch{}}},[s]);const Y=U.useMemo(()=>z.find(O=>O.status==="approved")?.id||"",[z]),{remote:X}=_O(s||"",Y,C,V),{user:Z}=Ro(),[ne,se]=U.useState(null);U.useEffect(()=>{if(!s)return;const O=ft(),A=Ue(O,"liveStreams",s),x=fn(A,I=>{if(!I.exists()){se(null);return}const k=I.data(),j=eb(k);se(j)});return()=>{try{x()}catch{}}},[s]);const he=wO(ne,Z?.uid??null,u);return U.useEffect(()=>{console.log("👤 Host detection",{authUid:Z?.uid,docUserId:ne?.userId,localIsHost:u,isHost:he})},[Z?.uid,ne?.userId,u,he]),T.jsxs("div",{style:{minHeight:"100vh",background:"#111827",color:"#fff",padding:16},children:[T.jsx("h1",{style:{fontSize:24,fontWeight:700,marginBottom:16},children:"Live Stream"}),T.jsxs("div",{className:"cohost-layout",children:[T.jsxs("div",{className:"cohost-videos",children:[T.jsx("div",{className:"cohost-video",children:T.jsx("div",{className:"aspect-16-9",children:T.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0})})}),X&&T.jsx("div",{className:"cohost-video",children:T.jsx("div",{className:"aspect-16-9",children:T.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:O=>{O&&(O.srcObject=X)}})})})]}),T.jsxs("div",{className:"cohost-right-col",children:[e&&s&&he&&T.jsxs(T.Fragment,{children:[T.jsx(yO,{liveId:s}),T.jsx(vO,{liveId:s}),T.jsx(EO,{onStop:R})]}),!e&&T.jsx("button",{onClick:w,className:"cohost-btn cohost-btn-join",children:"Start Live"})]})]}),s&&T.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#d1d5db"},children:["Stream ID: ",s]}),!1]})}function SO(){const{user:r,loading:e}=Ro(),n=lr();return U.useEffect(()=>{!e&&!r&&n("/login")},[e,r,n]),e?T.jsx("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:"Checking auth..."}):r?T.jsx(bO,{}):null}function AO(){const{user:r,loading:e}=Ro(),n=lr();function s(){if(!r){n("/login");return}n("/live/go")}return T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[T.jsx("h2",{className:"text-2xl font-semibold",children:"Live"}),T.jsx("p",{className:"mt-2 text-[var(--muted)]",children:"Watch broadcasts or start your own live stream."}),T.jsxs("div",{className:"mt-6 flex gap-3",children:[T.jsx(_i,{to:"/live/watch",className:"px-4 py-2 rounded bg-[var(--panel)] text-white",children:"Watch Live"}),T.jsx("button",{onClick:s,disabled:e,className:"px-4 py-2 rounded bg-[var(--primary)] text-white disabled:opacity-60",children:"Go Live"})]})]})}function RO(){const[r,e]=U.useState([]);return U.useEffect(()=>{let n=!0;return hO().then(s=>{n&&e(s||[])}).catch(()=>{n&&e([])}),()=>{n=!1}},[]),T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[T.jsx("h2",{className:"text-2xl font-semibold",children:"Live streams"}),T.jsxs("div",{className:"mt-4 grid gap-3",children:[r.length===0&&T.jsx("div",{className:"text-[var(--muted)]",children:"No active streams right now."}),r.map(n=>T.jsx(_i,{to:`/watch/${n.id}`,className:"p-3 rounded bg-[var(--panel)]",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("div",{className:"font-medium",children:n.title||"Untitled stream"}),T.jsxs("div",{className:"text-sm text-[var(--muted)]",children:["by ",n.displayName||"Unknown"]})]}),T.jsx("span",{className:"ml-auto text-xs px-2 py-1 rounded bg-red-600 text-white",children:"LIVE"})]})},n.id))]})]})}function IO(){const r=U.useRef(null),[e,n]=U.useState(null),[s,o]=U.useState(!1),[u,h]=U.useState(null),m=U.useCallback(async()=>{h(null);try{const g=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});n(g),r.current&&(r.current.srcObject=g),o(!0)}catch(g){const _=g instanceof Error?g.message:"Failed to access media devices";h(_),o(!1)}},[]),p=U.useCallback(()=>{e&&e.getTracks().forEach(g=>g.stop()),r.current&&(r.current.srcObject=null),n(null),o(!1)},[e]);return{videoRef:r,start:m,stop:p,isActive:s,error:u,stream:e}}function xO(){const{id:r}=sp(),[e,n]=U.useState(null),s=U.useRef(null),{start:o}=IO(),[u,h]=U.useState("portrait"),m=g=>{if(!g)return;const _=()=>{const{videoWidth:w,videoHeight:R}=g;if(w&&R){const C=w/R;C>=1.2?(g.setAttribute("data-source","landscape"),h("landscape")):C<=.9?(g.setAttribute("data-source","mobile"),h("portrait")):(g.setAttribute("data-source","square"),h("square"))}};_(),g.addEventListener("loadedmetadata",_)},p=async g=>{const _=r;if(!_)return n("Missing stream id");try{await o();const w=s.current;await sO(_,w),m(w)}catch(w){n(w?.message??String(w))}};return T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[T.jsx("h2",{className:"text-2xl font-semibold",children:"Viewer"}),T.jsx("p",{className:"text-[var(--muted)]",children:"Join a live stream"}),T.jsx("div",{className:"mt-4",children:T.jsx("button",{onClick:()=>p(),className:"px-4 py-2 bg-[var(--panel)] rounded",children:"Join"})}),T.jsx("div",{className:"mt-6 flex justify-center",children:T.jsx("div",{className:"ws-watch",style:{minHeight:0},children:T.jsx("div",{className:"video-stage","data-mode":u,children:T.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,className:"video-el","data-source":"default"})})})}),e&&T.jsx("div",{className:"mt-4 text-red-400",children:e})]})}const CO=U.forwardRef(function({liveId:e,onLeft:n},s){const o=U.useRef(null),[u,h]=U.useState(null),[m,p]=U.useState(!1),g=U.useRef(null);return U.useEffect(()=>{let _=null;async function w(){try{const R=await aO(e,o.current);_=R.cleanup,g.current=R.cleanup,p(!0)}catch(R){h(R?.message||String(R))}}return w(),()=>{try{_?.()}catch{}}},[e]),U.useImperativeHandle(s,()=>({cleanup:()=>{try{g.current?.(),n?.()}catch{}}}),[n]),T.jsxs("div",{className:"cohost-panel",children:[T.jsx("div",{className:"cohost-panel-title",children:"Co-host local preview"}),T.jsx("div",{className:"cohost-video",style:{minHeight:160},children:T.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,onLoadedMetadata:_=>{const w=_.currentTarget,R=w.videoWidth,C=w.videoHeight;if(R&&C){const V=R/C;w.setAttribute("data-source",V>=1.2?"landscape":V<=.9?"mobile":"square")}w.play().catch(()=>{const V={once:!0},z=()=>w.play().catch(()=>{});document.addEventListener("click",z,V),document.addEventListener("touchstart",z,V),document.addEventListener("keydown",z,V)})}})}),u&&T.jsx("div",{className:"cohost-alert",style:{color:"#f87171",marginTop:6},children:u}),m&&T.jsx("div",{className:"cohost-alert",style:{color:"#34d399",marginTop:6},children:"Connected as co-host"})]})});function NO({liveId:r,onCleanup:e}){const{user:n}=Ro(),[s,o]=U.useState(!1),u=U.useRef(!1),h=U.useCallback(async()=>{if(!u.current){o(!0);try{e?.(),n?.uid&&await gO(r,n.uid)}catch{}finally{u.current=!0,o(!1)}}},[r,e,n?.uid]);return U.useEffect(()=>()=>{try{e?.()}catch{}},[e]),T.jsx("button",{className:"cohost-btn cohost-btn-stop",onClick:h,disabled:s,children:s?"Leaving…":"Leave Live"})}function DO({liveId:r}){const{user:e}=Ro(),[n,s]=U.useState(!1),[o,u]=U.useState(null),[h,m]=U.useState("idle"),p=U.useRef(null),g=async()=>{if(u(null),!e){u("Please sign in");return}try{await fO(r,e.uid),s(!0),m("pending")}catch(_){u(_?.message||String(_))}};return U.useEffect(()=>{if(!e||!n)return;const _=dO(r,e.uid,w=>{w&&m(w.status)});return()=>{try{_?.()}catch{}}},[r,e,n]),T.jsxs("div",{children:[h!=="approved"&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[T.jsx("button",{onClick:g,disabled:n&&h!=="rejected",className:"cohost-btn cohost-btn-join",children:h==="pending"?"Requested…":h==="rejected"?"Request Rejected":"Request to Join"}),o&&T.jsx("span",{style:{color:"#f87171",fontSize:12},children:o})]}),h==="approved"&&T.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[T.jsx(CO,{ref:p,liveId:r}),T.jsx(NO,{liveId:r,onCleanup:()=>p.current?.cleanup()})]})]})}function OO(){const{id:r}=sp(),e=U.useRef(null),n=U.useRef(null),[s,o]=U.useState("portrait"),[u,h]=U.useState(!1),[m,p]=U.useState(null),[g,_]=U.useState(!0),[w,R]=U.useState(null),[C,V]=U.useState(!1),[z,M]=U.useState("Waiting for stream..."),[Y,X]=U.useState(!1),[Z,ne]=U.useState(!0),se=U.useRef(null),he=U.useRef(!1),O=I=>{e.current=I,I&&!u&&(I.setAttribute("data-source","default"),h(!0))},A=I=>{if(!I)return;console.log("🔍 בודק מקור הסטרים לפי פרופורציות");const k=()=>{const{videoWidth:j,videoHeight:N}=I;if(j&&N){const ze=j/N;console.log(`📏 יחס וידאו: ${ze.toFixed(3)} (${j}x${N})`),ze>=1.2?(I.setAttribute("data-source","landscape"),o("landscape"),console.log("🖥️ מקור: landscape")):ze<=.9?(I.setAttribute("data-source","mobile"),o("portrait"),console.log("📱 מקור: portrait/mobile")):(I.setAttribute("data-source","square"),o("square"),console.log("◼️ מקור: square-ish"))}};k(),I.addEventListener("loadedmetadata",k)};U.useEffect(()=>{const I=e.current;I&&(I.autoplay=!0,I.playsInline=!0,I.controls=!1,I.muted=!1,I.onloadedmetadata=()=>{console.log("🎥 loadedmetadata",{w:I.videoWidth,h:I.videoHeight,duration:I.duration,elSize:`${I.clientWidth}x${I.clientHeight}`}),A(I),I.play().then(()=>ne(!1)).catch(()=>ne(!0))})},[]),U.useEffect(()=>{if(!r)return;const I=ft(),k=Ue(I,"liveStreams",r);console.log("👁️ Starting to watch stream:",r);const j=fn(k,async N=>{if(!N.exists()){console.log("❌ Stream not found"),R("Stream not found"),M("Stream not found"),_(!1);return}let ze=N.data();if(ze=eb(ze),console.log("📡 Stream data updated:",ze),p(ze),ze.status==="ended"&&C){console.log("⏹️ Stream ended, disconnecting…"),V(!1),M("Stream has ended"),se.current&&(se.current(),se.current=null),_(!1);return}ze.status==="live"&&!C&&(console.log("🔍 DEBUG connect conditions:",{status:ze.status,isConnected:C,hasVideoRef:!!e.current}),e.current||M("Preparing video element…")),_(!1)},N=>{console.error("❌ Error listening to stream:",N),R("Failed to load stream"),M("Failed to load stream"),_(!1)});return()=>{console.log("🧹 Cleaning up stream listener"),j(),se.current&&se.current()}},[r]),U.useEffect(()=>{if(!r||C||!e.current||!u||m?.status!=="live"||he.current)return;const I=e.current;he.current=!0,M("Connecting to stream…"),ug(r,I).then(k=>{if(console.log("✅ Connection successful:",k),V(!0),M("Connected to stream"),se.current=k.cleanup,I){const j=()=>{I.videoWidth&&I.videoHeight?A(I):setTimeout(j,500)};setTimeout(j,1e3),setTimeout(()=>{I.paused?ne(!0):ne(!1)},800)}}).catch(k=>{console.error("❌ Failed to connect:",k),R(k.message||"Failed to connect to stream"),M("Connection failed")}).finally(()=>{he.current=!1})},[r,u,m?.status,C]);const x=()=>{const I=n.current||e.current;if(!I)return;const k=document;document.fullscreenElement?k.exitFullscreen?.()||k.webkitExitFullscreen?.():I.requestFullscreen?.()||I.webkitRequestFullscreen?.()};return g?T.jsx("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:T.jsx("div",{className:"flex items-center justify-center h-64",children:T.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})})}):w||!m?T.jsx("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:T.jsxs("div",{className:"text-center",children:[T.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Stream Not Found"}),T.jsx("p",{className:"text-[var(--muted)] mb-6",children:w||"This stream could not be loaded."}),T.jsx(_i,{to:"/",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:"Back to Home"})]})}):T.jsxs("div",{className:"pt-12 max-w-4xl mx-auto p-4",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-[var(--panel)] rounded-lg",children:[T.jsx(lg,{photoURL:m.photoURL,displayName:m.displayName,email:m.displayName,size:48}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h1",{className:"text-xl font-semibold text-white",children:m.title}),T.jsx("p",{className:"text-[var(--muted)]",children:m.displayName})]}),T.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-sm font-medium rounded-full",children:"LIVE"})]}),T.jsx("div",{className:"mb-4 text-center",children:T.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm ${C?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:z})}),T.jsx("div",{className:"flex justify-center mb-6",children:T.jsxs("div",{ref:n,className:"ws-watch",children:[T.jsxs("div",{className:"video-stage","data-mode":s,children:[T.jsx("div",{style:{position:"absolute",top:12,left:12,zIndex:3,background:"red",color:"#fff",padding:"2px 8px",borderRadius:4,fontSize:12},children:"LIVE"}),T.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,className:"video-el","data-source":"default",onPlay:()=>ne(!1),onPause:()=>ne(!0)}),m&&T.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"flex-end",padding:16,background:"linear-gradient(transparent, rgba(0,0,0,0.35) 70%)",color:"#fff",zIndex:2},children:T.jsxs("div",{children:[T.jsx("div",{className:"text-lg font-bold",children:m.title}),T.jsx("div",{className:"text-sm opacity-80",children:m.displayName})]})})]}),Z&&T.jsx("button",{type:"button",onClick:()=>{const I=e.current;if(I){I.muted=!1,X(!1);try{const k=document.getElementById(`viewer-audio-${r}`);k&&(k.muted=!1,k.play().catch(()=>{}))}catch{}I.play().then(()=>ne(!1)).catch(()=>ne(!0))}},style:{position:"absolute",inset:0,zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(transparent, rgba(0,0,0,0.35))"},"aria-label":"הפעל עם שמע",children:T.jsx("span",{style:{background:"rgba(0,0,0,0.55)",color:"#fff",padding:"10px 14px",borderRadius:9999,fontWeight:700},children:"הקש כדי להפעיל עם שמע"})}),T.jsxs("div",{style:{position:"absolute",right:12,bottom:80,zIndex:4,display:"flex",flexDirection:"column",gap:12},children:[T.jsxs("button",{type:"button",onClick:x,className:"flex flex-col items-center","aria-label":"מסך מלא",children:[T.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/50 rounded-full backdrop-blur-sm mb-1",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:T.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})}),T.jsx("span",{className:"text-white text-xs",children:"מסך מלא"})]}),T.jsxs("button",{type:"button",onClick:()=>{const I=e.current;if(!I)return;I.muted=!I.muted,X(I.muted);const k=document.getElementById(`viewer-audio-${r}`);if(k)try{k.muted=I.muted}catch{}I.muted||I.play().catch(()=>{})},className:"flex flex-col items-center","aria-label":Y?"בטל השתקה":"השתקה",children:[T.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/50 rounded-full backdrop-blur-sm mb-1",children:Y?T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M9 9v6l-4-4h-2v-2h2l4-4z"}),T.jsx("path",{d:"M15 9l6 6"}),T.jsx("path",{d:"M21 9l-6 6"})]}):T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M9 9v6l-4-4h-2v-2h2l4-4z"}),T.jsx("path",{d:"M15 9a5 5 0 0 1 0 6"}),T.jsx("path",{d:"M18 6a9 9 0 0 1 0 12"})]})}),T.jsx("span",{className:"text-white text-xs",children:Y?"בטל השתקה":"השתקה"})]})]})]})}),r&&T.jsx("div",{className:"flex justify-center mb-8",children:T.jsx(DO,{liveId:r})}),T.jsxs("div",{className:"mt-6 p-3 bg-gray-800 rounded text-xs text-gray-300",children:[T.jsxs("div",{children:["Stream ID: ",r]}),T.jsxs("div",{children:["Status: ",m?.status]}),T.jsxs("div",{children:["Connected: ",C?"Yes":"No"]}),T.jsxs("div",{children:["Connection Status: ",z]}),T.jsxs("div",{children:["Video Element: ",e.current?"Ready":"Not Ready"]}),T.jsxs("div",{children:["Video srcObject: ",e.current?.srcObject?"Set":"Not Set"]}),T.jsxs("div",{children:["Video Tracks:"," ",e.current?.srcObject&&e.current?.srcObject?.getTracks().length||0]})]})]})}function MO(){const[r,e]=U.useState(()=>{try{const o=localStorage.getItem("theme");if(o)return o==="dark"}catch{}return!1}),[n,s]=U.useState(()=>{try{const o=localStorage.getItem("rtl");if(o)return o==="1"}catch{}return!1});return U.useEffect(()=>{try{document.documentElement.setAttribute("data-theme",r?"dark":"light"),localStorage.setItem("theme",r?"dark":"light")}catch{}},[r]),U.useEffect(()=>{try{document.documentElement.dir=n?"rtl":"ltr",localStorage.setItem("rtl",n?"1":"0")}catch{}},[n]),{dark:r,setDark:e,rtl:n,setRtl:s}}function kO(){const{dark:r,setDark:e,rtl:n,setRtl:s}=MO();return T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),T.jsx("div",{className:"mt-4",children:T.jsxs("label",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"checkbox",checked:r,onChange:()=>e(!r)}),"Dark mode"]})}),T.jsx("div",{className:"mt-2",children:T.jsxs("label",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"checkbox",checked:n,onChange:()=>s(o=>!o)}),"RTL / Language direction"]})})]})}function VO(){return T.jsxs("div",{className:"pt-12 max-w-3xl mx-auto p-4 text-center",children:[T.jsx("h2",{className:"text-2xl font-semibold",children:"Page not found"}),T.jsx("p",{className:"mt-2 text-gray-400",children:"The page you're looking for doesn't exist."}),T.jsx(_i,{to:"/",className:"mt-4 inline-block px-4 py-2 bg-gray-800 rounded",children:"Go home"})]})}function PO(){const r=lr(),e=ra(),n=ft(),[s,o]=U.useState(""),[u,h]=U.useState(""),[m,p]=U.useState(""),[g,_]=U.useState(null),[w,R]=U.useState(!1);async function C(M){M.preventDefault(),_(null),R(!0);try{const X=(await gI(e,u,m)).user;await Sn(Ue(n,"users",X.uid),{uid:X.uid,name:s||X.displayName||"",email:X.email||u,role:"user",createdAt:an()}),r("/")}catch(Y){const X=Y instanceof Error?Y.message:String(Y);_(X)}finally{R(!1)}}function V(){const M=navigator.userAgent||"",Y=/iPad|iPhone|iPod/.test(M)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,X=/Android/.test(M);return Y||X||window.innerWidth<768}async function z(){_(null),R(!0);try{const M=V()?(await ET(e,Ah),null):await yT(e,Ah);if(!M)return;const Y=M.user,X=Y.displayName??(Y.email?Y.email.split("@")[0]:"");await Sn(Ue(n,"users",Y.uid),{uid:Y.uid,name:X,email:Y.email,role:"user",createdAt:an()},{merge:!0}),r("/")}catch(M){const Y=M instanceof Error?M.message:String(M);_(Y)}finally{R(!1)}}return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:T.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg bg-[var(--panel)] shadow-md",children:[T.jsx("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Create account"}),T.jsxs("form",{onSubmit:C,className:"space-y-3",children:[T.jsx("input",{value:s,onChange:M=>o(M.target.value),placeholder:"Full name",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),T.jsx("input",{value:u,onChange:M=>h(M.target.value),placeholder:"Email",type:"email",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),T.jsx("input",{value:m,onChange:M=>p(M.target.value),placeholder:"Password",type:"password",className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),g&&T.jsx("div",{className:"text-red-400 text-sm",children:g}),T.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[color:var(--primary)] text-black font-semibold py-2 rounded-md",children:w?"Creating...":"Create account"})]}),T.jsx("div",{className:"my-3 border-t border-white/10"}),T.jsxs("button",{onClick:z,className:"w-full flex items-center justify-center gap-2 border border-white/10 rounded-md py-2 text-white",children:[T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M21.35 11.1H12v2.8h5.35c-.23 1.34-1.01 2.49-2.16 3.27v2.7h3.49C20.66 19.1 22 15.4 22 12c0-.67-.07-1.32-.2-1.9z",fill:"#4285F4"}),T.jsx("path",{d:"M12 22c2.7 0 4.97-.9 6.63-2.43l-3.49-2.7c-.97.66-2.21 1.06-3.14 1.06-2.41 0-4.45-1.63-5.18-3.82H3.14v2.4C4.8 19.8 8.12 22 12 22z",fill:"#34A853"}),T.jsx("path",{d:"M6.82 13.11A6.99 6.99 0 016 12c0-.66.11-1.3.32-1.9V7.7H3.14A9.99 6.99 0 002 12c0 1.6.36 3.12 1.02 4.44l3.8-3.33z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 6.5c1.47 0 2.8.5 3.85 1.47l2.88-2.88C16.96 3.73 14.7 3 12 3 8.12 3 4.8 5.2 3.14 8.3l3.18 2.2C7.55 8.13 9.59 6.5 12 6.5z",fill:"#EA4335"})]}),"Sign up with Google"]}),T.jsx("div",{className:"text-xs text-white/60 mt-2",children:"Tip: On mobile we use redirect for Google sign-up. Ensure the domain is authorized in Firebase Auth → Settings → Authorized domains."}),T.jsxs("p",{className:"text-sm text-white/80 mt-3",children:["Already have an account? ",T.jsx(_i,{to:"/login",className:"text-[color:var(--primary)]",children:"Login"})]})]})})}function LO(){const r=ra(),e=ft(),n=lr(),[s,o]=U.useState(""),[u,h]=U.useState(""),[m,p]=U.useState(null),[g,_]=U.useState(!1);async function w(V){V.preventDefault(),p(null),_(!0);try{await yI(r,s,u),n("/")}catch(z){const M=z instanceof Error?z.message:String(z);p(M)}finally{_(!1)}}function R(){const V=navigator.userAgent||"",z=/iPad|iPhone|iPod/.test(V)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,M=/Android/.test(V);return z||M||window.innerWidth<768}async function C(){p(null),_(!0);try{const V=R()?(await ET(r,Ah),null):await yT(r,Ah);if(!V)return;const z=V.user;await Sn(Ue(e,"users",z.uid),{uid:z.uid,name:z.displayName??(z.email?z.email.split("@")[0]:""),email:z.email,role:"user",createdAt:an()},{merge:!0}),n("/")}catch(V){const z=V instanceof Error?V.message:String(V);p(z)}finally{_(!1)}}return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--bg)]",children:T.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg bg-[var(--panel)] shadow-md",children:[T.jsx("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Sign in"}),T.jsxs("form",{onSubmit:w,className:"space-y-3",children:[T.jsx("input",{placeholder:"Email",type:"email",value:s,onChange:V=>o(V.target.value),className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),T.jsx("input",{placeholder:"Password",type:"password",value:u,onChange:V=>h(V.target.value),className:"w-full rounded-md px-3 py-2 bg-transparent border border-slate-700 text-white placeholder:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--primary)]",required:!0}),m&&T.jsx("div",{className:"text-red-400 text-sm",children:m}),T.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[color:var(--primary)] text-black font-semibold py-2 rounded-md",children:g?"Signing in...":"Sign in"})]}),T.jsx("div",{className:"my-3 border-t border-white/10"}),T.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 border border-white/10 rounded-md py-2 text-white",children:[T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("path",{d:"M21.35 11.1H12v2.8h5.35c-.23 1.34-1.01 2.49-2.16 3.27v2.7h3.49C20.66 19.1 22 15.4 22 12c0-.67-.07-1.32-.2-1.9z",fill:"#4285F4"}),T.jsx("path",{d:"M12 22c2.7 0 4.97-.9 6.63-2.43l-3.49-2.7c-.97.66-2.21 1.06-3.14 1.06-2.41 0-4.45-1.63-5.18-3.82H3.14v2.4C4.8 19.8 8.12 22 12 22z",fill:"#34A853"}),T.jsx("path",{d:"M6.82 13.11A6.99 6.99 0 016 12c0-.66.11-1.3.32-1.9V7.7H3.14A9.99 9.99 0 002 12c0 1.6.36 3.12 1.02 4.44l3.8-3.33z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 6.5c1.47 0 2.8.5 3.85 1.47l2.88-2.88C16.96 3.73 14.7 3 12 3 8.12 3 4.8 5.2 3.14 8.3l3.18 2.2C7.55 8.13 9.59 6.5 12 6.5z",fill:"#EA4335"})]}),"Sign in with Google"]}),T.jsx("div",{className:"text-xs text-white/60 mt-2",children:"Tip: On mobile we use redirect for Google sign-in. Make sure pop-up/redirects are allowed and the app domain is added in Firebase Auth settings."}),T.jsxs("p",{className:"text-sm text-white/80 mt-3",children:["Don't have an account? ",T.jsx(_i,{to:"/signup",className:"text-[color:var(--primary)]",children:"Sign up"})]})]})})}function UO(){const r=U.useRef(null),[e,n]=U.useState(""),[s,o]=U.useState(!1),u=async()=>{try{if(!e){alert("נא להזין Stream ID");return}if(!r.current){alert("Video element missing!");return}await ug(e,r.current),o(!0)}catch(h){console.error("❌ Failed to join stream:",h),alert("שגיאה בהתחברות לשידור")}};return T.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white",children:[T.jsx("h1",{className:"text-2xl font-bold mb-6",children:"👀 Watch Live Stream"}),T.jsx("input",{type:"text",placeholder:"Enter Stream ID",value:e,onChange:h=>n(h.target.value),className:"mb-4 px-4 py-2 rounded text-black w-80"}),T.jsx("button",{onClick:u,className:"px-6 py-3 bg-green-600 rounded-lg text-lg hover:bg-green-700",children:"Watch"}),T.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,controls:!0,className:"w-[600px] max-w-full rounded-lg shadow-lg bg-black mt-6"}),s&&T.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Watching stream: ",e]})]})}function jO(){return T.jsx(rD,{children:T.jsx(PA,{children:T.jsxs(xA,{children:[T.jsxs($t,{path:"/",element:T.jsx(zD,{}),children:[T.jsx($t,{index:!0,element:T.jsx(FD,{})}),T.jsx($t,{path:"following",element:T.jsx(zs,{children:T.jsx(ZD,{})})}),T.jsx($t,{path:"explore",element:T.jsx(eO,{})}),T.jsx($t,{path:"profile/:handle",element:T.jsx(zs,{children:T.jsx(nO,{})})}),T.jsx($t,{path:"live",element:T.jsx(zs,{children:T.jsx(AO,{})})}),T.jsx($t,{path:"live/watch",element:T.jsx(zs,{children:T.jsx(RO,{})})}),T.jsx($t,{path:"live/go",element:T.jsx(zs,{children:T.jsx(SO,{})})}),T.jsx($t,{path:"live/watch/:id",element:T.jsx(zs,{children:T.jsx(xO,{})})}),T.jsx($t,{path:"settings",element:T.jsx(zs,{children:T.jsx(kO,{})})}),T.jsx($t,{path:"signup",element:T.jsx(aE,{children:T.jsx(PO,{})})}),T.jsx($t,{path:"login",element:T.jsx(aE,{children:T.jsx(LO,{})})}),T.jsx($t,{path:"*",element:T.jsx(VO,{})})]}),T.jsx($t,{path:"/watch/:id",element:T.jsx(OO,{})}),T.jsx($t,{path:"/viewer",element:T.jsx(UO,{})})," "]})})})}PS.createRoot(document.getElementById("root")).render(T.jsx(hE.StrictMode,{children:T.jsx(jO,{})}));
